function buildCountryTooltip(e,r){var o=countryTooltip;return o=o.replace("name",e.html()),o=o.replace("count",r.Count)}function buildMarkerTooltip(e,r){var o=markerTooltip;return o=o.replace("description",e[r].desc),o=o.replace("latitude",e[r].Latitude),o=o.replace("longitude",e[r].Longitude)}function buildRegionTooltip(e){var r=regionTooltip;return r=r.replace("name",e.name)}function mapRange(e,r,o,n,t){return n+(t-n)*(e-r)/(o-r)}function generateColorsForTheCountries(e){e||(e=jsonCountries);var r=[];return $.each(e,function(e,o){r[o.Country]=o.Count}),r}function readCountriesFromJSON(e){{var r=[];e.length}return minCount=1/0,maxCount=-(1/0),$.each(e,function(e,o){r[e]=new Country(o),r[e].Count>maxCount&&(maxCount=r[e].Count),r[e].Count<minCount&&(minCount=r[e].Count)}),r}function findCountryByName(e){var r=null;return $.each(jsonCountries,function(o,n){return n.Country==e?r=n:void 0}),r}function readMinMax(e){minCount=1/0,maxCount=-(1/0);var r=[];for(var o in e)e.hasOwnProperty(o)&&r.push(o);$.each(r,function(e,r){var o=findCountryByName(r);o.Count>maxCount&&(maxCount=o.Count),o.Count<minCount&&(minCount=o.Count)})}function createFiltersBoxCheckboxes(){$("filter-box").append('<ul class="nav navbar-nav" id="filterBoxCheckboxes" style="border-style: solid; border-width: 2px;"></ul>'),$.each(jsonFiltersArray,function(e,r){function o(e){return"<p>"+JSON.stringify(e)+"</p>"}function n(){var e=$("p.status").empty();e.append(o(widget.checked()))}var t="#box"+(e+1);$("#filterBoxCheckboxes").append('<li class="col-sm-6" id="box'+(e+1)+'" class="dropdown-checkbox-example dropdown-checkbox dropdown"></li>');var a=[];$.each(r.Values,function(e,r){a.push({id:e+1,label:r,isChecked:!1})});var i=r.Name.toLowerCase();i=i.charAt(0).toUpperCase()+i.slice(1),$(t).dropdownCheckbox({data:a,autosearch:!0,hideHeader:!1,showNbSelected:!1,templateButton:'<a class="dropdown-checkbox-toggle" data-toggle="dropdown" href="#">'+i+'<span class="dropdown-checkbox-nbselected"></span><b class="caret"></b>'}),widget=$(t).data("dropdownCheckbox"),$("body").on("change:dropdown-checkbox checked checked:all check:all uncheck:all check:checked uncheck:checked",n()),n()});var e='<div id="filters_box" class="row col-sm-12"><button id="filter_box_apply_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Filter</button><button id="filter_box_reset_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Reset</button></div>';$("#filterBoxCheckboxes").append(e),$("#filter_box_apply_filters").click(function(){for(var e={},r=jsonFiltersArray.length,o=0,n=0;n<jsonFiltersArray.length;n++){for(var t="#box"+(n+1),a=getSelectedItems(t),i=[],s=Object.keys(a),l=0;l<s.length;l++)i.push(a[s[l]].label);s.length>0?e[jsonFiltersArray[n].Name]=i.join():o++}o!=r&&filter(e)}),$("#filter_box_reset_filters").click(function(){resetFiltersBox()})}function getSelectedItems(e){return $(e).dropdownCheckbox("checked")}function createFiltersBoxWithEnumeration(e){e.length;$.each(e,function(e,r){var o=r.Name.toLowerCase();o=o.charAt(0).toUpperCase()+o.slice(1);var n="";n+="<p><b>"+o+":</b></p>",n+='<div class="form-group">',n+='<input type="text" class="form-control" id="fbox'+e+'"';var t=r.Values;n+='placeholder="'+t+'" +>',n+="</div>",$("filter-box").append(n),$("#filter-box").tooltip({title:"Use this filter box to filter by multiple filters",placement:"bottom"})});var r='<div id="filters_box"><button id="filter_box_apply_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Filter</button><button id="filter_box_reset_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Reset</button></div>';$("filter-box").append(r),$("#filter_box_apply_filters").click(function(){for(var r={},o=e.length,n=0,t=0;t<e.length;t++){var a="#fbox"+t,i=$(a).val();""!==i?r[e[t].Name]=i:n++}n!=o&&filter(r)}),$("#filter_box_reset_filters").click(function(){resetFiltersBox()})}function getAllFilterValues(e){var r=[];if(-1!=String(e).indexOf(",")){var o=String(e).split(",");$.each(o,function(e,o){if(-1!=o.indexOf("-")){var n=String(o).split("-");checkFilterValuesAreValid(filterObject,n);for(var t=n[0],a=n[1];a>=t;t++)r.push(t)}else r.push(o)})}else if(-1!=e.indexOf("-")){var n=String(e).split("-");checkFilterValuesAreValid(filterObject,n);for(var t=n[0],a=n[1];a>=t;t++)r.push(t)}else r.push(e);return r}function checkWhatCountriesToAdd(e,r){var o=[];return $.each(jsonCountries,function(e,n){for(var t=0;;){t++;var a="Name"+t,i="Value"+t;if(!n[a])break;n[i]==r&&(countryValueToCheck=i,n[i]==r&&(o[n.Country]=n.Count))}}),o}function checkWhatMarkersToAdd(e,r){var o=[];return $.each(jsonMarkers,function(n,t){for(var a=0;;){a++;var i="Name"+a,s="Value"+a;if(!t[i])break;t[i]==e.Name&&t[s]==r&&o.push(t)}}),o}function checkWhatCountriesMarkersToAdd(e,r){var o=[],n=[];return o=checkWhatCountriesToAdd(e,r),n=checkWhatMarkersToAdd(e,r),[o,n]}function checkFilterNameIsValid(e){var r=!1;return $.each(jsonFiltersArray,function(o,n){return n.Name.toLowerCase()===e.toLowerCase()?(filterObject=n,void(r=!0)):void 0}),r}function checkFilterValuesAreValid(e,r){var o=!1;return $.each(r,function(e,r){return $.each(filterObject.Values,function(e,n){return n==r?void(o=!0):void 0}),o?void 0:void console.log("Invalid value for the filter: "+r)}),o}function resetFilters(){var e=generateColorsForTheCountries();reloadMap(e),$.each(jsonMarkers,function(e,r){map.addMarker(e,{latLng:[r.Latitude,r.Longitude],name:r.desc,style:{fill:"green",r:mapRange(r.Count,minCount,maxCount,minRadius,maxRadius)}})})}function filterFromMenuSelected(e,r){currentFilter=e;var o=checkWhatCountriesToAdd(e,r);if(reloadMap(o),$.each(jsonMarkers,function(o,n){for(var t=0;;){t++;var a="Name"+t,i="Value"+t;if(!n[a])break;n[a]===e.Name&&n[i]===r&&map.addMarker(o,{latLng:[n.Latitude,n.Longitude],name:n.desc,style:{fill:"green",r:mapRange(n.Count,minCount,maxCount,minRadius,maxRadius)}})}}),isNaN(e.Values[0]))$("#slider").hide(),$("#minSlider").hide(),$("#maxSlider").hide();else{$("#slider").show(),$("#minSlider").show(),$("#maxSlider").show();var n=$("#slider").slider(),t=e.Values[0],a=e.Values[e.Values.length-1];n.slider("option","min",t),n.slider("option","max",a),$("#minSlider").text(t),$("#maxSlider").text(a)}}function sliderChanged(){var e=slider.slider("option","values"),r=e[0],o=e[1],n=currentFilter.Name;$("#minSlider").text(r),$("#maxSlider").text(o);var t=[];$.each(jsonCountries,function(e,n){var a=+n[countryValueToCheck];a>=r&&o>=a&&(t[n.Country]=n.Count)}),reloadMap(t);for(var a,i=jsonCountries[0],s=0;;){s++;var l="Name"+s,u="Value"+s;if(i[l]===n){a=u;break}}$.each(jsonMarkers,function(e,n){n[a]>=r&&n[a]<=o&&map.addMarker(e,{latLng:[n.Latitude,n.Longitude],name:n.desc,style:{fill:"green",r:mapRange(n.Count,minCount,maxCount,minRadius,maxRadius)}})})}function readFiltersFromJSON(e){for(var r=[],o=0;o<e.values.length;o++){currentFilter=e.values[o];for(var n=currentFilter.name,t=[],a=0;a<currentFilter.values.length;a++)t.push(currentFilter.values[a]);r[o]=new Filter(n,t)}return numFilters=r.length,r}function jsonMapCountries(e,r){var o=[];$.getJSON(r,function(r){$.each(e,function(e,n){var t=n[r.Country],a=0;o[e]=new Country("",t,a)}),mappingCountries=o,console.log(mappingCountries)})}function jsonMapMarkers(e,r){var o=[];$.getJSON(r,function(r){$.each(e,function(e,n){var t=n[r.Country],a=0,i=n[r.Latitude],s=n[r.Longitude];o[e]=new Marker("",t,a,i,s)}),mappingMarkers=o,console.log(mappingMarkers)})}function reloadMap(e){if(map.params.map==mType){jsonCountries.length>0&&readMinMax(e);var r={vertical:!0},o={scale:[minColorMap,maxColorMap],values:[minCount,maxCount],legend:r},n={scale:[minColorMap,maxColorMap],values:[minCount,maxCount]};finalMarkersInMap=o,"markers"==dataType&&(finalMarkersInMap=n),$("#"+mDiv).empty(),map=new jvm.Map({map:mType,backgroundColor:background,container:$("#"+mDiv),onRegionClick:function(e,r){countryCode=r.toLowerCase();var o=countryCode+"_mill_en";switchMap(o)},onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,o);r.html(n)},onRegionTipShow:function(e,r,o){var n=-1;if($.each(jsonCountries,function(e,r){return r.Country===o?void(n=r):void 0}),-1!=n){var t=buildCountryTooltip(r,n);r.html(t)}else r.html(r.html())},series:{markers:[finalMarkersInMap],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:e}]}})}else jsonCountries.length>0&&readMinMax(e),$("#"+mDiv).empty(),removeTooltip(),switchMap(mapType)}function removeTooltip(){$(".jvectormap-tip").remove()}function switchMap(e){$("#"+mDiv).empty(),removeTooltip();var r=generateColorsForTheRegions(e);map=new jvm.Map({map:e,backgroundColor:background,container:$("#"+mDiv),onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,o);r.html(n)},onRegionTipShow:function(r,o,n){console.log(n);var t=e.split("_")[0].toUpperCase(),a=-1;$.each(jsonCountries,function(e,r){return r.Country==t?void(a=r):void 0});var i,s=!1;$.each(map.regions,function(e,r){return r.name==n?(i=r,void(s=!0)):void 0}),o.html(s?buildRegionTooltip(i):o.html())},series:{markers:[{scale:[minColorMap,maxColorMap],values:[minCount,maxCount],legend:{vertical:!0}}],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:r}]}}),$("#my_map").append('<div class="jvectormap-goback">Back</div>'),$(".jvectormap-goback").click(function(){$("#"+mDiv).empty(),removeTooltip(),map=new jvm.Map({container:$("#"+mDiv),map:mType,backgroundColor:background,onRegionClick:function(e,r){countryCode=r.toLowerCase();var o=countryCode+"_mill_en";switchMap(o)},onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,o);r.html(n)},onRegionTipShow:function(e,r,o){var n=-1;if($.each(jsonCountries,function(e,r){return r.Country===o?void(n=r):void 0}),-1!=n){var t=buildCountryTooltip(r,n);r.html(t)}else r.html(r.html())},series:{markers:[{scale:[minColorMap,maxColorMap],values:[minCount,maxCount],legend:{vertical:!0}}],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:auxColors}]}}),thereAreMarkers&&addMarkersToMap()}),thereAreMarkers&&addMarkersToMap(),jsonCountries}function addMarkersToMap(){var e=[];$.each(filteredMarkers,function(r,o){var n={latLng:[o.Latitude,o.Longitude],name:o.desc,style:{fill:"red",r:mapRange(o.Count,minCount,maxCount,minRadius,maxRadius),image:"../img/blue-icon.png"}};e.push(n)}),map.addMarkers(e)}function readMarkersFromJSON(e){var r=[];return minCount=1/0,maxCount=-(1/0),$.each(e,function(e,o){r[e]=new Marker(o);var n=r[e].Count;n>maxCount&&(maxCount=n),n<minCount&&(minCount=n)}),r}function filter(e){var r=Object.keys(e),o=r.length,n=0,t=new Array,a=new Array;for(l=0;o>l;l++)t[l]=new Array,a[l]=new Array;var i=!1;if($.each(r,function(e,r){return"all"==r.toLowerCase()?(i=!0,resetFilters(),void resetFiltersBox()):void 0}),!i){$.each(r,function(r,o){if(!checkFilterNameIsValid(o))return void console.log("Invalid filter name!("+o+")");var i=e[o],s=getAllFilterValues(i);n++,$.each(s,function(e,o){var n=checkWhatCountriesMarkersToAdd(filterObject,o),i=n[0],s=n[1];$.each(Object.keys(i),function(e,o){var n=i[o];t[r][o]=n}),$.each(s,function(e,o){a[r].push(o)})})});var s=[];if(t.length>0){s=t[0];for(var l=0;l<t.length-1;l++)s=getCountriesIntersection(s,t[l+1])}if(reloadMap(s),filteredMarkers=[],a.length>0){filteredMarkers=a[0];for(var l=0;l<a.length-1;l++)filteredMarkers=getMarkersIntersection(filteredMarkers,a[l+1])}addMarkersToMap()}}function getMarkersIntersection(e,r){var o=[];return $.each(e,function(e,n){var t=n.Country;$.each(r,function(e,r){var a=r.Country;t==a&&o.push(n)})}),o}function getCountriesIntersection(e,r){var o=[];return $.each(Object.keys(e),function(n,t){$.each(Object.keys(r),function(r,n){t==n&&(o[t]=e[t])})}),o}function applyMultipleFiltersProgramattically(e){var r=Object.keys(e),o=r.length,n=[],t=[];$.each(r,function(r,o){e[o]});var a=[];map.removeAllMarkers(),$.each(jsonCountries,function(o,t){n[o]=0,$.each(r,function(r,a){for(var i=0;;){i++;var s="Name"+i,l="Value"+i;if(!t[s])break;t[s].toLowerCase()==a.toLowerCase()&&t[l]==e[a]&&n[o]++}})}),$.each(jsonCountries,function(e,r){n[e]==o&&(a[r.Country]=r.Count)}),reloadMap(a),$.each(jsonMarkers,function(o,n){t[o]=0,$.each(r,function(r,a){for(var i=0;;){i++;var s="Name"+i,l="Value"+i;if(!n[s])break;n[s].toLowerCase()==a.toLowerCase()&&n[l]==e[a]&&t[o]++}})}),$.each(jsonMarkers,function(e,r){t[e]==o&&map.addMarker(e,{latLng:[r.Latitude,r.Longitude],name:r.desc,style:{fill:"green",r:mapRange(r.Count,minCount,maxCount,minRadius,maxRadius)}})})}function applyMultipleFilters(e,r){var o=e.filter(function(e){return void 0!==e}).length,n=[],t=[];$.each(jsonCountries,function(o,t){n[o]=0,$.each(e,function(e,a){for(var i=0;;){i++;var s="Name"+i,l="Value"+i;if(void 0==t[s])break;t[s]===r[e].Name&&t[l]==a&&n[o]++}})});var a=[];$.each(jsonCountries,function(e,r){n[e]==o&&(a[r.Country]=r.Count)}),reloadMap(a),$.each(jsonMarkers,function(o,n){t[o]=0,$.each(e,function(e,a){for(var i=0;;){i++;var s="Name"+i,l="Value"+i;if(!n[s])break;n[s].toLowerCase()==r[e].Name.toLowerCase()&&n[l]==a&&t[o]++}})}),$.each(jsonMarkers,function(e,r){t[e]==o&&map.addMarker(e,{latLng:[r.Latitude,r.Longitude],name:r.desc,style:{fill:"green",r:mapRange(r.Count,minCount,maxCount,minRadius,maxRadius)}})})}function readRegionsFromJSON(e,r){var o=[];return $.each(e,function(e,n){o[e]=new Region(n,r)}),e}function generateColorsForTheRegions(e){var r=e.split("_")[0].toUpperCase(),o=[];return $.each(jsonCountries,function(e,n){if(n.Country==r&&n.Regions){var t=n.Regions;$.each(t,function(e,r){o[r.name]=100})}}),o}function addRegionsToMap(e){var r=e.split("_")[0].toUpperCase();$.each(jsonCountries,function(e,o){function n(){var e,r={};r[maps.region];for(e in maps.regions)r[e]=t[Math.floor(Math.random()*t.length)];return r}if(o.Country==r&&o.Regions){var t=(o.Regions,["#66C2A5","#FC8D62","#8DA0CB","#E78AC3","#A6D854"]);console.log(n()),maps.series.regions[0].setValues(n())}})}var vectorMap,jsonFilters=[],minColorMap,maxColorMap,mDiv,mType,background,filteredMarkers,thereAreMarkers=!1,VectorialMap=function(){};VectorialMap.prototype.createMap=function(e,r,o,n,t,a,i,s,l){if(background=s,mType=i,jsonCountries=[],jsonMarkers=[],mDiv=n,minColorMap=t,maxColorMap=a,"countries"==l)jsonCountries=readCountriesFromJSON(e);else{if("markers"!=l)return void console.error("You must give as input a list of markers or countries!");thereAreMarkers=!0,jsonMarkers=readMarkersFromJSON(e),filteredMarkers=jsonMarkers,numMarkers=jsonMarkers.length}auxColors=generateColorsForTheCountries(),jQuery.ajax({url:"../tooltip-templates/country_tooltip.html",success:function(e){countryTooltip=e},async:!1}),jQuery.ajax({url:"../tooltip-templates/marker_tooltip.html",success:function(e){markerTooltip=e},async:!1}),jQuery.ajax({url:"../tooltip-templates/region_tooltip.html",success:function(e){regionTooltip=e},async:!1});for(var u={vertical:!0},c={scale:[minColorMap,maxColorMap],values:[minCount,maxCount],legend:u},d={attribute:"image",scale:[minColorMap,maxColorMap],values:[minCount,maxCount]},m=[],p=0;p<jsonMarkers.length;p++)m[p]="red";finalMarkersInMap=c,"markers"==l&&(finalMarkersInMap=d),map=new jvm.Map({container:$("#"+n),map:mType,backgroundColor:background,onRegionClick:function(e,r){countryCode=r.toLowerCase();var o=countryCode+"_mill_en";switchMap(o)},onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,o);r.html(n)},onRegionTipShow:function(e,r,o){var n=-1;if($.each(jsonCountries,function(e,r){return r.Country===o?void(n=r):void 0}),-1!=n){var t=buildCountryTooltip(r,n);r.html(t)}else r.html(r.html())},series:{markers:[finalMarkersInMap],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:auxColors}]}}),"markers"==l&&(filteredMarkers=jsonMarkers,addMarkersToMap())},VectorialMap.prototype.filterOnServer=function(e){$.getJSON("../json/serverFilter.json",function(e){var r=JSON.stringify(e),o="http://serverFiltering.com/?data="+encodeURIComponent(r);o="../json/countries_plus_markers2.json",$.getJSON(o,function(e){jsonCountries=readCountriesFromJSON(e.countries);var r=generateColorsForTheCountries(jsonCountries);reloadMap(r),e.markers&&(jsonMarkers=readMarkersFromJSON(e.markers),addMarkersToMap())})})};var Country=function(e,r,o){if(""==e)this.Country=r,this.Count=+o,this.Var=0,this.desc="abc";else{var n=!0,t=0;do{t++;var a="Name"+t,i="Value"+t;void 0===e[a]?n=!1:(this[a]=e[a],this[i]=e[i])}while(n);e.Regions&&(this.Regions=readRegionsFromJSON(e.Regions,e.Country)),this.Country=e.Country,this.Count=+e.Count,this.Var=e.Var,this.desc="abc"}},resetFiltersBox=function(){for(var e=0;numFilters>e;e++)$("#fbox"+e).text(""),$("#fbox"+e).val("");var r=generateColorsForTheCountries();reloadMap(r),filteredMarkers=jsonMarkers,addMarkersToMap()},Filter=function(e,r){this.Name=e,this.Values=r},numFilters,currentFilter,countryValueToCheck;VectorialMap.prototype.createSlider=function(){slider=$("#slider").slider(),slider.slider("option","min",minRadius),slider.slider("option","max",maxRadius),slider.slider("option","range",!0),slider.slider("option","animate","slow"),slider.on("slidechange",function(e,r){sliderChanged()}),$("#slider").hide(),$("#minSlider").hide(),$("#maxSlider").hide()};var mappingMarkers=[],mappingCountries=[];VectorialMap.prototype.registerTransformer=function(e,r,o){var r="../mappingJSON/mappingCountriesSample.json",o="../mappingJSON/mappingMarkersSample.json";return r?o?(e="../json/espid-spain.json",void $.getJSON(e,function(e){jsonMapCountries(e,r),jsonMapMarkers(e,o)})):void console.error("you must specify a markers mapping json"):void console.error("you must specify a countries mapping json")};var Marker=function(e,r,o,n,t){if(""==e)this.Country=r,this.Count=+o,this.Var="",this.Latitude=n,this.Longitude=t,this.desc="abc";else{var a=!0,i=0;do{i++;var s="Name"+i,l="Value"+i;e[s]?(this[s]=e[s],this[l]=e[l]):a=!1}while(a);this.Country=e.Country,this.Count=+e.Count,this.Var=e.Var,this.Latitude=e.Latitude,this.Longitude=e.Longitude,this.desc="abc"}},Region=function(e,r){this.Region=e.name,this.Country=r,this.desc="just a region..."};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJjb3VudHJpZXMuanMiLCJjcmVhdGVGaWx0ZXJzLmpzIiwiZmlsdGVycy1hdXhpbGlhcnkuanMiLCJmaWx0ZXJzLmpzIiwianNvbi1tYXBwaW5nLmpzIiwibWFwcy1hdXhpbGlhcnkuanMiLCJtYXJrZXJzLmpzIiwibXVsdGlwbGUtZmlsdGVycy5qcyIsInJlZ2lvbnMuanMiXSwibmFtZXMiOlsiYnVpbGRDb3VudHJ5VG9vbHRpcCIsImNvdW50cnlOYW1lIiwic2VsZWN0ZWRDb3VudHJ5IiwiZmluYWxUb29sdGlwIiwiY291bnRyeVRvb2x0aXAiLCJyZXBsYWNlIiwiaHRtbCIsIkNvdW50IiwiYnVpbGRNYXJrZXJUb29sdGlwIiwianNvbk1hcmtlcnMiLCJpbmRleCIsIm1hcmtlclRvb2x0aXAiLCJkZXNjIiwiTGF0aXR1ZGUiLCJMb25naXR1ZGUiLCJidWlsZFJlZ2lvblRvb2x0aXAiLCJyZWdpb24iLCJyZWdpb25Ub29sdGlwIiwibmFtZSIsIm1hcFJhbmdlIiwidmFsdWUiLCJsb3cxIiwiaGlnaDEiLCJsb3cyIiwiaGlnaDIiLCJnZW5lcmF0ZUNvbG9yc0ZvclRoZUNvdW50cmllcyIsImNvdW50cmllcyIsImpzb25Db3VudHJpZXMiLCJjb3VudHJ5Q29sb3JzIiwiJCIsImVhY2giLCJjdXJyZW50Q291bnRyeSIsIkNvdW50cnkiLCJyZWFkQ291bnRyaWVzRnJvbUpTT04iLCJtYXJrZXJzIiwibGVuZ3RoIiwibWluQ291bnQiLCJJbmZpbml0eSIsIm1heENvdW50IiwiZmluZENvdW50cnlCeU5hbWUiLCJyZXR1cm5Db3VudHJ5IiwicmVhZE1pbk1heCIsImNvdW50cmllc05hbWVzIiwia2V5cyIsImtleSIsImhhc093blByb3BlcnR5IiwicHVzaCIsImN1cnJlbnRDb3VudHJ5TmFtZSIsImNyZWF0ZUZpbHRlcnNCb3hDaGVja2JveGVzIiwiYXBwZW5kIiwianNvbkZpbHRlcnNBcnJheSIsImN1cnJlbnRGaWx0ZXIiLCJwIiwid2F0IiwiSlNPTiIsInN0cmluZ2lmeSIsInVwZGF0ZVN0YXR1cyIsIiRwIiwiZW1wdHkiLCJ3aWRnZXQiLCJjaGVja2VkIiwiYm94SUQiLCJ0YWIiLCJWYWx1ZXMiLCJjdXJyZW50VmFsdWUiLCJpZCIsImxhYmVsIiwiaXNDaGVja2VkIiwiTmFtZSIsInRvTG93ZXJDYXNlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsImRyb3Bkb3duQ2hlY2tib3giLCJkYXRhIiwiYXV0b3NlYXJjaCIsImhpZGVIZWFkZXIiLCJzaG93TmJTZWxlY3RlZCIsInRlbXBsYXRlQnV0dG9uIiwib24iLCJ0ZXh0VG9BcHBlbmQiLCJjbGljayIsImpzb25PYmplY3QiLCJudW1GaWx0ZXJzIiwiZW1wdHlGaWx0ZXJzIiwiaSIsInNlbGVjdGVkSXRlbXMiLCJnZXRTZWxlY3RlZEl0ZW1zIiwiaXRlbXNBcnJheSIsIk9iamVjdCIsImoiLCJqb2luIiwiZmlsdGVyIiwicmVzZXRGaWx0ZXJzQm94IiwiY3JlYXRlRmlsdGVyc0JveFdpdGhFbnVtZXJhdGlvbiIsImpzb25GaWx0ZXJzIiwiZmlsdGVyTmFtZSIsInRvQXBwZW5kIiwicGxhY2Vob2xkZXIiLCJ0b29sdGlwIiwidGl0bGUiLCJwbGFjZW1lbnQiLCJjdXJyZW50RmlsdGVyVmFsdWUiLCJ2YWwiLCJnZXRBbGxGaWx0ZXJWYWx1ZXMiLCJmaWx0ZXJWYWx1ZSIsInJldHVyblBhcnRzIiwiU3RyaW5nIiwiaW5kZXhPZiIsImVudW1lcmF0aW9uUGFydHMiLCJzcGxpdCIsImN1cnJlbnRFbnVtZXJhdGlvbiIsInJhbmdlUGFydHMiLCJjaGVja0ZpbHRlclZhbHVlc0FyZVZhbGlkIiwiZmlsdGVyT2JqZWN0IiwibWluIiwibWF4Iiwic3ViUGFydHMiLCJjaGVja1doYXRDb3VudHJpZXNUb0FkZCIsInNlbGVjdGVkRmlsdGVyIiwiY3VycmVudE5hbWVUb0NoZWNrIiwiY291bnRyeVZhbHVlVG9DaGVjayIsImNoZWNrV2hhdE1hcmtlcnNUb0FkZCIsImN1cnJlbnRNYXJrZXIiLCJjaGVja1doYXRDb3VudHJpZXNNYXJrZXJzVG9BZGQiLCJjb3VudHJpZXNUb0FkZCIsIm1hcmtlcnNUb0FkZCIsImNoZWNrRmlsdGVyTmFtZUlzVmFsaWQiLCJ2YWxpZCIsImZpbHRlclZhbHVlcyIsInBhcnQiLCJjb25zb2xlIiwibG9nIiwicmVzZXRGaWx0ZXJzIiwiY29sb3JzIiwicmVsb2FkTWFwIiwibWFwIiwiYWRkTWFya2VyIiwibGF0TG5nIiwic3R5bGUiLCJmaWxsIiwiciIsIm1pblJhZGl1cyIsIm1heFJhZGl1cyIsImZpbHRlckZyb21NZW51U2VsZWN0ZWQiLCJpc05hTiIsImhpZGUiLCJzaG93Iiwic2xpZGVyIiwibWluVmFsdWUiLCJtYXhWYWx1ZSIsInRleHQiLCJzbGlkZXJDaGFuZ2VkIiwiY3VycmVudFJhbmdlIiwiY3VycmVudEZpbHRlck5hbWUiLCJmaWx0ZXJWYWx1ZUZvckNvdW50cnkiLCJzZWxlY3RlZE5hbWUiLCJyZWFkRmlsdGVyc0Zyb21KU09OIiwiaW5wdXRGaWx0ZXJzIiwiZmlsdGVycyIsInZhbHVlcyIsIkZpbHRlciIsImpzb25NYXBDb3VudHJpZXMiLCJqc29uIiwiY291bnRyaWVzTWFwcGluZ0pzb24iLCJnZXRKU09OIiwianNvbk1hcHBpbmciLCJjdXJyZW50SlNPTiIsImNvdW50IiwibWFwcGluZ0NvdW50cmllcyIsImpzb25NYXBNYXJrZXJzIiwibWFya2Vyc01hcHBpbmdKc29uIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJNYXJrZXIiLCJtYXBwaW5nTWFya2VycyIsInBhcmFtcyIsIm1UeXBlIiwibGVnZW5kVmFyIiwidmVydGljYWwiLCJtYXJrZXJzV2l0aExlZ2VuZCIsInNjYWxlIiwibWluQ29sb3JNYXAiLCJtYXhDb2xvck1hcCIsImxlZ2VuZCIsIm1hcmtlcnNXaXRob3V0TGVnZW5kIiwiZmluYWxNYXJrZXJzSW5NYXAiLCJkYXRhVHlwZSIsIm1EaXYiLCJqdm0iLCJNYXAiLCJiYWNrZ3JvdW5kQ29sb3IiLCJiYWNrZ3JvdW5kIiwiY29udGFpbmVyIiwib25SZWdpb25DbGljayIsImUiLCJjb2RlIiwiY291bnRyeUNvZGUiLCJuZXdNYXAiLCJzd2l0Y2hNYXAiLCJvbk1hcmtlclRpcFNob3ciLCJvblJlZ2lvblRpcFNob3ciLCJzZXJpZXMiLCJyZWdpb25zIiwiYXR0cmlidXRlIiwicmVtb3ZlVG9vbHRpcCIsIm1hcFR5cGUiLCJyZW1vdmUiLCJyZWdpb25Db2xvcnMiLCJnZW5lcmF0ZUNvbG9yc0ZvclRoZVJlZ2lvbnMiLCJyZWdpb25OYW1lIiwiY3VycmVudE1hcCIsInNlbGVjdGVkUmVnaW9uIiwicmVnaW9uRm91bmQiLCJjdXJyZW50UmVnaW9uIiwiYXV4Q29sb3JzIiwidGhlcmVBcmVNYXJrZXJzIiwiYWRkTWFya2Vyc1RvTWFwIiwibWFya2Vyc0pTT05BcnJheSIsImZpbHRlcmVkTWFya2VycyIsImN1cnJlbnRNYXJrZXJKU09OIiwiaW1hZ2UiLCJhZGRNYXJrZXJzIiwicmVhZE1hcmtlcnNGcm9tSlNPTiIsImN1cnJlbnRKU09OTWFya2VyIiwiY3VycmVudENvdW50VmFsdWUiLCJpbnB1dEFyZ3MiLCJudW1iZXJLZXlzIiwidmFsaWRGaWx0ZXJzIiwiY291bnRyaWVzQnlGaWx0ZXIiLCJBcnJheSIsIm1hcmtlcnNCeUZpbHRlciIsImV4aXQiLCJmaW5hbFBhcnRzIiwiY2hlY2tSZXR1cm4iLCJjb3VudHJpZXNBdXgiLCJtYXJrZXJzQXV4IiwiY3VycmVudEtleSIsImtleVZhbHVlIiwiZmluYWxDb3VudHJpZXMiLCJnZXRDb3VudHJpZXNJbnRlcnNlY3Rpb24iLCJnZXRNYXJrZXJzSW50ZXJzZWN0aW9uIiwibWFya2Vyc0dyb3VwMSIsIm1hcmtlcnNHcm91cDIiLCJtYXJrZXIxIiwibWFya2VyMUNvdW50cnkiLCJtYXJrZXIyIiwibWFya2VyMkNvdW50cnkiLCJjb3VudHJpZXNHcm91cDEiLCJjb3VudHJpZXNHcm91cDIiLCJjb3VudHJ5TmFtZTEiLCJjb3VudHJ5TmFtZTIiLCJhcHBseU11bHRpcGxlRmlsdGVyc1Byb2dyYW1hdHRpY2FsbHkiLCJmaWx0ZXJzVG9BcHBseSIsIm51bUZpbHRlcnNUb0FwcGx5IiwiY291bnRyaWVzSGF2ZUZpbHRlciIsIm1hcmtlcnNIYXZlRmlsdGVyIiwicmVtb3ZlQWxsTWFya2VycyIsImNvdW50cnlJbmRleCIsIm1hcmtlckluZGV4IiwiYXBwbHlNdWx0aXBsZUZpbHRlcnMiLCJzZWxlY3RlZE11bHRpcGxlRmlsdGVycyIsInVuZGVmaW5lZCIsInJlYWRSZWdpb25zRnJvbUpTT04iLCJjb3VudHJ5IiwicmVnaW9uc0FyciIsIlJlZ2lvbiIsImlzb0NvZGUiLCJSZWdpb25zIiwiYWRkUmVnaW9uc1RvTWFwIiwiZ2VuZXJhdGVDb2xvcnMiLCJtYXBzIiwicGFsZXR0ZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInNldFZhbHVlcyIsInZlY3Rvck1hcCIsIlZlY3RvcmlhbE1hcCIsInByb3RvdHlwZSIsImNyZWF0ZU1hcCIsImlucHV0SlNPTiIsIm1hcERpdiIsIm1pbkNvbG9yIiwibWF4Q29sb3IiLCJlcnJvciIsIm51bU1hcmtlcnMiLCJqUXVlcnkiLCJhamF4IiwidXJsIiwic3VjY2VzcyIsInJlc3VsdCIsImFzeW5jIiwiaW1hZ2VzIiwiZmlsdGVyT25TZXJ2ZXIiLCJmaWx0ZXJzSlNPTiIsImZpbHRlcnNTdHJpbmciLCJlbmNvZGVVUklDb21wb25lbnQiLCJjb3VudHJ5T2JqZWN0IiwidGhpcyIsIlZhciIsImhhc05hbWUiLCJjcmVhdGVTbGlkZXIiLCJldmVudCIsInVpIiwicmVnaXN0ZXJUcmFuc2Zvcm1lciIsImpzb25Mb2NhdGlvbiIsIm1hcmtlck9iamVjdCIsInJlZ2lvbk9iamVjdCJdLCJtYXBwaW5ncyI6IkFBb0tBLFFBQUFBLHFCQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUFDLGNBR0EsT0FGQUQsR0FBQUEsRUFBQUUsUUFBQSxPQUFBSixFQUFBSyxRQUNBSCxFQUFBQSxFQUFBRSxRQUFBLFFBQUFILEVBQUFLLE9BSUEsUUFBQUMsb0JBQUFDLEVBQUFDLEdBQ0EsR0FBQVAsR0FBQVEsYUFJQSxPQUhBUixHQUFBQSxFQUFBRSxRQUFBLGNBQUFJLEVBQUFDLEdBQUFFLE1BQ0FULEVBQUFBLEVBQUFFLFFBQUEsV0FBQUksRUFBQUMsR0FBQUcsVUFDQVYsRUFBQUEsRUFBQUUsUUFBQSxZQUFBSSxFQUFBQyxHQUFBSSxXQUlBLFFBQUFDLG9CQUFBQyxHQUNBLEdBQUFiLEdBQUFjLGFBRUEsT0FEQWQsR0FBQUEsRUFBQUUsUUFBQSxPQUFBVyxFQUFBRSxNQUtBLFFBQUFDLFVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsTUFBQUQsSUFBQUMsRUFBQUQsSUFBQUgsRUFBQUMsSUFBQUMsRUFBQUQsR0N2SkEsUUFBQUksK0JBQUFDLEdBQ0FBLElBQ0FBLEVBQUFDLGNBQ0EsSUFBQUMsS0FJQSxPQUhBQyxHQUFBQyxLQUFBSixFQUFBLFNBQUFoQixFQUFBcUIsR0FDQUgsRUFBQUcsRUFBQUMsU0FBQUQsRUFBQXhCLFFBRUFxQixFQUdBLFFBQUFLLHVCQUFBQyxHQUVBLENBQUEsR0FBQVIsS0FDQVEsR0FBQUMsT0FjQSxNQVpBQyxVQUFBQyxFQUFBQSxFQUNBQyxXQUFBRCxFQUFBQSxHQUVBUixFQUFBQyxLQUFBSSxFQUFBLFNBQUF4QixFQUFBcUIsR0FDQUwsRUFBQWhCLEdBQUEsR0FBQXNCLFNBQUFELEdBRUFMLEVBQUFoQixHQUFBSCxNQUFBK0IsV0FDQUEsU0FBQVosRUFBQWhCLEdBQUFILE9BRUFtQixFQUFBaEIsR0FBQUgsTUFBQTZCLFdBQ0FBLFNBQUFWLEVBQUFoQixHQUFBSCxTQUVBbUIsRUFJQSxRQUFBYSxtQkFBQXRDLEdBRUEsR0FBQXVDLEdBQUEsSUFRQSxPQVBBWCxHQUFBQyxLQUFBSCxjQUFBLFNBQUFqQixFQUFBcUIsR0FDQSxNQUFBQSxHQUFBQyxTQUFBL0IsRUFFQXVDLEVBQUFULEVBRkEsU0FNQVMsRUFJQSxRQUFBQyxZQUFBQyxHQUVBTixTQUFBQyxFQUFBQSxFQUNBQyxXQUFBRCxFQUFBQSxFQUlBLElBQUFNLEtBQ0EsS0FBQSxHQUFBQyxLQUFBRixHQUNBQSxFQUFBRyxlQUFBRCxJQUNBRCxFQUFBRyxLQUFBRixFQUtBZixHQUFBQyxLQUFBYSxFQUFBLFNBQUFqQyxFQUFBcUMsR0FFQSxHQUFBaEIsR0FBQVEsa0JBQUFRLEVBQ0FoQixHQUFBeEIsTUFBQStCLFdBQ0FBLFNBQUFQLEVBQUF4QixPQUVBd0IsRUFBQXhCLE1BQUE2QixXQUNBQSxTQUFBTCxFQUFBeEIsU0N2RkEsUUFBQXlDLDhCQUVBbkIsRUFBQSxjQUFBb0IsT0FBQSw2R0FHQXBCLEVBQUFDLEtBQUFvQixpQkFBQSxTQUFBeEMsRUFBQXlDLEdBZUEsUUFBQUMsR0FBQUMsR0FDQSxNQUFBLE1BQUFDLEtBQUFDLFVBQUFGLEdBQUEsT0FHQSxRQUFBRyxLQUNBLEdBQUFDLEdBQUE1QixFQUFBLFlBQUE2QixPQUNBRCxHQUFBUixPQUFBRyxFQUFBTyxPQUFBQyxZQXBCQSxHQUFBQyxHQUFBLFFBQUFuRCxFQUFBLEVBRUFtQixHQUFBLHdCQUFBb0IsT0FBQSxnQ0FBQXZDLEVBQUEsR0FBQSx1RUFHQSxJQUFBb0QsS0FDQWpDLEdBQUFDLEtBQUFxQixFQUFBWSxPQUFBLFNBQUFyRCxFQUFBc0QsR0FDQUYsRUFBQWhCLE1BQ0FtQixHQUFBdkQsRUFBQSxFQUNBd0QsTUFBQUYsRUFDQUcsV0FBQSxLQWNBLElBQUFqRCxHQUFBaUMsRUFBQWlCLEtBQUFDLGFBQ0FuRCxHQUFBQSxFQUFBb0QsT0FBQSxHQUFBQyxjQUFBckQsRUFBQXNELE1BQUEsR0FDQTNDLEVBQUFnQyxHQUFBWSxrQkFDQUMsS0FBQVosRUFDQWEsWUFBQSxFQUNBQyxZQUFBLEVBRUFDLGdCQUFBLEVBQ0FDLGVBQUEsdUVBQUE1RCxFQUFBLDRFQUVBeUMsT0FBQTlCLEVBQUFnQyxHQUFBYSxLQUFBLG9CQUVBN0MsRUFBQSxRQUFBa0QsR0FBQSxtR0FBQXZCLEtBQ0FBLEtBS0EsSUFBQXdCLEdBQUEsMlJBR0FuRCxHQUFBLHdCQUFBb0IsT0FBQStCLEdBR0FuRCxFQUFBLDZCQUFBb0QsTUFBQSxXQUlBLElBQUEsR0FIQUMsTUFDQUMsRUFBQWpDLGlCQUFBZixPQUNBaUQsRUFBQSxFQUNBQyxFQUFBLEVBQUFBLEVBQUFuQyxpQkFBQWYsT0FBQWtELElBQUEsQ0FPQSxJQUFBLEdBTEFsQyxHQUFBLFFBQUFrQyxFQUFBLEdBRUFDLEVBQUFDLGlCQUFBcEMsR0FDQXFDLEtBQ0E3QyxFQUFBOEMsT0FBQTlDLEtBQUEyQyxHQUNBSSxFQUFBLEVBQUFBLEVBQUEvQyxFQUFBUixPQUFBdUQsSUFDQUYsRUFBQTFDLEtBQUF3QyxFQUFBM0MsRUFBQStDLElBQUF4QixNQUdBdkIsR0FBQVIsT0FBQSxFQUNBK0MsRUFBQWhDLGlCQUFBbUMsR0FBQWpCLE1BQUFvQixFQUFBRyxPQUVBUCxJQUlBQSxHQUFBRCxHQUNBUyxPQUFBVixLQUtBckQsRUFBQSw2QkFBQW9ELE1BQUEsV0FDQVksb0JBSUEsUUFBQU4sa0JBQUExQixHQUNBLE1BQUFoQyxHQUFBZ0MsR0FBQVksaUJBQUEsV0FHQSxRQUFBcUIsaUNBQUFDLEdBRUFBLEVBQUE1RCxNQUVBTixHQUFBQyxLQUFBaUUsRUFBQSxTQUFBckYsRUFBQXlDLEdBQ0EsR0FBQTZDLEdBQUE3QyxFQUFBaUIsS0FBQUMsYUFDQTJCLEdBQUFBLEVBQUExQixPQUFBLEdBQUFDLGNBQUF5QixFQUFBeEIsTUFBQSxFQUNBLElBRUF5QixHQUFBLEVBR0FBLElBQUEsU0FBQUQsRUFBQSxZQUNBQyxHQUFBLDJCQUNBQSxHQUFBLG1EQUFBdkYsRUFBQSxHQUVBLElBQUF3RixHQUFBL0MsRUFBQVksTUFDQWtDLElBQUEsZ0JBQUFDLEVBQUEsT0FDQUQsR0FBQSxTQUVBcEUsRUFBQSxjQUFBb0IsT0FBQWdELEdBR0FwRSxFQUFBLGVBQUFzRSxTQUNBQyxNQUFBLG9EQUNBQyxVQUFBLFlBS0EsSUFBQXJCLEdBQUEscVFBR0FuRCxHQUFBLGNBQUFvQixPQUFBK0IsR0FHQW5ELEVBQUEsNkJBQUFvRCxNQUFBLFdBSUEsSUFBQSxHQUhBQyxNQUNBQyxFQUFBWSxFQUFBNUQsT0FDQWlELEVBQUEsRUFDQUMsRUFBQSxFQUFBQSxFQUFBVSxFQUFBNUQsT0FBQWtELElBQUEsQ0FFQSxHQUFBbEMsR0FBQSxRQUFBa0MsRUFFQWlCLEVBQUF6RSxFQUFBc0IsR0FBQW9ELEtBRUEsTUFBQUQsRUFDQXBCLEVBQUFhLEVBQUFWLEdBQUFqQixNQUFBa0MsRUFFQWxCLElBSUFBLEdBQUFELEdBQ0FTLE9BQUFWLEtBS0FyRCxFQUFBLDZCQUFBb0QsTUFBQSxXQUNBWSxvQkN2S0EsUUFBQVcsb0JBQUFDLEdBQ0EsR0FBQUMsS0FHQSxJQUFBLElBQUFDLE9BQUFGLEdBQUFHLFFBQUEsS0FBQSxDQUdBLEdBQUFDLEdBQUFGLE9BQUFGLEdBQUFLLE1BQUEsSUFHQWpGLEdBQUFDLEtBQUErRSxFQUFBLFNBQUFuRyxFQUFBcUcsR0FHQSxHQUFBLElBQUFBLEVBQUFILFFBQUEsS0FBQSxDQUdBLEdBQUFJLEdBQUFMLE9BQUFJLEdBQUFELE1BQUEsSUFHQUcsMkJBQUFDLGFBQUFGLEVBTUEsS0FGQSxHQUFBRyxHQUFBSCxFQUFBLEdBQ0FJLEVBQUFKLEVBQUEsR0FDQUksR0FBQUQsRUFBQUEsSUFDQVQsRUFBQTVELEtBQUFxRSxPQUtBVCxHQUFBNUQsS0FBQWlFLFNBTUEsSUFBQSxJQUFBTixFQUFBRyxRQUFBLEtBQUEsQ0FFQSxHQUFBUyxHQUFBVixPQUFBRixHQUFBSyxNQUFBLElBRUFHLDJCQUFBQyxhQUFBRyxFQUlBLEtBRkEsR0FBQUYsR0FBQUUsRUFBQSxHQUNBRCxFQUFBQyxFQUFBLEdBQ0FELEdBQUFELEVBQUFBLElBQ0FULEVBQUE1RCxLQUFBcUUsT0FHQVQsR0FBQTVELEtBQUEyRCxFQUVBLE9BQUFDLEdBR0EsUUFBQVkseUJBQUFDLEVBQUFkLEdBRUEsR0FBQS9FLEtBcUJBLE9BcEJBRyxHQUFBQyxLQUFBSCxjQUFBLFNBQUFqQixFQUFBcUIsR0FJQSxJQURBLEdBQUFzRCxHQUFBLElBQ0EsQ0FDQUEsR0FDQSxJQUFBbUMsR0FBQSxPQUFBbkMsRUFDQXJCLEVBQUEsUUFBQXFCLENBRUEsS0FBQXRELEVBQUF5RixHQVFBLEtBUEF6RixHQUFBaUMsSUFBQXlDLElBQ0FnQixvQkFBQXpELEVBRUFqQyxFQUFBaUMsSUFBQXlDLElBQ0EvRSxFQUFBSyxFQUFBQyxTQUFBRCxFQUFBeEIsV0FNQW1CLEVBR0EsUUFBQWdHLHVCQUFBSCxFQUFBZCxHQUNBLEdBQUF2RSxLQXNCQSxPQXBCQUwsR0FBQUMsS0FBQXJCLFlBQUEsU0FBQUMsRUFBQWlILEdBSUEsSUFEQSxHQUFBdEMsR0FBQSxJQUNBLENBQ0FBLEdBQ0EsSUFBQW1DLEdBQUEsT0FBQW5DLEVBQ0FyQixFQUFBLFFBQUFxQixDQUVBLEtBQUFzQyxFQUFBSCxHQU1BLEtBTEFHLEdBQUFILElBQUFELEVBQUFuRCxNQUNBdUQsRUFBQTNELElBQUF5QyxHQUNBdkUsRUFBQVksS0FBQTZFLE1BUUF6RixFQUdBLFFBQUEwRixnQ0FBQUwsRUFBQWQsR0FDQSxHQUFBb0IsTUFDQUMsSUFNQSxPQUhBRCxHQUFBUCx3QkFBQUMsRUFBQWQsR0FDQXFCLEVBQUFKLHNCQUFBSCxFQUFBZCxJQUVBb0IsRUFBQUMsR0FHQSxRQUFBQyx3QkFBQS9CLEdBQ0EsR0FBQWdDLElBQUEsQ0FRQSxPQVBBbkcsR0FBQUMsS0FBQW9CLGlCQUFBLFNBQUF4QyxFQUFBeUMsR0FDQSxNQUFBQSxHQUFBaUIsS0FBQUMsZ0JBQUEyQixFQUFBM0IsZUFDQTZDLGFBQUEvRCxPQUNBNkUsR0FBQSxJQUZBLFNBTUFBLEVBR0EsUUFBQWYsMkJBQUFyQixFQUFBcUMsR0FDQSxHQUFBRCxJQUFBLENBY0EsT0FiQW5HLEdBQUFDLEtBQUFtRyxFQUFBLFNBQUF2SCxFQUFBd0gsR0FRQSxNQU5BckcsR0FBQUMsS0FBQW9GLGFBQUFuRCxPQUFBLFNBQUFyRCxFQUFBc0QsR0FDQSxNQUFBQSxJQUFBa0UsT0FDQUYsR0FBQSxHQURBLFNBS0FBLEVBQUEsV0FDQUcsU0FBQUMsSUFBQSxpQ0FBQUYsS0FJQUYsRUNySUEsUUFBQUssZ0JBRUEsR0FBQUMsR0FBQTdHLCtCQUNBOEcsV0FBQUQsR0FHQXpHLEVBQUFDLEtBQUFyQixZQUFBLFNBQUFDLEVBQUFpSCxHQUNBYSxJQUFBQyxVQUFBL0gsR0FDQWdJLFFBQUFmLEVBQUE5RyxTQUFBOEcsRUFBQTdHLFdBQ0FJLEtBQUF5RyxFQUFBL0csS0FHQStILE9BQ0FDLEtBQUEsUUFDQUMsRUFBQTFILFNBQUF3RyxFQUFBcEgsTUFBQTZCLFNBQUFFLFNBQUF3RyxVQUFBQyxnQkFnQ0EsUUFBQUMsd0JBQUF6QixFQUFBZCxHQUVBdEQsY0FBQW9FLENBR0EsSUFBQTdGLEdBQUE0Rix3QkFBQUMsRUFBQWQsRUF1Q0EsSUFwQ0E4QixVQUFBN0csR0FHQUcsRUFBQUMsS0FBQXJCLFlBQUEsU0FBQUMsRUFBQWlILEdBSUEsSUFEQSxHQUFBdEMsR0FBQSxJQUNBLENBQ0FBLEdBQ0EsSUFBQW1DLEdBQUEsT0FBQW5DLEVBQ0FyQixFQUFBLFFBQUFxQixDQUVBLEtBQUFzQyxFQUFBSCxHQWdCQSxLQWZBRyxHQUFBSCxLQUFBRCxFQUFBbkQsTUFDQXVELEVBQUEzRCxLQUFBeUMsR0FDQStCLElBQUFDLFVBQUEvSCxHQUNBZ0ksUUFBQWYsRUFBQTlHLFNBQUE4RyxFQUFBN0csV0FDQUksS0FBQXlHLEVBQUEvRyxLQUdBK0gsT0FDQUMsS0FBQSxRQUNBQyxFQUFBMUgsU0FBQXdHLEVBQUFwSCxNQUFBNkIsU0FBQUUsU0FBQXdHLFVBQUFDLGlCQWNBRSxNQUFBMUIsRUFBQXhELE9BQUEsSUFrQkFsQyxFQUFBLFdBQUFxSCxPQUNBckgsRUFBQSxjQUFBcUgsT0FDQXJILEVBQUEsY0FBQXFILFdBcEJBLENBQ0FySCxFQUFBLFdBQUFzSCxPQUNBdEgsRUFBQSxjQUFBc0gsT0FDQXRILEVBQUEsY0FBQXNILE1BR0EsSUFBQUMsR0FBQXZILEVBQUEsV0FBQXVILFNBQ0FDLEVBQUE5QixFQUFBeEQsT0FBQSxHQUNBdUYsRUFBQS9CLEVBQUF4RCxPQUFBd0QsRUFBQXhELE9BQUE1QixPQUFBLEVBR0FpSCxHQUFBQSxPQUFBLFNBQUEsTUFBQUMsR0FDQUQsRUFBQUEsT0FBQSxTQUFBLE1BQUFFLEdBR0F6SCxFQUFBLGNBQUEwSCxLQUFBRixHQUNBeEgsRUFBQSxjQUFBMEgsS0FBQUQsSUFRQSxRQUFBRSxpQkFFQSxHQUFBQyxHQUFBTCxPQUFBQSxPQUFBLFNBQUEsVUFDQWpDLEVBQUFzQyxFQUFBLEdBQ0FyQyxFQUFBcUMsRUFBQSxHQUVBQyxFQUFBdkcsY0FBQWlCLElBR0F2QyxHQUFBLGNBQUEwSCxLQUFBcEMsR0FDQXRGLEVBQUEsY0FBQTBILEtBQUFuQyxFQUdBLElBQUExRixLQUNBRyxHQUFBQyxLQUFBSCxjQUFBLFNBQUFqQixFQUFBcUIsR0FDQSxHQUFBNEgsSUFBQTVILEVBQUEwRixvQkFDQWtDLElBQUF4QyxHQUFBQyxHQUFBdUMsSUFDQWpJLEVBQUFLLEVBQUFDLFNBQUFELEVBQUF4QixTQUlBZ0ksVUFBQTdHLEVBTUEsS0FIQSxHQUNBa0ksR0FEQTdILEVBQUFKLGNBQUEsR0FFQTBELEVBQUEsSUFDQSxDQUNBQSxHQUNBLElBQUFtQyxHQUFBLE9BQUFuQyxFQUNBckIsRUFBQSxRQUFBcUIsQ0FFQSxJQUFBdEQsRUFBQXlGLEtBQUFrQyxFQUFBLENBQ0FFLEVBQUE1RixDQUNBLFFBS0FuQyxFQUFBQyxLQUFBckIsWUFBQSxTQUFBQyxFQUFBaUgsR0FFQUEsRUFBQWlDLElBQUF6QyxHQUFBUSxFQUFBaUMsSUFBQXhDLEdBQ0FvQixJQUFBQyxVQUFBL0gsR0FDQWdJLFFBQUFmLEVBQUE5RyxTQUFBOEcsRUFBQTdHLFdBQ0FJLEtBQUF5RyxFQUFBL0csS0FHQStILE9BQ0FDLEtBQUEsUUFDQUMsRUFBQTFILFNBQUF3RyxFQUFBcEgsTUFBQTZCLFNBQUFFLFNBQUF3RyxVQUFBQyxnQkFPQSxRQUFBYyxxQkFBQUMsR0FHQSxJQUFBLEdBRkFDLE1BRUExRSxFQUFBLEVBQUFBLEVBQUF5RSxFQUFBRSxPQUFBN0gsT0FBQWtELElBQUEsQ0FFQWxDLGNBQUEyRyxFQUFBRSxPQUFBM0UsRUFLQSxLQUFBLEdBSEFuRSxHQUFBaUMsY0FBQWpDLEtBQ0E4SSxLQUVBdEUsRUFBQSxFQUFBQSxFQUFBdkMsY0FBQTZHLE9BQUE3SCxPQUFBdUQsSUFDQXNFLEVBQUFsSCxLQUFBSyxjQUFBNkcsT0FBQXRFLEdBQ0FxRSxHQUFBMUUsR0FBQSxHQUFBNEUsUUFBQS9JLEVBQUE4SSxHQUdBLE1BREE3RSxZQUFBNEUsRUFBQTVILE9BQ0E0SCxFQ3ZLQSxRQUFBRyxrQkFBQUMsRUFBQUMsR0FDQSxHQUFBMUksS0FFQUcsR0FBQXdJLFFBQUFELEVBQUEsU0FBQUUsR0FJQXpJLEVBQUFDLEtBQUFxSSxFQUFBLFNBQUF6SixFQUFBNkosR0FDQSxHQUVBckosR0FBQXFKLEVBQUFELEVBQUF0SSxTQUdBd0ksRUFBQSxDQU1BOUksR0FBQWhCLEdBQUEsR0FBQXNCLFNBQUEsR0FBQWQsRUFBQXNKLEtBRUFDLGlCQUFBL0ksRUFDQXlHLFFBQUFDLElBQUFxQyxvQkFJQSxRQUFBQyxnQkFBQVAsRUFBQVEsR0FDQSxHQUFBekksS0FHQUwsR0FBQXdJLFFBQUFNLEVBQUEsU0FBQUwsR0FHQXpJLEVBQUFDLEtBQUFxSSxFQUFBLFNBQUF6SixFQUFBNkosR0FFQSxHQUFBckosR0FBQXFKLEVBQUFELEVBQUF0SSxTQUdBd0ksRUFBQSxFQUVBSSxFQUFBTCxFQUFBRCxFQUFBekosVUFFQWdLLEVBQUFOLEVBQUFELEVBQUF4SixVQU9Bb0IsR0FBQXhCLEdBQUEsR0FBQW9LLFFBQUEsR0FBQTVKLEVBQUFzSixFQUFBSSxFQUFBQyxLQUVBRSxlQUFBN0ksRUFDQWlHLFFBQUFDLElBQUEyQyxrQkNoRkEsUUFBQXhDLFdBQUFELEdBRUEsR0FBQUUsSUFBQXdDLE9BQUF4QyxLQUFBeUMsTUFBQSxDQUdBdEosY0FBQVEsT0FBQSxHQUNBTSxXQUFBNkYsRUFFQSxJQUFBNEMsSUFDQUMsVUFBQSxHQUtBQyxHQUNBQyxPQUFBQyxZQUFBQyxhQUVBdkIsUUFBQTVILFNBQUFFLFVBRUFrSixPQUFBTixHQUdBTyxHQUNBSixPQUFBQyxZQUFBQyxhQUVBdkIsUUFBQTVILFNBQUFFLFVBR0FvSixtQkFBQU4sRUFDQSxXQUFBTyxXQUNBRCxrQkFBQUQsR0FJQTVKLEVBQUEsSUFBQStKLE1BQUFsSSxRQUVBOEUsSUFBQSxHQUFBcUQsS0FBQUMsS0FDQXRELElBQUF5QyxNQUNBYyxnQkFBQUMsV0FDQUMsVUFBQXBLLEVBQUEsSUFBQStKLE1BQ0FNLGNBQUEsU0FBQUMsRUFBQUMsR0FFQUMsWUFBQUQsRUFBQS9ILGFBRUEsSUFBQWlJLEdBQUFELFlBQUEsVUFFQUUsV0FBQUQsSUFFQUUsZ0JBQUEsU0FBQUwsRUFBQWpJLEVBQUF4RCxHQUNBLEdBQUFQLEdBQUFLLG1CQUFBQyxZQUFBQyxFQUNBd0QsR0FBQTVELEtBQUFILElBRUFzTSxnQkFBQSxTQUFBTixFQUFBbE0sRUFBQW1NLEdBR0EsR0FBQWxNLEdBQUEsRUFPQSxJQU5BMkIsRUFBQUMsS0FBQUgsY0FBQSxTQUFBakIsRUFBQXFCLEdBQ0EsTUFBQUEsR0FBQUMsVUFBQW9LLE9BQ0FsTSxFQUFBNkIsR0FEQSxTQUtBLElBQUE3QixFQUFBLENBQ0EsR0FBQUMsR0FBQUgsb0JBQUFDLEVBQUFDLEVBQ0FELEdBQUFLLEtBQUFILE9BRUFGLEdBQUFLLEtBQUFMLEVBQUFLLFNBRUFvTSxRQUNBeEssU0FBQXdKLG1CQUNBaUIsVUFFQXRCLE9BQUFDLFlBQUFDLGFBQ0FxQixVQUFBLE9BRUE1QyxPQUFBMUIsV0FPQTNHLGVBQUFRLE9BQUEsR0FDQU0sV0FBQTZGLEdBR0F6RyxFQUFBLElBQUErSixNQUFBbEksUUFDQW1KLGdCQUNBTixVQUFBTyxTQU1BLFFBQUFELGlCQUVBaEwsRUFBQSxtQkFBQWtMLFNBR0EsUUFBQVIsV0FBQUQsR0FHQXpLLEVBQUEsSUFBQStKLE1BQUFsSSxRQUNBbUosZUFFQSxJQUFBRyxHQUFBQyw0QkFBQVgsRUFFQTlELEtBQUEsR0FBQXFELEtBQUFDLEtBQ0F0RCxJQUFBOEQsRUFDQVAsZ0JBQUFDLFdBQ0FDLFVBQUFwSyxFQUFBLElBQUErSixNQUNBWSxnQkFBQSxTQUFBTCxFQUFBakksRUFBQXhELEdBQ0EsR0FBQVAsR0FBQUssbUJBQUFDLFlBQUFDLEVBQ0F3RCxHQUFBNUQsS0FBQUgsSUFFQXNNLGdCQUFBLFNBQUFOLEVBQUFlLEVBQUFkLEdBQ0FqRSxRQUFBQyxJQUFBZ0UsRUFDQSxJQUFBZSxHQUFBYixFQUFBeEYsTUFBQSxLQUFBLEdBQUF2QyxjQUdBckUsRUFBQSxFQUVBMkIsR0FBQUMsS0FBQUgsY0FBQSxTQUFBakIsRUFBQXFCLEdBQ0EsTUFBQUEsR0FBQUMsU0FBQW1MLE9BQ0FqTixFQUFBNkIsR0FEQSxRQU1BLElBQ0FxTCxHQURBQyxHQUFBLENBRUF4TCxHQUFBQyxLQUFBMEcsSUFBQW1FLFFBQUEsU0FBQWpNLEVBQUE0TSxHQUNBLE1BQUFBLEdBQUFwTSxNQUFBa0wsR0FDQWdCLEVBQUFFLE9BQ0FELEdBQUEsSUFGQSxTQU9BSCxFQUFBNU0sS0FEQStNLEVBQ0F0TSxtQkFBQXFNLEdBRUFGLEVBQUE1TSxTQUVBb00sUUFDQXhLLFVBRUFtSixPQUFBQyxZQUFBQyxhQUNBdkIsUUFBQTVILFNBQUFFLFVBQ0FrSixRQUNBTCxVQUFBLEtBR0F3QixVQUVBdEIsT0FBQUMsWUFBQUMsYUFDQXFCLFVBQUEsT0FFQTVDLE9BQUFnRCxPQU1BbkwsRUFBQSxXQUFBb0IsT0FBQSw2Q0FDQXBCLEVBQUEsc0JBQUFvRCxNQUFBLFdBRUFwRCxFQUFBLElBQUErSixNQUFBbEksUUFDQW1KLGdCQUdBckUsSUFBQSxHQUFBcUQsS0FBQUMsS0FDQUcsVUFBQXBLLEVBQUEsSUFBQStKLE1BR0FwRCxJQUFBeUMsTUFDQWMsZ0JBQUFDLFdBRUFFLGNBQUEsU0FBQUMsRUFBQUMsR0FFQUMsWUFBQUQsRUFBQS9ILGFBRUEsSUFBQWlJLEdBQUFELFlBQUEsVUFFQUUsV0FBQUQsSUFFQUUsZ0JBQUEsU0FBQUwsRUFBQWpJLEVBQUF4RCxHQUVBLEdBQUFQLEdBQUFLLG1CQUFBQyxZQUFBQyxFQUNBd0QsR0FBQTVELEtBQUFILElBR0FzTSxnQkFBQSxTQUFBTixFQUFBbE0sRUFBQW1NLEdBR0EsR0FBQWxNLEdBQUEsRUFPQSxJQU5BMkIsRUFBQUMsS0FBQUgsY0FBQSxTQUFBakIsRUFBQXFCLEdBQ0EsTUFBQUEsR0FBQUMsVUFBQW9LLE9BQ0FsTSxFQUFBNkIsR0FEQSxTQUtBLElBQUE3QixFQUFBLENBRUEsR0FBQUMsR0FBQUgsb0JBQUFDLEVBQUFDLEVBQ0FELEdBQUFLLEtBQUFILE9BRUFGLEdBQUFLLEtBQUFMLEVBQUFLLFNBRUFvTSxRQUNBeEssVUFDQW1KLE9BQUFDLFlBQUFDLGFBRUF2QixRQUFBNUgsU0FBQUUsVUFFQWtKLFFBQ0FMLFVBQUEsS0FHQXdCLFVBRUF0QixPQUFBQyxZQUFBQyxhQUNBcUIsVUFBQSxPQUNBNUMsT0FBQXVELGVBTUFDLGlCQUNBQyxvQkFLQUQsaUJBQ0FDLGtCQUdBOUwsY0FNQSxRQUFBOEwsbUJBQ0EsR0FBQUMsS0FDQTdMLEdBQUFDLEtBQUE2TCxnQkFBQSxTQUFBak4sRUFBQWlILEdBQ0EsR0FBQWlHLElBQ0FsRixRQUFBZixFQUFBOUcsU0FBQThHLEVBQUE3RyxXQUNBSSxLQUFBeUcsRUFBQS9HLEtBRUErSCxPQUNBQyxLQUFBLE1BQ0FDLEVBQUExSCxTQUFBd0csRUFBQXBILE1BQUE2QixTQUFBRSxTQUFBd0csVUFBQUMsV0FDQThFLE1BQUEsd0JBR0FILEdBQUE1SyxLQUFBOEssS0FFQXBGLElBQUFzRixXQUFBSixHQzdOQSxRQUFBSyxxQkFBQXROLEdBQ0EsR0FBQXlCLEtBZUEsT0FiQUUsVUFBQUMsRUFBQUEsRUFDQUMsV0FBQUQsRUFBQUEsR0FFQVIsRUFBQUMsS0FBQXJCLEVBQUEsU0FBQUMsRUFBQXNOLEdBQ0E5TCxFQUFBeEIsR0FBQSxHQUFBb0ssUUFBQWtELEVBQ0EsSUFBQUMsR0FBQS9MLEVBQUF4QixHQUFBSCxLQUVBME4sR0FBQTNMLFdBQ0FBLFNBQUEyTCxHQUVBQSxFQUFBN0wsV0FDQUEsU0FBQTZMLEtBRUEvTCxFQ3ZEQSxRQUFBMEQsUUFBQXNJLEdBRUEsR0FBQXZMLEdBQUE4QyxPQUFBOUMsS0FBQXVMLEdBQ0FDLEVBQUF4TCxFQUFBUixPQUNBaU0sRUFBQSxFQUVBQyxFQUFBLEdBQUFDLE9BQ0FDLEVBQUEsR0FBQUQsTUFDQSxLQUFBakosRUFBQSxFQUFBOEksRUFBQTlJLEVBQUFBLElBQ0FnSixFQUFBaEosR0FBQSxHQUFBaUosT0FDQUMsRUFBQWxKLEdBQUEsR0FBQWlKLE1BSUEsSUFBQUUsSUFBQSxDQVdBLElBVkEzTSxFQUFBQyxLQUFBYSxFQUFBLFNBQUFqQyxFQUFBc0YsR0FDQSxNQUFBLE9BQUFBLEVBQUEzQixlQUNBbUssR0FBQSxFQUVBbkcsbUJBRUF4QyxvQkFMQSxVQVNBMkksRUFBQSxDQUlBM00sRUFBQUMsS0FBQWEsRUFBQSxTQUFBakMsRUFBQXNGLEdBRUEsSUFBQStCLHVCQUFBL0IsR0FHQSxXQURBbUMsU0FBQUMsSUFBQSx3QkFBQXBDLEVBQUEsSUFNQSxJQUFBUyxHQUFBeUgsRUFBQWxJLEdBRUF5SSxFQUFBakksbUJBQUFDLEVBRUEySCxLQUdBdk0sRUFBQUMsS0FBQTJNLEVBQUEsU0FBQXBKLEVBQUE2QyxHQUNBLEdBQUF3RyxHQUFBOUcsK0JBQUFWLGFBQUFnQixHQUNBeUcsRUFBQUQsRUFBQSxHQUNBRSxFQUFBRixFQUFBLEVBR0E3TSxHQUFBQyxLQUFBMkQsT0FBQTlDLEtBQUFnTSxHQUFBLFNBQUFqSixFQUFBbUosR0FFQSxHQUFBQyxHQUFBSCxFQUFBRSxFQUNBUixHQUFBM04sR0FBQW1PLEdBQUFDLElBR0FqTixFQUFBQyxLQUFBOE0sRUFBQSxTQUFBbEosRUFBQWlDLEdBQ0E0RyxFQUFBN04sR0FBQW9DLEtBQUE2RSxRQU9BLElBQUFvSCxLQUNBLElBQUFWLEVBQUFsTSxPQUFBLEVBQUEsQ0FDQTRNLEVBQUFWLEVBQUEsRUFDQSxLQUFBLEdBQUFoSixHQUFBLEVBQUFBLEVBQUFnSixFQUFBbE0sT0FBQSxFQUFBa0QsSUFDQTBKLEVBQUFDLHlCQUFBRCxFQUFBVixFQUFBaEosRUFBQSxJQVFBLEdBSkFrRCxVQUFBd0csR0FHQXBCLG1CQUNBWSxFQUFBcE0sT0FBQSxFQUFBLENBQ0F3TCxnQkFBQVksRUFBQSxFQUNBLEtBQUEsR0FBQWxKLEdBQUEsRUFBQUEsRUFBQWtKLEVBQUFwTSxPQUFBLEVBQUFrRCxJQUNBc0ksZ0JBQUFzQix1QkFBQXRCLGdCQUFBWSxFQUFBbEosRUFBQSxJQUtBb0ksbUJBR0EsUUFBQXdCLHdCQUFBQyxFQUFBQyxHQUNBLEdBQUFqTixLQVlBLE9BVEFMLEdBQUFDLEtBQUFvTixFQUFBLFNBQUF4TyxFQUFBME8sR0FFQSxHQUFBQyxHQUFBRCxFQUFBcE4sT0FDQUgsR0FBQUMsS0FBQXFOLEVBQUEsU0FBQXpPLEVBQUE0TyxHQUNBLEdBQUFDLEdBQUFELEVBQUF0TixPQUNBcU4sSUFBQUUsR0FDQXJOLEVBQUFZLEtBQUFzTSxPQUdBbE4sRUFHQSxRQUFBOE0sMEJBQUFRLEVBQUFDLEdBRUEsR0FBQS9OLEtBU0EsT0FQQUcsR0FBQUMsS0FBQTJELE9BQUE5QyxLQUFBNk0sR0FBQSxTQUFBOU8sRUFBQWdQLEdBRUE3TixFQUFBQyxLQUFBMkQsT0FBQTlDLEtBQUE4TSxHQUFBLFNBQUEvTyxFQUFBaVAsR0FDQUQsR0FBQUMsSUFDQWpPLEVBQUFnTyxHQUFBRixFQUFBRSxRQUdBaE8sRUFHQSxRQUFBa08sc0NBQUFDLEdBQ0EsR0FBQWxOLEdBQUE4QyxPQUFBOUMsS0FBQWtOLEdBQ0FDLEVBQUFuTixFQUFBUixPQUNBNE4sS0FDQUMsSUFHQW5PLEdBQUFDLEtBQUFhLEVBQUEsU0FBQWpDLEVBQUFzRixHQUNBNkosRUFBQTdKLElBRUEsSUFBQXNDLEtBR0FFLEtBQUF5SCxtQkFHQXBPLEVBQUFDLEtBQUFILGNBQUEsU0FBQXVPLEVBQUFuTyxHQUVBZ08sRUFBQUcsR0FBQSxFQUVBck8sRUFBQUMsS0FBQWEsRUFBQSxTQUFBakMsRUFBQWdKLEdBRUEsSUFEQSxHQUFBckUsR0FBQSxJQUNBLENBQ0FBLEdBQ0EsSUFBQW1DLEdBQUEsT0FBQW5DLEVBQ0FyQixFQUFBLFFBQUFxQixDQUVBLEtBQUF0RCxFQUFBeUYsR0FDQSxLQUVBekYsR0FBQXlGLEdBQUFuRCxlQUFBcUYsRUFBQXJGLGVBRUF0QyxFQUFBaUMsSUFBQTZMLEVBQUFuRyxJQUNBcUcsRUFBQUcsVUFPQXJPLEVBQUFDLEtBQUFILGNBQUEsU0FBQXVPLEVBQUFuTyxHQUNBZ08sRUFBQUcsSUFBQUosSUFDQXhILEVBQUF2RyxFQUFBQyxTQUFBRCxFQUFBeEIsU0FFQWdJLFVBQUFELEdBU0F6RyxFQUFBQyxLQUFBckIsWUFBQSxTQUFBMFAsRUFBQXhJLEdBRUFxSSxFQUFBRyxHQUFBLEVBRUF0TyxFQUFBQyxLQUFBYSxFQUFBLFNBQUFqQyxFQUFBZ0osR0FFQSxJQURBLEdBQUFyRSxHQUFBLElBQ0EsQ0FDQUEsR0FDQSxJQUFBbUMsR0FBQSxPQUFBbkMsRUFDQXJCLEVBQUEsUUFBQXFCLENBRUEsS0FBQXNDLEVBQUFILEdBQ0EsS0FFQUcsR0FBQUgsR0FBQW5ELGVBQUFxRixFQUFBckYsZUFFQXNELEVBQUEzRCxJQUFBNkwsRUFBQW5HLElBQ0FzRyxFQUFBRyxVQU9BdE8sRUFBQUMsS0FBQXJCLFlBQUEsU0FBQUMsRUFBQWlILEdBQ0FxSSxFQUFBdFAsSUFBQW9QLEdBQ0F0SCxJQUFBQyxVQUFBL0gsR0FDQWdJLFFBQUFmLEVBQUE5RyxTQUFBOEcsRUFBQTdHLFdBQ0FJLEtBQUF5RyxFQUFBL0csS0FHQStILE9BQ0FDLEtBQUEsUUFDQUMsRUFBQTFILFNBQUF3RyxFQUFBcEgsTUFBQTZCLFNBQUFFLFNBQUF3RyxVQUFBQyxnQkFRQSxRQUFBcUgsc0JBQUFDLEVBQUF0SyxHQUdBLEdBQUErSixHQUFBTyxFQUFBekssT0FBQSxTQUFBeEUsR0FDQSxNQUFBa1AsVUFBQWxQLElBQ0FlLE9BRUE0TixLQUNBQyxJQUdBbk8sR0FBQUMsS0FBQUgsY0FBQSxTQUFBdU8sRUFBQW5PLEdBRUFnTyxFQUFBRyxHQUFBLEVBRUFyTyxFQUFBQyxLQUFBdU8sRUFBQSxTQUFBM1AsRUFBQTRGLEdBRUEsSUFEQSxHQUFBakIsR0FBQSxJQUNBLENBQ0FBLEdBQ0EsSUFBQW1DLEdBQUEsT0FBQW5DLEVBQ0FyQixFQUFBLFFBQUFxQixDQUVBLElBQUFpTCxRQUFBdk8sRUFBQXlGLEdBQ0EsS0FFQXpGLEdBQUF5RixLQUFBekIsRUFBQXJGLEdBQUEwRCxNQUVBckMsRUFBQWlDLElBQUFzQyxHQUNBeUosRUFBQUcsU0FPQSxJQUFBNUgsS0FHQXpHLEdBQUFDLEtBQUFILGNBQUEsU0FBQXVPLEVBQUFuTyxHQUNBZ08sRUFBQUcsSUFBQUosSUFDQXhILEVBQUF2RyxFQUFBQyxTQUFBRCxFQUFBeEIsU0FJQWdJLFVBQUFELEdBVUF6RyxFQUFBQyxLQUFBckIsWUFBQSxTQUFBMFAsRUFBQXhJLEdBRUFxSSxFQUFBRyxHQUFBLEVBRUF0TyxFQUFBQyxLQUFBdU8sRUFBQSxTQUFBM1AsRUFBQTRGLEdBRUEsSUFEQSxHQUFBakIsR0FBQSxJQUNBLENBQ0FBLEdBQ0EsSUFBQW1DLEdBQUEsT0FBQW5DLEVBQ0FyQixFQUFBLFFBQUFxQixDQUVBLEtBQUFzQyxFQUFBSCxHQUNBLEtBRUFHLEdBQUFILEdBQUFuRCxlQUFBMEIsRUFBQXJGLEdBQUEwRCxLQUFBQyxlQUVBc0QsRUFBQTNELElBQUFzQyxHQUNBMEosRUFBQUcsVUFPQXRPLEVBQUFDLEtBQUFyQixZQUFBLFNBQUFDLEVBQUFpSCxHQUNBcUksRUFBQXRQLElBQUFvUCxHQUNBdEgsSUFBQUMsVUFBQS9ILEdBQ0FnSSxRQUFBZixFQUFBOUcsU0FBQThHLEVBQUE3RyxXQUNBSSxLQUFBeUcsRUFBQS9HLEtBR0ErSCxPQUNBQyxLQUFBLFFBQ0FDLEVBQUExSCxTQUFBd0csRUFBQXBILE1BQUE2QixTQUFBRSxTQUFBd0csVUFBQUMsZ0JDcFNBLFFBQUF3SCxxQkFBQTVELEVBQUE2RCxHQUNBLEdBQUFDLEtBSUEsT0FIQTVPLEdBQUFDLEtBQUE2SyxFQUFBLFNBQUFqTSxFQUFBNE0sR0FDQW1ELEVBQUEvUCxHQUFBLEdBQUFnUSxRQUFBcEQsRUFBQWtELEtBRUE3RCxFQUdBLFFBQUFNLDZCQUFBdUQsR0FDQSxHQUFBRyxHQUFBSCxFQUFBMUosTUFBQSxLQUFBLEdBQUF2QyxjQUVBeUksSUFhQSxPQVpBbkwsR0FBQUMsS0FBQUgsY0FBQSxTQUFBakIsRUFBQXFCLEdBQ0EsR0FBQUEsRUFBQUMsU0FBQTJPLEdBRUE1TyxFQUFBNk8sUUFBQSxDQUNBLEdBQUFqRSxHQUFBNUssRUFBQTZPLE9BRUEvTyxHQUFBQyxLQUFBNkssRUFBQSxTQUFBak0sRUFBQTRNLEdBQ0FOLEVBQUFNLEVBQUFwTSxNQUFBLFNBS0E4TCxFQUdBLFFBQUE2RCxpQkFBQWpPLEdBRUEsR0FBQStOLEdBQUEvTixFQUFBa0UsTUFBQSxLQUFBLEdBQUF2QyxhQUVBMUMsR0FBQUMsS0FBQUgsY0FBQSxTQUFBakIsRUFBQXFCLEdBUUEsUUFBQStPLEtBQ0EsR0FDQWxPLEdBREEwRixJQUVBQSxHQUFBeUksS0FBQS9QLE9BRUEsS0FBQTRCLElBQUFtTyxNQUFBcEUsUUFDQXJFLEVBQUExRixHQUFBb08sRUFBQUMsS0FBQUMsTUFBQUQsS0FBQUUsU0FBQUgsRUFBQTdPLFFBRUEsT0FBQW1HLEdBZkEsR0FBQXZHLEVBQUFDLFNBQUEyTyxHQUVBNU8sRUFBQTZPLFFBQUEsQ0FDQSxHQUVBSSxJQUZBalAsRUFBQTZPLFNBRUEsVUFBQSxVQUFBLFVBQUEsVUFBQSxXQVlBekksU0FBQUMsSUFBQTBJLEtBRUFDLEtBQUFyRSxPQUFBQyxRQUFBLEdBQUF5RSxVQUFBTixRVDNEQSxHQUFBTyxXQUNBdEwsZUFDQXVGLFlBQ0FDLFlBQ0FLLEtBQ0FYLE1BQ0FlLFdBQ0EyQixnQkFDQUgsaUJBQUEsRUFFQThELGFBQUEsWUFHQUEsY0FBQUMsVUFBQUMsVUFBQSxTQUFBQyxFQUFBM0ksRUFBQUMsRUFBQTJJLEVBQUFDLEVBQUFDLEVBQUE5RSxFQUFBZixFQUFBSixHQWFBLEdBWkFLLFdBQUFELEVBQ0FkLE1BQUE2QixFQUVBbkwsaUJBRUFsQixlQUVBbUwsS0FBQThGLEVBRUFwRyxZQUFBcUcsRUFDQXBHLFlBQUFxRyxFQUVBLGFBQUFqRyxFQUNBaEssY0FBQU0sc0JBQUF3UCxPQUNBLENBQUEsR0FBQSxXQUFBOUYsRUFPQSxXQURBeEQsU0FBQTBKLE1BQUEseURBTEFyRSxrQkFBQSxFQUNBL00sWUFBQXNOLG9CQUFBMEQsR0FDQTlELGdCQUFBbE4sWUFDQXFSLFdBQUFyUixZQUFBMEIsT0FPQW9MLFVBQUE5TCxnQ0FJQXNRLE9BQUFDLE1BQ0FDLElBQUEsNENBQ0FDLFFBQUEsU0FBQUMsR0FDQS9SLGVBQUErUixHQUVBQyxPQUFBLElBSUFMLE9BQUFDLE1BQ0FDLElBQUEsMkNBQ0FDLFFBQUEsU0FBQUMsR0FDQXhSLGNBQUF3UixHQUVBQyxPQUFBLElBSUFMLE9BQUFDLE1BQ0FDLElBQUEsMkNBQ0FDLFFBQUEsU0FBQUMsR0FDQWxSLGNBQUFrUixHQUVBQyxPQUFBLEdBd0JBLEtBQUEsR0FyQkFsSCxJQUNBQyxVQUFBLEdBSUFDLEdBQ0FDLE9BQUFDLFlBQUFDLGFBRUF2QixRQUFBNUgsU0FBQUUsVUFFQWtKLE9BQUFOLEdBR0FPLEdBQ0FtQixVQUFBLFFBQ0F2QixPQUFBQyxZQUFBQyxhQUVBdkIsUUFBQTVILFNBQUFFLFdBR0ErUCxLQUNBaE4sRUFBQSxFQUFBQSxFQUFBNUUsWUFBQTBCLE9BQUFrRCxJQUNBZ04sRUFBQWhOLEdBQUEsS0FXQXFHLG1CQUFBTixFQUNBLFdBQUFPLElBQ0FELGtCQUFBRCxHQUlBakQsSUFBQSxHQUFBcUQsS0FBQUMsS0FDQUcsVUFBQXBLLEVBQUEsSUFBQTZQLEdBR0FsSixJQUFBeUMsTUFDQWMsZ0JBQUFDLFdBRUFFLGNBQUEsU0FBQUMsRUFBQUMsR0FFQUMsWUFBQUQsRUFBQS9ILGFBRUEsSUFBQWlJLEdBQUFELFlBQUEsVUFFQUUsV0FBQUQsSUFFQUUsZ0JBQUEsU0FBQUwsRUFBQWpJLEVBQUF4RCxHQUVBLEdBQUFQLEdBQUFLLG1CQUFBQyxZQUFBQyxFQUNBd0QsR0FBQTVELEtBQUFILElBR0FzTSxnQkFBQSxTQUFBTixFQUFBbE0sRUFBQW1NLEdBR0EsR0FBQWxNLEdBQUEsRUFPQSxJQU5BMkIsRUFBQUMsS0FBQUgsY0FBQSxTQUFBakIsRUFBQXFCLEdBQ0EsTUFBQUEsR0FBQUMsVUFBQW9LLE9BQ0FsTSxFQUFBNkIsR0FEQSxTQUtBLElBQUE3QixFQUFBLENBRUEsR0FBQUMsR0FBQUgsb0JBQUFDLEVBQUFDLEVBQ0FELEdBQUFLLEtBQUFILE9BRUFGLEdBQUFLLEtBQUFMLEVBQUFLLFNBRUFvTSxRQUNBeEssU0FBQXdKLG1CQUNBaUIsVUFFQXRCLE9BQUFDLFlBQUFDLGFBQ0FxQixVQUFBLE9BQ0E1QyxPQUFBdUQsZUFNQSxXQUFBNUIsSUFDQWdDLGdCQUFBbE4sWUFDQWdOLG9CQThCQTZELGFBQUFDLFVBQUFlLGVBQUEsU0FBQXZJLEdBRUFsSSxFQUFBd0ksUUFBQSw0QkFBQSxTQUFBa0ksR0FFQSxHQUFBQyxHQUFBbFAsS0FBQUMsVUFBQWdQLEdBRUFOLEVBQUEsb0NBQUFRLG1CQUFBRCxFQUdBUCxHQUFBLHVDQUVBcFEsRUFBQXdJLFFBQUE0SCxFQUFBLFNBQUE5SCxHQVVBeEksY0FBQU0sc0JBQUFrSSxFQUFBekksVUFFQSxJQUFBRSxHQUFBSCw4QkFBQUUsY0FFQTRHLFdBQUEzRyxHQUdBdUksRUFBQWpJLFVBRUF6QixZQUFBc04sb0JBQUE1RCxFQUFBakksU0FFQXVMLHVCQzlOQSxJQUFBekwsU0FBQSxTQUFBMFEsRUFBQXhSLEVBQUFzSixHQUNBLEdBQUEsSUFBQWtJLEVBRUFDLEtBQUEzUSxRQUFBZCxFQUVBeVIsS0FBQXBTLE9BQUFpSyxFQUNBbUksS0FBQUMsSUFBQSxFQUNBRCxLQUFBL1IsS0FBQSxVQUNBLENBRUEsR0FBQWlTLElBQUEsRUFDQXhOLEVBQUEsQ0FDQSxHQUFBLENBQ0FBLEdBQ0EsSUFBQW1DLEdBQUEsT0FBQW5DLEVBQ0FyQixFQUFBLFFBQUFxQixDQUNBaUwsVUFBQW9DLEVBQUFsTCxHQUNBcUwsR0FBQSxHQUVBRixLQUFBbkwsR0FBQWtMLEVBQUFsTCxHQUNBbUwsS0FBQTNPLEdBQUEwTyxFQUFBMU8sVUFFQTZPLEVBR0FILEdBQUE5QixVQUNBK0IsS0FBQS9CLFFBQUFMLG9CQUFBbUMsRUFBQTlCLFFBQUE4QixFQUFBMVEsVUFFQTJRLEtBQUEzUSxRQUFBMFEsRUFBQTFRLFFBRUEyUSxLQUFBcFMsT0FBQW1TLEVBQUFuUyxNQUNBb1MsS0FBQUMsSUFBQUYsRUFBQUUsSUFDQUQsS0FBQS9SLEtBQUEsUUNoQ0FpRixnQkFBQSxXQUdBLElBQUEsR0FBQVIsR0FBQSxFQUFBRixXQUFBRSxFQUFBQSxJQUNBeEQsRUFBQSxRQUFBd0QsR0FBQWtFLEtBQUEsSUFDQTFILEVBQUEsUUFBQXdELEdBQUFrQixJQUFBLEdBSUEsSUFBQStCLEdBQUE3RywrQkFDQThHLFdBQUFELEdBRUFxRixnQkFBQWxOLFlBQ0FnTixtQkVaQXhELE9BQUEsU0FBQTdGLEVBQUFMLEdBQ0E0TyxLQUFBdk8sS0FBQUEsRUFDQXVPLEtBQUE1TyxPQUFBQSxHQUlBb0IsV0FDQWhDLGNBQ0FzRSxtQkFzQkE2SixjQUFBQyxVQUFBdUIsYUFBQSxXQUdBMUosT0FBQXZILEVBQUEsV0FBQXVILFNBR0FBLE9BQUFBLE9BQUEsU0FBQSxNQUFBTixXQUNBTSxPQUFBQSxPQUFBLFNBQUEsTUFBQUwsV0FHQUssT0FBQUEsT0FBQSxTQUFBLFNBQUEsR0FHQUEsT0FBQUEsT0FBQSxTQUFBLFVBQUEsUUFHQUEsT0FBQXJFLEdBQUEsY0FBQSxTQUFBZ08sRUFBQUMsR0FDQXhKLGtCQUlBM0gsRUFBQSxXQUFBcUgsT0FDQXJILEVBQUEsY0FBQXFILE9BQ0FySCxFQUFBLGNBQUFxSCxPQ3REQSxJQUFBNkIsbUJBQ0FOLG1CQUVBNkcsY0FBQUMsVUFBQTBCLG9CQUFBLFNBQUFDLEVBQUE5SSxFQUFBTyxHQUdBLEdBQUFQLEdBQUEsNkNBRUFPLEVBQUEsMENBRUEsT0FBQVAsR0FJQU8sR0FNQXVJLEVBQUEsK0JBQ0FyUixHQUFBd0ksUUFBQTZJLEVBQUEsU0FBQS9JLEdBRUFELGlCQUFBQyxFQUFBQyxHQUVBTSxlQUFBUCxFQUFBUSxVQVZBeEMsU0FBQTBKLE1BQUEsK0NBSkExSixTQUFBMEosTUFBQSw2Q0VWQSxJQUFBL0csUUFBQSxTQUFBcUksRUFBQWpTLEVBQUFzSixFQUFBSSxFQUFBQyxHQUNBLEdBQUEsSUFBQXNJLEVBRUFSLEtBQUEzUSxRQUFBZCxFQUNBeVIsS0FBQXBTLE9BQUFpSyxFQUNBbUksS0FBQUMsSUFBQSxHQUNBRCxLQUFBOVIsU0FBQStKLEVBQ0ErSCxLQUFBN1IsVUFBQStKLEVBRUE4SCxLQUFBL1IsS0FBQSxVQUVBLENBRUEsR0FBQWlTLElBQUEsRUFDQXhOLEVBQUEsQ0FDQSxHQUFBLENBQ0FBLEdBQ0EsSUFBQW1DLEdBQUEsT0FBQW5DLEVBQ0FyQixFQUFBLFFBQUFxQixDQUNBOE4sR0FBQTNMLElBR0FtTCxLQUFBbkwsR0FBQTJMLEVBQUEzTCxHQUNBbUwsS0FBQTNPLEdBQUFtUCxFQUFBblAsSUFIQTZPLEdBQUEsUUFLQUEsRUFFQUYsTUFBQTNRLFFBQUFtUixFQUFBblIsUUFDQTJRLEtBQUFwUyxPQUFBNFMsRUFBQTVTLE1BQ0FvUyxLQUFBQyxJQUFBTyxFQUFBUCxJQUNBRCxLQUFBOVIsU0FBQXNTLEVBQUF0UyxTQUNBOFIsS0FBQTdSLFVBQUFxUyxFQUFBclMsVUFFQTZSLEtBQUEvUixLQUFBLFFFbENBOFAsT0FBQSxTQUFBMEMsRUFBQTVDLEdBRUFtQyxLQUFBakMsT0FBQTBDLEVBQUFsUyxLQUNBeVIsS0FBQTNRLFFBQUF3TyxFQUVBbUMsS0FBQS9SLEtBQUEiLCJmaWxlIjoianNNYXBzQXBpLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHZlY3Rvck1hcDtcbnZhciBqc29uRmlsdGVycyA9IFtdO1xudmFyIG1pbkNvbG9yTWFwO1xudmFyIG1heENvbG9yTWFwO1xudmFyIG1EaXY7XG52YXIgbVR5cGU7XG52YXIgYmFja2dyb3VuZDtcbnZhciBmaWx0ZXJlZE1hcmtlcnM7XG52YXIgdGhlcmVBcmVNYXJrZXJzID0gZmFsc2U7XG5cbnZhciBWZWN0b3JpYWxNYXAgPSBmdW5jdGlvbigpIHt9O1xuXG4vLyBWZWN0b3JpYWxNYXAgUHJvdG90eXBlXG5WZWN0b3JpYWxNYXAucHJvdG90eXBlLmNyZWF0ZU1hcCA9IGZ1bmN0aW9uKGlucHV0SlNPTiwgbWluUmFkaXVzLCBtYXhSYWRpdXMsIG1hcERpdiwgbWluQ29sb3IsIG1heENvbG9yLCBtYXBUeXBlLCBiYWNrZ3JvdW5kQ29sb3IsIGRhdGFUeXBlKSB7XG4gICAgYmFja2dyb3VuZCA9IGJhY2tncm91bmRDb2xvcjtcbiAgICBtVHlwZSA9IG1hcFR5cGU7XG4gICAgLy8gY291bnRyaWVzIGxpc3RcbiAgICBqc29uQ291bnRyaWVzID0gW107XG4gICAgLy8gbWFya2VycyBsaXN0XG4gICAganNvbk1hcmtlcnMgPSBbXTtcbiAgICAvLyBpZCBvZiB0aGUgbWFwXG4gICAgbURpdiA9IG1hcERpdjtcbiAgICAvLyBhc3NpZ24gdGhlIGNvbG9ycyBmb3IgdGhlIHJhbmdlXG4gICAgbWluQ29sb3JNYXAgPSBtaW5Db2xvcjtcbiAgICBtYXhDb2xvck1hcCA9IG1heENvbG9yO1xuXG4gICAgaWYgKGRhdGFUeXBlID09ICdjb3VudHJpZXMnKSB7XG4gICAgICAgIGpzb25Db3VudHJpZXMgPSByZWFkQ291bnRyaWVzRnJvbUpTT04oaW5wdXRKU09OKTtcbiAgICB9IGVsc2UgaWYgKGRhdGFUeXBlID09ICdtYXJrZXJzJykge1xuICAgICAgICB0aGVyZUFyZU1hcmtlcnMgPSB0cnVlO1xuICAgICAgICBqc29uTWFya2VycyA9IHJlYWRNYXJrZXJzRnJvbUpTT04oaW5wdXRKU09OKTtcbiAgICAgICAgZmlsdGVyZWRNYXJrZXJzID0ganNvbk1hcmtlcnM7XG4gICAgICAgIG51bU1hcmtlcnMgPSBqc29uTWFya2Vycy5sZW5ndGg7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignWW91IG11c3QgZ2l2ZSBhcyBpbnB1dCBhIGxpc3Qgb2YgbWFya2VycyBvciBjb3VudHJpZXMhJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBnZXQgdGhlIENvdW50IHZhbHVlIGZvciBlYWNoIENvdW50cnlcbiAgICBhdXhDb2xvcnMgPSBnZW5lcmF0ZUNvbG9yc0ZvclRoZUNvdW50cmllcygpO1xuXG4gICAgLy8gZ2V0IHRoZSB0b29sdGlwIHRlbXBsYXRlc1xuICAgIC8vIENPVU5UUlkgdG9vbHRpcFxuICAgIGpRdWVyeS5hamF4KHtcbiAgICAgICAgdXJsOiAnLi4vdG9vbHRpcC10ZW1wbGF0ZXMvY291bnRyeV90b29sdGlwLmh0bWwnLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgIGNvdW50cnlUb29sdGlwID0gcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYzogZmFsc2VcbiAgICB9KTtcblxuICAgIC8vIE1BUktFUiB0b29sdGlwXG4gICAgalF1ZXJ5LmFqYXgoe1xuICAgICAgICB1cmw6ICcuLi90b29sdGlwLXRlbXBsYXRlcy9tYXJrZXJfdG9vbHRpcC5odG1sJyxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICBtYXJrZXJUb29sdGlwID0gcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYzogZmFsc2VcbiAgICB9KTtcblxuICAgIC8vIFJFR0lPTiB0b29sdGlwXG4gICAgalF1ZXJ5LmFqYXgoe1xuICAgICAgICB1cmw6ICcuLi90b29sdGlwLXRlbXBsYXRlcy9yZWdpb25fdG9vbHRpcC5odG1sJyxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICByZWdpb25Ub29sdGlwID0gcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYzogZmFsc2VcbiAgICB9KTtcblxuICAgIHZhciBsZWdlbmRWYXIgPSB7XG4gICAgICAgIHZlcnRpY2FsOiB0cnVlLFxuICAgICAgICAvL3RpdGxlOiAnQ291bnRyaWVzJyxcbiAgICB9O1xuXG4gICAgdmFyIG1hcmtlcnNXaXRoTGVnZW5kID0ge1xuICAgICAgICBzY2FsZTogW21pbkNvbG9yTWFwLCBtYXhDb2xvck1hcF0sXG4gICAgICAgIC8vIHJhbmdlIG9mIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggdGhlIENvdW50XG4gICAgICAgIHZhbHVlczogW21pbkNvdW50LCBtYXhDb3VudF0sXG4gICAgICAgIC8vIGFkZCBhIGxlZ2VuZFxuICAgICAgICBsZWdlbmQ6IGxlZ2VuZFZhclxuICAgIH07XG5cbiAgICB2YXIgbWFya2Vyc1dpdGhvdXRMZWdlbmQgPSB7XG4gICAgICAgIGF0dHJpYnV0ZTogJ2ltYWdlJyxcbiAgICAgICAgc2NhbGU6IFttaW5Db2xvck1hcCwgbWF4Q29sb3JNYXBdLFxuICAgICAgICAvLyByYW5nZSBvZiB2YWx1ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBDb3VudFxuICAgICAgICB2YWx1ZXM6IFttaW5Db3VudCwgbWF4Q291bnRdXG4gICAgfTtcblxuICAgIHZhciBpbWFnZXMgPSBbXTtcbiAgICBmb3IodmFyIGk9MDsgaSA8IGpzb25NYXJrZXJzLmxlbmd0aDsgaSsrKVxuICAgICAgICBpbWFnZXNbaV0gPSAncmVkJztcblxuICAgIHZhciBtYXJrZXJzSWNvbnMgPSB7XG4gICAgICAgIGF0dHJpYnV0ZTogJ2ltYWdlJyxcbiAgICAgICAgc2NhbGU6IHtcbiAgICAgICAgICAgICdyZWQnOiAnLi4vaW1nL3JlZC1pY29uLnBuZycsXG4gICAgICAgICAgICAnYmx1ZSc6ICcuLi9pbWcvcmVkLWljb24ucG5nJ1xuICAgICAgICB9LFxuICAgICAgICB2YWx1ZXM6IGltYWdlc1xuICAgIH07XG5cbiAgICBmaW5hbE1hcmtlcnNJbk1hcCA9IG1hcmtlcnNXaXRoTGVnZW5kO1xuICAgIGlmIChkYXRhVHlwZSA9PSAnbWFya2VycycpIHtcbiAgICAgICAgZmluYWxNYXJrZXJzSW5NYXAgPSBtYXJrZXJzV2l0aG91dExlZ2VuZDtcbiAgICB9XG5cblxuICAgIG1hcCA9IG5ldyBqdm0uTWFwKHtcbiAgICAgICAgY29udGFpbmVyOiAkKCcjJyArIG1hcERpdiksXG4gICAgICAgIC8vIGNvbmZpZ3VyYXRpb24gb2YgdGhlIG1haW4gbWFwXG4gICAgICAgIC8vIHR5cGUgb2YgbWFwICh3b3JsZCwgRXVyb3BlLCBVU0EsIGV0YylcbiAgICAgICAgbWFwOiBtVHlwZSxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBiYWNrZ3JvdW5kLFxuICAgICAgICAvLyB0cmlnZ2VyZWQgd2hlbiBhIG1hcmtlciBpcyBob3ZlcmVkXG4gICAgICAgIG9uUmVnaW9uQ2xpY2s6IGZ1bmN0aW9uKGUsIGNvZGUpIHtcbiAgICAgICAgICAgIC8vIHJlbG9hZCBhIG5ldyBtYXBcbiAgICAgICAgICAgIGNvdW50cnlDb2RlID0gY29kZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgLy8gd2FpdFRvQWRkTWFya2VycygxMDApO1xuICAgICAgICAgICAgdmFyIG5ld01hcCA9IGNvdW50cnlDb2RlICsgJ19taWxsX2VuJztcbiAgICAgICAgICAgIC8vIHN3aXRoIHRvIG5ldyBtYXBcbiAgICAgICAgICAgIHN3aXRjaE1hcChuZXdNYXApO1xuICAgICAgICB9LFxuICAgICAgICBvbk1hcmtlclRpcFNob3c6IGZ1bmN0aW9uKGUsIGxhYmVsLCBpbmRleCkge1xuICAgICAgICAgICAgLy8gc2VsZWN0IHdoYXQgdGV4dCB0byBkaXNwbGF5IHdoZW4gbWFya2VyIGlzIGhvdmVyZWRcbiAgICAgICAgICAgIHZhciBmaW5hbFRvb2x0aXAgPSBidWlsZE1hcmtlclRvb2x0aXAoanNvbk1hcmtlcnMsIGluZGV4KTtcbiAgICAgICAgICAgIGxhYmVsLmh0bWwoZmluYWxUb29sdGlwKTtcbiAgICAgICAgfSxcbiAgICAgICAgLy8gdHJpZ2dlcmVkIHdoZW4gYSByZWdpb24gaXMgaG92ZXJlZFxuICAgICAgICBvblJlZ2lvblRpcFNob3c6IGZ1bmN0aW9uKGUsIGNvdW50cnlOYW1lLCBjb2RlKSB7XG4gICAgICAgICAgICAvLyBjb2RlIGNvbnRhaW5zIHRoZSBjb2RlIG9mIHRoZSBjb3VudHJ5IChpLmUuLCBQVCwgRVMsIEZSLCBldGMpXG4gICAgICAgICAgICAvLyBzaG93IHRoZSBDb3VudCBhc3NvY2lhdGVkIHRvIHRoYXQgQ291bnRyeSAtIGxvb2sgZm9yIHRoZSBjb3VudHJ5XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRDb3VudHJ5ID0gLTE7XG4gICAgICAgICAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5LkNvdW50cnkgPT09IGNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDb3VudHJ5ID0gY3VycmVudENvdW50cnk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZENvdW50cnkgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAvLyBmaW5kIG9jY3VycmVuY2Ugb2Ygc2V2ZXJhbCBzdHJpbmdzIGluc2lkZSB0aGUgdGVtcGxhdGVcbiAgICAgICAgICAgICAgICB2YXIgZmluYWxUb29sdGlwID0gYnVpbGRDb3VudHJ5VG9vbHRpcChjb3VudHJ5TmFtZSwgc2VsZWN0ZWRDb3VudHJ5KTtcbiAgICAgICAgICAgICAgICBjb3VudHJ5TmFtZS5odG1sKGZpbmFsVG9vbHRpcCk7XG4gICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICBjb3VudHJ5TmFtZS5odG1sKGNvdW50cnlOYW1lLmh0bWwoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNlcmllczoge1xuICAgICAgICAgICAgbWFya2VyczogW2ZpbmFsTWFya2Vyc0luTWFwXSxcbiAgICAgICAgICAgIHJlZ2lvbnM6IFt7XG4gICAgICAgICAgICAgICAgLy8gbWluIGFuZCBtYXggdmFsdWVzIG9mIGNvdW50XG4gICAgICAgICAgICAgICAgc2NhbGU6IFttaW5Db2xvck1hcCwgbWF4Q29sb3JNYXBdLFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogJ2ZpbGwnLFxuICAgICAgICAgICAgICAgIHZhbHVlczogYXV4Q29sb3JzXG4gICAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBkcmF3IG1hcmtlcnMgb24gdGhlIG1hcFxuICAgIGlmIChkYXRhVHlwZSA9PSAnbWFya2VycycpIHtcbiAgICAgICAgZmlsdGVyZWRNYXJrZXJzID0ganNvbk1hcmtlcnM7XG4gICAgICAgIGFkZE1hcmtlcnNUb01hcCgpO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIGJ1aWxkQ291bnRyeVRvb2x0aXAoY291bnRyeU5hbWUsIHNlbGVjdGVkQ291bnRyeSkge1xuICAgIHZhciBmaW5hbFRvb2x0aXAgPSBjb3VudHJ5VG9vbHRpcDtcbiAgICBmaW5hbFRvb2x0aXAgPSBmaW5hbFRvb2x0aXAucmVwbGFjZSgnbmFtZScsIGNvdW50cnlOYW1lLmh0bWwoKSk7XG4gICAgZmluYWxUb29sdGlwID0gZmluYWxUb29sdGlwLnJlcGxhY2UoJ2NvdW50Jywgc2VsZWN0ZWRDb3VudHJ5LkNvdW50KTtcbiAgICByZXR1cm4gZmluYWxUb29sdGlwO1xufVxuXG5mdW5jdGlvbiBidWlsZE1hcmtlclRvb2x0aXAoanNvbk1hcmtlcnMsIGluZGV4KSB7XG4gICAgdmFyIGZpbmFsVG9vbHRpcCA9IG1hcmtlclRvb2x0aXA7XG4gICAgZmluYWxUb29sdGlwID0gZmluYWxUb29sdGlwLnJlcGxhY2UoJ2Rlc2NyaXB0aW9uJywganNvbk1hcmtlcnNbaW5kZXhdLmRlc2MpO1xuICAgIGZpbmFsVG9vbHRpcCA9IGZpbmFsVG9vbHRpcC5yZXBsYWNlKCdsYXRpdHVkZScsIGpzb25NYXJrZXJzW2luZGV4XS5MYXRpdHVkZSk7XG4gICAgZmluYWxUb29sdGlwID0gZmluYWxUb29sdGlwLnJlcGxhY2UoJ2xvbmdpdHVkZScsIGpzb25NYXJrZXJzW2luZGV4XS5Mb25naXR1ZGUpO1xuICAgIHJldHVybiBmaW5hbFRvb2x0aXA7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkUmVnaW9uVG9vbHRpcChyZWdpb24pIHtcbiAgICB2YXIgZmluYWxUb29sdGlwID0gcmVnaW9uVG9vbHRpcDtcbiAgICBmaW5hbFRvb2x0aXAgPSBmaW5hbFRvb2x0aXAucmVwbGFjZSgnbmFtZScsIHJlZ2lvbi5uYW1lKTtcbiAgICByZXR1cm4gZmluYWxUb29sdGlwO1xufVxuXG4vLyBBdXhpbGlhcnkgZnVuY3Rpb24gdG8gdHJhbnNwb3NlIGEgdmFsdWUgZnJvbSBhbiBpbml0aWFsIHJhbmdlIHRvIGFub3RoZXIgcmFuZ2VcbmZ1bmN0aW9uIG1hcFJhbmdlKHZhbHVlLCBsb3cxLCBoaWdoMSwgbG93MiwgaGlnaDIpIHtcbiAgICByZXR1cm4gbG93MiArIChoaWdoMiAtIGxvdzIpICogKHZhbHVlIC0gbG93MSkgLyAoaGlnaDEgLSBsb3cxKTtcbn1cblxuVmVjdG9yaWFsTWFwLnByb3RvdHlwZS5maWx0ZXJPblNlcnZlciA9IGZ1bmN0aW9uKGZpbHRlcnMpIHtcbiAgICAvLyByZWFkIHRoZSBmaWx0ZXJzIGZyb20gYSBKU09OIGZpbGUgKGp1c3QgZm9yIHRlc3RpbmcpXG4gICAgJC5nZXRKU09OKFwiLi4vanNvbi9zZXJ2ZXJGaWx0ZXIuanNvblwiLCBmdW5jdGlvbihmaWx0ZXJzSlNPTikge1xuICAgICAgICAvLyBjb252ZXJ0IHRoZSBmaWx0ZXJzSlNPTiB0byBhIHN0cmluZ1xuICAgICAgICB2YXIgZmlsdGVyc1N0cmluZyA9IEpTT04uc3RyaW5naWZ5KGZpbHRlcnNKU09OKTtcbiAgICAgICAgLy8gYnVpbGQgdGhlIHVybCB0byBzZW5kIHRvIHRoZSBzZXJ2ZXJcbiAgICAgICAgdmFyIHVybCA9ICdodHRwOi8vc2VydmVyRmlsdGVyaW5nLmNvbS8/ZGF0YT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGZpbHRlcnNTdHJpbmcpO1xuICAgICAgICAvLyBGT1IgVEVTVElORyBQVVJQT1NFUyAtIHRoaXMgZmlsZSBjb250YWlucyBhIGRpZmZlcmVudCBzZXRcbiAgICAgICAgLy8gb2YgY291bnRyaWVzIGFuZCBtYXJrZXJzXG4gICAgICAgIHVybCA9ICcuLi9qc29uL2NvdW50cmllc19wbHVzX21hcmtlcnMyLmpzb24nO1xuICAgICAgICAvLyBzZW5kIHJlcXVlc3QgdG8gdGhlIHNlcnZlciB0byBnZXQgdGhlIG1hcmtlcnMgYW5kIGNvdW50cmllc1xuICAgICAgICAkLmdldEpTT04odXJsLCBmdW5jdGlvbihqc29uKSB7XG4gICAgICAgICAgICAvLyBnZXQgdGhlIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlclxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgIFRISVMgQ09ERSBJUyBTRVJWRVIgU0lERVxuICAgICAgICAgICAgdmFyIG15UGFyYW0gPSB1cmwuc3BsaXQoJ2RhdGE9JylbMV07XG4gICAgICAgICAgICB2YXIgcmV0dXJuSlNPTiA9IGRlY29kZVVSSUNvbXBvbmVudChteVBhcmFtKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04ucGFyc2UocmV0dXJuSlNPTikpO1xuICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLy8gcGFyc2UgdGhlIEpTT04gdG8gZ2V0IHRoZSBjb3VudHJpZXMgYW5kIG1hcmtlcnNcbiAgICAgICAgICAgIGpzb25Db3VudHJpZXMgPSByZWFkQ291bnRyaWVzRnJvbUpTT04oanNvbi5jb3VudHJpZXMpO1xuICAgICAgICAgICAgLy8gZ2V0IHRoZSBjb2xvdXJzIGZvciB0aGUgY291bnRyaWVzXG4gICAgICAgICAgICB2YXIgY291bnRyeUNvbG9ycyA9IGdlbmVyYXRlQ29sb3JzRm9yVGhlQ291bnRyaWVzKGpzb25Db3VudHJpZXMpO1xuICAgICAgICAgICAgLy8gZGlzcGxheSB0aGUgY291bnRyaWVzIG9uIHRoZSBtYXBcbiAgICAgICAgICAgIHJlbG9hZE1hcChjb3VudHJ5Q29sb3JzKTtcblxuICAgICAgICAgICAgLy8gaW4gY2FzZSB3ZSBhbHNvIGhhdmUgbWFya2Vyc1xuICAgICAgICAgICAgaWYgKGpzb24ubWFya2Vycykge1xuICAgICAgICAgICAgICAgIC8vIHJlYWQgdGhlIG1hcmtlcnMgZnJvbSB0aGUgSlNPTiBmaWxlXG4gICAgICAgICAgICAgICAganNvbk1hcmtlcnMgPSByZWFkTWFya2Vyc0Zyb21KU09OKGpzb24ubWFya2Vycyk7XG4gICAgICAgICAgICAgICAgLy8gYWRkIG1hcmtlcnMgdG8gdGhlIG1hcFxuICAgICAgICAgICAgICAgIGFkZE1hcmtlcnNUb01hcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbiIsInZhciBDb3VudHJ5ID0gZnVuY3Rpb24oY291bnRyeU9iamVjdCwgbmFtZSwgY291bnQpIHtcblx0aWYoY291bnRyeU9iamVjdCA9PSAnJykge1xuXHRcdC8vIHJlYWQgZnJvbSB0aGUgaW5wdXQgcGFyYW1ldGVyc1xuXHRcdHRoaXMuQ291bnRyeSA9IG5hbWU7XG5cdFx0Ly8gKyBpcyB1c2VkIHRvIGFzc3VyZSB0aGF0IGEgTnVtYmVyIGlzIGJlaW5nIHJlYWRcblx0XHR0aGlzLkNvdW50ID0gK2NvdW50O1xuXHRcdHRoaXMuVmFyID0gMDtcblx0XHR0aGlzLmRlc2MgPSAnYWJjJztcblx0fSBlbHNlIHtcblx0XHQvLyByZWFkIGZyb20gdGhlIEpTT05cblx0XHR2YXIgaGFzTmFtZSA9IHRydWU7XG5cdFx0dmFyIGkgPSAwO1xuXHRcdGRvIHtcblx0XHRcdGkrKztcblx0XHRcdHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnTmFtZScgKyBpO1xuXHRcdFx0dmFyIGN1cnJlbnRWYWx1ZSA9ICdWYWx1ZScgKyBpO1xuXHRcdFx0aWYoY291bnRyeU9iamVjdFtjdXJyZW50TmFtZVRvQ2hlY2tdID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0aGFzTmFtZSA9IGZhbHNlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpc1tjdXJyZW50TmFtZVRvQ2hlY2tdID0gY291bnRyeU9iamVjdFtjdXJyZW50TmFtZVRvQ2hlY2tdO1xuXHRcdFx0XHR0aGlzW2N1cnJlbnRWYWx1ZV0gPSBjb3VudHJ5T2JqZWN0W2N1cnJlbnRWYWx1ZV07XG5cdFx0XHR9XG5cdFx0fSB3aGlsZSAoaGFzTmFtZSk7XG5cblx0XHQvLyB0cnkgdG8gcmVhZCBpdHMgcmVnaW9ucyBpbiBjYXNlIGhlIGhhcyBhbnlcblx0XHRpZihjb3VudHJ5T2JqZWN0LlJlZ2lvbnMpXG5cdFx0XHR0aGlzLlJlZ2lvbnMgPSByZWFkUmVnaW9uc0Zyb21KU09OKGNvdW50cnlPYmplY3QuUmVnaW9ucywgY291bnRyeU9iamVjdC5Db3VudHJ5KTtcblxuXHRcdHRoaXMuQ291bnRyeSA9IGNvdW50cnlPYmplY3QuQ291bnRyeTtcblx0XHQvLyArIGlzIHVzZWQgdG8gYXNzdXJlIHRoYXQgYSBOdW1iZXIgaXMgYmVpbmcgcmVhZFxuXHRcdHRoaXMuQ291bnQgPSArY291bnRyeU9iamVjdC5Db3VudDtcblx0XHR0aGlzLlZhciA9IGNvdW50cnlPYmplY3QuVmFyO1xuXHRcdHRoaXMuZGVzYyA9ICdhYmMnO1xuXHR9XG59O1xuXG5mdW5jdGlvbiBnZW5lcmF0ZUNvbG9yc0ZvclRoZUNvdW50cmllcyhjb3VudHJpZXMpIHtcblx0aWYoIWNvdW50cmllcylcblx0XHRjb3VudHJpZXMgPSBqc29uQ291bnRyaWVzO1xuXHR2YXIgY291bnRyeUNvbG9ycyA9IFtdO1xuXHQkLmVhY2goY291bnRyaWVzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnkpIHtcblx0XHRjb3VudHJ5Q29sb3JzW2N1cnJlbnRDb3VudHJ5LkNvdW50cnldID0gY3VycmVudENvdW50cnkuQ291bnQ7XG5cdH0pO1xuXHRyZXR1cm4gY291bnRyeUNvbG9ycztcbn07XG5cbmZ1bmN0aW9uIHJlYWRDb3VudHJpZXNGcm9tSlNPTihtYXJrZXJzKSB7XG5cblx0dmFyIGNvdW50cmllcyA9IFtdO1xuXHR2YXIgbnVtSlNPTkNvdW50cmllcyA9IG1hcmtlcnMubGVuZ3RoO1xuXG5cdG1pbkNvdW50ID0gSW5maW5pdHk7XG5cdG1heENvdW50ID0gLUluZmluaXR5O1xuXG5cdCQuZWFjaChtYXJrZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnkpIHtcblx0XHRjb3VudHJpZXNbaW5kZXhdID0gbmV3IENvdW50cnkoY3VycmVudENvdW50cnkpO1xuXG5cdFx0aWYoY291bnRyaWVzW2luZGV4XS5Db3VudCA+IG1heENvdW50KVxuXHRcdFx0bWF4Q291bnQgPSBjb3VudHJpZXNbaW5kZXhdLkNvdW50O1xuXG5cdFx0aWYoY291bnRyaWVzW2luZGV4XS5Db3VudCA8IG1pbkNvdW50KVxuXHRcdFx0bWluQ291bnQgPSBjb3VudHJpZXNbaW5kZXhdLkNvdW50O1xuXHR9KTtcblx0cmV0dXJuIGNvdW50cmllcztcbn1cblxuLy8gcmV0dXJuIHRoZSBjb3VudHJ5IHdob3NlIG5hbWUgaXMgcGFzc2VkIGFzIGFuIGFyZ3VtZW50XG5mdW5jdGlvbiBmaW5kQ291bnRyeUJ5TmFtZShjb3VudHJ5TmFtZSlcbntcblx0dmFyIHJldHVybkNvdW50cnkgPSBudWxsO1xuXHQkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG5cdFx0aWYoY3VycmVudENvdW50cnkuQ291bnRyeSA9PSBjb3VudHJ5TmFtZSlcblx0XHR7XG5cdFx0XHRyZXR1cm5Db3VudHJ5ID0gY3VycmVudENvdW50cnk7XG5cdFx0XHRyZXR1cm4gcmV0dXJuQ291bnRyeTtcblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gcmV0dXJuQ291bnRyeTtcbn1cblxuLy8gcmVhZCB0aGUgbWluIGFuZCBtYXggY291bnQgb2YgdGhlIGNvdW50cmlzXG5mdW5jdGlvbiByZWFkTWluTWF4KGNvdW50cmllc05hbWVzKVxue1xuXHRtaW5Db3VudCA9IEluZmluaXR5O1xuXHRtYXhDb3VudCA9IC1JbmZpbml0eTtcblxuXHQvLyBjb3VudHJpZXMgbmFtZXMgaXMgYSBKU09OIG9iamVjdFxuXHQvLyByZWFkIGtleXMgdG8gYW4gYXJyYXlcblx0dmFyIGtleXMgPSBbXTtcblx0Zm9yICh2YXIga2V5IGluIGNvdW50cmllc05hbWVzKSB7XG5cdCAgaWYgKGNvdW50cmllc05hbWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgIGtleXMucHVzaChrZXkpO1xuXHQgIH1cblx0fVxuXG5cdC8vIGZpbmQgY291bnRyeSBieSBuYW1lXG5cdCQuZWFjaChrZXlzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnlOYW1lKSB7XG5cdFx0Ly8gZmluZCB0aGUgY291bnRyeSBieSBpdHMgbmFtZVxuXHRcdHZhciBjdXJyZW50Q291bnRyeSA9IGZpbmRDb3VudHJ5QnlOYW1lKGN1cnJlbnRDb3VudHJ5TmFtZSk7XG5cdFx0aWYoY3VycmVudENvdW50cnkuQ291bnQgPiBtYXhDb3VudClcblx0XHRcdG1heENvdW50ID0gY3VycmVudENvdW50cnkuQ291bnQ7XG5cblx0XHRpZihjdXJyZW50Q291bnRyeS5Db3VudCA8IG1pbkNvdW50KVxuXHRcdFx0bWluQ291bnQgPSBjdXJyZW50Q291bnRyeS5Db3VudDtcblx0fSk7XG59XG4iLCJ2YXIgcmVzZXRGaWx0ZXJzQm94ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAvLyByZXNldCBhbGwgdGhlICdmYm94ZXMnXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1GaWx0ZXJzOyBpKyspIHtcbiAgICAgICAgJChcIiNmYm94XCIgKyBpKS50ZXh0KCcnKTtcbiAgICAgICAgJChcIiNmYm94XCIgKyBpKS52YWwoJycpO1xuICAgIH1cblxuICAgIC8vIHJlbG9hZCB0aGUgbWFwXG4gICAgdmFyIGNvbG9ycyA9IGdlbmVyYXRlQ29sb3JzRm9yVGhlQ291bnRyaWVzKCk7XG4gICAgcmVsb2FkTWFwKGNvbG9ycyk7XG5cbiAgICBmaWx0ZXJlZE1hcmtlcnMgPSBqc29uTWFya2VycztcbiAgICBhZGRNYXJrZXJzVG9NYXAoKTtcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUZpbHRlcnNCb3hDaGVja2JveGVzKCkge1xuXG4gICAgJCgnZmlsdGVyLWJveCcpLmFwcGVuZCgnPHVsIGNsYXNzPVwibmF2IG5hdmJhci1uYXZcIiBpZD1cImZpbHRlckJveENoZWNrYm94ZXNcIiBzdHlsZT1cImJvcmRlci1zdHlsZTogc29saWQ7IGJvcmRlci13aWR0aDogMnB4O1wiPjwvdWw+Jyk7XG5cbiAgICAvLyBnZXQgYWxsIHRoZSBmaWx0ZXJzXG4gICAgJC5lYWNoKGpzb25GaWx0ZXJzQXJyYXksIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50RmlsdGVyKSB7XG4gICAgICAgIHZhciBib3hJRCA9ICcjYm94JyArIChpbmRleCArIDEpO1xuICAgICAgICAvLyBhcHBlbmQgdG8gdGhlIEhUTUxcbiAgICAgICAgJCgnI2ZpbHRlckJveENoZWNrYm94ZXMnKS5hcHBlbmQoJzxsaSBjbGFzcz1cImNvbC1zbS02XCIgaWQ9XCJib3gnICsgKGluZGV4ICsgMSkgKyAnXCIgY2xhc3M9XCJkcm9wZG93bi1jaGVja2JveC1leGFtcGxlIGRyb3Bkb3duLWNoZWNrYm94IGRyb3Bkb3duXCI+PC9saT4nKTtcblxuICAgICAgICAvLyBmaWxsIHRoZSB0YWJzIGZvciB0aGUgeWVhciBmaWx0ZXJcbiAgICAgICAgdmFyIHRhYiA9IFtdO1xuICAgICAgICAkLmVhY2goY3VycmVudEZpbHRlci5WYWx1ZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50VmFsdWUpIHtcbiAgICAgICAgICAgIHRhYi5wdXNoKHtcbiAgICAgICAgICAgICAgICAnaWQnOiBpbmRleCArIDEsXG4gICAgICAgICAgICAgICAgJ2xhYmVsJzogY3VycmVudFZhbHVlLFxuICAgICAgICAgICAgICAgICdpc0NoZWNrZWQnOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIHAod2F0KSB7XG4gICAgICAgICAgICByZXR1cm4gJzxwPicgKyBKU09OLnN0cmluZ2lmeSh3YXQpICsgJzwvcD4nO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU3RhdHVzKCkge1xuICAgICAgICAgICAgdmFyICRwID0gJCgncC5zdGF0dXMnKS5lbXB0eSgpO1xuICAgICAgICAgICAgJHAuYXBwZW5kKHAod2lkZ2V0LmNoZWNrZWQoKSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZHJvcGRvd24gd2l0aCBjaGVja2JveGVzIGluaXRpYWxpemF0aW9uXG4gICAgICAgIHZhciBuYW1lID0gY3VycmVudEZpbHRlci5OYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIG5hbWUgPSBuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKTtcbiAgICAgICAgJChib3hJRCkuZHJvcGRvd25DaGVja2JveCh7XG4gICAgICAgICAgICBkYXRhOiB0YWIsXG4gICAgICAgICAgICBhdXRvc2VhcmNoOiB0cnVlLFxuICAgICAgICAgICAgaGlkZUhlYWRlcjogZmFsc2UsXG4gICAgICAgICAgICAvLyBzaG93IG51bWJlciBvZiBzZWxlY3RlZCBpdGVtc1xuICAgICAgICAgICAgc2hvd05iU2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgdGVtcGxhdGVCdXR0b246ICc8YSBjbGFzcz1cImRyb3Bkb3duLWNoZWNrYm94LXRvZ2dsZVwiIGRhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIiBocmVmPVwiI1wiPicgKyBuYW1lICsgJzxzcGFuIGNsYXNzPVwiZHJvcGRvd24tY2hlY2tib3gtbmJzZWxlY3RlZFwiPjwvc3Bhbj48YiBjbGFzcz1cImNhcmV0XCI+PC9iPidcbiAgICAgICAgfSk7XG4gICAgICAgIHdpZGdldCA9ICQoYm94SUQpLmRhdGEoJ2Ryb3Bkb3duQ2hlY2tib3gnKTtcblxuICAgICAgICAkKCdib2R5Jykub24oJ2NoYW5nZTpkcm9wZG93bi1jaGVja2JveCBjaGVja2VkIGNoZWNrZWQ6YWxsIGNoZWNrOmFsbCB1bmNoZWNrOmFsbCBjaGVjazpjaGVja2VkIHVuY2hlY2s6Y2hlY2tlZCcsIHVwZGF0ZVN0YXR1cygpKTtcbiAgICAgICAgdXBkYXRlU3RhdHVzKCk7XG4gICAgfSk7XG5cbiAgICAvLyBhcHBlbmQgZmlsdGVyIGFuZCByZXNldCBidXR0b25cblxuICAgIHZhciB0ZXh0VG9BcHBlbmQgPSAnPGRpdiBpZD1cImZpbHRlcnNfYm94XCIgY2xhc3M9XCJyb3cgY29sLXNtLTEyXCI+JyArXG4gICAgICAgICc8YnV0dG9uIGlkPVwiZmlsdGVyX2JveF9hcHBseV9maWx0ZXJzXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGNvbC1zbS00IGNvbC1zbS1vZmZzZXQtMVwiPkZpbHRlcjwvYnV0dG9uPicgK1xuICAgICAgICAnPGJ1dHRvbiBpZD1cImZpbHRlcl9ib3hfcmVzZXRfZmlsdGVyc1wiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBjb2wtc20tNCBjb2wtc20tb2Zmc2V0LTFcIj5SZXNldDwvYnV0dG9uPjwvZGl2Pic7XG4gICAgJCgnI2ZpbHRlckJveENoZWNrYm94ZXMnKS5hcHBlbmQodGV4dFRvQXBwZW5kKTtcblxuICAgIC8vIHRyaWdnZXJlZCB3aGVuIHRoZSBzZWFyY2ggYnV0dG9uIGlzIGNsaWNrZWRcbiAgICAkKFwiI2ZpbHRlcl9ib3hfYXBwbHlfZmlsdGVyc1wiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGpzb25PYmplY3QgPSB7fTtcbiAgICAgICAgdmFyIG51bUZpbHRlcnMgPSBqc29uRmlsdGVyc0FycmF5Lmxlbmd0aDtcbiAgICAgICAgdmFyIGVtcHR5RmlsdGVycyA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwganNvbkZpbHRlcnNBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gY3VycmVudCBhbmQgbmV4dCBmaWx0ZXIgaWQnc1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRGaWx0ZXIgPSBcIiNib3hcIiArIChpICsgMSk7XG4gICAgICAgICAgICAvLyBjdXJyZW50IGZpbHRlciB2YWx1ZXMgLSBzZWxlY3RlZCBpdGVtc1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkSXRlbXMgPSBnZXRTZWxlY3RlZEl0ZW1zKGN1cnJlbnRGaWx0ZXIpO1xuICAgICAgICAgICAgdmFyIGl0ZW1zQXJyYXkgPSBbXTtcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoc2VsZWN0ZWRJdGVtcyk7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGtleXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpdGVtc0FycmF5LnB1c2goc2VsZWN0ZWRJdGVtc1trZXlzW2pdXS5sYWJlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjaGVjayBpZiB3ZSBoYXZlIGFueSBmaWx0ZXJpbmcgdG8gYXBwbHkgb3Igbm90XG4gICAgICAgICAgICBpZiAoa2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAganNvbk9iamVjdFtqc29uRmlsdGVyc0FycmF5W2ldLk5hbWVdID0gaXRlbXNBcnJheS5qb2luKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVtcHR5RmlsdGVycysrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGF2b2lkIHRoZSB1c2VyIHNlbGVjdGluZyB0aGUgRmlsdGVyIGJ1dHRvbiB3aXRob3V0IGlucHV0aW5nIGFueSBkYXRhXG4gICAgICAgIGlmIChlbXB0eUZpbHRlcnMgIT0gbnVtRmlsdGVycykge1xuICAgICAgICAgICAgZmlsdGVyKGpzb25PYmplY3QpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyB0cmlnZ2VyZWQgd2hlbiB0aGUgcmVzZXQgYnV0dG9uIGlzIGNsaWNrZWRcbiAgICAkKFwiI2ZpbHRlcl9ib3hfcmVzZXRfZmlsdGVyc1wiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzZXRGaWx0ZXJzQm94KCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldFNlbGVjdGVkSXRlbXMoYm94SUQpIHtcbiAgICByZXR1cm4gJChib3hJRCkuZHJvcGRvd25DaGVja2JveChcImNoZWNrZWRcIik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZpbHRlcnNCb3hXaXRoRW51bWVyYXRpb24oanNvbkZpbHRlcnMpIHtcblxuICAgIHZhciBudW1GaWx0ZXJzID0ganNvbkZpbHRlcnMubGVuZ3RoO1xuICAgIC8vIGNyZWF0ZSBmaWx0ZXJzIGJveCB3aXRoIGVudW1lcmF0aW9uXG4gICAgJC5lYWNoKGpzb25GaWx0ZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEZpbHRlcikge1xuICAgICAgICB2YXIgZmlsdGVyTmFtZSA9IGN1cnJlbnRGaWx0ZXIuTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBmaWx0ZXJOYW1lID0gZmlsdGVyTmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGZpbHRlck5hbWUuc2xpY2UoMSk7XG4gICAgICAgIHZhciBidXR0b25JZCA9ICdkcm9wZG93bicgKyBpbmRleCArICdidXR0b24nO1xuICAgICAgICB2YXIgdWxJZCA9ICdkcm9wZG93bicgKyBpbmRleDtcbiAgICAgICAgdmFyIHRvQXBwZW5kID0gJyc7XG5cbiAgICAgICAgLy8gZmlsdGVyIHRleHRcbiAgICAgICAgdG9BcHBlbmQgKz0gJzxwPjxiPicgKyBmaWx0ZXJOYW1lICsgJzo8L2I+PC9wPic7XG4gICAgICAgIHRvQXBwZW5kICs9ICc8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPic7XG4gICAgICAgIHRvQXBwZW5kICs9ICc8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwiZmJveCcgKyBpbmRleCArICdcIic7XG4gICAgICAgIC8vIGJ1aWxkIHRoZSBwbGFjZWhvbGRlclxuICAgICAgICB2YXIgcGxhY2Vob2xkZXIgPSBjdXJyZW50RmlsdGVyLlZhbHVlc1xuICAgICAgICB0b0FwcGVuZCArPSAncGxhY2Vob2xkZXI9XCInICsgcGxhY2Vob2xkZXIgKyAnXCIgKz4nO1xuICAgICAgICB0b0FwcGVuZCArPSAnPC9kaXY+JztcblxuICAgICAgICAkKCdmaWx0ZXItYm94JykuYXBwZW5kKHRvQXBwZW5kKTtcblxuICAgICAgICAvLyBhZGQgQm9vdHN0cmFwIHRvb2x0aXAgdG8gdGhlIGZpbHRlcnMgYm94XG4gICAgICAgICQoJyNmaWx0ZXItYm94JykudG9vbHRpcCh7XG4gICAgICAgICAgICB0aXRsZTogXCJVc2UgdGhpcyBmaWx0ZXIgYm94IHRvIGZpbHRlciBieSBtdWx0aXBsZSBmaWx0ZXJzXCIsXG4gICAgICAgICAgICBwbGFjZW1lbnQ6IFwiYm90dG9tXCJcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBhZGQgdGhlIGJ1dHRvbnNcbiAgICB2YXIgdGV4dFRvQXBwZW5kID0gJzxkaXYgaWQ9XCJmaWx0ZXJzX2JveFwiPicgK1xuICAgICAgICAnPGJ1dHRvbiBpZD1cImZpbHRlcl9ib3hfYXBwbHlfZmlsdGVyc1wiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBjb2wtc20tNCBjb2wtc20tb2Zmc2V0LTFcIj5GaWx0ZXI8L2J1dHRvbj4nICtcbiAgICAgICAgJzxidXR0b24gaWQ9XCJmaWx0ZXJfYm94X3Jlc2V0X2ZpbHRlcnNcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgY29sLXNtLTQgY29sLXNtLW9mZnNldC0xXCI+UmVzZXQ8L2J1dHRvbj48L2Rpdj4nO1xuICAgICQoJ2ZpbHRlci1ib3gnKS5hcHBlbmQodGV4dFRvQXBwZW5kKTtcblxuICAgIC8vIHRyaWdnZXJlZCB3aGVuIHRoZSBzZWFyY2ggYnV0dG9uIGlzIGNsaWNrZWRcbiAgICAkKFwiI2ZpbHRlcl9ib3hfYXBwbHlfZmlsdGVyc1wiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGpzb25PYmplY3QgPSB7fTtcbiAgICAgICAgdmFyIG51bUZpbHRlcnMgPSBqc29uRmlsdGVycy5sZW5ndGg7XG4gICAgICAgIHZhciBlbXB0eUZpbHRlcnMgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGpzb25GaWx0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBjdXJyZW50IGFuZCBuZXh0IGZpbHRlciBpZCdzXG4gICAgICAgICAgICB2YXIgY3VycmVudEZpbHRlciA9IFwiI2Zib3hcIiArIGk7XG4gICAgICAgICAgICAvLyBjdXJyZW50IGFuZCBuZXh0IGZpbHRlciB2YWx1ZXNcbiAgICAgICAgICAgIHZhciBjdXJyZW50RmlsdGVyVmFsdWUgPSAkKGN1cnJlbnRGaWx0ZXIpLnZhbCgpO1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgd2UgaGF2ZSBhbnkgZmlsdGVyaW5nIHRvIGFwcGx5IG9yIG5vdFxuICAgICAgICAgICAgaWYgKGN1cnJlbnRGaWx0ZXJWYWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBqc29uT2JqZWN0W2pzb25GaWx0ZXJzW2ldLk5hbWVdID0gY3VycmVudEZpbHRlclZhbHVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbXB0eUZpbHRlcnMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBhdm9pZCB0aGUgdXNlciBzZWxlY3RpbmcgdGhlIEZpbHRlciBidXR0b24gd2l0aG91dCBpbnB1dGluZyBhbnkgZGF0YVxuICAgICAgICBpZiAoZW1wdHlGaWx0ZXJzICE9IG51bUZpbHRlcnMpIHtcbiAgICAgICAgICAgIGZpbHRlcihqc29uT2JqZWN0KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gdHJpZ2dlcmVkIHdoZW4gdGhlIHJlc2V0IGJ1dHRvbiBpcyBjbGlja2VkXG4gICAgJChcIiNmaWx0ZXJfYm94X3Jlc2V0X2ZpbHRlcnNcIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc2V0RmlsdGVyc0JveCgpO1xuICAgIH0pO1xufVxuIiwiZnVuY3Rpb24gZ2V0QWxsRmlsdGVyVmFsdWVzKGZpbHRlclZhbHVlKSB7XG5cdHZhciByZXR1cm5QYXJ0cyA9IFtdO1xuXG5cdC8vIGNoZWNrIGlmIHdlIGhhdmUgYW4gZW51bWVyYXRpb24gKGNvbW1hLXNlcGFyYXRlZCB2YWx1ZXMgYW5kL29yIHJhbmdlcylcblx0aWYoU3RyaW5nKGZpbHRlclZhbHVlKS5pbmRleE9mKFwiLFwiKSAhPSAtMSkge1xuXG5cdFx0Ly8gZ2V0IGFsbCB0aGUgZW51bWVyYXRlZCB2YWx1ZXMgKGNhbiBiZSBzaW5ndWxhciBvciByYW5nZSlcblx0XHR2YXIgZW51bWVyYXRpb25QYXJ0cyA9IFN0cmluZyhmaWx0ZXJWYWx1ZSkuc3BsaXQoXCIsXCIpO1xuXG5cdFx0Ly8gY2hlY2sgaWYgd2UgaGF2ZSBhIHNpbXBsZSB2YWx1ZSBvciBhIHJhbmdlXG5cdFx0JC5lYWNoKGVudW1lcmF0aW9uUGFydHMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50RW51bWVyYXRpb24pIHtcblxuXHRcdFx0Ly8gaWYgd2UgaGF2ZSBhIHJhbmdlLi4uXG5cdFx0XHRpZihjdXJyZW50RW51bWVyYXRpb24uaW5kZXhPZihcIi1cIikgIT0gLTEpIHtcblxuXHRcdFx0XHQvLyBhbGwgdGhlIHJhbmdlIHBhcnRzXG5cdFx0XHRcdHZhciByYW5nZVBhcnRzID0gU3RyaW5nKGN1cnJlbnRFbnVtZXJhdGlvbikuc3BsaXQoXCItXCIpO1xuXG5cdFx0XHRcdC8vIGNoZWNrIGlmIHRoZSBleHRyZW1lIHZhbHVlcyBhcmUgdmFsaWRcblx0XHRcdFx0Y2hlY2tGaWx0ZXJWYWx1ZXNBcmVWYWxpZChmaWx0ZXJPYmplY3QsIHJhbmdlUGFydHMpO1xuXG5cdFx0XHRcdC8vIGdldCBhbGwgdGhlIHZhbHVlcyBiZXR3ZWVuIHRob3NlIHR3byBudW1iZXJzXG5cdFx0XHRcdC8vIGFuZCBhZGQgdGhlbVxuXHRcdFx0XHR2YXIgbWluID0gcmFuZ2VQYXJ0c1swXTtcblx0XHRcdFx0dmFyIG1heCA9IHJhbmdlUGFydHNbMV07XG5cdFx0XHRcdGZvcig7IG1pbiA8PSBtYXg7IG1pbisrKVxuXHRcdFx0XHRcdHJldHVyblBhcnRzLnB1c2gobWluKTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gaWYgd2UgZG9uJ3QgaGF2ZSBhIHJhbmdlXG5cdFx0XHRcdC8vIGNoZWNrIGlmIHRoZSBzaW5nbGUgdmFsdWUgaXMgdmFsaWRcblx0XHRcdFx0cmV0dXJuUGFydHMucHVzaChjdXJyZW50RW51bWVyYXRpb24pO1xuXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0Ly8ganVzdCBhIHNpbmdsZSBwYXJ0XG5cdFx0aWYoZmlsdGVyVmFsdWUuaW5kZXhPZihcIi1cIikgIT0gLTEpIHtcblx0XHRcdC8vIHdlIGhhdmUgYSByYW5nZVxuXHRcdFx0dmFyIHN1YlBhcnRzID0gU3RyaW5nKGZpbHRlclZhbHVlKS5zcGxpdChcIi1cIik7XG5cdFx0XHQvLyBjaGVjayBpZiB0aGUgZXh0cmVtZSB2YWx1ZXMgYXJlIHZhbGlkXG5cdFx0XHRjaGVja0ZpbHRlclZhbHVlc0FyZVZhbGlkKGZpbHRlck9iamVjdCwgc3ViUGFydHMpO1xuXHRcdFx0Ly8gZ2V0IGFsbCB0aGUgdmFsdWVzIGJldHdlZW4gdGhvc2UgdHdvIG51bWJlcnNcblx0XHRcdHZhciBtaW4gPSBzdWJQYXJ0c1swXTtcblx0XHRcdHZhciBtYXggPSBzdWJQYXJ0c1sxXTtcblx0XHRcdGZvcig7IG1pbiA8PSBtYXg7IG1pbisrKSB7XG5cdFx0XHRcdHJldHVyblBhcnRzLnB1c2gobWluKTtcblx0XHRcdH1cblx0XHR9IGVsc2Vcblx0XHRcdHJldHVyblBhcnRzLnB1c2goZmlsdGVyVmFsdWUpO1xuXHR9XG5cdHJldHVybiByZXR1cm5QYXJ0cztcbn1cblxuZnVuY3Rpb24gY2hlY2tXaGF0Q291bnRyaWVzVG9BZGQoc2VsZWN0ZWRGaWx0ZXIsIGZpbHRlclZhbHVlKSB7XG5cblx0dmFyIGNvdW50cmllcyA9IFtdO1xuXHQkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG5cdFx0Ly8gY2hlY2sgaWYgYW55IG9mIHRoZSBuYW1lcyBpcyBlcXVhbCB0byB0aGUgc2VsZWN0ZWQgZmlsdGVyXG5cdFx0Ly8gdHJ5IHRvIHJlYWQgYWxsIHRoZSBuYW1lcyBhbmQgdmFsdWVzXG5cdFx0dmFyIGkgPSAwO1xuXHRcdGRvIHtcblx0XHRcdGkrKztcblx0XHRcdHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnTmFtZScgKyBpO1xuXHRcdFx0dmFyIGN1cnJlbnRWYWx1ZSA9ICdWYWx1ZScgKyBpO1xuXHRcdFx0Ly8gY2hlY2sgaWYgdGhlIENvdW50cnkgaGFzIHRoYXQgbmFtZVxuXHRcdFx0aWYoY3VycmVudENvdW50cnlbY3VycmVudE5hbWVUb0NoZWNrXSkge1xuXHRcdFx0XHRpZihjdXJyZW50Q291bnRyeVtjdXJyZW50VmFsdWVdID09IGZpbHRlclZhbHVlKSB7XG5cdFx0XHRcdFx0Y291bnRyeVZhbHVlVG9DaGVjayA9IGN1cnJlbnRWYWx1ZTtcblx0XHRcdFx0XHQvLyBjaGVjayBieSB2YWx1ZVxuXHRcdFx0XHRcdGlmKGN1cnJlbnRDb3VudHJ5W2N1cnJlbnRWYWx1ZV0gPT0gZmlsdGVyVmFsdWUpXG5cdFx0XHRcdFx0XHRjb3VudHJpZXNbY3VycmVudENvdW50cnkuQ291bnRyeV0gPSBjdXJyZW50Q291bnRyeS5Db3VudDtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlXG5cdFx0XHRcdGJyZWFrO1xuXHRcdH0gd2hpbGUgKHRydWUpXG5cdH0pO1xuXHRyZXR1cm4gY291bnRyaWVzO1xufTtcblxuZnVuY3Rpb24gY2hlY2tXaGF0TWFya2Vyc1RvQWRkKHNlbGVjdGVkRmlsdGVyLCBmaWx0ZXJWYWx1ZSkge1xuXHR2YXIgbWFya2VycyA9IFtdO1xuXHQvLyBhZGQgb25seSB0aGUgbWFya2VycyB3aG8gaGF2ZSB0aGF0IGZpbHRlciB2YWx1ZVxuXHQkLmVhY2goanNvbk1hcmtlcnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50TWFya2VyKSB7XG5cdFx0Ly8gY2hlY2sgaWYgYW55IG9mIHRoZSBuYW1lcyBpcyBlcXVhbCB0byB0aGUgc2VsZWN0ZWQgZmlsdGVyXG5cdFx0Ly8gdHJ5IHRvIHJlYWQgYWxsIHRoZSBuYW1lcyBhbmQgdmFsdWVzXG5cdFx0dmFyIGkgPSAwO1xuXHRcdGRvIHtcblx0XHRcdGkrKztcblx0XHRcdHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnTmFtZScgKyBpO1xuXHRcdFx0dmFyIGN1cnJlbnRWYWx1ZSA9ICdWYWx1ZScgKyBpO1xuXHRcdFx0Ly8gY2hlY2sgaWYgdGhlIENvdW50cnkgaGFzIHRoYXQgbmFtZVxuXHRcdFx0aWYoY3VycmVudE1hcmtlcltjdXJyZW50TmFtZVRvQ2hlY2tdKSB7XG5cdFx0XHRcdGlmKGN1cnJlbnRNYXJrZXJbY3VycmVudE5hbWVUb0NoZWNrXSA9PSBzZWxlY3RlZEZpbHRlci5OYW1lKSB7XG5cdFx0XHRcdFx0aWYoY3VycmVudE1hcmtlcltjdXJyZW50VmFsdWVdID09IGZpbHRlclZhbHVlKVxuXHRcdFx0XHRcdFx0bWFya2Vycy5wdXNoKGN1cnJlbnRNYXJrZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9IHdoaWxlICh0cnVlKVxuXHR9KTtcblxuXHRyZXR1cm4gbWFya2Vycztcbn07XG5cbmZ1bmN0aW9uIGNoZWNrV2hhdENvdW50cmllc01hcmtlcnNUb0FkZChzZWxlY3RlZEZpbHRlciwgZmlsdGVyVmFsdWUpIHtcblx0dmFyIGNvdW50cmllc1RvQWRkID0gW107XG5cdHZhciBtYXJrZXJzVG9BZGQgPSBbXTtcblxuXHQvLyBjaGVjayB3aGF0IGNvdW50cmllcyB0byBjb2xvdXJcblx0Y291bnRyaWVzVG9BZGQgPSBjaGVja1doYXRDb3VudHJpZXNUb0FkZChzZWxlY3RlZEZpbHRlciwgZmlsdGVyVmFsdWUpO1xuXHRtYXJrZXJzVG9BZGQgPSBjaGVja1doYXRNYXJrZXJzVG9BZGQoc2VsZWN0ZWRGaWx0ZXIsIGZpbHRlclZhbHVlKTtcblxuXHRyZXR1cm4gW2NvdW50cmllc1RvQWRkLCBtYXJrZXJzVG9BZGRdO1xufVxuXG5mdW5jdGlvbiBjaGVja0ZpbHRlck5hbWVJc1ZhbGlkKGZpbHRlck5hbWUpIHtcblx0dmFyIHZhbGlkID0gZmFsc2U7XG5cdCQuZWFjaChqc29uRmlsdGVyc0FycmF5LCBmdW5jdGlvbihpbmRleCwgY3VycmVudEZpbHRlcikge1xuXHRcdGlmKGN1cnJlbnRGaWx0ZXIuTmFtZS50b0xvd2VyQ2FzZSgpID09PSBmaWx0ZXJOYW1lLnRvTG93ZXJDYXNlKCkpIHtcblx0XHRcdGZpbHRlck9iamVjdCA9IGN1cnJlbnRGaWx0ZXI7XG5cdFx0XHR2YWxpZCA9IHRydWU7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIHZhbGlkO1xufVxuXG5mdW5jdGlvbiBjaGVja0ZpbHRlclZhbHVlc0FyZVZhbGlkKGZpbHRlciwgZmlsdGVyVmFsdWVzKSB7XG5cdHZhciB2YWxpZCA9IGZhbHNlO1xuXHQkLmVhY2goZmlsdGVyVmFsdWVzLCBmdW5jdGlvbihpbmRleCwgcGFydCkge1xuXHRcdC8vIGNoZWNrIGlmIHRoZSBjdXJyZW50IHZhbHVlIGlzIHZhbGlkXG5cdFx0JC5lYWNoKGZpbHRlck9iamVjdC5WYWx1ZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50VmFsdWUpIHtcblx0XHRcdGlmKGN1cnJlbnRWYWx1ZSA9PSBwYXJ0KSB7XG5cdFx0XHRcdHZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGlmKCF2YWxpZCkge1xuXHRcdFx0Y29uc29sZS5sb2coJ0ludmFsaWQgdmFsdWUgZm9yIHRoZSBmaWx0ZXI6ICcgKyBwYXJ0KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gdmFsaWQ7XG59XG4iLCIvLyBjcmVhdGUgYSBuZXcgRklsdGVyIG9iamVjdFxudmFyIEZpbHRlciA9IGZ1bmN0aW9uKE5hbWUsIFZhbHVlcykge1xuXHR0aGlzLk5hbWUgPSBOYW1lO1xuXHR0aGlzLlZhbHVlcyA9IFZhbHVlcztcbn07XG5cbi8vIG51bWJlciBvZiBmaWx0ZXJzXG52YXIgbnVtRmlsdGVycztcbnZhciBjdXJyZW50RmlsdGVyO1xudmFyIGNvdW50cnlWYWx1ZVRvQ2hlY2s7XG5cbmZ1bmN0aW9uIHJlc2V0RmlsdGVycygpIHtcblx0Ly8gY29sb3IgdGhlIG9yaWdpbmFsIG1hcFxuXHR2YXIgY29sb3JzID0gZ2VuZXJhdGVDb2xvcnNGb3JUaGVDb3VudHJpZXMoKTtcblx0cmVsb2FkTWFwKGNvbG9ycyk7XG5cblx0Ly8gYWRkIG9ubHkgdGhlIG1hcmtlcnMgd2hvIGhhdmUgdGhhdCBmaWx0ZXIgdmFsdWVcblx0JC5lYWNoKGpzb25NYXJrZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudE1hcmtlcikge1xuXHRcdG1hcC5hZGRNYXJrZXIoaW5kZXgsIHtcblx0XHRcdGxhdExuZzogW2N1cnJlbnRNYXJrZXIuTGF0aXR1ZGUsIGN1cnJlbnRNYXJrZXIuTG9uZ2l0dWRlXSxcblx0XHRcdG5hbWU6IGN1cnJlbnRNYXJrZXIuZGVzYyxcblxuXHRcdFx0Ly8gc2V0IHRoZSBzdHlsZSBmb3IgdGhpcyBtYXJrZXJcblx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdGZpbGw6ICdncmVlbicsXG5cdFx0XHRcdHI6IG1hcFJhbmdlKGN1cnJlbnRNYXJrZXIuQ291bnQsIG1pbkNvdW50LCBtYXhDb3VudCwgbWluUmFkaXVzLCBtYXhSYWRpdXMpXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0pO1xufVxuXG5WZWN0b3JpYWxNYXAucHJvdG90eXBlLmNyZWF0ZVNsaWRlciA9IGZ1bmN0aW9uKCkge1xuXG4gICAgLy8galF1ZXJ5VUkgc2xpZGVyXG4gICAgc2xpZGVyID0gJChcIiNzbGlkZXJcIikuc2xpZGVyKCk7XG5cbiAgICAvLyBzZXQgbWF4IGFuZCBtaW4gdmFsdWUgZm9yIHRoZSBzbGlkZXJcbiAgICBzbGlkZXIuc2xpZGVyKFwib3B0aW9uXCIsIFwibWluXCIsIG1pblJhZGl1cyk7XG4gICAgc2xpZGVyLnNsaWRlcihcIm9wdGlvblwiLCBcIm1heFwiLCBtYXhSYWRpdXMpO1xuXG4gICAgLy8gYWxsb3cgdGhlIHVzZXIgdG8gc2VsZWN0IGEgcmFuZ2VcbiAgICBzbGlkZXIuc2xpZGVyKFwib3B0aW9uXCIsIFwicmFuZ2VcIiwgdHJ1ZSk7XG5cbiAgICAvLyB3aGVuIHVzZXIgY2xpY2tzIHRoZSBzbGlkZXIsIGl0IHdpbGwgYW5pbWF0ZSB0byB0aGUgY2xpY2tlZCBwb3NpdGlvblxuICAgIHNsaWRlci5zbGlkZXIoXCJvcHRpb25cIiwgXCJhbmltYXRlXCIsIFwic2xvd1wiKTtcblxuICAgIC8vIGFmdGVyIHNlbGVjdGluZyBhIG5ldyBzbGlkZXIgdmFsdWVcbiAgICBzbGlkZXIub24oXCJzbGlkZWNoYW5nZVwiLCBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAgICAgc2xpZGVyQ2hhbmdlZCgpO1xuICAgIH0pO1xuXG4gICAgLy8gaGlkZSBhbGwgdGhlIGNvbXBvbmVudHMgdW50aWwgdGhleSBhcmUgaGlkZGVuXG4gICAgJCgnI3NsaWRlcicpLmhpZGUoKTtcbiAgICAkKCcjbWluU2xpZGVyJykuaGlkZSgpO1xuICAgICQoJyNtYXhTbGlkZXInKS5oaWRlKCk7XG59XG5cbmZ1bmN0aW9uIGZpbHRlckZyb21NZW51U2VsZWN0ZWQoc2VsZWN0ZWRGaWx0ZXIsIGZpbHRlclZhbHVlKSB7XG5cblx0Y3VycmVudEZpbHRlciA9IHNlbGVjdGVkRmlsdGVyO1xuXG5cdC8vIGNoZWNrIHdoYXQgY291bnRyaWVzIHRvIGFkZCB0byB0aGUgbWFwXG5cdHZhciBjb3VudHJpZXMgPSBjaGVja1doYXRDb3VudHJpZXNUb0FkZChzZWxlY3RlZEZpbHRlciwgZmlsdGVyVmFsdWUpO1xuXG5cdC8vIHJlbG9hZCB0aGUgbWFwIGFuZCBhZGQgdGhvc2UgY291bnRyaWVzXG5cdHJlbG9hZE1hcChjb3VudHJpZXMpO1xuXG5cdC8vIGFkZCBvbmx5IHRoZSBtYXJrZXJzIHdobyBoYXZlIHRoYXQgZmlsdGVyIHZhbHVlXG5cdCQuZWFjaChqc29uTWFya2VycywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcblx0XHQvLyBjaGVjayBpZiBhbnkgb2YgdGhlIG5hbWVzIGlzIGVxdWFsIHRvIHRoZSBzZWxlY3RlZCBmaWx0ZXJcblx0XHQvLyB0cnkgdG8gcmVhZCBhbGwgdGhlIG5hbWVzIGFuZCB2YWx1ZXNcblx0XHR2YXIgaSA9IDA7XG5cdFx0ZG8ge1xuXHRcdFx0aSsrO1xuXHRcdFx0dmFyIGN1cnJlbnROYW1lVG9DaGVjayA9ICdOYW1lJyArIGk7XG5cdFx0XHR2YXIgY3VycmVudFZhbHVlID0gJ1ZhbHVlJyArIGk7XG5cdFx0XHQvLyBjaGVjayBpZiB0aGUgQ291bnRyeSBoYXMgdGhhdCBuYW1lXG5cdFx0XHRpZihjdXJyZW50TWFya2VyW2N1cnJlbnROYW1lVG9DaGVja10pIHtcblx0XHRcdFx0aWYoY3VycmVudE1hcmtlcltjdXJyZW50TmFtZVRvQ2hlY2tdID09PSBzZWxlY3RlZEZpbHRlci5OYW1lKSB7XG5cdFx0XHRcdFx0aWYoY3VycmVudE1hcmtlcltjdXJyZW50VmFsdWVdID09PSBmaWx0ZXJWYWx1ZSkge1xuXHRcdFx0XHRcdFx0bWFwLmFkZE1hcmtlcihpbmRleCwge1xuXHRcdFx0XHRcdFx0XHRsYXRMbmc6IFtjdXJyZW50TWFya2VyLkxhdGl0dWRlLCBjdXJyZW50TWFya2VyLkxvbmdpdHVkZV0sXG5cdFx0XHRcdFx0XHRcdG5hbWU6IGN1cnJlbnRNYXJrZXIuZGVzYyxcblxuXHRcdFx0XHRcdFx0XHQvLyBzZXQgdGhlIHN0eWxlIGZvciB0aGlzIG1hcmtlclxuXHRcdFx0XHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdFx0XHRcdGZpbGw6ICdncmVlbicsXG5cdFx0XHRcdFx0XHRcdFx0cjogbWFwUmFuZ2UoY3VycmVudE1hcmtlci5Db3VudCwgbWluQ291bnQsIG1heENvdW50LCBtaW5SYWRpdXMsIG1heFJhZGl1cylcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9IHdoaWxlICh0cnVlKVxuXHR9KTtcblxuXG5cdC8vIHVwZGF0ZSB0aGUgc2xpZGVyXG5cdC8vIGNoZWNrIGlmIGFueSBvZiB0aGUgdmFsdWVzIGlzIGEgbnVtYmVycywgaWYgaXQgaXMgd2UgdGhlbiB1cGRhdGUgdGhlIHNsaWRlclxuXHRpZighaXNOYU4oc2VsZWN0ZWRGaWx0ZXIuVmFsdWVzWzBdKSkge1xuXHRcdCQoJyNzbGlkZXInKS5zaG93KCk7XG5cdFx0JCgnI21pblNsaWRlcicpLnNob3coKTtcblx0XHQkKCcjbWF4U2xpZGVyJykuc2hvdygpO1xuXG5cdFx0Ly8galF1ZXJ5VUkgc2xpZGVyXG5cdFx0dmFyIHNsaWRlciA9ICQoXCIjc2xpZGVyXCIpLnNsaWRlcigpO1xuXHRcdHZhciBtaW5WYWx1ZSA9IHNlbGVjdGVkRmlsdGVyLlZhbHVlc1swXTtcblx0XHR2YXIgbWF4VmFsdWUgPSBzZWxlY3RlZEZpbHRlci5WYWx1ZXNbc2VsZWN0ZWRGaWx0ZXIuVmFsdWVzLmxlbmd0aCAtIDFdO1xuXG5cdFx0Ly8gc2V0IG1heCBhbmQgbWluIHZhbHVlIGZvciB0aGUgc2xpZGVyXG5cdFx0c2xpZGVyLnNsaWRlcihcIm9wdGlvblwiLCBcIm1pblwiLCBtaW5WYWx1ZSk7XG5cdFx0c2xpZGVyLnNsaWRlcihcIm9wdGlvblwiLCBcIm1heFwiLCBtYXhWYWx1ZSk7XG5cblx0XHQvLyBzZXQgdGhlIHRleHQgb24gdGhlIFVJXG5cdFx0JCgnI21pblNsaWRlcicpLnRleHQobWluVmFsdWUpO1xuXHRcdCQoJyNtYXhTbGlkZXInKS50ZXh0KG1heFZhbHVlKTtcblx0fSBlbHNlIHtcblx0XHQkKCcjc2xpZGVyJykuaGlkZSgpO1xuXHRcdCQoJyNtaW5TbGlkZXInKS5oaWRlKCk7XG5cdFx0JCgnI21heFNsaWRlcicpLmhpZGUoKTtcblx0fVxufVxuXG5mdW5jdGlvbiBzbGlkZXJDaGFuZ2VkKCkge1xuXHQvLyBnZXQgdGhlIG1heCBhbmQgbWluIHZhbHVlcyBmb3IgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCByYW5nZVxuXHR2YXIgY3VycmVudFJhbmdlID0gc2xpZGVyLnNsaWRlcihcIm9wdGlvblwiLCBcInZhbHVlc1wiKTtcblx0dmFyIG1pbiA9IGN1cnJlbnRSYW5nZVswXTtcblx0dmFyIG1heCA9IGN1cnJlbnRSYW5nZVsxXTtcblxuXHR2YXIgY3VycmVudEZpbHRlck5hbWUgPSBjdXJyZW50RmlsdGVyLk5hbWU7XG5cblx0Ly8gc2V0IHRoZSB0ZXh0IG9uIHRoZSBVSVxuXHQkKCcjbWluU2xpZGVyJykudGV4dChtaW4pO1xuXHQkKCcjbWF4U2xpZGVyJykudGV4dChtYXgpO1xuXG5cdC8vIGZpbHRlciB0aGUgQ291bnRyaWVzXG5cdHZhciBjb3VudHJpZXMgPSBbXTtcblx0JC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuXHRcdHZhciBmaWx0ZXJWYWx1ZUZvckNvdW50cnkgPSArY3VycmVudENvdW50cnlbY291bnRyeVZhbHVlVG9DaGVja107XG5cdFx0aWYoZmlsdGVyVmFsdWVGb3JDb3VudHJ5ID49IG1pbiAmJiBmaWx0ZXJWYWx1ZUZvckNvdW50cnkgPD0gbWF4KVxuXHRcdFx0Y291bnRyaWVzW2N1cnJlbnRDb3VudHJ5LkNvdW50cnldID0gY3VycmVudENvdW50cnkuQ291bnQ7XG5cdH0pO1xuXG5cdC8vIGRyYXcgdGhlIGNvdW50cmllcyBvbiB0aGUgbWFwXG5cdHJlbG9hZE1hcChjb3VudHJpZXMpO1xuXG5cdC8vIGZpbHRlciB0aGUgTWFya2Vyc1xuXHR2YXIgY3VycmVudENvdW50cnkgPSBqc29uQ291bnRyaWVzWzBdO1xuXHR2YXIgc2VsZWN0ZWROYW1lO1xuXHR2YXIgaSA9IDA7XG5cdGRvIHtcblx0XHRpKys7XG5cdFx0dmFyIGN1cnJlbnROYW1lVG9DaGVjayA9ICdOYW1lJyArIGk7XG5cdFx0dmFyIGN1cnJlbnRWYWx1ZSA9ICdWYWx1ZScgKyBpO1xuXHRcdC8vIGNoZWNrIGlmIHRoZSBDb3VudHJ5IGhhcyB0aGF0IG5hbWVcblx0XHRpZihjdXJyZW50Q291bnRyeVtjdXJyZW50TmFtZVRvQ2hlY2tdID09PSBjdXJyZW50RmlsdGVyTmFtZSkge1xuXHRcdFx0c2VsZWN0ZWROYW1lID0gY3VycmVudFZhbHVlO1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9IHdoaWxlICh0cnVlKTtcblxuXHQvLyBhZGQgb25seSB0aGUgbWFya2VycyB3aG8gaGF2ZSB0aGF0IGZpbHRlciB2YWx1ZVxuXHQkLmVhY2goanNvbk1hcmtlcnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50TWFya2VyKSB7XG5cdFx0Ly8gY2hlY2sgaWYgdGhlIENvdW50cnkgaGFzIHRoYXQgbmFtZVxuXHRcdGlmKGN1cnJlbnRNYXJrZXJbc2VsZWN0ZWROYW1lXSA+PSBtaW4gJiYgY3VycmVudE1hcmtlcltzZWxlY3RlZE5hbWVdIDw9IG1heCkge1xuXHRcdFx0bWFwLmFkZE1hcmtlcihpbmRleCwge1xuXHRcdFx0XHRsYXRMbmc6IFtjdXJyZW50TWFya2VyLkxhdGl0dWRlLCBjdXJyZW50TWFya2VyLkxvbmdpdHVkZV0sXG5cdFx0XHRcdG5hbWU6IGN1cnJlbnRNYXJrZXIuZGVzYyxcblxuXHRcdFx0XHQvLyBzZXQgdGhlIHN0eWxlIGZvciB0aGlzIG1hcmtlclxuXHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdGZpbGw6ICdncmVlbicsXG5cdFx0XHRcdFx0cjogbWFwUmFuZ2UoY3VycmVudE1hcmtlci5Db3VudCwgbWluQ291bnQsIG1heENvdW50LCBtaW5SYWRpdXMsIG1heFJhZGl1cylcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9KTtcbn07XG5cbmZ1bmN0aW9uIHJlYWRGaWx0ZXJzRnJvbUpTT04oaW5wdXRGaWx0ZXJzKSB7XG5cdHZhciBmaWx0ZXJzID0gW107XG5cblx0Zm9yKHZhciBpID0gMDsgaSA8IGlucHV0RmlsdGVycy52YWx1ZXMubGVuZ3RoOyBpKyspIHtcblx0XHQvLyByZWFkIHRoZSBjdXJyZW50IGZpbHRlclxuXHRcdGN1cnJlbnRGaWx0ZXIgPSBpbnB1dEZpbHRlcnMudmFsdWVzW2ldO1xuXHRcdC8vIGZpZWxkc1xuXHRcdHZhciBuYW1lID0gY3VycmVudEZpbHRlci5uYW1lO1xuXHRcdHZhciB2YWx1ZXMgPSBbXTtcblxuXHRcdGZvcih2YXIgaiA9IDA7IGogPCBjdXJyZW50RmlsdGVyLnZhbHVlcy5sZW5ndGg7IGorKylcblx0XHRcdHZhbHVlcy5wdXNoKGN1cnJlbnRGaWx0ZXIudmFsdWVzW2pdKTtcblx0XHRmaWx0ZXJzW2ldID0gbmV3IEZpbHRlcihuYW1lLCB2YWx1ZXMpO1xuXHR9XG5cdG51bUZpbHRlcnMgPSBmaWx0ZXJzLmxlbmd0aDtcblx0cmV0dXJuIGZpbHRlcnM7XG59O1xuIiwidmFyIG1hcHBpbmdNYXJrZXJzID0gW107XG52YXIgbWFwcGluZ0NvdW50cmllcyA9IFtdO1xuXG5WZWN0b3JpYWxNYXAucHJvdG90eXBlLnJlZ2lzdGVyVHJhbnNmb3JtZXIgPSBmdW5jdGlvbihqc29uTG9jYXRpb24sIGNvdW50cmllc01hcHBpbmdKc29uLCBtYXJrZXJzTWFwcGluZ0pzb24pIHtcblx0Ly8ganNvbkxvY2F0aW9uIC0gdXJsIG9mIHRoZSBuZXcganNvblxuXHQvLyBjb3VudHJpZXNNYXBwaW5nSnNvbiAtIGpzb24gdGhhdCBjb250YWlucyB0aGUganNvbiBjb3VudHJ5IG1hcHBpbmdcblx0dmFyIGNvdW50cmllc01hcHBpbmdKc29uID0gXCIuLi9tYXBwaW5nSlNPTi9tYXBwaW5nQ291bnRyaWVzU2FtcGxlLmpzb25cIjtcblx0Ly8gbWFya2Vyc01hcHBpbmdKc29uIC0ganNvbiB0aGF0IGNvbnRhaW5zIHRoZSBqc29uIG1hcmtlcnMgbWFwcGluZ1xuXHR2YXIgbWFya2Vyc01hcHBpbmdKc29uID0gXCIuLi9tYXBwaW5nSlNPTi9tYXBwaW5nTWFya2Vyc1NhbXBsZS5qc29uXCI7XG5cblx0aWYoIWNvdW50cmllc01hcHBpbmdKc29uKSB7XG5cdFx0Y29uc29sZS5lcnJvcigneW91IG11c3Qgc3BlY2lmeSBhIGNvdW50cmllcyBtYXBwaW5nIGpzb24nKTtcblx0XHRyZXR1cm47XG5cdH1cblx0aWYoIW1hcmtlcnNNYXBwaW5nSnNvbikge1xuXHRcdGNvbnNvbGUuZXJyb3IoJ3lvdSBtdXN0IHNwZWNpZnkgYSBtYXJrZXJzIG1hcHBpbmcganNvbicpO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIGdldCB0aGUgSlNPTlxuXHRqc29uTG9jYXRpb24gPSBcIi4uL2pzb24vZXNwaWQtc3BhaW4uanNvblwiO1xuXHQkLmdldEpTT04oanNvbkxvY2F0aW9uLCBmdW5jdGlvbihqc29uKSB7XG5cdFx0Ly8gcmVhZCBjb3VudHJpZXNcblx0XHRqc29uTWFwQ291bnRyaWVzKGpzb24sIGNvdW50cmllc01hcHBpbmdKc29uKTtcblx0XHQvLyByZWFkIG1hcmtlcnNcblx0XHRqc29uTWFwTWFya2Vycyhqc29uLCBtYXJrZXJzTWFwcGluZ0pzb24pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24ganNvbk1hcENvdW50cmllcyhqc29uLCBjb3VudHJpZXNNYXBwaW5nSnNvbikge1xuXHR2YXIgY291bnRyaWVzID0gW107XG5cdC8vIGFjY2VzcyB0aGUgSlNPTiBmaWxlIHRoYXQgc3BlY2lmaWVzIHRoZSBtYXBwaW5nXG5cdCQuZ2V0SlNPTihjb3VudHJpZXNNYXBwaW5nSnNvbiwgZnVuY3Rpb24oanNvbk1hcHBpbmcpIHtcblxuXHRcdC8vIGluIHRoaXMgY2FzZSB0aGUgJ2NvdW50cmllcycgYXJlIGRlZmluZWQgdGhlIHRvcCBsZXZlbFxuXHRcdC8vIGl0ZXJhdGUgdGhyb3VnaCBldmVyeSAnY291bnRyeSdcblx0XHQkLmVhY2goanNvbiwgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRKU09OKSB7XG5cdFx0XHR2YXIganNvbkNvdW50cnkgPSAneyc7XG5cdFx0XHQvLyBnZXQgdGhlIG5hbWUgb2YgdGhlIGNvdW50cnlcblx0XHRcdHZhciBuYW1lID0gY3VycmVudEpTT05banNvbk1hcHBpbmcuQ291bnRyeV07XG5cdFx0XHQvLyB0aGUgY291bnRyeSBuYW1lIG11c3QgYmUgb24gdGhlIHR3by1kaWdpdCBmb3JtYXRcblx0XHRcdC8vIGdldCB0aGUgY291bnQgLSBXSEFUIElTIFRIRSBDT1VOVD9cblx0XHRcdHZhciBjb3VudCA9IDA7XG5cdFx0XHQvL2dldCB0aGUgZGVzY3JpcHRpb24gLSBXSFQgSVMgVEhFIERFU0NSSVBUSU9OIE9GIEEgTUFSS0VSP1xuXHRcdFx0dmFyIGRlc2NyaXB0aW9uID0gJyc7XG5cdFx0XHQvKlxuXHRcdFx0V0hBVCBBUkUgVEhFIE5BTUVTPz8/XG5cdFx0XHQqL1xuXHRcdFx0Y291bnRyaWVzW2luZGV4XSA9IG5ldyBDb3VudHJ5KCcnLCBuYW1lLCBjb3VudCk7XG5cdFx0fSk7XG5cdFx0bWFwcGluZ0NvdW50cmllcyA9IGNvdW50cmllcztcblx0XHRjb25zb2xlLmxvZyhtYXBwaW5nQ291bnRyaWVzKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGpzb25NYXBNYXJrZXJzKGpzb24sIG1hcmtlcnNNYXBwaW5nSnNvbikge1xuXHR2YXIgbWFya2VycyA9IFtdO1xuXG5cdC8vIGFjY2VzcyB0aGUgSlNPTiBmaWxlIHRoYXQgc3BlY2lmaWVzIHRoZSBtYXBwaW5nXG5cdCQuZ2V0SlNPTihtYXJrZXJzTWFwcGluZ0pzb24sIGZ1bmN0aW9uKGpzb25NYXBwaW5nKSB7XG5cdFx0Ly8gaW4gdGhpcyBjYXNlIHRoZSAnbWFya2VycycgYXJlIGRlZmluZWQgdGhlIHRvcCBsZXZlbFxuXHRcdC8vIGl0ZXJhdGUgdGhyb3VnaCBldmVyeSAnbWFya2VyJ1xuXHRcdCQuZWFjaChqc29uLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEpTT04pIHtcblx0XHRcdC8vIGdldCB0aGUgbmFtZSBvZiB0aGUgY291bnRyeVxuXHRcdFx0dmFyIG5hbWUgPSBjdXJyZW50SlNPTltqc29uTWFwcGluZy5Db3VudHJ5XTtcblx0XHRcdC8vIHRoZSBjb3VudHJ5IG5hbWUgbXVzdCBiZSBvbiB0aGUgdHdvLWRpZ2l0IGZvcm1hdFxuXHRcdFx0Ly8gZ2V0IHRoZSBjb3VudCAtIFdIQVQgSVMgVEhFIENPVU5UP1xuXHRcdFx0dmFyIGNvdW50ID0gMDtcblx0XHRcdC8vIGdldCB0aGUgbGF0aXR1ZGVcblx0XHRcdHZhciBsYXRpdHVkZSA9IGN1cnJlbnRKU09OW2pzb25NYXBwaW5nLkxhdGl0dWRlXTtcblx0XHRcdC8vIGdldCB0aGUgbG9uZ2l0dWRlXG5cdFx0XHR2YXIgbG9uZ2l0dWRlID0gY3VycmVudEpTT05banNvbk1hcHBpbmcuTG9uZ2l0dWRlXTtcblx0XHRcdC8vZ2V0IHRoZSBkZXNjcmlwdGlvbiAtIFdIQVQgSVMgVEhFIERFU0NSSVBUSU9OIE9GIEEgTUFSS0VSP1xuXHRcdFx0dmFyIGRlc2NyaXB0aW9uID0gJyc7XG5cdFx0XHQvKlxuXHRcdFx0V0hBVCBBUkUgVEhFIE5BTUVTPz8/XG5cdFx0XHQqL1xuXHRcdFx0Ly8gY3JlYXRlIGEgbmV3IG1hcmtlclxuXHRcdFx0bWFya2Vyc1tpbmRleF0gPSBuZXcgTWFya2VyKCcnLCBuYW1lLCBjb3VudCwgbGF0aXR1ZGUsIGxvbmdpdHVkZSk7XG5cdFx0fSk7XG5cdFx0bWFwcGluZ01hcmtlcnMgPSBtYXJrZXJzO1xuXHRcdGNvbnNvbGUubG9nKG1hcHBpbmdNYXJrZXJzKTtcblx0fSk7XG59XG4iLCIvLyByZWRyYXcgdGhlIG1hcFxuZnVuY3Rpb24gcmVsb2FkTWFwKGNvbG9ycykge1xuICAgIC8vIGdldCB0aGUgbmFtZSBvZiB0aGUgY3VycmVudCBtYXBcbiAgICBpZiAobWFwLnBhcmFtcy5tYXAgPT0gbVR5cGUpIHtcbiAgICAgICAgLy8gbWFpbiBtYXBcbiAgICAgICAgLy8gdXBkYXRlIG1pbiBhbmQgbWF4IENvdW50IG9mIHRoZSBjb3VudHJpZXNcbiAgICAgICAgaWYgKGpzb25Db3VudHJpZXMubGVuZ3RoID4gMClcbiAgICAgICAgICAgIHJlYWRNaW5NYXgoY29sb3JzKTtcblxuICAgICAgICB2YXIgbGVnZW5kVmFyID0ge1xuICAgICAgICAgICAgdmVydGljYWw6IHRydWUsXG4gICAgICAgICAgICAvL3RpdGxlOiAnQ291bnRyaWVzJyxcbiAgICAgICAgfTtcblxuXG4gICAgICAgIHZhciBtYXJrZXJzV2l0aExlZ2VuZCA9IHtcbiAgICAgICAgICAgIHNjYWxlOiBbbWluQ29sb3JNYXAsIG1heENvbG9yTWFwXSxcbiAgICAgICAgICAgIC8vIHJhbmdlIG9mIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggdGhlIENvdW50XG4gICAgICAgICAgICB2YWx1ZXM6IFttaW5Db3VudCwgbWF4Q291bnRdLFxuICAgICAgICAgICAgLy8gYWRkIGEgbGVnZW5kXG4gICAgICAgICAgICBsZWdlbmQ6IGxlZ2VuZFZhclxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBtYXJrZXJzV2l0aG91dExlZ2VuZCA9IHtcbiAgICAgICAgICAgIHNjYWxlOiBbbWluQ29sb3JNYXAsIG1heENvbG9yTWFwXSxcbiAgICAgICAgICAgIC8vIHJhbmdlIG9mIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggdGhlIENvdW50XG4gICAgICAgICAgICB2YWx1ZXM6IFttaW5Db3VudCwgbWF4Q291bnRdXG4gICAgICAgIH07XG5cbiAgICAgICAgZmluYWxNYXJrZXJzSW5NYXAgPSBtYXJrZXJzV2l0aExlZ2VuZDtcbiAgICAgICAgaWYgKGRhdGFUeXBlID09ICdtYXJrZXJzJykge1xuICAgICAgICAgICAgZmluYWxNYXJrZXJzSW5NYXAgPSBtYXJrZXJzV2l0aG91dExlZ2VuZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGVyYXNlIHRoZSBtYXBcbiAgICAgICAgJChcIiNcIiArIG1EaXYpLmVtcHR5KCk7XG5cbiAgICAgICAgbWFwID0gbmV3IGp2bS5NYXAoe1xuICAgICAgICAgICAgbWFwOiBtVHlwZSxcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYmFja2dyb3VuZCxcbiAgICAgICAgICAgIGNvbnRhaW5lcjogJCgnIycgKyBtRGl2KSxcbiAgICAgICAgICAgIG9uUmVnaW9uQ2xpY2s6IGZ1bmN0aW9uKGUsIGNvZGUpIHtcbiAgICAgICAgICAgICAgICAvLyByZWxvYWQgYSBuZXcgbWFwXG4gICAgICAgICAgICAgICAgY291bnRyeUNvZGUgPSBjb2RlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgLy8gd2FpdFRvQWRkTWFya2VycygxMDApO1xuICAgICAgICAgICAgICAgIHZhciBuZXdNYXAgPSBjb3VudHJ5Q29kZSArICdfbWlsbF9lbic7XG4gICAgICAgICAgICAgICAgLy8gc3dpdGggdG8gbmV3IG1hcFxuICAgICAgICAgICAgICAgIHN3aXRjaE1hcChuZXdNYXApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uTWFya2VyVGlwU2hvdzogZnVuY3Rpb24oZSwgbGFiZWwsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpbmFsVG9vbHRpcCA9IGJ1aWxkTWFya2VyVG9vbHRpcChqc29uTWFya2VycywgaW5kZXgpO1xuICAgICAgICAgICAgICAgIGxhYmVsLmh0bWwoZmluYWxUb29sdGlwKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblJlZ2lvblRpcFNob3c6IGZ1bmN0aW9uKGUsIGNvdW50cnlOYW1lLCBjb2RlKSB7XG4gICAgICAgICAgICAgICAgLy8gY29kZSBjb250YWlucyB0aGUgY29kZSBvZiB0aGUgY291bnRyeSAoaS5lLiwgUFQsIEVTLCBGUiwgZXRjKVxuICAgICAgICAgICAgICAgIC8vIHNob3cgdGhlIENvdW50IGFzc29jaWF0ZWQgdG8gdGhhdCBDb3VudHJ5IC0gbG9vayBmb3IgdGhlIGNvdW50cnlcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRDb3VudHJ5ID0gLTE7XG4gICAgICAgICAgICAgICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnkuQ291bnRyeSA9PT0gY29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDb3VudHJ5ID0gY3VycmVudENvdW50cnk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRDb3VudHJ5ICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmaW5hbFRvb2x0aXAgPSBidWlsZENvdW50cnlUb29sdGlwKGNvdW50cnlOYW1lLCBzZWxlY3RlZENvdW50cnkpO1xuICAgICAgICAgICAgICAgICAgICBjb3VudHJ5TmFtZS5odG1sKGZpbmFsVG9vbHRpcCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGNvdW50cnlOYW1lLmh0bWwoY291bnRyeU5hbWUuaHRtbCgpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXJpZXM6IHtcbiAgICAgICAgICAgICAgICBtYXJrZXJzOiBbZmluYWxNYXJrZXJzSW5NYXBdLFxuICAgICAgICAgICAgICAgIHJlZ2lvbnM6IFt7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1pbiBhbmQgbWF4IHZhbHVlcyBvZiBjb3VudFxuICAgICAgICAgICAgICAgICAgICBzY2FsZTogW21pbkNvbG9yTWFwLCBtYXhDb2xvck1hcF0sXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogJ2ZpbGwnLFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgY29sb3JzIGFyZSAnc3RyZXRjaGVkJyB0byBmaWxsIHRoZSBzY2FsZVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IGNvbG9yc1xuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHN1Ym1hcFxuICAgICAgICAvLyB1cGRhdGUgbWluIGFuZCBtYXggQ291bnQgb2YgdGhlIGNvdW50cmllc1xuICAgICAgICBpZiAoanNvbkNvdW50cmllcy5sZW5ndGggPiAwKVxuICAgICAgICAgICAgcmVhZE1pbk1heChjb2xvcnMpO1xuXG4gICAgICAgIC8vIGVyYXNlIHRoZSBtYXBcbiAgICAgICAgJChcIiNcIiArIG1EaXYpLmVtcHR5KCk7XG4gICAgICAgIHJlbW92ZVRvb2x0aXAoKTtcbiAgICAgICAgc3dpdGNoTWFwKG1hcFR5cGUpO1xuICAgIH1cblxuXG59XG5cbmZ1bmN0aW9uIHJlbW92ZVRvb2x0aXAoKSB7XG4gICAgLy8gZXJhc2UgdGhlIHByZXZpb3VzIG1hcCB0b29sdGlwXG4gICAgJCgnLmp2ZWN0b3JtYXAtdGlwJykucmVtb3ZlKCk7XG59XG5cbmZ1bmN0aW9uIHN3aXRjaE1hcChuZXdNYXApIHtcbiAgICAvLyB0aGlzIGZ1bmN0aW9uIGdldHMgY2FsbGVkIHdoZW4gYSBjb3VudHJ5IG9uIHRoZSB3b3JsZCBtYXAgaXMgY2xpY2tlZFxuICAgIC8vIGVyYXNlIHRoZSBwcmV2aW91cyBtYXBcbiAgICAkKCcjJyArIG1EaXYpLmVtcHR5KCk7XG4gICAgcmVtb3ZlVG9vbHRpcCgpO1xuXG4gICAgdmFyIHJlZ2lvbkNvbG9ycyA9IGdlbmVyYXRlQ29sb3JzRm9yVGhlUmVnaW9ucyhuZXdNYXApO1xuXG4gICAgbWFwID0gbmV3IGp2bS5NYXAoe1xuICAgICAgICBtYXA6IG5ld01hcCxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBiYWNrZ3JvdW5kLFxuICAgICAgICBjb250YWluZXI6ICQoJyMnICsgbURpdiksXG4gICAgICAgIG9uTWFya2VyVGlwU2hvdzogZnVuY3Rpb24oZSwgbGFiZWwsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgZmluYWxUb29sdGlwID0gYnVpbGRNYXJrZXJUb29sdGlwKGpzb25NYXJrZXJzLCBpbmRleCk7XG4gICAgICAgICAgICBsYWJlbC5odG1sKGZpbmFsVG9vbHRpcCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uUmVnaW9uVGlwU2hvdzogZnVuY3Rpb24oZSwgcmVnaW9uTmFtZSwgY29kZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coY29kZSk7XG4gICAgICAgICAgICB2YXIgY3VycmVudE1hcCA9IG5ld01hcC5zcGxpdCgnXycpWzBdLnRvVXBwZXJDYXNlKClcbiAgICAgICAgICAgICAgICAvLyBjb2RlIGNvbnRhaW5zIHRoZSBjb2RlIG9mIHRoZSByZWdpb24gKGkuZS4sIFBULTEsIEVTLU0sIGV0YylcbiAgICAgICAgICAgICAgICAvLyBzaG93IHRoZSBDb3VudCBhc3NvY2lhdGVkIHRvIHRoYXQgUmVnaW9uIC0gbG9vayBmb3IgdGhlIFJlZ2lvblxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ291bnRyeSA9IC0xO1xuICAgICAgICAgICAgLy8gZmluZCB0aGUgY29ycmVzcG9uZGluZyBjb3VudHJ5XG4gICAgICAgICAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5LkNvdW50cnkgPT0gY3VycmVudE1hcCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENvdW50cnkgPSBjdXJyZW50Q291bnRyeTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIHNlbGVjdGVkIHJlZ2lvbiBoYXMgYW55IGRhdGEgaW5zaWRlIHRoYXQgY291bnRyeVxuICAgICAgICAgICAgdmFyIHJlZ2lvbkZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRSZWdpb247XG4gICAgICAgICAgICAkLmVhY2gobWFwLnJlZ2lvbnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50UmVnaW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRSZWdpb24ubmFtZSA9PSBjb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUmVnaW9uID0gY3VycmVudFJlZ2lvbjtcbiAgICAgICAgICAgICAgICAgICAgcmVnaW9uRm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocmVnaW9uRm91bmQpIHtcbiAgICAgICAgICAgICAgICByZWdpb25OYW1lLmh0bWwoYnVpbGRSZWdpb25Ub29sdGlwKHNlbGVjdGVkUmVnaW9uKSk7XG4gICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICByZWdpb25OYW1lLmh0bWwocmVnaW9uTmFtZS5odG1sKCkpO1xuICAgICAgICB9LFxuICAgICAgICBzZXJpZXM6IHtcbiAgICAgICAgICAgIG1hcmtlcnM6IFt7XG4gICAgICAgICAgICAgICAgLy8gY2hhbmdlIHRoZSBzY2FsZSB0byBmaXQgdGhlIGN1cnJlbnQgbWluIGFuZCBtYXggdmFsdWVzXG4gICAgICAgICAgICAgICAgc2NhbGU6IFttaW5Db2xvck1hcCwgbWF4Q29sb3JNYXBdLFxuICAgICAgICAgICAgICAgIHZhbHVlczogW21pbkNvdW50LCBtYXhDb3VudF0sXG4gICAgICAgICAgICAgICAgbGVnZW5kOiB7XG4gICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsOiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICByZWdpb25zOiBbe1xuICAgICAgICAgICAgICAgIC8vIG1pbiBhbmQgbWF4IHZhbHVlcyBvZiBjb3VudFxuICAgICAgICAgICAgICAgIHNjYWxlOiBbbWluQ29sb3JNYXAsIG1heENvbG9yTWFwXSxcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICdmaWxsJyxcbiAgICAgICAgICAgICAgICAvLyB0aGUgY29sb3JzIGFyZSAnc3RyZXRjaGVkJyB0byBmaWxsIHRoZSBzY2FsZVxuICAgICAgICAgICAgICAgIHZhbHVlczogcmVnaW9uQ29sb3JzXG4gICAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBhZGQgYmFjayBidXR0b25cbiAgICAkKCcjbXlfbWFwJykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwianZlY3Rvcm1hcC1nb2JhY2tcIj5CYWNrPC9kaXY+Jyk7XG4gICAgJChcIi5qdmVjdG9ybWFwLWdvYmFja1wiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gZXJhc2UgdGhlIHByZXZpb3VzIG1hcFxuICAgICAgICAkKCcjJyArIG1EaXYpLmVtcHR5KCk7XG4gICAgICAgIHJlbW92ZVRvb2x0aXAoKTtcbiAgICAgICAgLy8gd2hlbiB0aGUgbGVmdCBidXR0b24gaXMgY2xpY2tlZFxuICAgICAgICAvLyByZXR1cm4gdG8gdGhlIG1haW4gbWFwXG4gICAgICAgIG1hcCA9IG5ldyBqdm0uTWFwKHtcbiAgICAgICAgICAgIGNvbnRhaW5lcjogJCgnIycgKyBtRGl2KSxcbiAgICAgICAgICAgIC8vIGNvbmZpZ3VyYXRpb24gb2YgdGhlIG1haW4gbWFwXG4gICAgICAgICAgICAvLyB0eXBlIG9mIG1hcCAod29ybGQsIEV1cm9wZSwgVVNBLCBldGMpXG4gICAgICAgICAgICBtYXA6IG1UeXBlLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBiYWNrZ3JvdW5kLFxuICAgICAgICAgICAgLy8gdHJpZ2dlcmVkIHdoZW4gYSBtYXJrZXIgaXMgaG92ZXJlZFxuICAgICAgICAgICAgb25SZWdpb25DbGljazogZnVuY3Rpb24oZSwgY29kZSkge1xuICAgICAgICAgICAgICAgIC8vIHJlbG9hZCBhIG5ldyBtYXBcbiAgICAgICAgICAgICAgICBjb3VudHJ5Q29kZSA9IGNvZGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAvLyB3YWl0VG9BZGRNYXJrZXJzKDEwMCk7XG4gICAgICAgICAgICAgICAgdmFyIG5ld01hcCA9IGNvdW50cnlDb2RlICsgJ19taWxsX2VuJztcbiAgICAgICAgICAgICAgICAvLyBzd2l0aCB0byBuZXcgbWFwXG4gICAgICAgICAgICAgICAgc3dpdGNoTWFwKG5ld01hcCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25NYXJrZXJUaXBTaG93OiBmdW5jdGlvbihlLCBsYWJlbCwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAvLyBzZWxlY3Qgd2hhdCB0ZXh0IHRvIGRpc3BsYXkgd2hlbiBtYXJrZXIgaXMgaG92ZXJlZFxuICAgICAgICAgICAgICAgIHZhciBmaW5hbFRvb2x0aXAgPSBidWlsZE1hcmtlclRvb2x0aXAoanNvbk1hcmtlcnMsIGluZGV4KTtcbiAgICAgICAgICAgICAgICBsYWJlbC5odG1sKGZpbmFsVG9vbHRpcCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gdHJpZ2dlcmVkIHdoZW4gYSByZWdpb24gaXMgaG92ZXJlZFxuICAgICAgICAgICAgb25SZWdpb25UaXBTaG93OiBmdW5jdGlvbihlLCBjb3VudHJ5TmFtZSwgY29kZSkge1xuICAgICAgICAgICAgICAgIC8vIGNvZGUgY29udGFpbnMgdGhlIGNvZGUgb2YgdGhlIGNvdW50cnkgKGkuZS4sIFBULCBFUywgRlIsIGV0YylcbiAgICAgICAgICAgICAgICAvLyBzaG93IHRoZSBDb3VudCBhc3NvY2lhdGVkIHRvIHRoYXQgQ291bnRyeSAtIGxvb2sgZm9yIHRoZSBjb3VudHJ5XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ291bnRyeSA9IC0xO1xuICAgICAgICAgICAgICAgICQuZWFjaChqc29uQ291bnRyaWVzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5LkNvdW50cnkgPT09IGNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ291bnRyeSA9IGN1cnJlbnRDb3VudHJ5O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ291bnRyeSAhPSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBmaW5kIG9jY3VycmVuY2Ugb2Ygc2V2ZXJhbCBzdHJpbmdzIGluc2lkZSB0aGUgdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmFsVG9vbHRpcCA9IGJ1aWxkQ291bnRyeVRvb2x0aXAoY291bnRyeU5hbWUsIHNlbGVjdGVkQ291bnRyeSk7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50cnlOYW1lLmh0bWwoZmluYWxUb29sdGlwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgY291bnRyeU5hbWUuaHRtbChjb3VudHJ5TmFtZS5odG1sKCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlcmllczoge1xuICAgICAgICAgICAgICAgIG1hcmtlcnM6IFt7XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlOiBbbWluQ29sb3JNYXAsIG1heENvbG9yTWFwXSxcbiAgICAgICAgICAgICAgICAgICAgLy8gcmFuZ2Ugb2YgdmFsdWVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgQ291bnRcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBbbWluQ291bnQsIG1heENvdW50XSxcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGEgbGVnZW5kXG4gICAgICAgICAgICAgICAgICAgIGxlZ2VuZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWw6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgIHJlZ2lvbnM6IFt7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1pbiBhbmQgbWF4IHZhbHVlcyBvZiBjb3VudFxuICAgICAgICAgICAgICAgICAgICBzY2FsZTogW21pbkNvbG9yTWFwLCBtYXhDb2xvck1hcF0sXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogJ2ZpbGwnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IGF1eENvbG9yc1xuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGFkZCB0aGUgbWFya2VzIHRvIHRoZSBtYXBcbiAgICAgICAgaWYgKHRoZXJlQXJlTWFya2Vycykge1xuICAgICAgICAgICAgYWRkTWFya2Vyc1RvTWFwKCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGFkZCB0aGUgbWFya2Vyc1xuICAgIGlmICh0aGVyZUFyZU1hcmtlcnMpIHtcbiAgICAgICAgYWRkTWFya2Vyc1RvTWFwKCk7XG4gICAgfVxuXG4gICAgaWYgKGpzb25Db3VudHJpZXMpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhlIHNlbGVjdGVkIG1hcCBoYXMgYW55IHJlZ2lvbiB0byBoaWdobGlnaHRcbiAgICAgICAgLy8gYWRkUmVnaW9uc1RvTWFwKG5ld01hcClcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFkZE1hcmtlcnNUb01hcCgpIHtcbiAgICB2YXIgbWFya2Vyc0pTT05BcnJheSA9IFtdO1xuICAgICQuZWFjaChmaWx0ZXJlZE1hcmtlcnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50TWFya2VyKSB7XG4gICAgICAgIHZhciBjdXJyZW50TWFya2VySlNPTiA9IHtcbiAgICAgICAgICAgIGxhdExuZzogW2N1cnJlbnRNYXJrZXIuTGF0aXR1ZGUsIGN1cnJlbnRNYXJrZXIuTG9uZ2l0dWRlXSxcbiAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRNYXJrZXIuZGVzYyxcbiAgICAgICAgICAgIC8vIHNldCB0aGUgc3R5bGUgZm9yIHRoaXMgbWFya2VyXG4gICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgIGZpbGw6ICdyZWQnLFxuICAgICAgICAgICAgICAgIHI6IG1hcFJhbmdlKGN1cnJlbnRNYXJrZXIuQ291bnQsIG1pbkNvdW50LCBtYXhDb3VudCwgbWluUmFkaXVzLCBtYXhSYWRpdXMpLFxuICAgICAgICAgICAgICAgIGltYWdlOiAnLi4vaW1nL2JsdWUtaWNvbi5wbmcnXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIG1hcmtlcnNKU09OQXJyYXkucHVzaChjdXJyZW50TWFya2VySlNPTik7XG4gICAgfSk7XG4gICAgbWFwLmFkZE1hcmtlcnMobWFya2Vyc0pTT05BcnJheSk7XG59XG4iLCIvLyBNYXJrZXIgZGVmaW5pdGlvblxudmFyIE1hcmtlciA9IGZ1bmN0aW9uIChtYXJrZXJPYmplY3QsbmFtZSwgY291bnQsIGxhdGl0dWRlLCBsb25naXR1ZGUpIHtcblx0aWYobWFya2VyT2JqZWN0ID09ICcnKVxuXHR7XG5cdFx0dGhpcy5Db3VudHJ5ID0gbmFtZTtcblx0XHR0aGlzLkNvdW50ID0gK2NvdW50O1xuXHRcdHRoaXMuVmFyID0gJyc7XG5cdFx0dGhpcy5MYXRpdHVkZSA9IGxhdGl0dWRlO1xuXHRcdHRoaXMuTG9uZ2l0dWRlID0gbG9uZ2l0dWRlO1xuXHRcdC8vIFRPRE8gLSBhZGQgZXNjcmlwdGlvbiB0byBhIE1hcmtlciBmcm9tIHRoZSBKU09OIGZpbGVcblx0XHR0aGlzLmRlc2MgPSAnYWJjJztcblx0fVxuXHRlbHNlIHtcblx0XHQvLyB0cnkgdG8gcmVhZCBhbGwgdGhlIG5hbWVzIGFuZCB2YWx1ZXNcblx0XHR2YXIgaGFzTmFtZSA9IHRydWU7XG5cdFx0dmFyIGkgPSAwO1xuXHRcdGRvIHtcblx0XHRcdGkrKztcblx0XHRcdHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnTmFtZScgKyBpO1xuXHRcdFx0dmFyIGN1cnJlbnRWYWx1ZSA9ICdWYWx1ZScgKyBpO1xuXHRcdFx0aWYoIW1hcmtlck9iamVjdFtjdXJyZW50TmFtZVRvQ2hlY2tdKSB7XG5cdFx0XHRcdGhhc05hbWUgPSBmYWxzZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXNbY3VycmVudE5hbWVUb0NoZWNrXSA9IG1hcmtlck9iamVjdFtjdXJyZW50TmFtZVRvQ2hlY2tdO1xuXHRcdFx0XHR0aGlzW2N1cnJlbnRWYWx1ZV0gPSBtYXJrZXJPYmplY3RbY3VycmVudFZhbHVlXTtcblx0XHRcdH1cblx0XHR9IHdoaWxlIChoYXNOYW1lKVxuXG5cdFx0dGhpcy5Db3VudHJ5ID0gbWFya2VyT2JqZWN0LkNvdW50cnk7XG5cdFx0dGhpcy5Db3VudCA9ICttYXJrZXJPYmplY3QuQ291bnQ7XG5cdFx0dGhpcy5WYXIgPSBtYXJrZXJPYmplY3QuVmFyO1xuXHRcdHRoaXMuTGF0aXR1ZGUgPSBtYXJrZXJPYmplY3QuTGF0aXR1ZGU7XG5cdFx0dGhpcy5Mb25naXR1ZGUgPSBtYXJrZXJPYmplY3QuTG9uZ2l0dWRlO1xuXHRcdC8vIFRPRE8gLSBhZGQgZXNjcmlwdGlvbiB0byBhIE1hcmtlciBmcm9tIHRoZSBKU09OIGZpbGVcblx0XHR0aGlzLmRlc2MgPSAnYWJjJztcblx0fVxufTtcblxuLy8gcmVhZCB0aGUgbWFya2VycyBmcm9tIGEgSlNPTiBmaWxlXG5mdW5jdGlvbiByZWFkTWFya2Vyc0Zyb21KU09OKGpzb25NYXJrZXJzKSB7XG5cdHZhciBtYXJrZXJzID0gW107XG5cblx0bWluQ291bnQgPSBJbmZpbml0eTtcblx0bWF4Q291bnQgPSAtSW5maW5pdHk7XG5cblx0JC5lYWNoKGpzb25NYXJrZXJzLCBmdW5jdGlvbiAoaW5kZXgsIGN1cnJlbnRKU09OTWFya2VyKSB7XG5cdFx0bWFya2Vyc1tpbmRleF0gPSBuZXcgTWFya2VyKGN1cnJlbnRKU09OTWFya2VyKTtcblx0XHR2YXIgY3VycmVudENvdW50VmFsdWUgPSBtYXJrZXJzW2luZGV4XS5Db3VudDtcblxuXHRcdGlmKGN1cnJlbnRDb3VudFZhbHVlID4gbWF4Q291bnQpIHtcblx0XHRcdG1heENvdW50ID0gY3VycmVudENvdW50VmFsdWU7XG5cdFx0fVxuXHRcdGlmKGN1cnJlbnRDb3VudFZhbHVlIDwgbWluQ291bnQpXG5cdFx0XHRtaW5Db3VudCA9IGN1cnJlbnRDb3VudFZhbHVlO1xuXHR9KTtcblx0cmV0dXJuIG1hcmtlcnM7XG59XG4iLCJmdW5jdGlvbiBmaWx0ZXIoaW5wdXRBcmdzKSB7XG5cbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0QXJncylcbiAgICB2YXIgbnVtYmVyS2V5cyA9IGtleXMubGVuZ3RoO1xuICAgIHZhciB2YWxpZEZpbHRlcnMgPSAwO1xuXG4gICAgdmFyIGNvdW50cmllc0J5RmlsdGVyID0gbmV3IEFycmF5KCk7XG4gICAgdmFyIG1hcmtlcnNCeUZpbHRlciA9IG5ldyBBcnJheSgpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBudW1iZXJLZXlzOyBpKyspIHtcbiAgICAgICAgY291bnRyaWVzQnlGaWx0ZXJbaV0gPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgbWFya2Vyc0J5RmlsdGVyW2ldID0gbmV3IEFycmF5KCk7XG4gICAgfVxuXG4gICAgLy8gY2hlY2sgaWYgYW55IG9mIHRoZSBuYW1lcyBpcyBhbGwgKHJlc2V0IGFsbCBhcHBsaWVkIGZpbHRlcnNcdClcbiAgICB2YXIgZXhpdCA9IGZhbHNlO1xuICAgICQuZWFjaChrZXlzLCBmdW5jdGlvbihpbmRleCwgZmlsdGVyTmFtZSkge1xuICAgICAgICBpZiAoZmlsdGVyTmFtZS50b0xvd2VyQ2FzZSgpID09ICdhbGwnKSB7XG4gICAgICAgICAgICBleGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIHJlbG9hZHMgdGhlIG9yaWdpbmFsIG1hcmtlcnMgYW5kIGNvdW50cmllcyBvbiB0aGUgbWFwXG4gICAgICAgICAgICByZXNldEZpbHRlcnMoKTtcbiAgICAgICAgICAgIC8vIGVyYXNlIHRoZSB0ZXh0IGZyb20gdGhlIGZpbHRlcnMgYm94XG4gICAgICAgICAgICByZXNldEZpbHRlcnNCb3goKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChleGl0KVxuICAgICAgICByZXR1cm47XG5cbiAgICAvLyBmb3IgZXZlcnkga2V5L2ZpbHRlclxuICAgICQuZWFjaChrZXlzLCBmdW5jdGlvbihpbmRleCwgZmlsdGVyTmFtZSkge1xuICAgICAgICAvLyBjaGVjayBpZiB0aGUgZmlsdGVyTmFtZSBpcyB2YWxpZFxuICAgICAgICBpZiAoIWNoZWNrRmlsdGVyTmFtZUlzVmFsaWQoZmlsdGVyTmFtZSkpIHtcbiAgICAgICAgICAgIC8vIGludmFsaWQgZmlsdGVyIG5hbWVcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJbnZhbGlkIGZpbHRlciBuYW1lISgnICsgZmlsdGVyTmFtZSArICcpJyk7XG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGdldCB0aGUgZmlsdGVyIHZhbHVlIChjYW4gY29udGFpbiBlbnVtZXJhdGlvbiBhbmQgcmFuZ2UpXG4gICAgICAgICAgICAvLyAnMjAwNC0yMDA2JyAsICdGLE0nLCBldGNcbiAgICAgICAgICAgIHZhciBmaWx0ZXJWYWx1ZSA9IGlucHV0QXJnc1tmaWx0ZXJOYW1lXTtcbiAgICAgICAgICAgIC8vIGdldCBhbGwgc2luZ2xlIGZpbHRlciB2YWx1ZXNcbiAgICAgICAgICAgIHZhciBmaW5hbFBhcnRzID0gZ2V0QWxsRmlsdGVyVmFsdWVzKGZpbHRlclZhbHVlKTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coZmluYWxQYXJ0cyk7XG4gICAgICAgICAgICB2YWxpZEZpbHRlcnMrKztcblxuICAgICAgICAgICAgLy8gZm9yIGV2ZXJ5IHNpbmdsZSB2YWx1ZSBnZXQgYWxsIHRoZSBjb3VudHJ1ZXMgYW5kIG1hcmtlcnNcbiAgICAgICAgICAgICQuZWFjaChmaW5hbFBhcnRzLCBmdW5jdGlvbihpLCBwYXJ0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrUmV0dXJuID0gY2hlY2tXaGF0Q291bnRyaWVzTWFya2Vyc1RvQWRkKGZpbHRlck9iamVjdCwgcGFydCk7XG4gICAgICAgICAgICAgICAgdmFyIGNvdW50cmllc0F1eCA9IGNoZWNrUmV0dXJuWzBdO1xuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJzQXV4ID0gY2hlY2tSZXR1cm5bMV07XG4gICAgICAgICAgICAgICAgLy8gYWRkIGV2ZXJ5IGNvdW50cnkgdG8gdGhlIGxpc3Qgb2YgY291bnRyaWVzQnlGaWx0ZXJcbiAgICAgICAgICAgICAgICAvLyBhZGQgZXZlcnkgbWFya2VyIHRvIHRoZSBsaXN0IG9mIG1hcmtlcnNCeUZpbHRlclxuICAgICAgICAgICAgICAgICQuZWFjaChPYmplY3Qua2V5cyhjb3VudHJpZXNBdXgpLCBmdW5jdGlvbihqLCBjdXJyZW50S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBjb2xvcnMgdGhhdCBhcmUgcmV0dXJuZWQgYXJlIGluIGEganNvbiBmb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleVZhbHVlID0gY291bnRyaWVzQXV4W2N1cnJlbnRLZXldO1xuICAgICAgICAgICAgICAgICAgICBjb3VudHJpZXNCeUZpbHRlcltpbmRleF1bY3VycmVudEtleV0gPSBrZXlWYWx1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIG1hcmtlcnNcbiAgICAgICAgICAgICAgICAkLmVhY2gobWFya2Vyc0F1eCwgZnVuY3Rpb24oaiwgY3VycmVudE1hcmtlcikge1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXJzQnlGaWx0ZXJbaW5kZXhdLnB1c2goY3VycmVudE1hcmtlcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gZ2V0IHRoZSBmaW5hbCBjb3VudHJpZXNcbiAgICB2YXIgZmluYWxDb3VudHJpZXMgPSBbXTtcbiAgICBpZiAoY291bnRyaWVzQnlGaWx0ZXIubGVuZ3RoID4gMCkge1xuICAgICAgICBmaW5hbENvdW50cmllcyA9IGNvdW50cmllc0J5RmlsdGVyWzBdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50cmllc0J5RmlsdGVyLmxlbmd0aCAtIDE7IGkrKylcbiAgICAgICAgICAgIGZpbmFsQ291bnRyaWVzID0gZ2V0Q291bnRyaWVzSW50ZXJzZWN0aW9uKGZpbmFsQ291bnRyaWVzLCBjb3VudHJpZXNCeUZpbHRlcltpICsgMV0pO1xuICAgIH1cblxuICAgIC8vIGFkZCBjb3VudHJpZXMgdG8gTWFwXG4gICAgcmVsb2FkTWFwKGZpbmFsQ291bnRyaWVzKTtcblxuICAgIC8vIGdldCB0aGUgZmluYWwgbWFya2Vyc1xuICAgIGZpbHRlcmVkTWFya2VycyA9IFtdO1xuICAgIGlmIChtYXJrZXJzQnlGaWx0ZXIubGVuZ3RoID4gMCkge1xuICAgICAgICBmaWx0ZXJlZE1hcmtlcnMgPSBtYXJrZXJzQnlGaWx0ZXJbMF07XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFya2Vyc0J5RmlsdGVyLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgZmlsdGVyZWRNYXJrZXJzID0gZ2V0TWFya2Vyc0ludGVyc2VjdGlvbihmaWx0ZXJlZE1hcmtlcnMsIG1hcmtlcnNCeUZpbHRlcltpICsgMV0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gYWRkIG1hcmtlcnMgdG8gdGhlIG1hcFxuICAgIGFkZE1hcmtlcnNUb01hcCgpO1xufVxuXG5mdW5jdGlvbiBnZXRNYXJrZXJzSW50ZXJzZWN0aW9uKG1hcmtlcnNHcm91cDEsIG1hcmtlcnNHcm91cDIpIHtcbiAgICB2YXIgbWFya2VycyA9IFtdO1xuXG4gICAgLy8gbWFya2VycyB0aGF0IGJlbG9uZyB0byB0aGUgdHdvIGdyb3Vwc1xuICAgICQuZWFjaChtYXJrZXJzR3JvdXAxLCBmdW5jdGlvbihpbmRleCwgbWFya2VyMSkge1xuICAgICAgICAvLyBjaGVjayBpZiB0aGlzIG1hcmtlciBuYW1lIGlzIGluc2lkZSB0aGUgc2Vjb25kIGdyb3VwXG4gICAgICAgIHZhciBtYXJrZXIxQ291bnRyeSA9IG1hcmtlcjEuQ291bnRyeTtcbiAgICAgICAgJC5lYWNoKG1hcmtlcnNHcm91cDIsIGZ1bmN0aW9uKGluZGV4LCBtYXJrZXIyKSB7XG4gICAgICAgICAgICB2YXIgbWFya2VyMkNvdW50cnkgPSBtYXJrZXIyLkNvdW50cnk7XG4gICAgICAgICAgICBpZiAobWFya2VyMUNvdW50cnkgPT0gbWFya2VyMkNvdW50cnkpXG4gICAgICAgICAgICAgICAgbWFya2Vycy5wdXNoKG1hcmtlcjEpXG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBtYXJrZXJzO1xufVxuXG5mdW5jdGlvbiBnZXRDb3VudHJpZXNJbnRlcnNlY3Rpb24oY291bnRyaWVzR3JvdXAxLCBjb3VudHJpZXNHcm91cDIpIHtcbiAgICAvLyBjb3VudHJpZXMgdGhhdCBiZWxvbmcgdG8gdGhlIHR3byBncm91cHNcbiAgICB2YXIgY291bnRyaWVzID0gW107XG5cbiAgICAkLmVhY2goT2JqZWN0LmtleXMoY291bnRyaWVzR3JvdXAxKSwgZnVuY3Rpb24oaW5kZXgsIGNvdW50cnlOYW1lMSkge1xuICAgICAgICAvLyBjaGVjayBpZiB0aGlzIGNvdW50cnkgbmFtZSBpcyBpbnNpZGUgdGhlIHNlY29uZCBncm91cFxuICAgICAgICAkLmVhY2goT2JqZWN0LmtleXMoY291bnRyaWVzR3JvdXAyKSwgZnVuY3Rpb24oaW5kZXgsIGNvdW50cnlOYW1lMikge1xuICAgICAgICAgICAgaWYgKGNvdW50cnlOYW1lMSA9PSBjb3VudHJ5TmFtZTIpXG4gICAgICAgICAgICAgICAgY291bnRyaWVzW2NvdW50cnlOYW1lMV0gPSBjb3VudHJpZXNHcm91cDFbY291bnRyeU5hbWUxXTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvdW50cmllcztcbn1cblxuZnVuY3Rpb24gYXBwbHlNdWx0aXBsZUZpbHRlcnNQcm9ncmFtYXR0aWNhbGx5KGZpbHRlcnNUb0FwcGx5KSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhmaWx0ZXJzVG9BcHBseSlcbiAgICB2YXIgbnVtRmlsdGVyc1RvQXBwbHkgPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgY291bnRyaWVzSGF2ZUZpbHRlciA9IFtdO1xuICAgIHZhciBtYXJrZXJzSGF2ZUZpbHRlciA9IFtdO1xuXG4gICAgLy8gZm9yIGV2ZXJ5IGtleVxuICAgICQuZWFjaChrZXlzLCBmdW5jdGlvbihpbmRleCwgZmlsdGVyTmFtZSkge1xuICAgICAgICB2YXIgZmlsdGVyVmFsdWUgPSBmaWx0ZXJzVG9BcHBseVtmaWx0ZXJOYW1lXTtcbiAgICB9KTtcbiAgICB2YXIgY29sb3JzID0gW107XG5cbiAgICAvLyByZW1vdmUgYWxsIG1hcmtlcnMgZnJvbSB0aGUgbWFwXG4gICAgbWFwLnJlbW92ZUFsbE1hcmtlcnMoKTtcblxuICAgIC8vIGZvciBlYWNoIG9mIHRoZSBjb3VudHJpZXNcbiAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oY291bnRyeUluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuICAgICAgICAvLyBzZXQgdG8gMCB0aGUgbnVtYmVyIG9mIGZpbHRlcnNcbiAgICAgICAgY291bnRyaWVzSGF2ZUZpbHRlcltjb3VudHJ5SW5kZXhdID0gMDtcbiAgICAgICAgLy8gY2hlY2sgaWYgaXQgaGFzIHRoZSBuZWVkZWQgdmFsdWVzXG4gICAgICAgICQuZWFjaChrZXlzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEZpbHRlck5hbWUpIHtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnROYW1lVG9DaGVjayA9ICdOYW1lJyArIGk7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9ICdWYWx1ZScgKyBpO1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBDb3VudHJ5IGhhcyB0aGF0IG5hbWVcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRDb3VudHJ5W2N1cnJlbnROYW1lVG9DaGVja10pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5W2N1cnJlbnROYW1lVG9DaGVja10udG9Mb3dlckNhc2UoKSA9PSBjdXJyZW50RmlsdGVyTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGJ5IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeVtjdXJyZW50VmFsdWVdID09IGZpbHRlcnNUb0FwcGx5W2N1cnJlbnRGaWx0ZXJOYW1lXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cmllc0hhdmVGaWx0ZXJbY291bnRyeUluZGV4XSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKHRydWUpXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gY29sb3VyIG9ubHkgdGhlIGNvdW50cmlzIHdob3NlIGNvdW50cmllc0hhdmVGaWx0ZXJbaW5kZXhdID09IG51bWJlckZpbHRlcnNcbiAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oY291bnRyeUluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuICAgICAgICBpZiAoY291bnRyaWVzSGF2ZUZpbHRlcltjb3VudHJ5SW5kZXhdID09IG51bUZpbHRlcnNUb0FwcGx5KVxuICAgICAgICAgICAgY29sb3JzW2N1cnJlbnRDb3VudHJ5LkNvdW50cnldID0gY3VycmVudENvdW50cnkuQ291bnQ7XG4gICAgfSk7XG4gICAgcmVsb2FkTWFwKGNvbG9ycyk7XG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8qXG4gICAgTWFya2Vyc1xuICAgICovXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgIC8vIGZvciBlYWNoIG9mIHRoZSBtYXJrZXJzXG4gICAgJC5lYWNoKGpzb25NYXJrZXJzLCBmdW5jdGlvbihtYXJrZXJJbmRleCwgY3VycmVudE1hcmtlcikge1xuICAgICAgICAvLyBzZXQgdG8gMCB0aGUgbnVtYmVyIG9mIGZpbHRlcnNcbiAgICAgICAgbWFya2Vyc0hhdmVGaWx0ZXJbbWFya2VySW5kZXhdID0gMDtcbiAgICAgICAgLy8gY2hlY2sgaWYgaXQgaGFzIHRoZSBuZWVkZWQgdmFsdWVzXG4gICAgICAgICQuZWFjaChrZXlzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEZpbHRlck5hbWUpIHtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnROYW1lVG9DaGVjayA9ICdOYW1lJyArIGk7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9ICdWYWx1ZScgKyBpO1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBDb3VudHJ5IGhhcyB0aGF0IG5hbWVcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRNYXJrZXJbY3VycmVudE5hbWVUb0NoZWNrXSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudE1hcmtlcltjdXJyZW50TmFtZVRvQ2hlY2tdLnRvTG93ZXJDYXNlKCkgPT0gY3VycmVudEZpbHRlck5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBieSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudE1hcmtlcltjdXJyZW50VmFsdWVdID09IGZpbHRlcnNUb0FwcGx5W2N1cnJlbnRGaWx0ZXJOYW1lXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnNIYXZlRmlsdGVyW21hcmtlckluZGV4XSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKHRydWUpXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gYWRkIG9ubHkgdGhlIG1hcmtlcnMgd2hvIHNhdGlzZnkgdGhlIGNyaXRlcmlhXG4gICAgJC5lYWNoKGpzb25NYXJrZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudE1hcmtlcikge1xuICAgICAgICBpZiAobWFya2Vyc0hhdmVGaWx0ZXJbaW5kZXhdID09IG51bUZpbHRlcnNUb0FwcGx5KSB7XG4gICAgICAgICAgICBtYXAuYWRkTWFya2VyKGluZGV4LCB7XG4gICAgICAgICAgICAgICAgbGF0TG5nOiBbY3VycmVudE1hcmtlci5MYXRpdHVkZSwgY3VycmVudE1hcmtlci5Mb25naXR1ZGVdLFxuICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRNYXJrZXIuZGVzYyxcblxuICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgc3R5bGUgZm9yIHRoaXMgbWFya2VyXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogJ2dyZWVuJyxcbiAgICAgICAgICAgICAgICAgICAgcjogbWFwUmFuZ2UoY3VycmVudE1hcmtlci5Db3VudCwgbWluQ291bnQsIG1heENvdW50LCBtaW5SYWRpdXMsIG1heFJhZGl1cylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG59XG5cbmZ1bmN0aW9uIGFwcGx5TXVsdGlwbGVGaWx0ZXJzKHNlbGVjdGVkTXVsdGlwbGVGaWx0ZXJzLCBqc29uRmlsdGVycykge1xuXG4gICAgLy8gbnVtYmVyIG9mIGZpbHRlcnMgdG8gYmUgYXBwbGllZFxuICAgIHZhciBudW1GaWx0ZXJzVG9BcHBseSA9IHNlbGVjdGVkTXVsdGlwbGVGaWx0ZXJzLmZpbHRlcihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZFxuICAgIH0pLmxlbmd0aDtcblxuICAgIHZhciBjb3VudHJpZXNIYXZlRmlsdGVyID0gW107XG4gICAgdmFyIG1hcmtlcnNIYXZlRmlsdGVyID0gW107XG5cbiAgICAvLyBmb3IgZWFjaCBvZiB0aGUgY291bnRyaWVzXG4gICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGNvdW50cnlJbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgLy8gc2V0IHRvIDAgdGhlIG51bWJlciBvZiBmaWx0ZXJzXG4gICAgICAgIGNvdW50cmllc0hhdmVGaWx0ZXJbY291bnRyeUluZGV4XSA9IDA7XG4gICAgICAgIC8vIGNoZWNrIGlmIGl0IGhhcyB0aGUgbmVlZGVkIHZhbHVlc1xuICAgICAgICAkLmVhY2goc2VsZWN0ZWRNdWx0aXBsZUZpbHRlcnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50RmlsdGVyVmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnROYW1lVG9DaGVjayA9ICdOYW1lJyArIGk7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9ICdWYWx1ZScgKyBpO1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBDb3VudHJ5IGhhcyB0aGF0IG5hbWVcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnlbY3VycmVudE5hbWVUb0NoZWNrXSA9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5W2N1cnJlbnROYW1lVG9DaGVja10gPT09IGpzb25GaWx0ZXJzW2luZGV4XS5OYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGJ5IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeVtjdXJyZW50VmFsdWVdID09IGN1cnJlbnRGaWx0ZXJWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRyaWVzSGF2ZUZpbHRlcltjb3VudHJ5SW5kZXhdKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHZhciBjb2xvcnMgPSBbXTtcblxuICAgIC8vIGNvbG91ciBvbmx5IHRoZSBjb3VudHJpcyB3aG9zZSBjb3VudHJpZXNIYXZlRmlsdGVyW2luZGV4XSA9PSBudW1iZXJGaWx0ZXJzXG4gICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGNvdW50cnlJbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgaWYgKGNvdW50cmllc0hhdmVGaWx0ZXJbY291bnRyeUluZGV4XSA9PSBudW1GaWx0ZXJzVG9BcHBseSlcbiAgICAgICAgICAgIGNvbG9yc1tjdXJyZW50Q291bnRyeS5Db3VudHJ5XSA9IGN1cnJlbnRDb3VudHJ5LkNvdW50O1xuICAgIH0pO1xuXG4gICAgLy8gY29sb3VyIHRoZSBjb3VudHJpZXNcbiAgICByZWxvYWRNYXAoY29sb3JzKTtcblxuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvKlxuICAgIE1hcmtlcnNcbiAgICAqL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAvLyBmb3IgZWFjaCBvZiB0aGUgbWFya2Vyc1xuICAgICQuZWFjaChqc29uTWFya2VycywgZnVuY3Rpb24obWFya2VySW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcbiAgICAgICAgLy8gc2V0IHRvIDAgdGhlIG51bWJlciBvZiBmaWx0ZXJzXG4gICAgICAgIG1hcmtlcnNIYXZlRmlsdGVyW21hcmtlckluZGV4XSA9IDA7XG4gICAgICAgIC8vIGNoZWNrIGlmIGl0IGhhcyB0aGUgbmVlZGVkIHZhbHVlc1xuICAgICAgICAkLmVhY2goc2VsZWN0ZWRNdWx0aXBsZUZpbHRlcnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50RmlsdGVyVmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnROYW1lVG9DaGVjayA9ICdOYW1lJyArIGk7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9ICdWYWx1ZScgKyBpO1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBDb3VudHJ5IGhhcyB0aGF0IG5hbWVcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRNYXJrZXJbY3VycmVudE5hbWVUb0NoZWNrXSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudE1hcmtlcltjdXJyZW50TmFtZVRvQ2hlY2tdLnRvTG93ZXJDYXNlKCkgPT0ganNvbkZpbHRlcnNbaW5kZXhdLk5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBieSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudE1hcmtlcltjdXJyZW50VmFsdWVdID09IGN1cnJlbnRGaWx0ZXJWYWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnNIYXZlRmlsdGVyW21hcmtlckluZGV4XSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKHRydWUpXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gYWRkIG9ubHkgdGhlIG1hcmtlcnMgd2hvIHNhdGlzZnkgdGhlIGNyaXRlcmlhXG4gICAgJC5lYWNoKGpzb25NYXJrZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudE1hcmtlcikge1xuICAgICAgICBpZiAobWFya2Vyc0hhdmVGaWx0ZXJbaW5kZXhdID09IG51bUZpbHRlcnNUb0FwcGx5KSB7XG4gICAgICAgICAgICBtYXAuYWRkTWFya2VyKGluZGV4LCB7XG4gICAgICAgICAgICAgICAgbGF0TG5nOiBbY3VycmVudE1hcmtlci5MYXRpdHVkZSwgY3VycmVudE1hcmtlci5Mb25naXR1ZGVdLFxuICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRNYXJrZXIuZGVzYyxcblxuICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgc3R5bGUgZm9yIHRoaXMgbWFya2VyXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogJ2dyZWVuJyxcbiAgICAgICAgICAgICAgICAgICAgcjogbWFwUmFuZ2UoY3VycmVudE1hcmtlci5Db3VudCwgbWluQ291bnQsIG1heENvdW50LCBtaW5SYWRpdXMsIG1heFJhZGl1cylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuIiwidmFyIFJlZ2lvbiA9IGZ1bmN0aW9uKHJlZ2lvbk9iamVjdCwgY291bnRyeSkge1xuICAgIC8vIHJlYWQgZnJvbSB0aGUgaW5wdXQgcGFyYW1ldGVyc1xuICAgIHRoaXMuUmVnaW9uID0gcmVnaW9uT2JqZWN0Lm5hbWU7XG4gICAgdGhpcy5Db3VudHJ5ID0gY291bnRyeTtcbiAgICAvLyArIGlzIHVzZWQgdG8gYXNzdXJlIHRoYXQgYSBOdW1iZXIgaXMgYmVpbmcgcmVhZFxuICAgIHRoaXMuZGVzYyA9ICdqdXN0IGEgcmVnaW9uLi4uJztcbn07XG5cbmZ1bmN0aW9uIHJlYWRSZWdpb25zRnJvbUpTT04ocmVnaW9ucywgY291bnRyeSkge1xuICAgIHZhciByZWdpb25zQXJyID0gW107XG4gICAgJC5lYWNoKHJlZ2lvbnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50UmVnaW9uKSB7XG4gICAgICAgIHJlZ2lvbnNBcnJbaW5kZXhdID0gbmV3IFJlZ2lvbihjdXJyZW50UmVnaW9uLCBjb3VudHJ5KTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVnaW9ucztcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVDb2xvcnNGb3JUaGVSZWdpb25zKGNvdW50cnkpe1xuICAgIHZhciBpc29Db2RlID0gY291bnRyeS5zcGxpdChcIl9cIilbMF0udG9VcHBlckNhc2UoKTtcbiAgICAvLyBmaW5kIHRoZSBjb3VudHJ5IHdpdGggdGhhdCBpc29Db2RlXG4gICAgdmFyIHJlZ2lvbkNvbG9ycyA9IFtdO1xuICAgICQuZWFjaChqc29uQ291bnRyaWVzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5LkNvdW50cnkgPT0gaXNvQ29kZSkge1xuICAgICAgICAgICAgLy8gY291bnRyeSB3YXMgZm91bmQsIGNoZWNrIGlmIGl0IGhhcyBhbnkgcmVnaW9uXG4gICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnkuUmVnaW9ucykge1xuICAgICAgICAgICAgICAgIHZhciByZWdpb25zID0gY3VycmVudENvdW50cnkuUmVnaW9ucztcbiAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIHJlZ2lvbnMgb2YgdGhlIGNvdW50cnlcbiAgICAgICAgICAgIFx0JC5lYWNoKHJlZ2lvbnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50UmVnaW9uKSB7XG4gICAgICAgICAgICBcdFx0cmVnaW9uQ29sb3JzW2N1cnJlbnRSZWdpb24ubmFtZV0gPSAxMDA7XG4gICAgICAgICAgICBcdH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cdHJldHVybiByZWdpb25Db2xvcnM7XG59XG5cbmZ1bmN0aW9uIGFkZFJlZ2lvbnNUb01hcChrZXkpIHtcbiAgICAvLyBjaGVjayBpZiB0aGUgaGlnaGxpZ2h0ZWQgY291bnRyeSBoYXMgYW55IHJlZ2lvblxuICAgIHZhciBpc29Db2RlID0ga2V5LnNwbGl0KFwiX1wiKVswXS50b1VwcGVyQ2FzZSgpO1xuICAgIC8vIGZpbmQgdGhlIGNvdW50cnkgd2l0aCB0aGF0IGlzb0NvZGVcbiAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgIGlmIChjdXJyZW50Q291bnRyeS5Db3VudHJ5ID09IGlzb0NvZGUpIHtcbiAgICAgICAgICAgIC8vIGNvdW50cnkgd2FzIGZvdW5kLCBjaGVjayBpZiBpdCBoYXMgYW55IHJlZ2lvblxuICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5LlJlZ2lvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVnaW9ucyA9IGN1cnJlbnRDb3VudHJ5LlJlZ2lvbnM7XG5cbiAgICAgICAgICAgICAgICB2YXIgcGFsZXR0ZSA9IFsnIzY2QzJBNScsICcjRkM4RDYyJywgJyM4REEwQ0InLCAnI0U3OEFDMycsICcjQTZEODU0J107XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZUNvbG9ycygpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9ycyA9IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5O1xuICAgICAgICAgICAgICAgICAgICBjb2xvcnNbbWFwcy5yZWdpb25dXG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChrZXkgaW4gbWFwcy5yZWdpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcnNba2V5XSA9IHBhbGV0dGVbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcGFsZXR0ZS5sZW5ndGgpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sb3JzO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZ2VuZXJhdGVDb2xvcnMoKSk7XG4gICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBjb2xvcnMgb2YgdGhlIHJlZ2lvbnNcbiAgICAgICAgICAgICAgICBtYXBzLnNlcmllcy5yZWdpb25zWzBdLnNldFZhbHVlcyhnZW5lcmF0ZUNvbG9ycygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9