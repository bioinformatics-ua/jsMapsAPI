function buildCountryTooltip(e,r){var o=countryTooltip;return o=o.replace("name",e.html()),o=o.replace("count",r.Count)}function buildMarkerTooltip(e,r){var o=markerTooltip;return o=o.replace("description",e[r].desc),o=o.replace("latitude",e[r].Latitude),o=o.replace("longitude",e[r].Longitude)}function buildRegionTooltip(e){var r=regionTooltip;return r=r.replace("name",e.name)}function mapRange(e,r,o,n,t){return n+(t-n)*(e-r)/(o-r)}function generateColorsForTheCountries(e){e||(e=jsonCountries);var r=[];return $.each(e,function(e,o){r[o.Country]=o.Count}),r}function readCountriesFromJSON(e){{var r=[];e.length}return minCount=1/0,maxCount=-(1/0),$.each(e,function(e,o){r[e]=new Country(o),r[e].Count>maxCount&&(maxCount=r[e].Count),r[e].Count<minCount&&(minCount=r[e].Count)}),r}function findCountryByName(e){var r=null;return $.each(jsonCountries,function(o,n){return n.Country==e?r=n:void 0}),r}function readMinMax(e){minCount=1/0,maxCount=-(1/0);var r=[];for(var o in e)e.hasOwnProperty(o)&&r.push(o);$.each(r,function(e,r){var o=findCountryByName(r);o.Count>maxCount&&(maxCount=o.Count),o.Count<minCount&&(minCount=o.Count)})}function createFiltersBoxCheckboxes(){$("filter-box").append('<ul class="nav navbar-nav" id="filterBoxCheckboxes" style="border-style: solid; border-width: 2px;"></ul>'),$.each(jsonFiltersArray,function(e,r){function o(e){return"<p>"+JSON.stringify(e)+"</p>"}function n(){var e=$("p.status").empty();e.append(o(widget.checked()))}var t="#box"+(e+1);$("#filterBoxCheckboxes").append('<li class="col-sm-6" id="box'+(e+1)+'" class="dropdown-checkbox-example dropdown-checkbox dropdown"></li>');var a=[];$.each(r.Values,function(e,r){a.push({id:e+1,label:r,isChecked:!1})});var i=r.Name.toLowerCase();i=i.charAt(0).toUpperCase()+i.slice(1),$(t).dropdownCheckbox({data:a,autosearch:!0,hideHeader:!1,showNbSelected:!1,templateButton:'<a class="dropdown-checkbox-toggle" data-toggle="dropdown" href="#">'+i+'<span class="dropdown-checkbox-nbselected"></span><b class="caret"></b>'}),widget=$(t).data("dropdownCheckbox"),$("body").on("change:dropdown-checkbox checked checked:all check:all uncheck:all check:checked uncheck:checked",n()),n()});var e='<div id="filters_box" class="row col-sm-12"><button id="filter_box_apply_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Filter</button><button id="filter_box_reset_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Reset</button></div>';$("#filterBoxCheckboxes").append(e),$("#filter_box_apply_filters").click(function(){for(var e={},r=jsonFiltersArray.length,o=0,n=0;n<jsonFiltersArray.length;n++){for(var t="#box"+(n+1),a=getSelectedItems(t),i=[],s=Object.keys(a),l=0;l<s.length;l++)i.push(a[s[l]].label);s.length>0?e[jsonFiltersArray[n].Name]=i.join():o++}o!=r&&filter(e)}),$("#filter_box_reset_filters").click(function(){resetFiltersBox()})}function getSelectedItems(e){return $(e).dropdownCheckbox("checked")}function createFiltersBoxWithEnumeration(e){e.length;$.each(e,function(e,r){var o=r.Name.toLowerCase();o=o.charAt(0).toUpperCase()+o.slice(1);var n="";n+="<p><b>"+o+":</b></p>",n+='<div class="form-group">',n+='<input type="text" class="form-control" id="fbox'+e+'"';var t=r.Values;n+='placeholder="'+t+'" +>',n+="</div>",$("filter-box").append(n),$("#filter-box").tooltip({title:"Use this filter box to filter by multiple filters",placement:"bottom"})});var r='<div id="filters_box"><button id="filter_box_apply_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Filter</button><button id="filter_box_reset_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Reset</button></div>';$("filter-box").append(r),$("#filter_box_apply_filters").click(function(){for(var r={},o=e.length,n=0,t=0;t<e.length;t++){var a="#fbox"+t,i=$(a).val();""!==i?r[e[t].Name]=i:n++}n!=o&&filter(r)}),$("#filter_box_reset_filters").click(function(){resetFiltersBox()})}function getAllFilterValues(e){var r=[];if(-1!=String(e).indexOf(",")){var o=String(e).split(",");$.each(o,function(e,o){if(-1!=o.indexOf("-")){var n=String(o).split("-");checkFilterValuesAreValid(filterObject,n);for(var t=n[0],a=n[1];a>=t;t++)r.push(t)}else r.push(o)})}else if(-1!=e.indexOf("-")){var n=String(e).split("-");checkFilterValuesAreValid(filterObject,n);for(var t=n[0],a=n[1];a>=t;t++)r.push(t)}else r.push(e);return r}function checkWhatCountriesToAdd(e,r){var o=[];return $.each(jsonCountries,function(e,n){for(var t=0;;){t++;var a="Name"+t,i="Value"+t;if(!n[a])break;n[i]==r&&(countryValueToCheck=i,n[i]==r&&(o[n.Country]=n.Count))}}),o}function checkWhatMarkersToAdd(e,r){var o=[];return $.each(jsonMarkers,function(n,t){for(var a=0;;){a++;var i="Name"+a,s="Value"+a;if(!t[i])break;t[i]==e.Name&&t[s]==r&&o.push(t)}}),o}function checkWhatCountriesMarkersToAdd(e,r){var o=[],n=[];return o=checkWhatCountriesToAdd(e,r),n=checkWhatMarkersToAdd(e,r),[o,n]}function checkFilterNameIsValid(e){var r=!1;return $.each(jsonFiltersArray,function(o,n){return n.Name.toLowerCase()===e.toLowerCase()?(filterObject=n,void(r=!0)):void 0}),r}function checkFilterValuesAreValid(e,r){var o=!1;return $.each(r,function(e,r){return $.each(filterObject.Values,function(e,n){return n==r?void(o=!0):void 0}),o?void 0:void console.log("Invalid value for the filter: "+r)}),o}function addMarkersToMap(e){$.each(e,function(e,r){map.addMarker(e,{latLng:[r.Latitude,r.Longitude],name:r.desc,style:{fill:"green",r:mapRange(r.Count,minCount,maxCount,minRadius,maxRadius)}})})}function resetFilters(){var e=generateColorsForTheCountries();reloadMap(e),$.each(jsonMarkers,function(e,r){map.addMarker(e,{latLng:[r.Latitude,r.Longitude],name:r.desc,style:{fill:"green",r:mapRange(r.Count,minCount,maxCount,minRadius,maxRadius)}})})}function filterFromMenuSelected(e,r){currentFilter=e;var o=checkWhatCountriesToAdd(e,r);if(reloadMap(o),$.each(jsonMarkers,function(o,n){for(var t=0;;){t++;var a="Name"+t,i="Value"+t;if(!n[a])break;n[a]===e.Name&&n[i]===r&&map.addMarker(o,{latLng:[n.Latitude,n.Longitude],name:n.desc,style:{fill:"green",r:mapRange(n.Count,minCount,maxCount,minRadius,maxRadius)}})}}),isNaN(e.Values[0]))$("#slider").hide(),$("#minSlider").hide(),$("#maxSlider").hide();else{$("#slider").show(),$("#minSlider").show(),$("#maxSlider").show();var n=$("#slider").slider(),t=e.Values[0],a=e.Values[e.Values.length-1];n.slider("option","min",t),n.slider("option","max",a),$("#minSlider").text(t),$("#maxSlider").text(a)}}function sliderChanged(){var e=slider.slider("option","values"),r=e[0],o=e[1],n=currentFilter.Name;$("#minSlider").text(r),$("#maxSlider").text(o);var t=[];$.each(jsonCountries,function(e,n){var a=+n[countryValueToCheck];a>=r&&o>=a&&(t[n.Country]=n.Count)}),reloadMap(t);for(var a,i=jsonCountries[0],s=0;;){s++;var l="Name"+s,u="Value"+s;if(i[l]===n){a=u;break}}$.each(jsonMarkers,function(e,n){n[a]>=r&&n[a]<=o&&map.addMarker(e,{latLng:[n.Latitude,n.Longitude],name:n.desc,style:{fill:"green",r:mapRange(n.Count,minCount,maxCount,minRadius,maxRadius)}})})}function readFiltersFromJSON(e){for(var r=[],o=0;o<e.values.length;o++){currentFilter=e.values[o];for(var n=currentFilter.name,t=[],a=0;a<currentFilter.values.length;a++)t.push(currentFilter.values[a]);r[o]=new Filter(n,t)}return numFilters=r.length,r}function jsonMapCountries(e,r){var o=[];$.getJSON(r,function(r){$.each(e,function(e,n){var t=n[r.Country],a=0;o[e]=new Country("",t,a)}),mappingCountries=o,console.log(mappingCountries)})}function jsonMapMarkers(e,r){var o=[];$.getJSON(r,function(r){$.each(e,function(e,n){var t=n[r.Country],a=0,i=n[r.Latitude],s=n[r.Longitude];o[e]=new Marker("",t,a,i,s)}),mappingMarkers=o,console.log(mappingMarkers)})}function reloadMap(e){if(map.params.map==mType){jsonCountries.length>0&&readMinMax(e);var r={vertical:!0},o={scale:[minColorMap,maxColorMap],values:[minCount,maxCount],legend:r},n={scale:[minColorMap,maxColorMap],values:[minCount,maxCount]};finalMarkersInMap=o,"markers"==dataType&&(finalMarkersInMap=n),$("#"+mDiv).empty(),map=new jvm.Map({map:mType,backgroundColor:background,container:$("#"+mDiv),onRegionClick:function(e,r){countryCode=r.toLowerCase();var o=countryCode+"_mill_en";switchMap(o)},onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,o);r.html(n)},onRegionTipShow:function(e,r,o){var n=-1;if($.each(jsonCountries,function(e,r){return r.Country===o?void(n=r):void 0}),-1!=n){var t=buildCountryTooltip(r,n);r.html(t)}else r.html(r.html())},series:{markers:[finalMarkersInMap],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:e}]}})}else jsonCountries.length>0&&readMinMax(e),$("#"+mDiv).empty(),removeTooltip(),switchMap(mapType)}function removeTooltip(){$(".jvectormap-tip").remove()}function switchMap(e){$("#"+mDiv).empty(),removeTooltip();var r=generateColorsForTheRegions(e);map=new jvm.Map({map:e,backgroundColor:background,container:$("#"+mDiv),onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,o);r.html(n)},onRegionTipShow:function(r,o,n){console.log(n);var t=e.split("_")[0].toUpperCase(),a=-1;$.each(jsonCountries,function(e,r){return r.Country==t?void(a=r):void 0});var i,s=!1;$.each(map.regions,function(e,r){return r.name==n?(console.log("+"),i=r,void(s=!0)):void 0}),o.html(s?buildRegionTooltip(i):o.html())},series:{markers:[{scale:[minColorMap,maxColorMap],values:[minCount,maxCount],legend:{vertical:!0}}],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:r}]}}),$("#my_map").append('<div class="jvectormap-goback">Back</div>'),$(".jvectormap-goback").click(function(){$("#"+mDiv).empty(),removeTooltip(),map=new jvm.Map({container:$("#"+mDiv),map:mType,backgroundColor:background,onRegionClick:function(e,r){countryCode=r.toLowerCase();var o=countryCode+"_mill_en";switchMap(o)},onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,o);r.html(n)},onRegionTipShow:function(e,r,o){var n=-1;if($.each(jsonCountries,function(e,r){return r.Country===o?void(n=r):void 0}),-1!=n){var t=buildCountryTooltip(r,n);r.html(t)}else r.html(r.html())},series:{markers:[{scale:[minColorMap,maxColorMap],values:[minCount,maxCount],legend:{vertical:!0}}],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:auxColors}]}}),thereAreMarkers&&addMarkersToMap()}),thereAreMarkers&&addMarkersToMap(),jsonCountries}function addMarkersToMap(){var e=[];$.each(filteredMarkers,function(r,o){var n={latLng:[o.Latitude,o.Longitude],name:o.desc,style:{fill:"green",r:mapRange(o.Count,minCount,maxCount,minRadius,maxRadius)}};e.push(n)}),map.addMarkers(e)}function readMarkersFromJSON(e){var r=[];return minCount=1/0,maxCount=-(1/0),$.each(e,function(e,o){r[e]=new Marker(o);var n=r[e].Count;n>maxCount&&(maxCount=n),n<minCount&&(minCount=n)}),r}function filter(e){var r=Object.keys(e),o=r.length,n=0,t=new Array,a=new Array;for(l=0;o>l;l++)t[l]=new Array,a[l]=new Array;var i=!1;if($.each(r,function(e,r){return"all"==r.toLowerCase()?(i=!0,resetFilters(),void resetFiltersBox()):void 0}),!i){$.each(r,function(r,o){if(!checkFilterNameIsValid(o))return void console.log("Invalid filter name!("+o+")");var i=e[o],s=getAllFilterValues(i);n++,$.each(s,function(e,o){var n=checkWhatCountriesMarkersToAdd(filterObject,o),i=n[0],s=n[1];$.each(Object.keys(i),function(e,o){var n=i[o];t[r][o]=n}),$.each(s,function(e,o){a[r].push(o)})})});var s=[];if(t.length>0){s=t[0];for(var l=0;l<t.length-1;l++)s=getCountriesIntersection(s,t[l+1])}if(reloadMap(s),filteredMarkers=[],a.length>0){filteredMarkers=a[0];for(var l=0;l<a.length-1;l++)filteredMarkers=getMarkersIntersection(filteredMarkers,a[l+1])}addMarkersToMap()}}function getMarkersIntersection(e,r){var o=[];return $.each(e,function(e,n){var t=n.Country;$.each(r,function(e,r){var a=r.Country;t==a&&o.push(n)})}),o}function getCountriesIntersection(e,r){var o=[];return $.each(Object.keys(e),function(n,t){$.each(Object.keys(r),function(r,n){t==n&&(o[t]=e[t])})}),o}function applyMultipleFiltersProgramattically(e){var r=Object.keys(e),o=r.length,n=[],t=[];$.each(r,function(r,o){e[o]});var a=[];map.removeAllMarkers(),$.each(jsonCountries,function(o,t){n[o]=0,$.each(r,function(r,a){for(var i=0;;){i++;var s="Name"+i,l="Value"+i;if(!t[s])break;t[s].toLowerCase()==a.toLowerCase()&&t[l]==e[a]&&n[o]++}})}),$.each(jsonCountries,function(e,r){n[e]==o&&(a[r.Country]=r.Count)}),reloadMap(a),$.each(jsonMarkers,function(o,n){t[o]=0,$.each(r,function(r,a){for(var i=0;;){i++;var s="Name"+i,l="Value"+i;if(!n[s])break;n[s].toLowerCase()==a.toLowerCase()&&n[l]==e[a]&&t[o]++}})}),$.each(jsonMarkers,function(e,r){t[e]==o&&map.addMarker(e,{latLng:[r.Latitude,r.Longitude],name:r.desc,style:{fill:"green",r:mapRange(r.Count,minCount,maxCount,minRadius,maxRadius)}})})}function applyMultipleFilters(e,r){var o=e.filter(function(e){return void 0!==e}).length,n=[],t=[];$.each(jsonCountries,function(o,t){n[o]=0,$.each(e,function(e,a){for(var i=0;;){i++;var s="Name"+i,l="Value"+i;if(void 0==t[s])break;t[s]===r[e].Name&&t[l]==a&&n[o]++}})});var a=[];$.each(jsonCountries,function(e,r){n[e]==o&&(a[r.Country]=r.Count)}),reloadMap(a),$.each(jsonMarkers,function(o,n){t[o]=0,$.each(e,function(e,a){for(var i=0;;){i++;var s="Name"+i,l="Value"+i;if(!n[s])break;n[s].toLowerCase()==r[e].Name.toLowerCase()&&n[l]==a&&t[o]++}})}),$.each(jsonMarkers,function(e,r){t[e]==o&&map.addMarker(e,{latLng:[r.Latitude,r.Longitude],name:r.desc,style:{fill:"green",r:mapRange(r.Count,minCount,maxCount,minRadius,maxRadius)}})})}function readRegionsFromJSON(e,r){var o=[];return $.each(e,function(e,n){o[e]=new Region(n,r)}),e}function generateColorsForTheRegions(e){var r=e.split("_")[0].toUpperCase(),o=[];return $.each(jsonCountries,function(e,n){if(n.Country==r&&n.Regions){var t=n.Regions;$.each(t,function(e,r){o[r.name]=100})}}),o}function addRegionsToMap(e){var r=e.split("_")[0].toUpperCase();$.each(jsonCountries,function(e,o){function n(){var e,r={};r[maps.region];for(e in maps.regions)r[e]=t[Math.floor(Math.random()*t.length)];return r}if(o.Country==r&&o.Regions){var t=(o.Regions,["#66C2A5","#FC8D62","#8DA0CB","#E78AC3","#A6D854"]);console.log(n()),maps.series.regions[0].setValues(n())}})}var vectorMap,jsonFilters=[],minColorMap,maxColorMap,mDiv,mType,background,filteredMarkers,thereAreMarkers=!1,VectorialMap=function(){};VectorialMap.prototype.createMap=function(e,r,o,n,t,a,i,s,l){if(background=s,mType=i,jsonCountries=[],jsonMarkers=[],mDiv=n,minColorMap=t,maxColorMap=a,"countries"==l)jsonCountries=readCountriesFromJSON(e);else{if("markers"!=l)return void console.error("You must give as input a list of markers or countries!");thereAreMarkers=!0,jsonMarkers=readMarkersFromJSON(e),filteredMarkers=jsonMarkers,numMarkers=jsonMarkers.length}auxColors=generateColorsForTheCountries(),jQuery.ajax({url:"../tooltip-templates/country_tooltip.html",success:function(e){countryTooltip=e},async:!1}),jQuery.ajax({url:"../tooltip-templates/marker_tooltip.html",success:function(e){markerTooltip=e},async:!1}),jQuery.ajax({url:"../tooltip-templates/region_tooltip.html",success:function(e){regionTooltip=e},async:!1});for(var u={vertical:!0},c={scale:[minColorMap,maxColorMap],values:[minCount,maxCount],legend:u},d={scale:[minColorMap,maxColorMap],values:[minCount,maxCount]},m=[],p=0;p<jsonMarkers;p++)m[p]="red";var f={attribute:"image",scale:{red:"./img/red-icon.png",blue:"./img/red-icon.png"},values:m};console.log(f),finalMarkersInMap=c,"markers"==l&&(finalMarkersInMap=d),map=new jvm.Map({container:$("#"+n),map:mType,backgroundColor:background,onRegionClick:function(e,r){countryCode=r.toLowerCase();var o=countryCode+"_mill_en";switchMap(o)},onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,o);r.html(n)},onRegionTipShow:function(e,r,o){var n=-1;if($.each(jsonCountries,function(e,r){return r.Country===o?void(n=r):void 0}),-1!=n){var t=buildCountryTooltip(r,n);r.html(t)}else r.html(r.html())},series:{markers:[finalMarkersInMap],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:auxColors}]}}),"markers"==l&&(filteredMarkers=jsonMarkers,addMarkersToMap())},VectorialMap.prototype.filterOnServer=function(e){$.getJSON("../json/serverFilter.json",function(e){var r=JSON.stringify(e),o="http://serverFiltering.com/?data="+encodeURIComponent(r);o="../json/countries_plus_markers2.json",$.getJSON(o,function(e){jsonCountries=readCountriesFromJSON(e.countries);var r=generateColorsForTheCountries(jsonCountries);reloadMap(r),e.markers&&(jsonMarkers=readMarkersFromJSON(e.markers),addMarkersToMap())})})};var Country=function(e,r,o){if(""==e)this.Country=r,this.Count=+o,this.Var=0,this.desc="abc";else{var n=!0,t=0;do{t++;var a="Name"+t,i="Value"+t;void 0===e[a]?n=!1:(this[a]=e[a],this[i]=e[i])}while(n);e.Regions&&(this.Regions=readRegionsFromJSON(e.Regions,e.Country)),this.Country=e.Country,this.Count=+e.Count,this.Var=e.Var,this.desc="abc"}},resetFiltersBox=function(){for(var e=0;numFilters>e;e++)$("#fbox"+e).text(""),$("#fbox"+e).val("");var r=generateColorsForTheCountries();reloadMap(r),filteredMarkers=jsonMarkers,addMarkersToMap()},Filter=function(e,r){this.Name=e,this.Values=r},numFilters,currentFilter,countryValueToCheck;VectorialMap.prototype.createSlider=function(){slider=$("#slider").slider(),slider.slider("option","min",minRadius),slider.slider("option","max",maxRadius),slider.slider("option","range",!0),slider.slider("option","animate","slow"),slider.on("slidechange",function(e,r){sliderChanged()}),$("#slider").hide(),$("#minSlider").hide(),$("#maxSlider").hide()};var mappingMarkers=[],mappingCountries=[];VectorialMap.prototype.registerTransformer=function(e,r,o){var r="../mappingJSON/mappingCountriesSample.json",o="../mappingJSON/mappingMarkersSample.json";return r?o?(e="../json/espid-spain.json",void $.getJSON(e,function(e){jsonMapCountries(e,r),jsonMapMarkers(e,o)})):void console.error("you must specify a markers mapping json"):void console.error("you must specify a countries mapping json")};var Marker=function(e,r,o,n,t){if(""==e)this.Country=r,this.Count=+o,this.Var="",this.Latitude=n,this.Longitude=t,this.desc="abc";else{var a=!0,i=0;do{i++;var s="Name"+i,l="Value"+i;e[s]?(this[s]=e[s],this[l]=e[l]):a=!1}while(a);this.Country=e.Country,this.Count=+e.Count,this.Var=e.Var,this.Latitude=e.Latitude,this.Longitude=e.Longitude,this.desc="abc"}},Region=function(e,r){this.Region=e.name,this.Country=r,this.desc="just a region..."};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJjb3VudHJpZXMuanMiLCJjcmVhdGVGaWx0ZXJzLmpzIiwiZmlsdGVycy1hdXhpbGlhcnkuanMiLCJmaWx0ZXJzLmpzIiwianNvbi1tYXBwaW5nLmpzIiwibWFwcy1hdXhpbGlhcnkuanMiLCJtYXJrZXJzLmpzIiwibXVsdGlwbGUtZmlsdGVycy5qcyIsInJlZ2lvbnMuanMiXSwibmFtZXMiOlsiYnVpbGRDb3VudHJ5VG9vbHRpcCIsImNvdW50cnlOYW1lIiwic2VsZWN0ZWRDb3VudHJ5IiwiZmluYWxUb29sdGlwIiwiY291bnRyeVRvb2x0aXAiLCJyZXBsYWNlIiwiaHRtbCIsIkNvdW50IiwiYnVpbGRNYXJrZXJUb29sdGlwIiwianNvbk1hcmtlcnMiLCJpbmRleCIsIm1hcmtlclRvb2x0aXAiLCJkZXNjIiwiTGF0aXR1ZGUiLCJMb25naXR1ZGUiLCJidWlsZFJlZ2lvblRvb2x0aXAiLCJyZWdpb24iLCJyZWdpb25Ub29sdGlwIiwibmFtZSIsIm1hcFJhbmdlIiwidmFsdWUiLCJsb3cxIiwiaGlnaDEiLCJsb3cyIiwiaGlnaDIiLCJnZW5lcmF0ZUNvbG9yc0ZvclRoZUNvdW50cmllcyIsImNvdW50cmllcyIsImpzb25Db3VudHJpZXMiLCJjb3VudHJ5Q29sb3JzIiwiJCIsImVhY2giLCJjdXJyZW50Q291bnRyeSIsIkNvdW50cnkiLCJyZWFkQ291bnRyaWVzRnJvbUpTT04iLCJtYXJrZXJzIiwibGVuZ3RoIiwibWluQ291bnQiLCJJbmZpbml0eSIsIm1heENvdW50IiwiZmluZENvdW50cnlCeU5hbWUiLCJyZXR1cm5Db3VudHJ5IiwicmVhZE1pbk1heCIsImNvdW50cmllc05hbWVzIiwia2V5cyIsImtleSIsImhhc093blByb3BlcnR5IiwicHVzaCIsImN1cnJlbnRDb3VudHJ5TmFtZSIsImNyZWF0ZUZpbHRlcnNCb3hDaGVja2JveGVzIiwiYXBwZW5kIiwianNvbkZpbHRlcnNBcnJheSIsImN1cnJlbnRGaWx0ZXIiLCJwIiwid2F0IiwiSlNPTiIsInN0cmluZ2lmeSIsInVwZGF0ZVN0YXR1cyIsIiRwIiwiZW1wdHkiLCJ3aWRnZXQiLCJjaGVja2VkIiwiYm94SUQiLCJ0YWIiLCJWYWx1ZXMiLCJjdXJyZW50VmFsdWUiLCJpZCIsImxhYmVsIiwiaXNDaGVja2VkIiwiTmFtZSIsInRvTG93ZXJDYXNlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsImRyb3Bkb3duQ2hlY2tib3giLCJkYXRhIiwiYXV0b3NlYXJjaCIsImhpZGVIZWFkZXIiLCJzaG93TmJTZWxlY3RlZCIsInRlbXBsYXRlQnV0dG9uIiwib24iLCJ0ZXh0VG9BcHBlbmQiLCJjbGljayIsImpzb25PYmplY3QiLCJudW1GaWx0ZXJzIiwiZW1wdHlGaWx0ZXJzIiwiaSIsInNlbGVjdGVkSXRlbXMiLCJnZXRTZWxlY3RlZEl0ZW1zIiwiaXRlbXNBcnJheSIsIk9iamVjdCIsImoiLCJqb2luIiwiZmlsdGVyIiwicmVzZXRGaWx0ZXJzQm94IiwiY3JlYXRlRmlsdGVyc0JveFdpdGhFbnVtZXJhdGlvbiIsImpzb25GaWx0ZXJzIiwiZmlsdGVyTmFtZSIsInRvQXBwZW5kIiwicGxhY2Vob2xkZXIiLCJ0b29sdGlwIiwidGl0bGUiLCJwbGFjZW1lbnQiLCJjdXJyZW50RmlsdGVyVmFsdWUiLCJ2YWwiLCJnZXRBbGxGaWx0ZXJWYWx1ZXMiLCJmaWx0ZXJWYWx1ZSIsInJldHVyblBhcnRzIiwiU3RyaW5nIiwiaW5kZXhPZiIsImVudW1lcmF0aW9uUGFydHMiLCJzcGxpdCIsImN1cnJlbnRFbnVtZXJhdGlvbiIsInJhbmdlUGFydHMiLCJjaGVja0ZpbHRlclZhbHVlc0FyZVZhbGlkIiwiZmlsdGVyT2JqZWN0IiwibWluIiwibWF4Iiwic3ViUGFydHMiLCJjaGVja1doYXRDb3VudHJpZXNUb0FkZCIsInNlbGVjdGVkRmlsdGVyIiwiY3VycmVudE5hbWVUb0NoZWNrIiwiY291bnRyeVZhbHVlVG9DaGVjayIsImNoZWNrV2hhdE1hcmtlcnNUb0FkZCIsImN1cnJlbnRNYXJrZXIiLCJjaGVja1doYXRDb3VudHJpZXNNYXJrZXJzVG9BZGQiLCJjb3VudHJpZXNUb0FkZCIsIm1hcmtlcnNUb0FkZCIsImNoZWNrRmlsdGVyTmFtZUlzVmFsaWQiLCJ2YWxpZCIsImZpbHRlclZhbHVlcyIsInBhcnQiLCJjb25zb2xlIiwibG9nIiwiYWRkTWFya2Vyc1RvTWFwIiwibWFwIiwiYWRkTWFya2VyIiwibGF0TG5nIiwic3R5bGUiLCJmaWxsIiwiciIsIm1pblJhZGl1cyIsIm1heFJhZGl1cyIsInJlc2V0RmlsdGVycyIsImNvbG9ycyIsInJlbG9hZE1hcCIsImZpbHRlckZyb21NZW51U2VsZWN0ZWQiLCJpc05hTiIsImhpZGUiLCJzaG93Iiwic2xpZGVyIiwibWluVmFsdWUiLCJtYXhWYWx1ZSIsInRleHQiLCJzbGlkZXJDaGFuZ2VkIiwiY3VycmVudFJhbmdlIiwiY3VycmVudEZpbHRlck5hbWUiLCJmaWx0ZXJWYWx1ZUZvckNvdW50cnkiLCJzZWxlY3RlZE5hbWUiLCJyZWFkRmlsdGVyc0Zyb21KU09OIiwiaW5wdXRGaWx0ZXJzIiwiZmlsdGVycyIsInZhbHVlcyIsIkZpbHRlciIsImpzb25NYXBDb3VudHJpZXMiLCJqc29uIiwiY291bnRyaWVzTWFwcGluZ0pzb24iLCJnZXRKU09OIiwianNvbk1hcHBpbmciLCJjdXJyZW50SlNPTiIsImNvdW50IiwibWFwcGluZ0NvdW50cmllcyIsImpzb25NYXBNYXJrZXJzIiwibWFya2Vyc01hcHBpbmdKc29uIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJNYXJrZXIiLCJtYXBwaW5nTWFya2VycyIsInBhcmFtcyIsIm1UeXBlIiwibGVnZW5kVmFyIiwidmVydGljYWwiLCJtYXJrZXJzV2l0aExlZ2VuZCIsInNjYWxlIiwibWluQ29sb3JNYXAiLCJtYXhDb2xvck1hcCIsImxlZ2VuZCIsIm1hcmtlcnNXaXRob3V0TGVnZW5kIiwiZmluYWxNYXJrZXJzSW5NYXAiLCJkYXRhVHlwZSIsIm1EaXYiLCJqdm0iLCJNYXAiLCJiYWNrZ3JvdW5kQ29sb3IiLCJiYWNrZ3JvdW5kIiwiY29udGFpbmVyIiwib25SZWdpb25DbGljayIsImUiLCJjb2RlIiwiY291bnRyeUNvZGUiLCJuZXdNYXAiLCJzd2l0Y2hNYXAiLCJvbk1hcmtlclRpcFNob3ciLCJvblJlZ2lvblRpcFNob3ciLCJzZXJpZXMiLCJyZWdpb25zIiwiYXR0cmlidXRlIiwicmVtb3ZlVG9vbHRpcCIsIm1hcFR5cGUiLCJyZW1vdmUiLCJyZWdpb25Db2xvcnMiLCJnZW5lcmF0ZUNvbG9yc0ZvclRoZVJlZ2lvbnMiLCJyZWdpb25OYW1lIiwiY3VycmVudE1hcCIsInNlbGVjdGVkUmVnaW9uIiwicmVnaW9uRm91bmQiLCJjdXJyZW50UmVnaW9uIiwiYXV4Q29sb3JzIiwidGhlcmVBcmVNYXJrZXJzIiwibWFya2Vyc0pTT05BcnJheSIsImZpbHRlcmVkTWFya2VycyIsImN1cnJlbnRNYXJrZXJKU09OIiwiYWRkTWFya2VycyIsInJlYWRNYXJrZXJzRnJvbUpTT04iLCJjdXJyZW50SlNPTk1hcmtlciIsImN1cnJlbnRDb3VudFZhbHVlIiwiaW5wdXRBcmdzIiwibnVtYmVyS2V5cyIsInZhbGlkRmlsdGVycyIsImNvdW50cmllc0J5RmlsdGVyIiwiQXJyYXkiLCJtYXJrZXJzQnlGaWx0ZXIiLCJleGl0IiwiZmluYWxQYXJ0cyIsImNoZWNrUmV0dXJuIiwiY291bnRyaWVzQXV4IiwibWFya2Vyc0F1eCIsImN1cnJlbnRLZXkiLCJrZXlWYWx1ZSIsImZpbmFsQ291bnRyaWVzIiwiZ2V0Q291bnRyaWVzSW50ZXJzZWN0aW9uIiwiZ2V0TWFya2Vyc0ludGVyc2VjdGlvbiIsIm1hcmtlcnNHcm91cDEiLCJtYXJrZXJzR3JvdXAyIiwibWFya2VyMSIsIm1hcmtlcjFDb3VudHJ5IiwibWFya2VyMiIsIm1hcmtlcjJDb3VudHJ5IiwiY291bnRyaWVzR3JvdXAxIiwiY291bnRyaWVzR3JvdXAyIiwiY291bnRyeU5hbWUxIiwiY291bnRyeU5hbWUyIiwiYXBwbHlNdWx0aXBsZUZpbHRlcnNQcm9ncmFtYXR0aWNhbGx5IiwiZmlsdGVyc1RvQXBwbHkiLCJudW1GaWx0ZXJzVG9BcHBseSIsImNvdW50cmllc0hhdmVGaWx0ZXIiLCJtYXJrZXJzSGF2ZUZpbHRlciIsInJlbW92ZUFsbE1hcmtlcnMiLCJjb3VudHJ5SW5kZXgiLCJtYXJrZXJJbmRleCIsImFwcGx5TXVsdGlwbGVGaWx0ZXJzIiwic2VsZWN0ZWRNdWx0aXBsZUZpbHRlcnMiLCJ1bmRlZmluZWQiLCJyZWFkUmVnaW9uc0Zyb21KU09OIiwiY291bnRyeSIsInJlZ2lvbnNBcnIiLCJSZWdpb24iLCJpc29Db2RlIiwiUmVnaW9ucyIsImFkZFJlZ2lvbnNUb01hcCIsImdlbmVyYXRlQ29sb3JzIiwibWFwcyIsInBhbGV0dGUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJzZXRWYWx1ZXMiLCJ2ZWN0b3JNYXAiLCJWZWN0b3JpYWxNYXAiLCJwcm90b3R5cGUiLCJjcmVhdGVNYXAiLCJpbnB1dEpTT04iLCJtYXBEaXYiLCJtaW5Db2xvciIsIm1heENvbG9yIiwiZXJyb3IiLCJudW1NYXJrZXJzIiwialF1ZXJ5IiwiYWpheCIsInVybCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJhc3luYyIsImltYWdlcyIsIm1hcmtlcnNJY29ucyIsInJlZCIsImJsdWUiLCJmaWx0ZXJPblNlcnZlciIsImZpbHRlcnNKU09OIiwiZmlsdGVyc1N0cmluZyIsImVuY29kZVVSSUNvbXBvbmVudCIsImNvdW50cnlPYmplY3QiLCJ0aGlzIiwiVmFyIiwiaGFzTmFtZSIsImNyZWF0ZVNsaWRlciIsImV2ZW50IiwidWkiLCJyZWdpc3RlclRyYW5zZm9ybWVyIiwianNvbkxvY2F0aW9uIiwibWFya2VyT2JqZWN0IiwicmVnaW9uT2JqZWN0Il0sIm1hcHBpbmdzIjoiQUFvS0EsUUFBQUEscUJBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQUMsY0FHQSxPQUZBRCxHQUFBQSxFQUFBRSxRQUFBLE9BQUFKLEVBQUFLLFFBQ0FILEVBQUFBLEVBQUFFLFFBQUEsUUFBQUgsRUFBQUssT0FJQSxRQUFBQyxvQkFBQUMsRUFB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R0FNQXdJLEVBQUEsK0JBQ0F2UixHQUFBeUksUUFBQThJLEVBQUEsU0FBQWhKLEdBRUFELGlCQUFBQyxFQUFBQyxHQUVBTSxlQUFBUCxFQUFBUSxVQVZBekMsU0FBQXlKLE1BQUEsK0NBSkF6SixTQUFBeUosTUFBQSw2Q0VWQSxJQUFBN0csUUFBQSxTQUFBc0ksRUFBQW5TLEVBQUF1SixFQUFBSSxFQUFBQyxHQUNBLEdBQUEsSUFBQXVJLEVBRUFSLEtBQUE3USxRQUFBZCxFQUNBMlIsS0FBQXRTLE9BQUFrSyxFQUNBb0ksS0FBQUMsSUFBQSxHQUNBRCxLQUFBaFMsU0FBQWdLLEVBQ0FnSSxLQUFBL1IsVUFBQWdLLEVBRUErSCxLQUFBalMsS0FBQSxVQUVBLENBRUEsR0FBQW1TLElBQUEsRUFDQTFOLEVBQUEsQ0FDQSxHQUFBLENBQ0FBLEdBQ0EsSUFBQW1DLEdBQUEsT0FBQW5DLEVBQ0FyQixFQUFBLFFBQUFxQixDQUNBZ08sR0FBQTdMLElBR0FxTCxLQUFBckwsR0FBQTZMLEVBQUE3TCxHQUNBcUwsS0FBQTdPLEdBQUFxUCxFQUFBclAsSUFIQStPLEdBQUEsUUFLQUEsRUFFQUYsTUFBQTdRLFFBQUFxUixFQUFBclIsUUFDQTZRLEtBQUF0UyxPQUFBOFMsRUFBQTlTLE1BQ0FzUyxLQUFBQyxJQUFBTyxFQUFBUCxJQUNBRCxLQUFBaFMsU0FBQXdTLEVBQUF4UyxTQUNBZ1MsS0FBQS9SLFVBQUF1UyxFQUFBdlMsVUFFQStSLEtBQUFqUyxLQUFBLFFFbENBNlAsT0FBQSxTQUFBNkMsRUFBQS9DLEdBRUFzQyxLQUFBcEMsT0FBQTZDLEVBQUFwUyxLQUNBMlIsS0FBQTdRLFFBQUF1TyxFQUVBc0MsS0FBQWpTLEtBQUEiLCJmaWxlIjoianNNYXBzQXBpLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHZlY3Rvck1hcDtcbnZhciBqc29uRmlsdGVycyA9IFtdO1xudmFyIG1pbkNvbG9yTWFwO1xudmFyIG1heENvbG9yTWFwO1xudmFyIG1EaXY7XG52YXIgbVR5cGU7XG52YXIgYmFja2dyb3VuZDtcbnZhciBmaWx0ZXJlZE1hcmtlcnM7XG52YXIgdGhlcmVBcmVNYXJrZXJzID0gZmFsc2U7XG5cbnZhciBWZWN0b3JpYWxNYXAgPSBmdW5jdGlvbigpIHt9O1xuXG4vLyBWZWN0b3JpYWxNYXAgUHJvdG90eXBlXG5WZWN0b3JpYWxNYXAucHJvdG90eXBlLmNyZWF0ZU1hcCA9IGZ1bmN0aW9uKGlucHV0SlNPTiwgbWluUmFkaXVzLCBtYXhSYWRpdXMsIG1hcERpdiwgbWluQ29sb3IsIG1heENvbG9yLCBtYXBUeXBlLCBiYWNrZ3JvdW5kQ29sb3IsIGRhdGFUeXBlKSB7XG4gICAgYmFja2dyb3VuZCA9IGJhY2tncm91bmRDb2xvcjtcbiAgICBtVHlwZSA9IG1hcFR5cGU7XG4gICAgLy8gY291bnRyaWVzIGxpc3RcbiAgICBqc29uQ291bnRyaWVzID0gW107XG4gICAgLy8gbWFya2VycyBsaXN0XG4gICAganNvbk1hcmtlcnMgPSBbXTtcbiAgICAvLyBpZCBvZiB0aGUgbWFwXG4gICAgbURpdiA9IG1hcERpdjtcbiAgICAvLyBhc3NpZ24gdGhlIGNvbG9ycyBmb3IgdGhlIHJhbmdlXG4gICAgbWluQ29sb3JNYXAgPSBtaW5Db2xvcjtcbiAgICBtYXhDb2xvck1hcCA9IG1heENvbG9yO1xuXG4gICAgaWYgKGRhdGFUeXBlID09ICdjb3VudHJpZXMnKSB7XG4gICAgICAgIGpzb25Db3VudHJpZXMgPSByZWFkQ291bnRyaWVzRnJvbUpTT04oaW5wdXRKU09OKTtcbiAgICB9IGVsc2UgaWYgKGRhdGFUeXBlID09ICdtYXJrZXJzJykge1xuICAgICAgICB0aGVyZUFyZU1hcmtlcnMgPSB0cnVlO1xuICAgICAgICBqc29uTWFya2VycyA9IHJlYWRNYXJrZXJzRnJvbUpTT04oaW5wdXRKU09OKTtcbiAgICAgICAgZmlsdGVyZWRNYXJrZXJzID0ganNvbk1hcmtlcnM7XG4gICAgICAgIG51bU1hcmtlcnMgPSBqc29uTWFya2Vycy5sZW5ndGg7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignWW91IG11c3QgZ2l2ZSBhcyBpbnB1dCBhIGxpc3Qgb2YgbWFya2VycyBvciBjb3VudHJpZXMhJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBnZXQgdGhlIENvdW50IHZhbHVlIGZvciBlYWNoIENvdW50cnlcbiAgICBhdXhDb2xvcnMgPSBnZW5lcmF0ZUNvbG9yc0ZvclRoZUNvdW50cmllcygpO1xuXG4gICAgLy8gZ2V0IHRoZSB0b29sdGlwIHRlbXBsYXRlc1xuICAgIC8vIENPVU5UUlkgdG9vbHRpcFxuICAgIGpRdWVyeS5hamF4KHtcbiAgICAgICAgdXJsOiAnLi4vdG9vbHRpcC10ZW1wbGF0ZXMvY291bnRyeV90b29sdGlwLmh0bWwnLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgIGNvdW50cnlUb29sdGlwID0gcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYzogZmFsc2VcbiAgICB9KTtcblxuICAgIC8vIE1BUktFUiB0b29sdGlwXG4gICAgalF1ZXJ5LmFqYXgoe1xuICAgICAgICB1cmw6ICcuLi90b29sdGlwLXRlbXBsYXRlcy9tYXJrZXJfdG9vbHRpcC5odG1sJyxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICBtYXJrZXJUb29sdGlwID0gcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYzogZmFsc2VcbiAgICB9KTtcblxuICAgIC8vIFJFR0lPTiB0b29sdGlwXG4gICAgalF1ZXJ5LmFqYXgoe1xuICAgICAgICB1cmw6ICcuLi90b29sdGlwLXRlbXBsYXRlcy9yZWdpb25fdG9vbHRpcC5odG1sJyxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICByZWdpb25Ub29sdGlwID0gcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYzogZmFsc2VcbiAgICB9KTtcblxuICAgIHZhciBsZWdlbmRWYXIgPSB7XG4gICAgICAgIHZlcnRpY2FsOiB0cnVlLFxuICAgICAgICAvL3RpdGxlOiAnQ291bnRyaWVzJyxcbiAgICB9O1xuXG4gICAgdmFyIG1hcmtlcnNXaXRoTGVnZW5kID0ge1xuICAgICAgICBzY2FsZTogW21pbkNvbG9yTWFwLCBtYXhDb2xvck1hcF0sXG4gICAgICAgIC8vIHJhbmdlIG9mIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggdGhlIENvdW50XG4gICAgICAgIHZhbHVlczogW21pbkNvdW50LCBtYXhDb3VudF0sXG4gICAgICAgIC8vIGFkZCBhIGxlZ2VuZFxuICAgICAgICBsZWdlbmQ6IGxlZ2VuZFZhclxuICAgIH07XG5cbiAgICB2YXIgbWFya2Vyc1dpdGhvdXRMZWdlbmQgPSB7XG4gICAgICAgIHNjYWxlOiBbbWluQ29sb3JNYXAsIG1heENvbG9yTWFwXSxcbiAgICAgICAgLy8gcmFuZ2Ugb2YgdmFsdWVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgQ291bnRcbiAgICAgICAgdmFsdWVzOiBbbWluQ291bnQsIG1heENvdW50XVxuICAgIH07XG5cbiAgICB2YXIgaW1hZ2VzID0gW107XG4gICAgZm9yKHZhciBpPTA7IGkgPCBqc29uTWFya2VycyA7IGkrKylcbiAgICAgICAgaW1hZ2VzW2ldID0gJ3JlZCc7XG5cbiAgICB2YXIgbWFya2Vyc0ljb25zID0ge1xuICAgICAgICBhdHRyaWJ1dGU6ICdpbWFnZScsXG4gICAgICAgIHNjYWxlOiB7XG4gICAgICAgICAgICAncmVkJzogJy4vaW1nL3JlZC1pY29uLnBuZycsXG4gICAgICAgICAgICAnYmx1ZSc6ICcuL2ltZy9yZWQtaWNvbi5wbmcnXG4gICAgICAgIH0sXG4gICAgICAgIHZhbHVlczogaW1hZ2VzXG4gICAgfTtcblxuICAgIGNvbnNvbGUubG9nKG1hcmtlcnNJY29ucyk7XG4gICAgZmluYWxNYXJrZXJzSW5NYXAgPSBtYXJrZXJzV2l0aExlZ2VuZDtcbiAgICBpZiAoZGF0YVR5cGUgPT0gJ21hcmtlcnMnKSB7XG4gICAgICAgIGZpbmFsTWFya2Vyc0luTWFwID0gbWFya2Vyc1dpdGhvdXRMZWdlbmQ7XG4gICAgfVxuXG5cbiAgICBtYXAgPSBuZXcganZtLk1hcCh7XG4gICAgICAgIGNvbnRhaW5lcjogJCgnIycgKyBtYXBEaXYpLFxuICAgICAgICAvLyBjb25maWd1cmF0aW9uIG9mIHRoZSBtYWluIG1hcFxuICAgICAgICAvLyB0eXBlIG9mIG1hcCAod29ybGQsIEV1cm9wZSwgVVNBLCBldGMpXG4gICAgICAgIG1hcDogbVR5cGUsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogYmFja2dyb3VuZCxcbiAgICAgICAgLy8gdHJpZ2dlcmVkIHdoZW4gYSBtYXJrZXIgaXMgaG92ZXJlZFxuICAgICAgICBvblJlZ2lvbkNsaWNrOiBmdW5jdGlvbihlLCBjb2RlKSB7XG4gICAgICAgICAgICAvLyByZWxvYWQgYSBuZXcgbWFwXG4gICAgICAgICAgICBjb3VudHJ5Q29kZSA9IGNvZGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIC8vIHdhaXRUb0FkZE1hcmtlcnMoMTAwKTtcbiAgICAgICAgICAgIHZhciBuZXdNYXAgPSBjb3VudHJ5Q29kZSArICdfbWlsbF9lbic7XG4gICAgICAgICAgICAvLyBzd2l0aCB0byBuZXcgbWFwXG4gICAgICAgICAgICBzd2l0Y2hNYXAobmV3TWFwKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25NYXJrZXJUaXBTaG93OiBmdW5jdGlvbihlLCBsYWJlbCwgaW5kZXgpIHtcbiAgICAgICAgICAgIC8vIHNlbGVjdCB3aGF0IHRleHQgdG8gZGlzcGxheSB3aGVuIG1hcmtlciBpcyBob3ZlcmVkXG4gICAgICAgICAgICB2YXIgZmluYWxUb29sdGlwID0gYnVpbGRNYXJrZXJUb29sdGlwKGpzb25NYXJrZXJzLCBpbmRleCk7XG4gICAgICAgICAgICBsYWJlbC5odG1sKGZpbmFsVG9vbHRpcCk7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIHRyaWdnZXJlZCB3aGVuIGEgcmVnaW9uIGlzIGhvdmVyZWRcbiAgICAgICAgb25SZWdpb25UaXBTaG93OiBmdW5jdGlvbihlLCBjb3VudHJ5TmFtZSwgY29kZSkge1xuICAgICAgICAgICAgLy8gY29kZSBjb250YWlucyB0aGUgY29kZSBvZiB0aGUgY291bnRyeSAoaS5lLiwgUFQsIEVTLCBGUiwgZXRjKVxuICAgICAgICAgICAgLy8gc2hvdyB0aGUgQ291bnQgYXNzb2NpYXRlZCB0byB0aGF0IENvdW50cnkgLSBsb29rIGZvciB0aGUgY291bnRyeVxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ291bnRyeSA9IC0xO1xuICAgICAgICAgICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeS5Db3VudHJ5ID09PSBjb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ291bnRyeSA9IGN1cnJlbnRDb3VudHJ5O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRDb3VudHJ5ICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgLy8gZmluZCBvY2N1cnJlbmNlIG9mIHNldmVyYWwgc3RyaW5ncyBpbnNpZGUgdGhlIHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgdmFyIGZpbmFsVG9vbHRpcCA9IGJ1aWxkQ291bnRyeVRvb2x0aXAoY291bnRyeU5hbWUsIHNlbGVjdGVkQ291bnRyeSk7XG4gICAgICAgICAgICAgICAgY291bnRyeU5hbWUuaHRtbChmaW5hbFRvb2x0aXApO1xuICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgY291bnRyeU5hbWUuaHRtbChjb3VudHJ5TmFtZS5odG1sKCkpO1xuICAgICAgICB9LFxuICAgICAgICBzZXJpZXM6IHtcbiAgICAgICAgICAgIG1hcmtlcnM6IFtmaW5hbE1hcmtlcnNJbk1hcF0sXG4gICAgICAgICAgICByZWdpb25zOiBbe1xuICAgICAgICAgICAgICAgIC8vIG1pbiBhbmQgbWF4IHZhbHVlcyBvZiBjb3VudFxuICAgICAgICAgICAgICAgIHNjYWxlOiBbbWluQ29sb3JNYXAsIG1heENvbG9yTWFwXSxcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICdmaWxsJyxcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IGF1eENvbG9yc1xuICAgICAgICAgICAgfV1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gZHJhdyBtYXJrZXJzIG9uIHRoZSBtYXBcbiAgICBpZiAoZGF0YVR5cGUgPT0gJ21hcmtlcnMnKSB7XG4gICAgICAgIGZpbHRlcmVkTWFya2VycyA9IGpzb25NYXJrZXJzO1xuICAgICAgICBhZGRNYXJrZXJzVG9NYXAoKTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBidWlsZENvdW50cnlUb29sdGlwKGNvdW50cnlOYW1lLCBzZWxlY3RlZENvdW50cnkpIHtcbiAgICB2YXIgZmluYWxUb29sdGlwID0gY291bnRyeVRvb2x0aXA7XG4gICAgZmluYWxUb29sdGlwID0gZmluYWxUb29sdGlwLnJlcGxhY2UoJ25hbWUnLCBjb3VudHJ5TmFtZS5odG1sKCkpO1xuICAgIGZpbmFsVG9vbHRpcCA9IGZpbmFsVG9vbHRpcC5yZXBsYWNlKCdjb3VudCcsIHNlbGVjdGVkQ291bnRyeS5Db3VudCk7XG4gICAgcmV0dXJuIGZpbmFsVG9vbHRpcDtcbn1cblxuZnVuY3Rpb24gYnVpbGRNYXJrZXJUb29sdGlwKGpzb25NYXJrZXJzLCBpbmRleCkge1xuICAgIHZhciBmaW5hbFRvb2x0aXAgPSBtYXJrZXJUb29sdGlwO1xuICAgIGZpbmFsVG9vbHRpcCA9IGZpbmFsVG9vbHRpcC5yZXBsYWNlKCdkZXNjcmlwdGlvbicsIGpzb25NYXJrZXJzW2luZGV4XS5kZXNjKTtcbiAgICBmaW5hbFRvb2x0aXAgPSBmaW5hbFRvb2x0aXAucmVwbGFjZSgnbGF0aXR1ZGUnLCBqc29uTWFya2Vyc1tpbmRleF0uTGF0aXR1ZGUpO1xuICAgIGZpbmFsVG9vbHRpcCA9IGZpbmFsVG9vbHRpcC5yZXBsYWNlKCdsb25naXR1ZGUnLCBqc29uTWFya2Vyc1tpbmRleF0uTG9uZ2l0dWRlKTtcbiAgICByZXR1cm4gZmluYWxUb29sdGlwO1xufVxuXG5mdW5jdGlvbiBidWlsZFJlZ2lvblRvb2x0aXAocmVnaW9uKSB7XG4gICAgdmFyIGZpbmFsVG9vbHRpcCA9IHJlZ2lvblRvb2x0aXA7XG4gICAgZmluYWxUb29sdGlwID0gZmluYWxUb29sdGlwLnJlcGxhY2UoJ25hbWUnLCByZWdpb24ubmFtZSk7XG4gICAgcmV0dXJuIGZpbmFsVG9vbHRpcDtcbn1cblxuLy8gQXV4aWxpYXJ5IGZ1bmN0aW9uIHRvIHRyYW5zcG9zZSBhIHZhbHVlIGZyb20gYW4gaW5pdGlhbCByYW5nZSB0byBhbm90aGVyIHJhbmdlXG5mdW5jdGlvbiBtYXBSYW5nZSh2YWx1ZSwgbG93MSwgaGlnaDEsIGxvdzIsIGhpZ2gyKSB7XG4gICAgcmV0dXJuIGxvdzIgKyAoaGlnaDIgLSBsb3cyKSAqICh2YWx1ZSAtIGxvdzEpIC8gKGhpZ2gxIC0gbG93MSk7XG59XG5cblZlY3RvcmlhbE1hcC5wcm90b3R5cGUuZmlsdGVyT25TZXJ2ZXIgPSBmdW5jdGlvbihmaWx0ZXJzKSB7XG4gICAgLy8gcmVhZCB0aGUgZmlsdGVycyBmcm9tIGEgSlNPTiBmaWxlIChqdXN0IGZvciB0ZXN0aW5nKVxuICAgICQuZ2V0SlNPTihcIi4uL2pzb24vc2VydmVyRmlsdGVyLmpzb25cIiwgZnVuY3Rpb24oZmlsdGVyc0pTT04pIHtcbiAgICAgICAgLy8gY29udmVydCB0aGUgZmlsdGVyc0pTT04gdG8gYSBzdHJpbmdcbiAgICAgICAgdmFyIGZpbHRlcnNTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShmaWx0ZXJzSlNPTik7XG4gICAgICAgIC8vIGJ1aWxkIHRoZSB1cmwgdG8gc2VuZCB0byB0aGUgc2VydmVyXG4gICAgICAgIHZhciB1cmwgPSAnaHR0cDovL3NlcnZlckZpbHRlcmluZy5jb20vP2RhdGE9JyArIGVuY29kZVVSSUNvbXBvbmVudChmaWx0ZXJzU3RyaW5nKTtcbiAgICAgICAgLy8gRk9SIFRFU1RJTkcgUFVSUE9TRVMgLSB0aGlzIGZpbGUgY29udGFpbnMgYSBkaWZmZXJlbnQgc2V0XG4gICAgICAgIC8vIG9mIGNvdW50cmllcyBhbmQgbWFya2Vyc1xuICAgICAgICB1cmwgPSAnLi4vanNvbi9jb3VudHJpZXNfcGx1c19tYXJrZXJzMi5qc29uJztcbiAgICAgICAgLy8gc2VuZCByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgdG8gZ2V0IHRoZSBtYXJrZXJzIGFuZCBjb3VudHJpZXNcbiAgICAgICAgJC5nZXRKU09OKHVybCwgZnVuY3Rpb24oanNvbikge1xuICAgICAgICAgICAgLy8gZ2V0IHRoZSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICBUSElTIENPREUgSVMgU0VSVkVSIFNJREVcbiAgICAgICAgICAgIHZhciBteVBhcmFtID0gdXJsLnNwbGl0KCdkYXRhPScpWzFdO1xuICAgICAgICAgICAgdmFyIHJldHVybkpTT04gPSBkZWNvZGVVUklDb21wb25lbnQobXlQYXJhbSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnBhcnNlKHJldHVybkpTT04pKTtcbiAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIC8vIHBhcnNlIHRoZSBKU09OIHRvIGdldCB0aGUgY291bnRyaWVzIGFuZCBtYXJrZXJzXG4gICAgICAgICAgICBqc29uQ291bnRyaWVzID0gcmVhZENvdW50cmllc0Zyb21KU09OKGpzb24uY291bnRyaWVzKTtcbiAgICAgICAgICAgIC8vIGdldCB0aGUgY29sb3VycyBmb3IgdGhlIGNvdW50cmllc1xuICAgICAgICAgICAgdmFyIGNvdW50cnlDb2xvcnMgPSBnZW5lcmF0ZUNvbG9yc0ZvclRoZUNvdW50cmllcyhqc29uQ291bnRyaWVzKTtcbiAgICAgICAgICAgIC8vIGRpc3BsYXkgdGhlIGNvdW50cmllcyBvbiB0aGUgbWFwXG4gICAgICAgICAgICByZWxvYWRNYXAoY291bnRyeUNvbG9ycyk7XG5cbiAgICAgICAgICAgIC8vIGluIGNhc2Ugd2UgYWxzbyBoYXZlIG1hcmtlcnNcbiAgICAgICAgICAgIGlmIChqc29uLm1hcmtlcnMpIHtcbiAgICAgICAgICAgICAgICAvLyByZWFkIHRoZSBtYXJrZXJzIGZyb20gdGhlIEpTT04gZmlsZVxuICAgICAgICAgICAgICAgIGpzb25NYXJrZXJzID0gcmVhZE1hcmtlcnNGcm9tSlNPTihqc29uLm1hcmtlcnMpO1xuICAgICAgICAgICAgICAgIC8vIGFkZCBtYXJrZXJzIHRvIHRoZSBtYXBcbiAgICAgICAgICAgICAgICBhZGRNYXJrZXJzVG9NYXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4iLCJ2YXIgQ291bnRyeSA9IGZ1bmN0aW9uKGNvdW50cnlPYmplY3QsIG5hbWUsIGNvdW50KSB7XG5cdGlmKGNvdW50cnlPYmplY3QgPT0gJycpIHtcblx0XHQvLyByZWFkIGZyb20gdGhlIGlucHV0IHBhcmFtZXRlcnNcblx0XHR0aGlzLkNvdW50cnkgPSBuYW1lO1xuXHRcdC8vICsgaXMgdXNlZCB0byBhc3N1cmUgdGhhdCBhIE51bWJlciBpcyBiZWluZyByZWFkXG5cdFx0dGhpcy5Db3VudCA9ICtjb3VudDtcblx0XHR0aGlzLlZhciA9IDA7XG5cdFx0dGhpcy5kZXNjID0gJ2FiYyc7XG5cdH0gZWxzZSB7XG5cdFx0Ly8gcmVhZCBmcm9tIHRoZSBKU09OXG5cdFx0dmFyIGhhc05hbWUgPSB0cnVlO1xuXHRcdHZhciBpID0gMDtcblx0XHRkbyB7XG5cdFx0XHRpKys7XG5cdFx0XHR2YXIgY3VycmVudE5hbWVUb0NoZWNrID0gJ05hbWUnICsgaTtcblx0XHRcdHZhciBjdXJyZW50VmFsdWUgPSAnVmFsdWUnICsgaTtcblx0XHRcdGlmKGNvdW50cnlPYmplY3RbY3VycmVudE5hbWVUb0NoZWNrXSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGhhc05hbWUgPSBmYWxzZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXNbY3VycmVudE5hbWVUb0NoZWNrXSA9IGNvdW50cnlPYmplY3RbY3VycmVudE5hbWVUb0NoZWNrXTtcblx0XHRcdFx0dGhpc1tjdXJyZW50VmFsdWVdID0gY291bnRyeU9iamVjdFtjdXJyZW50VmFsdWVdO1xuXHRcdFx0fVxuXHRcdH0gd2hpbGUgKGhhc05hbWUpO1xuXG5cdFx0Ly8gdHJ5IHRvIHJlYWQgaXRzIHJlZ2lvbnMgaW4gY2FzZSBoZSBoYXMgYW55XG5cdFx0aWYoY291bnRyeU9iamVjdC5SZWdpb25zKVxuXHRcdFx0dGhpcy5SZWdpb25zID0gcmVhZFJlZ2lvbnNGcm9tSlNPTihjb3VudHJ5T2JqZWN0LlJlZ2lvbnMsIGNvdW50cnlPYmplY3QuQ291bnRyeSk7XG5cblx0XHR0aGlzLkNvdW50cnkgPSBjb3VudHJ5T2JqZWN0LkNvdW50cnk7XG5cdFx0Ly8gKyBpcyB1c2VkIHRvIGFzc3VyZSB0aGF0IGEgTnVtYmVyIGlzIGJlaW5nIHJlYWRcblx0XHR0aGlzLkNvdW50ID0gK2NvdW50cnlPYmplY3QuQ291bnQ7XG5cdFx0dGhpcy5WYXIgPSBjb3VudHJ5T2JqZWN0LlZhcjtcblx0XHR0aGlzLmRlc2MgPSAnYWJjJztcblx0fVxufTtcblxuZnVuY3Rpb24gZ2VuZXJhdGVDb2xvcnNGb3JUaGVDb3VudHJpZXMoY291bnRyaWVzKSB7XG5cdGlmKCFjb3VudHJpZXMpXG5cdFx0Y291bnRyaWVzID0ganNvbkNvdW50cmllcztcblx0dmFyIGNvdW50cnlDb2xvcnMgPSBbXTtcblx0JC5lYWNoKGNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG5cdFx0Y291bnRyeUNvbG9yc1tjdXJyZW50Q291bnRyeS5Db3VudHJ5XSA9IGN1cnJlbnRDb3VudHJ5LkNvdW50O1xuXHR9KTtcblx0cmV0dXJuIGNvdW50cnlDb2xvcnM7XG59O1xuXG5mdW5jdGlvbiByZWFkQ291bnRyaWVzRnJvbUpTT04obWFya2Vycykge1xuXG5cdHZhciBjb3VudHJpZXMgPSBbXTtcblx0dmFyIG51bUpTT05Db3VudHJpZXMgPSBtYXJrZXJzLmxlbmd0aDtcblxuXHRtaW5Db3VudCA9IEluZmluaXR5O1xuXHRtYXhDb3VudCA9IC1JbmZpbml0eTtcblxuXHQkLmVhY2gobWFya2VycywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG5cdFx0Y291bnRyaWVzW2luZGV4XSA9IG5ldyBDb3VudHJ5KGN1cnJlbnRDb3VudHJ5KTtcblxuXHRcdGlmKGNvdW50cmllc1tpbmRleF0uQ291bnQgPiBtYXhDb3VudClcblx0XHRcdG1heENvdW50ID0gY291bnRyaWVzW2luZGV4XS5Db3VudDtcblxuXHRcdGlmKGNvdW50cmllc1tpbmRleF0uQ291bnQgPCBtaW5Db3VudClcblx0XHRcdG1pbkNvdW50ID0gY291bnRyaWVzW2luZGV4XS5Db3VudDtcblx0fSk7XG5cdHJldHVybiBjb3VudHJpZXM7XG59XG5cbi8vIHJldHVybiB0aGUgY291bnRyeSB3aG9zZSBuYW1lIGlzIHBhc3NlZCBhcyBhbiBhcmd1bWVudFxuZnVuY3Rpb24gZmluZENvdW50cnlCeU5hbWUoY291bnRyeU5hbWUpXG57XG5cdHZhciByZXR1cm5Db3VudHJ5ID0gbnVsbDtcblx0JC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuXHRcdGlmKGN1cnJlbnRDb3VudHJ5LkNvdW50cnkgPT0gY291bnRyeU5hbWUpXG5cdFx0e1xuXHRcdFx0cmV0dXJuQ291bnRyeSA9IGN1cnJlbnRDb3VudHJ5O1xuXHRcdFx0cmV0dXJuIHJldHVybkNvdW50cnk7XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIHJldHVybkNvdW50cnk7XG59XG5cbi8vIHJlYWQgdGhlIG1pbiBhbmQgbWF4IGNvdW50IG9mIHRoZSBjb3VudHJpc1xuZnVuY3Rpb24gcmVhZE1pbk1heChjb3VudHJpZXNOYW1lcylcbntcblx0bWluQ291bnQgPSBJbmZpbml0eTtcblx0bWF4Q291bnQgPSAtSW5maW5pdHk7XG5cblx0Ly8gY291bnRyaWVzIG5hbWVzIGlzIGEgSlNPTiBvYmplY3Rcblx0Ly8gcmVhZCBrZXlzIHRvIGFuIGFycmF5XG5cdHZhciBrZXlzID0gW107XG5cdGZvciAodmFyIGtleSBpbiBjb3VudHJpZXNOYW1lcykge1xuXHQgIGlmIChjb3VudHJpZXNOYW1lcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdCAgICBrZXlzLnB1c2goa2V5KTtcblx0ICB9XG5cdH1cblxuXHQvLyBmaW5kIGNvdW50cnkgYnkgbmFtZVxuXHQkLmVhY2goa2V5cywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5TmFtZSkge1xuXHRcdC8vIGZpbmQgdGhlIGNvdW50cnkgYnkgaXRzIG5hbWVcblx0XHR2YXIgY3VycmVudENvdW50cnkgPSBmaW5kQ291bnRyeUJ5TmFtZShjdXJyZW50Q291bnRyeU5hbWUpO1xuXHRcdGlmKGN1cnJlbnRDb3VudHJ5LkNvdW50ID4gbWF4Q291bnQpXG5cdFx0XHRtYXhDb3VudCA9IGN1cnJlbnRDb3VudHJ5LkNvdW50O1xuXG5cdFx0aWYoY3VycmVudENvdW50cnkuQ291bnQgPCBtaW5Db3VudClcblx0XHRcdG1pbkNvdW50ID0gY3VycmVudENvdW50cnkuQ291bnQ7XG5cdH0pO1xufVxuIiwidmFyIHJlc2V0RmlsdGVyc0JveCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gcmVzZXQgYWxsIHRoZSAnZmJveGVzJ1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtRmlsdGVyczsgaSsrKSB7XG4gICAgICAgICQoXCIjZmJveFwiICsgaSkudGV4dCgnJyk7XG4gICAgICAgICQoXCIjZmJveFwiICsgaSkudmFsKCcnKTtcbiAgICB9XG5cbiAgICAvLyByZWxvYWQgdGhlIG1hcFxuICAgIHZhciBjb2xvcnMgPSBnZW5lcmF0ZUNvbG9yc0ZvclRoZUNvdW50cmllcygpO1xuICAgIHJlbG9hZE1hcChjb2xvcnMpO1xuXG4gICAgZmlsdGVyZWRNYXJrZXJzID0ganNvbk1hcmtlcnM7XG4gICAgYWRkTWFya2Vyc1RvTWFwKCk7XG59O1xuXG5mdW5jdGlvbiBjcmVhdGVGaWx0ZXJzQm94Q2hlY2tib3hlcygpIHtcblxuICAgICQoJ2ZpbHRlci1ib3gnKS5hcHBlbmQoJzx1bCBjbGFzcz1cIm5hdiBuYXZiYXItbmF2XCIgaWQ9XCJmaWx0ZXJCb3hDaGVja2JveGVzXCIgc3R5bGU9XCJib3JkZXItc3R5bGU6IHNvbGlkOyBib3JkZXItd2lkdGg6IDJweDtcIj48L3VsPicpO1xuXG4gICAgLy8gZ2V0IGFsbCB0aGUgZmlsdGVyc1xuICAgICQuZWFjaChqc29uRmlsdGVyc0FycmF5LCBmdW5jdGlvbihpbmRleCwgY3VycmVudEZpbHRlcikge1xuICAgICAgICB2YXIgYm94SUQgPSAnI2JveCcgKyAoaW5kZXggKyAxKTtcbiAgICAgICAgLy8gYXBwZW5kIHRvIHRoZSBIVE1MXG4gICAgICAgICQoJyNmaWx0ZXJCb3hDaGVja2JveGVzJykuYXBwZW5kKCc8bGkgY2xhc3M9XCJjb2wtc20tNlwiIGlkPVwiYm94JyArIChpbmRleCArIDEpICsgJ1wiIGNsYXNzPVwiZHJvcGRvd24tY2hlY2tib3gtZXhhbXBsZSBkcm9wZG93bi1jaGVja2JveCBkcm9wZG93blwiPjwvbGk+Jyk7XG5cbiAgICAgICAgLy8gZmlsbCB0aGUgdGFicyBmb3IgdGhlIHllYXIgZmlsdGVyXG4gICAgICAgIHZhciB0YWIgPSBbXTtcbiAgICAgICAgJC5lYWNoKGN1cnJlbnRGaWx0ZXIuVmFsdWVzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudFZhbHVlKSB7XG4gICAgICAgICAgICB0YWIucHVzaCh7XG4gICAgICAgICAgICAgICAgJ2lkJzogaW5kZXggKyAxLFxuICAgICAgICAgICAgICAgICdsYWJlbCc6IGN1cnJlbnRWYWx1ZSxcbiAgICAgICAgICAgICAgICAnaXNDaGVja2VkJzogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiBwKHdhdCkge1xuICAgICAgICAgICAgcmV0dXJuICc8cD4nICsgSlNPTi5zdHJpbmdpZnkod2F0KSArICc8L3A+JztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVN0YXR1cygpIHtcbiAgICAgICAgICAgIHZhciAkcCA9ICQoJ3Auc3RhdHVzJykuZW1wdHkoKTtcbiAgICAgICAgICAgICRwLmFwcGVuZChwKHdpZGdldC5jaGVja2VkKCkpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRyb3Bkb3duIHdpdGggY2hlY2tib3hlcyBpbml0aWFsaXphdGlvblxuICAgICAgICB2YXIgbmFtZSA9IGN1cnJlbnRGaWx0ZXIuTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBuYW1lID0gbmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoMSk7XG4gICAgICAgICQoYm94SUQpLmRyb3Bkb3duQ2hlY2tib3goe1xuICAgICAgICAgICAgZGF0YTogdGFiLFxuICAgICAgICAgICAgYXV0b3NlYXJjaDogdHJ1ZSxcbiAgICAgICAgICAgIGhpZGVIZWFkZXI6IGZhbHNlLFxuICAgICAgICAgICAgLy8gc2hvdyBudW1iZXIgb2Ygc2VsZWN0ZWQgaXRlbXNcbiAgICAgICAgICAgIHNob3dOYlNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIHRlbXBsYXRlQnV0dG9uOiAnPGEgY2xhc3M9XCJkcm9wZG93bi1jaGVja2JveC10b2dnbGVcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgaHJlZj1cIiNcIj4nICsgbmFtZSArICc8c3BhbiBjbGFzcz1cImRyb3Bkb3duLWNoZWNrYm94LW5ic2VsZWN0ZWRcIj48L3NwYW4+PGIgY2xhc3M9XCJjYXJldFwiPjwvYj4nXG4gICAgICAgIH0pO1xuICAgICAgICB3aWRnZXQgPSAkKGJveElEKS5kYXRhKCdkcm9wZG93bkNoZWNrYm94Jyk7XG5cbiAgICAgICAgJCgnYm9keScpLm9uKCdjaGFuZ2U6ZHJvcGRvd24tY2hlY2tib3ggY2hlY2tlZCBjaGVja2VkOmFsbCBjaGVjazphbGwgdW5jaGVjazphbGwgY2hlY2s6Y2hlY2tlZCB1bmNoZWNrOmNoZWNrZWQnLCB1cGRhdGVTdGF0dXMoKSk7XG4gICAgICAgIHVwZGF0ZVN0YXR1cygpO1xuICAgIH0pO1xuXG4gICAgLy8gYXBwZW5kIGZpbHRlciBhbmQgcmVzZXQgYnV0dG9uXG5cbiAgICB2YXIgdGV4dFRvQXBwZW5kID0gJzxkaXYgaWQ9XCJmaWx0ZXJzX2JveFwiIGNsYXNzPVwicm93IGNvbC1zbS0xMlwiPicgK1xuICAgICAgICAnPGJ1dHRvbiBpZD1cImZpbHRlcl9ib3hfYXBwbHlfZmlsdGVyc1wiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBjb2wtc20tNCBjb2wtc20tb2Zmc2V0LTFcIj5GaWx0ZXI8L2J1dHRvbj4nICtcbiAgICAgICAgJzxidXR0b24gaWQ9XCJmaWx0ZXJfYm94X3Jlc2V0X2ZpbHRlcnNcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgY29sLXNtLTQgY29sLXNtLW9mZnNldC0xXCI+UmVzZXQ8L2J1dHRvbj48L2Rpdj4nO1xuICAgICQoJyNmaWx0ZXJCb3hDaGVja2JveGVzJykuYXBwZW5kKHRleHRUb0FwcGVuZCk7XG5cbiAgICAvLyB0cmlnZ2VyZWQgd2hlbiB0aGUgc2VhcmNoIGJ1dHRvbiBpcyBjbGlja2VkXG4gICAgJChcIiNmaWx0ZXJfYm94X2FwcGx5X2ZpbHRlcnNcIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBqc29uT2JqZWN0ID0ge307XG4gICAgICAgIHZhciBudW1GaWx0ZXJzID0ganNvbkZpbHRlcnNBcnJheS5sZW5ndGg7XG4gICAgICAgIHZhciBlbXB0eUZpbHRlcnMgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGpzb25GaWx0ZXJzQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vIGN1cnJlbnQgYW5kIG5leHQgZmlsdGVyIGlkJ3NcbiAgICAgICAgICAgIHZhciBjdXJyZW50RmlsdGVyID0gXCIjYm94XCIgKyAoaSArIDEpO1xuICAgICAgICAgICAgLy8gY3VycmVudCBmaWx0ZXIgdmFsdWVzIC0gc2VsZWN0ZWQgaXRlbXNcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZEl0ZW1zID0gZ2V0U2VsZWN0ZWRJdGVtcyhjdXJyZW50RmlsdGVyKTtcbiAgICAgICAgICAgIHZhciBpdGVtc0FycmF5ID0gW107XG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHNlbGVjdGVkSXRlbXMpO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBrZXlzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgaXRlbXNBcnJheS5wdXNoKHNlbGVjdGVkSXRlbXNba2V5c1tqXV0ubGFiZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgd2UgaGF2ZSBhbnkgZmlsdGVyaW5nIHRvIGFwcGx5IG9yIG5vdFxuICAgICAgICAgICAgaWYgKGtleXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGpzb25PYmplY3RbanNvbkZpbHRlcnNBcnJheVtpXS5OYW1lXSA9IGl0ZW1zQXJyYXkuam9pbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbXB0eUZpbHRlcnMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBhdm9pZCB0aGUgdXNlciBzZWxlY3RpbmcgdGhlIEZpbHRlciBidXR0b24gd2l0aG91dCBpbnB1dGluZyBhbnkgZGF0YVxuICAgICAgICBpZiAoZW1wdHlGaWx0ZXJzICE9IG51bUZpbHRlcnMpIHtcbiAgICAgICAgICAgIGZpbHRlcihqc29uT2JqZWN0KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gdHJpZ2dlcmVkIHdoZW4gdGhlIHJlc2V0IGJ1dHRvbiBpcyBjbGlja2VkXG4gICAgJChcIiNmaWx0ZXJfYm94X3Jlc2V0X2ZpbHRlcnNcIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc2V0RmlsdGVyc0JveCgpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRTZWxlY3RlZEl0ZW1zKGJveElEKSB7XG4gICAgcmV0dXJuICQoYm94SUQpLmRyb3Bkb3duQ2hlY2tib3goXCJjaGVja2VkXCIpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVGaWx0ZXJzQm94V2l0aEVudW1lcmF0aW9uKGpzb25GaWx0ZXJzKSB7XG5cbiAgICB2YXIgbnVtRmlsdGVycyA9IGpzb25GaWx0ZXJzLmxlbmd0aDtcbiAgICAvLyBjcmVhdGUgZmlsdGVycyBib3ggd2l0aCBlbnVtZXJhdGlvblxuICAgICQuZWFjaChqc29uRmlsdGVycywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRGaWx0ZXIpIHtcbiAgICAgICAgdmFyIGZpbHRlck5hbWUgPSBjdXJyZW50RmlsdGVyLk5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgZmlsdGVyTmFtZSA9IGZpbHRlck5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBmaWx0ZXJOYW1lLnNsaWNlKDEpO1xuICAgICAgICB2YXIgYnV0dG9uSWQgPSAnZHJvcGRvd24nICsgaW5kZXggKyAnYnV0dG9uJztcbiAgICAgICAgdmFyIHVsSWQgPSAnZHJvcGRvd24nICsgaW5kZXg7XG4gICAgICAgIHZhciB0b0FwcGVuZCA9ICcnO1xuXG4gICAgICAgIC8vIGZpbHRlciB0ZXh0XG4gICAgICAgIHRvQXBwZW5kICs9ICc8cD48Yj4nICsgZmlsdGVyTmFtZSArICc6PC9iPjwvcD4nO1xuICAgICAgICB0b0FwcGVuZCArPSAnPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj4nO1xuICAgICAgICB0b0FwcGVuZCArPSAnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImZib3gnICsgaW5kZXggKyAnXCInO1xuICAgICAgICAvLyBidWlsZCB0aGUgcGxhY2Vob2xkZXJcbiAgICAgICAgdmFyIHBsYWNlaG9sZGVyID0gY3VycmVudEZpbHRlci5WYWx1ZXNcbiAgICAgICAgdG9BcHBlbmQgKz0gJ3BsYWNlaG9sZGVyPVwiJyArIHBsYWNlaG9sZGVyICsgJ1wiICs+JztcbiAgICAgICAgdG9BcHBlbmQgKz0gJzwvZGl2Pic7XG5cbiAgICAgICAgJCgnZmlsdGVyLWJveCcpLmFwcGVuZCh0b0FwcGVuZCk7XG5cbiAgICAgICAgLy8gYWRkIEJvb3RzdHJhcCB0b29sdGlwIHRvIHRoZSBmaWx0ZXJzIGJveFxuICAgICAgICAkKCcjZmlsdGVyLWJveCcpLnRvb2x0aXAoe1xuICAgICAgICAgICAgdGl0bGU6IFwiVXNlIHRoaXMgZmlsdGVyIGJveCB0byBmaWx0ZXIgYnkgbXVsdGlwbGUgZmlsdGVyc1wiLFxuICAgICAgICAgICAgcGxhY2VtZW50OiBcImJvdHRvbVwiXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gYWRkIHRoZSBidXR0b25zXG4gICAgdmFyIHRleHRUb0FwcGVuZCA9ICc8ZGl2IGlkPVwiZmlsdGVyc19ib3hcIj4nICtcbiAgICAgICAgJzxidXR0b24gaWQ9XCJmaWx0ZXJfYm94X2FwcGx5X2ZpbHRlcnNcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgY29sLXNtLTQgY29sLXNtLW9mZnNldC0xXCI+RmlsdGVyPC9idXR0b24+JyArXG4gICAgICAgICc8YnV0dG9uIGlkPVwiZmlsdGVyX2JveF9yZXNldF9maWx0ZXJzXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGNvbC1zbS00IGNvbC1zbS1vZmZzZXQtMVwiPlJlc2V0PC9idXR0b24+PC9kaXY+JztcbiAgICAkKCdmaWx0ZXItYm94JykuYXBwZW5kKHRleHRUb0FwcGVuZCk7XG5cbiAgICAvLyB0cmlnZ2VyZWQgd2hlbiB0aGUgc2VhcmNoIGJ1dHRvbiBpcyBjbGlja2VkXG4gICAgJChcIiNmaWx0ZXJfYm94X2FwcGx5X2ZpbHRlcnNcIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBqc29uT2JqZWN0ID0ge307XG4gICAgICAgIHZhciBudW1GaWx0ZXJzID0ganNvbkZpbHRlcnMubGVuZ3RoO1xuICAgICAgICB2YXIgZW1wdHlGaWx0ZXJzID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBqc29uRmlsdGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gY3VycmVudCBhbmQgbmV4dCBmaWx0ZXIgaWQnc1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRGaWx0ZXIgPSBcIiNmYm94XCIgKyBpO1xuICAgICAgICAgICAgLy8gY3VycmVudCBhbmQgbmV4dCBmaWx0ZXIgdmFsdWVzXG4gICAgICAgICAgICB2YXIgY3VycmVudEZpbHRlclZhbHVlID0gJChjdXJyZW50RmlsdGVyKS52YWwoKTtcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHdlIGhhdmUgYW55IGZpbHRlcmluZyB0byBhcHBseSBvciBub3RcbiAgICAgICAgICAgIGlmIChjdXJyZW50RmlsdGVyVmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAganNvbk9iamVjdFtqc29uRmlsdGVyc1tpXS5OYW1lXSA9IGN1cnJlbnRGaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZW1wdHlGaWx0ZXJzKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXZvaWQgdGhlIHVzZXIgc2VsZWN0aW5nIHRoZSBGaWx0ZXIgYnV0dG9uIHdpdGhvdXQgaW5wdXRpbmcgYW55IGRhdGFcbiAgICAgICAgaWYgKGVtcHR5RmlsdGVycyAhPSBudW1GaWx0ZXJzKSB7XG4gICAgICAgICAgICBmaWx0ZXIoanNvbk9iamVjdCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIHRyaWdnZXJlZCB3aGVuIHRoZSByZXNldCBidXR0b24gaXMgY2xpY2tlZFxuICAgICQoXCIjZmlsdGVyX2JveF9yZXNldF9maWx0ZXJzXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNldEZpbHRlcnNCb3goKTtcbiAgICB9KTtcbn1cbiIsImZ1bmN0aW9uIGdldEFsbEZpbHRlclZhbHVlcyhmaWx0ZXJWYWx1ZSkge1xuXHR2YXIgcmV0dXJuUGFydHMgPSBbXTtcblxuXHQvLyBjaGVjayBpZiB3ZSBoYXZlIGFuIGVudW1lcmF0aW9uIChjb21tYS1zZXBhcmF0ZWQgdmFsdWVzIGFuZC9vciByYW5nZXMpXG5cdGlmKFN0cmluZyhmaWx0ZXJWYWx1ZSkuaW5kZXhPZihcIixcIikgIT0gLTEpIHtcblxuXHRcdC8vIGdldCBhbGwgdGhlIGVudW1lcmF0ZWQgdmFsdWVzIChjYW4gYmUgc2luZ3VsYXIgb3IgcmFuZ2UpXG5cdFx0dmFyIGVudW1lcmF0aW9uUGFydHMgPSBTdHJpbmcoZmlsdGVyVmFsdWUpLnNwbGl0KFwiLFwiKTtcblxuXHRcdC8vIGNoZWNrIGlmIHdlIGhhdmUgYSBzaW1wbGUgdmFsdWUgb3IgYSByYW5nZVxuXHRcdCQuZWFjaChlbnVtZXJhdGlvblBhcnRzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEVudW1lcmF0aW9uKSB7XG5cblx0XHRcdC8vIGlmIHdlIGhhdmUgYSByYW5nZS4uLlxuXHRcdFx0aWYoY3VycmVudEVudW1lcmF0aW9uLmluZGV4T2YoXCItXCIpICE9IC0xKSB7XG5cblx0XHRcdFx0Ly8gYWxsIHRoZSByYW5nZSBwYXJ0c1xuXHRcdFx0XHR2YXIgcmFuZ2VQYXJ0cyA9IFN0cmluZyhjdXJyZW50RW51bWVyYXRpb24pLnNwbGl0KFwiLVwiKTtcblxuXHRcdFx0XHQvLyBjaGVjayBpZiB0aGUgZXh0cmVtZSB2YWx1ZXMgYXJlIHZhbGlkXG5cdFx0XHRcdGNoZWNrRmlsdGVyVmFsdWVzQXJlVmFsaWQoZmlsdGVyT2JqZWN0LCByYW5nZVBhcnRzKTtcblxuXHRcdFx0XHQvLyBnZXQgYWxsIHRoZSB2YWx1ZXMgYmV0d2VlbiB0aG9zZSB0d28gbnVtYmVyc1xuXHRcdFx0XHQvLyBhbmQgYWRkIHRoZW1cblx0XHRcdFx0dmFyIG1pbiA9IHJhbmdlUGFydHNbMF07XG5cdFx0XHRcdHZhciBtYXggPSByYW5nZVBhcnRzWzFdO1xuXHRcdFx0XHRmb3IoOyBtaW4gPD0gbWF4OyBtaW4rKylcblx0XHRcdFx0XHRyZXR1cm5QYXJ0cy5wdXNoKG1pbik7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIGlmIHdlIGRvbid0IGhhdmUgYSByYW5nZVxuXHRcdFx0XHQvLyBjaGVjayBpZiB0aGUgc2luZ2xlIHZhbHVlIGlzIHZhbGlkXG5cdFx0XHRcdHJldHVyblBhcnRzLnB1c2goY3VycmVudEVudW1lcmF0aW9uKTtcblxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdC8vIGp1c3QgYSBzaW5nbGUgcGFydFxuXHRcdGlmKGZpbHRlclZhbHVlLmluZGV4T2YoXCItXCIpICE9IC0xKSB7XG5cdFx0XHQvLyB3ZSBoYXZlIGEgcmFuZ2Vcblx0XHRcdHZhciBzdWJQYXJ0cyA9IFN0cmluZyhmaWx0ZXJWYWx1ZSkuc3BsaXQoXCItXCIpO1xuXHRcdFx0Ly8gY2hlY2sgaWYgdGhlIGV4dHJlbWUgdmFsdWVzIGFyZSB2YWxpZFxuXHRcdFx0Y2hlY2tGaWx0ZXJWYWx1ZXNBcmVWYWxpZChmaWx0ZXJPYmplY3QsIHN1YlBhcnRzKTtcblx0XHRcdC8vIGdldCBhbGwgdGhlIHZhbHVlcyBiZXR3ZWVuIHRob3NlIHR3byBudW1iZXJzXG5cdFx0XHR2YXIgbWluID0gc3ViUGFydHNbMF07XG5cdFx0XHR2YXIgbWF4ID0gc3ViUGFydHNbMV07XG5cdFx0XHRmb3IoOyBtaW4gPD0gbWF4OyBtaW4rKykge1xuXHRcdFx0XHRyZXR1cm5QYXJ0cy5wdXNoKG1pbik7XG5cdFx0XHR9XG5cdFx0fSBlbHNlXG5cdFx0XHRyZXR1cm5QYXJ0cy5wdXNoKGZpbHRlclZhbHVlKTtcblx0fVxuXHRyZXR1cm4gcmV0dXJuUGFydHM7XG59XG5cbmZ1bmN0aW9uIGNoZWNrV2hhdENvdW50cmllc1RvQWRkKHNlbGVjdGVkRmlsdGVyLCBmaWx0ZXJWYWx1ZSkge1xuXG5cdHZhciBjb3VudHJpZXMgPSBbXTtcblx0JC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuXHRcdC8vIGNoZWNrIGlmIGFueSBvZiB0aGUgbmFtZXMgaXMgZXF1YWwgdG8gdGhlIHNlbGVjdGVkIGZpbHRlclxuXHRcdC8vIHRyeSB0byByZWFkIGFsbCB0aGUgbmFtZXMgYW5kIHZhbHVlc1xuXHRcdHZhciBpID0gMDtcblx0XHRkbyB7XG5cdFx0XHRpKys7XG5cdFx0XHR2YXIgY3VycmVudE5hbWVUb0NoZWNrID0gJ05hbWUnICsgaTtcblx0XHRcdHZhciBjdXJyZW50VmFsdWUgPSAnVmFsdWUnICsgaTtcblx0XHRcdC8vIGNoZWNrIGlmIHRoZSBDb3VudHJ5IGhhcyB0aGF0IG5hbWVcblx0XHRcdGlmKGN1cnJlbnRDb3VudHJ5W2N1cnJlbnROYW1lVG9DaGVja10pIHtcblx0XHRcdFx0aWYoY3VycmVudENvdW50cnlbY3VycmVudFZhbHVlXSA9PSBmaWx0ZXJWYWx1ZSkge1xuXHRcdFx0XHRcdGNvdW50cnlWYWx1ZVRvQ2hlY2sgPSBjdXJyZW50VmFsdWU7XG5cdFx0XHRcdFx0Ly8gY2hlY2sgYnkgdmFsdWVcblx0XHRcdFx0XHRpZihjdXJyZW50Q291bnRyeVtjdXJyZW50VmFsdWVdID09IGZpbHRlclZhbHVlKVxuXHRcdFx0XHRcdFx0Y291bnRyaWVzW2N1cnJlbnRDb3VudHJ5LkNvdW50cnldID0gY3VycmVudENvdW50cnkuQ291bnQ7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZVxuXHRcdFx0XHRicmVhaztcblx0XHR9IHdoaWxlICh0cnVlKVxuXHR9KTtcblx0cmV0dXJuIGNvdW50cmllcztcbn07XG5cbmZ1bmN0aW9uIGNoZWNrV2hhdE1hcmtlcnNUb0FkZChzZWxlY3RlZEZpbHRlciwgZmlsdGVyVmFsdWUpIHtcblx0dmFyIG1hcmtlcnMgPSBbXTtcblx0Ly8gYWRkIG9ubHkgdGhlIG1hcmtlcnMgd2hvIGhhdmUgdGhhdCBmaWx0ZXIgdmFsdWVcblx0JC5lYWNoKGpzb25NYXJrZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudE1hcmtlcikge1xuXHRcdC8vIGNoZWNrIGlmIGFueSBvZiB0aGUgbmFtZXMgaXMgZXF1YWwgdG8gdGhlIHNlbGVjdGVkIGZpbHRlclxuXHRcdC8vIHRyeSB0byByZWFkIGFsbCB0aGUgbmFtZXMgYW5kIHZhbHVlc1xuXHRcdHZhciBpID0gMDtcblx0XHRkbyB7XG5cdFx0XHRpKys7XG5cdFx0XHR2YXIgY3VycmVudE5hbWVUb0NoZWNrID0gJ05hbWUnICsgaTtcblx0XHRcdHZhciBjdXJyZW50VmFsdWUgPSAnVmFsdWUnICsgaTtcblx0XHRcdC8vIGNoZWNrIGlmIHRoZSBDb3VudHJ5IGhhcyB0aGF0IG5hbWVcblx0XHRcdGlmKGN1cnJlbnRNYXJrZXJbY3VycmVudE5hbWVUb0NoZWNrXSkge1xuXHRcdFx0XHRpZihjdXJyZW50TWFya2VyW2N1cnJlbnROYW1lVG9DaGVja10gPT0gc2VsZWN0ZWRGaWx0ZXIuTmFtZSkge1xuXHRcdFx0XHRcdGlmKGN1cnJlbnRNYXJrZXJbY3VycmVudFZhbHVlXSA9PSBmaWx0ZXJWYWx1ZSlcblx0XHRcdFx0XHRcdG1hcmtlcnMucHVzaChjdXJyZW50TWFya2VyKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fSB3aGlsZSAodHJ1ZSlcblx0fSk7XG5cblx0cmV0dXJuIG1hcmtlcnM7XG59O1xuXG5mdW5jdGlvbiBjaGVja1doYXRDb3VudHJpZXNNYXJrZXJzVG9BZGQoc2VsZWN0ZWRGaWx0ZXIsIGZpbHRlclZhbHVlKSB7XG5cdHZhciBjb3VudHJpZXNUb0FkZCA9IFtdO1xuXHR2YXIgbWFya2Vyc1RvQWRkID0gW107XG5cblx0Ly8gY2hlY2sgd2hhdCBjb3VudHJpZXMgdG8gY29sb3VyXG5cdGNvdW50cmllc1RvQWRkID0gY2hlY2tXaGF0Q291bnRyaWVzVG9BZGQoc2VsZWN0ZWRGaWx0ZXIsIGZpbHRlclZhbHVlKTtcblx0bWFya2Vyc1RvQWRkID0gY2hlY2tXaGF0TWFya2Vyc1RvQWRkKHNlbGVjdGVkRmlsdGVyLCBmaWx0ZXJWYWx1ZSk7XG5cblx0cmV0dXJuIFtjb3VudHJpZXNUb0FkZCwgbWFya2Vyc1RvQWRkXTtcbn1cblxuZnVuY3Rpb24gY2hlY2tGaWx0ZXJOYW1lSXNWYWxpZChmaWx0ZXJOYW1lKSB7XG5cdHZhciB2YWxpZCA9IGZhbHNlO1xuXHQkLmVhY2goanNvbkZpbHRlcnNBcnJheSwgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRGaWx0ZXIpIHtcblx0XHRpZihjdXJyZW50RmlsdGVyLk5hbWUudG9Mb3dlckNhc2UoKSA9PT0gZmlsdGVyTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG5cdFx0XHRmaWx0ZXJPYmplY3QgPSBjdXJyZW50RmlsdGVyO1xuXHRcdFx0dmFsaWQgPSB0cnVlO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0fSk7XG5cdHJldHVybiB2YWxpZDtcbn1cblxuZnVuY3Rpb24gY2hlY2tGaWx0ZXJWYWx1ZXNBcmVWYWxpZChmaWx0ZXIsIGZpbHRlclZhbHVlcykge1xuXHR2YXIgdmFsaWQgPSBmYWxzZTtcblx0JC5lYWNoKGZpbHRlclZhbHVlcywgZnVuY3Rpb24oaW5kZXgsIHBhcnQpIHtcblx0XHQvLyBjaGVjayBpZiB0aGUgY3VycmVudCB2YWx1ZSBpcyB2YWxpZFxuXHRcdCQuZWFjaChmaWx0ZXJPYmplY3QuVmFsdWVzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudFZhbHVlKSB7XG5cdFx0XHRpZihjdXJyZW50VmFsdWUgPT0gcGFydCkge1xuXHRcdFx0XHR2YWxpZCA9IHRydWU7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRpZighdmFsaWQpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdJbnZhbGlkIHZhbHVlIGZvciB0aGUgZmlsdGVyOiAnICsgcGFydCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIHZhbGlkO1xufVxuXG5mdW5jdGlvbiBhZGRNYXJrZXJzVG9NYXAobWFya2Vycykge1xuXHQkLmVhY2gobWFya2VycywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcblx0XHRtYXAuYWRkTWFya2VyKGluZGV4LCB7XG5cdFx0XHRsYXRMbmc6IFtjdXJyZW50TWFya2VyLkxhdGl0dWRlLCBjdXJyZW50TWFya2VyLkxvbmdpdHVkZV0sXG5cdFx0XHRuYW1lOiBjdXJyZW50TWFya2VyLmRlc2MsXG5cblx0XHRcdC8vIHNldCB0aGUgc3R5bGUgZm9yIHRoaXMgbWFya2VyXG5cdFx0XHRzdHlsZToge1xuXHRcdFx0XHRmaWxsOiAnZ3JlZW4nLFxuXHRcdFx0XHRyOiBtYXBSYW5nZShjdXJyZW50TWFya2VyLkNvdW50LCBtaW5Db3VudCwgbWF4Q291bnQsIG1pblJhZGl1cywgbWF4UmFkaXVzKVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcbn1cbiIsIi8vIGNyZWF0ZSBhIG5ldyBGSWx0ZXIgb2JqZWN0XG52YXIgRmlsdGVyID0gZnVuY3Rpb24oTmFtZSwgVmFsdWVzKSB7XG5cdHRoaXMuTmFtZSA9IE5hbWU7XG5cdHRoaXMuVmFsdWVzID0gVmFsdWVzO1xufTtcblxuLy8gbnVtYmVyIG9mIGZpbHRlcnNcbnZhciBudW1GaWx0ZXJzO1xudmFyIGN1cnJlbnRGaWx0ZXI7XG52YXIgY291bnRyeVZhbHVlVG9DaGVjaztcblxuZnVuY3Rpb24gcmVzZXRGaWx0ZXJzKCkge1xuXHQvLyBjb2xvciB0aGUgb3JpZ2luYWwgbWFwXG5cdHZhciBjb2xvcnMgPSBnZW5lcmF0ZUNvbG9yc0ZvclRoZUNvdW50cmllcygpO1xuXHRyZWxvYWRNYXAoY29sb3JzKTtcblxuXHQvLyBhZGQgb25seSB0aGUgbWFya2VycyB3aG8gaGF2ZSB0aGF0IGZpbHRlciB2YWx1ZVxuXHQkLmVhY2goanNvbk1hcmtlcnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50TWFya2VyKSB7XG5cdFx0bWFwLmFkZE1hcmtlcihpbmRleCwge1xuXHRcdFx0bGF0TG5nOiBbY3VycmVudE1hcmtlci5MYXRpdHVkZSwgY3VycmVudE1hcmtlci5Mb25naXR1ZGVdLFxuXHRcdFx0bmFtZTogY3VycmVudE1hcmtlci5kZXNjLFxuXG5cdFx0XHQvLyBzZXQgdGhlIHN0eWxlIGZvciB0aGlzIG1hcmtlclxuXHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0ZmlsbDogJ2dyZWVuJyxcblx0XHRcdFx0cjogbWFwUmFuZ2UoY3VycmVudE1hcmtlci5Db3VudCwgbWluQ291bnQsIG1heENvdW50LCBtaW5SYWRpdXMsIG1heFJhZGl1cylcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59XG5cblZlY3RvcmlhbE1hcC5wcm90b3R5cGUuY3JlYXRlU2xpZGVyID0gZnVuY3Rpb24oKSB7XG5cbiAgICAvLyBqUXVlcnlVSSBzbGlkZXJcbiAgICBzbGlkZXIgPSAkKFwiI3NsaWRlclwiKS5zbGlkZXIoKTtcblxuICAgIC8vIHNldCBtYXggYW5kIG1pbiB2YWx1ZSBmb3IgdGhlIHNsaWRlclxuICAgIHNsaWRlci5zbGlkZXIoXCJvcHRpb25cIiwgXCJtaW5cIiwgbWluUmFkaXVzKTtcbiAgICBzbGlkZXIuc2xpZGVyKFwib3B0aW9uXCIsIFwibWF4XCIsIG1heFJhZGl1cyk7XG5cbiAgICAvLyBhbGxvdyB0aGUgdXNlciB0byBzZWxlY3QgYSByYW5nZVxuICAgIHNsaWRlci5zbGlkZXIoXCJvcHRpb25cIiwgXCJyYW5nZVwiLCB0cnVlKTtcblxuICAgIC8vIHdoZW4gdXNlciBjbGlja3MgdGhlIHNsaWRlciwgaXQgd2lsbCBhbmltYXRlIHRvIHRoZSBjbGlja2VkIHBvc2l0aW9uXG4gICAgc2xpZGVyLnNsaWRlcihcIm9wdGlvblwiLCBcImFuaW1hdGVcIiwgXCJzbG93XCIpO1xuXG4gICAgLy8gYWZ0ZXIgc2VsZWN0aW5nIGEgbmV3IHNsaWRlciB2YWx1ZVxuICAgIHNsaWRlci5vbihcInNsaWRlY2hhbmdlXCIsIGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xuICAgICAgICBzbGlkZXJDaGFuZ2VkKCk7XG4gICAgfSk7XG5cbiAgICAvLyBoaWRlIGFsbCB0aGUgY29tcG9uZW50cyB1bnRpbCB0aGV5IGFyZSBoaWRkZW5cbiAgICAkKCcjc2xpZGVyJykuaGlkZSgpO1xuICAgICQoJyNtaW5TbGlkZXInKS5oaWRlKCk7XG4gICAgJCgnI21heFNsaWRlcicpLmhpZGUoKTtcbn1cblxuZnVuY3Rpb24gZmlsdGVyRnJvbU1lbnVTZWxlY3RlZChzZWxlY3RlZEZpbHRlciwgZmlsdGVyVmFsdWUpIHtcblxuXHRjdXJyZW50RmlsdGVyID0gc2VsZWN0ZWRGaWx0ZXI7XG5cblx0Ly8gY2hlY2sgd2hhdCBjb3VudHJpZXMgdG8gYWRkIHRvIHRoZSBtYXBcblx0dmFyIGNvdW50cmllcyA9IGNoZWNrV2hhdENvdW50cmllc1RvQWRkKHNlbGVjdGVkRmlsdGVyLCBmaWx0ZXJWYWx1ZSk7XG5cblx0Ly8gcmVsb2FkIHRoZSBtYXAgYW5kIGFkZCB0aG9zZSBjb3VudHJpZXNcblx0cmVsb2FkTWFwKGNvdW50cmllcyk7XG5cblx0Ly8gYWRkIG9ubHkgdGhlIG1hcmtlcnMgd2hvIGhhdmUgdGhhdCBmaWx0ZXIgdmFsdWVcblx0JC5lYWNoKGpzb25NYXJrZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudE1hcmtlcikge1xuXHRcdC8vIGNoZWNrIGlmIGFueSBvZiB0aGUgbmFtZXMgaXMgZXF1YWwgdG8gdGhlIHNlbGVjdGVkIGZpbHRlclxuXHRcdC8vIHRyeSB0byByZWFkIGFsbCB0aGUgbmFtZXMgYW5kIHZhbHVlc1xuXHRcdHZhciBpID0gMDtcblx0XHRkbyB7XG5cdFx0XHRpKys7XG5cdFx0XHR2YXIgY3VycmVudE5hbWVUb0NoZWNrID0gJ05hbWUnICsgaTtcblx0XHRcdHZhciBjdXJyZW50VmFsdWUgPSAnVmFsdWUnICsgaTtcblx0XHRcdC8vIGNoZWNrIGlmIHRoZSBDb3VudHJ5IGhhcyB0aGF0IG5hbWVcblx0XHRcdGlmKGN1cnJlbnRNYXJrZXJbY3VycmVudE5hbWVUb0NoZWNrXSkge1xuXHRcdFx0XHRpZihjdXJyZW50TWFya2VyW2N1cnJlbnROYW1lVG9DaGVja10gPT09IHNlbGVjdGVkRmlsdGVyLk5hbWUpIHtcblx0XHRcdFx0XHRpZihjdXJyZW50TWFya2VyW2N1cnJlbnRWYWx1ZV0gPT09IGZpbHRlclZhbHVlKSB7XG5cdFx0XHRcdFx0XHRtYXAuYWRkTWFya2VyKGluZGV4LCB7XG5cdFx0XHRcdFx0XHRcdGxhdExuZzogW2N1cnJlbnRNYXJrZXIuTGF0aXR1ZGUsIGN1cnJlbnRNYXJrZXIuTG9uZ2l0dWRlXSxcblx0XHRcdFx0XHRcdFx0bmFtZTogY3VycmVudE1hcmtlci5kZXNjLFxuXG5cdFx0XHRcdFx0XHRcdC8vIHNldCB0aGUgc3R5bGUgZm9yIHRoaXMgbWFya2VyXG5cdFx0XHRcdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0XHRcdFx0ZmlsbDogJ2dyZWVuJyxcblx0XHRcdFx0XHRcdFx0XHRyOiBtYXBSYW5nZShjdXJyZW50TWFya2VyLkNvdW50LCBtaW5Db3VudCwgbWF4Q291bnQsIG1pblJhZGl1cywgbWF4UmFkaXVzKVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH0gd2hpbGUgKHRydWUpXG5cdH0pO1xuXG5cblx0Ly8gdXBkYXRlIHRoZSBzbGlkZXJcblx0Ly8gY2hlY2sgaWYgYW55IG9mIHRoZSB2YWx1ZXMgaXMgYSBudW1iZXJzLCBpZiBpdCBpcyB3ZSB0aGVuIHVwZGF0ZSB0aGUgc2xpZGVyXG5cdGlmKCFpc05hTihzZWxlY3RlZEZpbHRlci5WYWx1ZXNbMF0pKSB7XG5cdFx0JCgnI3NsaWRlcicpLnNob3coKTtcblx0XHQkKCcjbWluU2xpZGVyJykuc2hvdygpO1xuXHRcdCQoJyNtYXhTbGlkZXInKS5zaG93KCk7XG5cblx0XHQvLyBqUXVlcnlVSSBzbGlkZXJcblx0XHR2YXIgc2xpZGVyID0gJChcIiNzbGlkZXJcIikuc2xpZGVyKCk7XG5cdFx0dmFyIG1pblZhbHVlID0gc2VsZWN0ZWRGaWx0ZXIuVmFsdWVzWzBdO1xuXHRcdHZhciBtYXhWYWx1ZSA9IHNlbGVjdGVkRmlsdGVyLlZhbHVlc1tzZWxlY3RlZEZpbHRlci5WYWx1ZXMubGVuZ3RoIC0gMV07XG5cblx0XHQvLyBzZXQgbWF4IGFuZCBtaW4gdmFsdWUgZm9yIHRoZSBzbGlkZXJcblx0XHRzbGlkZXIuc2xpZGVyKFwib3B0aW9uXCIsIFwibWluXCIsIG1pblZhbHVlKTtcblx0XHRzbGlkZXIuc2xpZGVyKFwib3B0aW9uXCIsIFwibWF4XCIsIG1heFZhbHVlKTtcblxuXHRcdC8vIHNldCB0aGUgdGV4dCBvbiB0aGUgVUlcblx0XHQkKCcjbWluU2xpZGVyJykudGV4dChtaW5WYWx1ZSk7XG5cdFx0JCgnI21heFNsaWRlcicpLnRleHQobWF4VmFsdWUpO1xuXHR9IGVsc2Uge1xuXHRcdCQoJyNzbGlkZXInKS5oaWRlKCk7XG5cdFx0JCgnI21pblNsaWRlcicpLmhpZGUoKTtcblx0XHQkKCcjbWF4U2xpZGVyJykuaGlkZSgpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHNsaWRlckNoYW5nZWQoKSB7XG5cdC8vIGdldCB0aGUgbWF4IGFuZCBtaW4gdmFsdWVzIGZvciB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHJhbmdlXG5cdHZhciBjdXJyZW50UmFuZ2UgPSBzbGlkZXIuc2xpZGVyKFwib3B0aW9uXCIsIFwidmFsdWVzXCIpO1xuXHR2YXIgbWluID0gY3VycmVudFJhbmdlWzBdO1xuXHR2YXIgbWF4ID0gY3VycmVudFJhbmdlWzFdO1xuXG5cdHZhciBjdXJyZW50RmlsdGVyTmFtZSA9IGN1cnJlbnRGaWx0ZXIuTmFtZTtcblxuXHQvLyBzZXQgdGhlIHRleHQgb24gdGhlIFVJXG5cdCQoJyNtaW5TbGlkZXInKS50ZXh0KG1pbik7XG5cdCQoJyNtYXhTbGlkZXInKS50ZXh0KG1heCk7XG5cblx0Ly8gZmlsdGVyIHRoZSBDb3VudHJpZXNcblx0dmFyIGNvdW50cmllcyA9IFtdO1xuXHQkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG5cdFx0dmFyIGZpbHRlclZhbHVlRm9yQ291bnRyeSA9ICtjdXJyZW50Q291bnRyeVtjb3VudHJ5VmFsdWVUb0NoZWNrXTtcblx0XHRpZihmaWx0ZXJWYWx1ZUZvckNvdW50cnkgPj0gbWluICYmIGZpbHRlclZhbHVlRm9yQ291bnRyeSA8PSBtYXgpXG5cdFx0XHRjb3VudHJpZXNbY3VycmVudENvdW50cnkuQ291bnRyeV0gPSBjdXJyZW50Q291bnRyeS5Db3VudDtcblx0fSk7XG5cblx0Ly8gZHJhdyB0aGUgY291bnRyaWVzIG9uIHRoZSBtYXBcblx0cmVsb2FkTWFwKGNvdW50cmllcyk7XG5cblx0Ly8gZmlsdGVyIHRoZSBNYXJrZXJzXG5cdHZhciBjdXJyZW50Q291bnRyeSA9IGpzb25Db3VudHJpZXNbMF07XG5cdHZhciBzZWxlY3RlZE5hbWU7XG5cdHZhciBpID0gMDtcblx0ZG8ge1xuXHRcdGkrKztcblx0XHR2YXIgY3VycmVudE5hbWVUb0NoZWNrID0gJ05hbWUnICsgaTtcblx0XHR2YXIgY3VycmVudFZhbHVlID0gJ1ZhbHVlJyArIGk7XG5cdFx0Ly8gY2hlY2sgaWYgdGhlIENvdW50cnkgaGFzIHRoYXQgbmFtZVxuXHRcdGlmKGN1cnJlbnRDb3VudHJ5W2N1cnJlbnROYW1lVG9DaGVja10gPT09IGN1cnJlbnRGaWx0ZXJOYW1lKSB7XG5cdFx0XHRzZWxlY3RlZE5hbWUgPSBjdXJyZW50VmFsdWU7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdH0gd2hpbGUgKHRydWUpO1xuXG5cdC8vIGFkZCBvbmx5IHRoZSBtYXJrZXJzIHdobyBoYXZlIHRoYXQgZmlsdGVyIHZhbHVlXG5cdCQuZWFjaChqc29uTWFya2VycywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcblx0XHQvLyBjaGVjayBpZiB0aGUgQ291bnRyeSBoYXMgdGhhdCBuYW1lXG5cdFx0aWYoY3VycmVudE1hcmtlcltzZWxlY3RlZE5hbWVdID49IG1pbiAmJiBjdXJyZW50TWFya2VyW3NlbGVjdGVkTmFtZV0gPD0gbWF4KSB7XG5cdFx0XHRtYXAuYWRkTWFya2VyKGluZGV4LCB7XG5cdFx0XHRcdGxhdExuZzogW2N1cnJlbnRNYXJrZXIuTGF0aXR1ZGUsIGN1cnJlbnRNYXJrZXIuTG9uZ2l0dWRlXSxcblx0XHRcdFx0bmFtZTogY3VycmVudE1hcmtlci5kZXNjLFxuXG5cdFx0XHRcdC8vIHNldCB0aGUgc3R5bGUgZm9yIHRoaXMgbWFya2VyXG5cdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0ZmlsbDogJ2dyZWVuJyxcblx0XHRcdFx0XHRyOiBtYXBSYW5nZShjdXJyZW50TWFya2VyLkNvdW50LCBtaW5Db3VudCwgbWF4Q291bnQsIG1pblJhZGl1cywgbWF4UmFkaXVzKVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xufTtcblxuZnVuY3Rpb24gcmVhZEZpbHRlcnNGcm9tSlNPTihpbnB1dEZpbHRlcnMpIHtcblx0dmFyIGZpbHRlcnMgPSBbXTtcblxuXHRmb3IodmFyIGkgPSAwOyBpIDwgaW5wdXRGaWx0ZXJzLnZhbHVlcy5sZW5ndGg7IGkrKykge1xuXHRcdC8vIHJlYWQgdGhlIGN1cnJlbnQgZmlsdGVyXG5cdFx0Y3VycmVudEZpbHRlciA9IGlucHV0RmlsdGVycy52YWx1ZXNbaV07XG5cdFx0Ly8gZmllbGRzXG5cdFx0dmFyIG5hbWUgPSBjdXJyZW50RmlsdGVyLm5hbWU7XG5cdFx0dmFyIHZhbHVlcyA9IFtdO1xuXG5cdFx0Zm9yKHZhciBqID0gMDsgaiA8IGN1cnJlbnRGaWx0ZXIudmFsdWVzLmxlbmd0aDsgaisrKVxuXHRcdFx0dmFsdWVzLnB1c2goY3VycmVudEZpbHRlci52YWx1ZXNbal0pO1xuXHRcdGZpbHRlcnNbaV0gPSBuZXcgRmlsdGVyKG5hbWUsIHZhbHVlcyk7XG5cdH1cblx0bnVtRmlsdGVycyA9IGZpbHRlcnMubGVuZ3RoO1xuXHRyZXR1cm4gZmlsdGVycztcbn07XG4iLCJ2YXIgbWFwcGluZ01hcmtlcnMgPSBbXTtcbnZhciBtYXBwaW5nQ291bnRyaWVzID0gW107XG5cblZlY3RvcmlhbE1hcC5wcm90b3R5cGUucmVnaXN0ZXJUcmFuc2Zvcm1lciA9IGZ1bmN0aW9uKGpzb25Mb2NhdGlvbiwgY291bnRyaWVzTWFwcGluZ0pzb24sIG1hcmtlcnNNYXBwaW5nSnNvbikge1xuXHQvLyBqc29uTG9jYXRpb24gLSB1cmwgb2YgdGhlIG5ldyBqc29uXG5cdC8vIGNvdW50cmllc01hcHBpbmdKc29uIC0ganNvbiB0aGF0IGNvbnRhaW5zIHRoZSBqc29uIGNvdW50cnkgbWFwcGluZ1xuXHR2YXIgY291bnRyaWVzTWFwcGluZ0pzb24gPSBcIi4uL21hcHBpbmdKU09OL21hcHBpbmdDb3VudHJpZXNTYW1wbGUuanNvblwiO1xuXHQvLyBtYXJrZXJzTWFwcGluZ0pzb24gLSBqc29uIHRoYXQgY29udGFpbnMgdGhlIGpzb24gbWFya2VycyBtYXBwaW5nXG5cdHZhciBtYXJrZXJzTWFwcGluZ0pzb24gPSBcIi4uL21hcHBpbmdKU09OL21hcHBpbmdNYXJrZXJzU2FtcGxlLmpzb25cIjtcblxuXHRpZighY291bnRyaWVzTWFwcGluZ0pzb24pIHtcblx0XHRjb25zb2xlLmVycm9yKCd5b3UgbXVzdCBzcGVjaWZ5IGEgY291bnRyaWVzIG1hcHBpbmcganNvbicpO1xuXHRcdHJldHVybjtcblx0fVxuXHRpZighbWFya2Vyc01hcHBpbmdKc29uKSB7XG5cdFx0Y29uc29sZS5lcnJvcigneW91IG11c3Qgc3BlY2lmeSBhIG1hcmtlcnMgbWFwcGluZyBqc29uJyk7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gZ2V0IHRoZSBKU09OXG5cdGpzb25Mb2NhdGlvbiA9IFwiLi4vanNvbi9lc3BpZC1zcGFpbi5qc29uXCI7XG5cdCQuZ2V0SlNPTihqc29uTG9jYXRpb24sIGZ1bmN0aW9uKGpzb24pIHtcblx0XHQvLyByZWFkIGNvdW50cmllc1xuXHRcdGpzb25NYXBDb3VudHJpZXMoanNvbiwgY291bnRyaWVzTWFwcGluZ0pzb24pO1xuXHRcdC8vIHJlYWQgbWFya2Vyc1xuXHRcdGpzb25NYXBNYXJrZXJzKGpzb24sIG1hcmtlcnNNYXBwaW5nSnNvbik7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBqc29uTWFwQ291bnRyaWVzKGpzb24sIGNvdW50cmllc01hcHBpbmdKc29uKSB7XG5cdHZhciBjb3VudHJpZXMgPSBbXTtcblx0Ly8gYWNjZXNzIHRoZSBKU09OIGZpbGUgdGhhdCBzcGVjaWZpZXMgdGhlIG1hcHBpbmdcblx0JC5nZXRKU09OKGNvdW50cmllc01hcHBpbmdKc29uLCBmdW5jdGlvbihqc29uTWFwcGluZykge1xuXG5cdFx0Ly8gaW4gdGhpcyBjYXNlIHRoZSAnY291bnRyaWVzJyBhcmUgZGVmaW5lZCB0aGUgdG9wIGxldmVsXG5cdFx0Ly8gaXRlcmF0ZSB0aHJvdWdoIGV2ZXJ5ICdjb3VudHJ5J1xuXHRcdCQuZWFjaChqc29uLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEpTT04pIHtcblx0XHRcdHZhciBqc29uQ291bnRyeSA9ICd7Jztcblx0XHRcdC8vIGdldCB0aGUgbmFtZSBvZiB0aGUgY291bnRyeVxuXHRcdFx0dmFyIG5hbWUgPSBjdXJyZW50SlNPTltqc29uTWFwcGluZy5Db3VudHJ5XTtcblx0XHRcdC8vIHRoZSBjb3VudHJ5IG5hbWUgbXVzdCBiZSBvbiB0aGUgdHdvLWRpZ2l0IGZvcm1hdFxuXHRcdFx0Ly8gZ2V0IHRoZSBjb3VudCAtIFdIQVQgSVMgVEhFIENPVU5UP1xuXHRcdFx0dmFyIGNvdW50ID0gMDtcblx0XHRcdC8vZ2V0IHRoZSBkZXNjcmlwdGlvbiAtIFdIVCBJUyBUSEUgREVTQ1JJUFRJT04gT0YgQSBNQVJLRVI/XG5cdFx0XHR2YXIgZGVzY3JpcHRpb24gPSAnJztcblx0XHRcdC8qXG5cdFx0XHRXSEFUIEFSRSBUSEUgTkFNRVM/Pz9cblx0XHRcdCovXG5cdFx0XHRjb3VudHJpZXNbaW5kZXhdID0gbmV3IENvdW50cnkoJycsIG5hbWUsIGNvdW50KTtcblx0XHR9KTtcblx0XHRtYXBwaW5nQ291bnRyaWVzID0gY291bnRyaWVzO1xuXHRcdGNvbnNvbGUubG9nKG1hcHBpbmdDb3VudHJpZXMpO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24ganNvbk1hcE1hcmtlcnMoanNvbiwgbWFya2Vyc01hcHBpbmdKc29uKSB7XG5cdHZhciBtYXJrZXJzID0gW107XG5cblx0Ly8gYWNjZXNzIHRoZSBKU09OIGZpbGUgdGhhdCBzcGVjaWZpZXMgdGhlIG1hcHBpbmdcblx0JC5nZXRKU09OKG1hcmtlcnNNYXBwaW5nSnNvbiwgZnVuY3Rpb24oanNvbk1hcHBpbmcpIHtcblx0XHQvLyBpbiB0aGlzIGNhc2UgdGhlICdtYXJrZXJzJyBhcmUgZGVmaW5lZCB0aGUgdG9wIGxldmVsXG5cdFx0Ly8gaXRlcmF0ZSB0aHJvdWdoIGV2ZXJ5ICdtYXJrZXInXG5cdFx0JC5lYWNoKGpzb24sIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50SlNPTikge1xuXHRcdFx0Ly8gZ2V0IHRoZSBuYW1lIG9mIHRoZSBjb3VudHJ5XG5cdFx0XHR2YXIgbmFtZSA9IGN1cnJlbnRKU09OW2pzb25NYXBwaW5nLkNvdW50cnldO1xuXHRcdFx0Ly8gdGhlIGNvdW50cnkgbmFtZSBtdXN0IGJlIG9uIHRoZSB0d28tZGlnaXQgZm9ybWF0XG5cdFx0XHQvLyBnZXQgdGhlIGNvdW50IC0gV0hBVCBJUyBUSEUgQ09VTlQ/XG5cdFx0XHR2YXIgY291bnQgPSAwO1xuXHRcdFx0Ly8gZ2V0IHRoZSBsYXRpdHVkZVxuXHRcdFx0dmFyIGxhdGl0dWRlID0gY3VycmVudEpTT05banNvbk1hcHBpbmcuTGF0aXR1ZGVdO1xuXHRcdFx0Ly8gZ2V0IHRoZSBsb25naXR1ZGVcblx0XHRcdHZhciBsb25naXR1ZGUgPSBjdXJyZW50SlNPTltqc29uTWFwcGluZy5Mb25naXR1ZGVdO1xuXHRcdFx0Ly9nZXQgdGhlIGRlc2NyaXB0aW9uIC0gV0hBVCBJUyBUSEUgREVTQ1JJUFRJT04gT0YgQSBNQVJLRVI/XG5cdFx0XHR2YXIgZGVzY3JpcHRpb24gPSAnJztcblx0XHRcdC8qXG5cdFx0XHRXSEFUIEFSRSBUSEUgTkFNRVM/Pz9cblx0XHRcdCovXG5cdFx0XHQvLyBjcmVhdGUgYSBuZXcgbWFya2VyXG5cdFx0XHRtYXJrZXJzW2luZGV4XSA9IG5ldyBNYXJrZXIoJycsIG5hbWUsIGNvdW50LCBsYXRpdHVkZSwgbG9uZ2l0dWRlKTtcblx0XHR9KTtcblx0XHRtYXBwaW5nTWFya2VycyA9IG1hcmtlcnM7XG5cdFx0Y29uc29sZS5sb2cobWFwcGluZ01hcmtlcnMpO1xuXHR9KTtcbn1cbiIsIi8vIHJlZHJhdyB0aGUgbWFwXG5mdW5jdGlvbiByZWxvYWRNYXAoY29sb3JzKSB7XG4gICAgLy8gZ2V0IHRoZSBuYW1lIG9mIHRoZSBjdXJyZW50IG1hcFxuICAgIGlmIChtYXAucGFyYW1zLm1hcCA9PSBtVHlwZSkge1xuICAgICAgICAvLyBtYWluIG1hcFxuICAgICAgICAvLyB1cGRhdGUgbWluIGFuZCBtYXggQ291bnQgb2YgdGhlIGNvdW50cmllc1xuICAgICAgICBpZiAoanNvbkNvdW50cmllcy5sZW5ndGggPiAwKVxuICAgICAgICAgICAgcmVhZE1pbk1heChjb2xvcnMpO1xuXG4gICAgICAgIHZhciBsZWdlbmRWYXIgPSB7XG4gICAgICAgICAgICB2ZXJ0aWNhbDogdHJ1ZSxcbiAgICAgICAgICAgIC8vdGl0bGU6ICdDb3VudHJpZXMnLFxuICAgICAgICB9O1xuXG5cbiAgICAgICAgdmFyIG1hcmtlcnNXaXRoTGVnZW5kID0ge1xuICAgICAgICAgICAgc2NhbGU6IFttaW5Db2xvck1hcCwgbWF4Q29sb3JNYXBdLFxuICAgICAgICAgICAgLy8gcmFuZ2Ugb2YgdmFsdWVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgQ291bnRcbiAgICAgICAgICAgIHZhbHVlczogW21pbkNvdW50LCBtYXhDb3VudF0sXG4gICAgICAgICAgICAvLyBhZGQgYSBsZWdlbmRcbiAgICAgICAgICAgIGxlZ2VuZDogbGVnZW5kVmFyXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIG1hcmtlcnNXaXRob3V0TGVnZW5kID0ge1xuICAgICAgICAgICAgc2NhbGU6IFttaW5Db2xvck1hcCwgbWF4Q29sb3JNYXBdLFxuICAgICAgICAgICAgLy8gcmFuZ2Ugb2YgdmFsdWVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgQ291bnRcbiAgICAgICAgICAgIHZhbHVlczogW21pbkNvdW50LCBtYXhDb3VudF1cbiAgICAgICAgfTtcblxuICAgICAgICBmaW5hbE1hcmtlcnNJbk1hcCA9IG1hcmtlcnNXaXRoTGVnZW5kO1xuICAgICAgICBpZiAoZGF0YVR5cGUgPT0gJ21hcmtlcnMnKSB7XG4gICAgICAgICAgICBmaW5hbE1hcmtlcnNJbk1hcCA9IG1hcmtlcnNXaXRob3V0TGVnZW5kO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZXJhc2UgdGhlIG1hcFxuICAgICAgICAkKFwiI1wiICsgbURpdikuZW1wdHkoKTtcblxuICAgICAgICBtYXAgPSBuZXcganZtLk1hcCh7XG4gICAgICAgICAgICBtYXA6IG1UeXBlLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBiYWNrZ3JvdW5kLFxuICAgICAgICAgICAgY29udGFpbmVyOiAkKCcjJyArIG1EaXYpLFxuICAgICAgICAgICAgb25SZWdpb25DbGljazogZnVuY3Rpb24oZSwgY29kZSkge1xuICAgICAgICAgICAgICAgIC8vIHJlbG9hZCBhIG5ldyBtYXBcbiAgICAgICAgICAgICAgICBjb3VudHJ5Q29kZSA9IGNvZGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAvLyB3YWl0VG9BZGRNYXJrZXJzKDEwMCk7XG4gICAgICAgICAgICAgICAgdmFyIG5ld01hcCA9IGNvdW50cnlDb2RlICsgJ19taWxsX2VuJztcbiAgICAgICAgICAgICAgICAvLyBzd2l0aCB0byBuZXcgbWFwXG4gICAgICAgICAgICAgICAgc3dpdGNoTWFwKG5ld01hcCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25NYXJrZXJUaXBTaG93OiBmdW5jdGlvbihlLCBsYWJlbCwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmluYWxUb29sdGlwID0gYnVpbGRNYXJrZXJUb29sdGlwKGpzb25NYXJrZXJzLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgbGFiZWwuaHRtbChmaW5hbFRvb2x0aXApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uUmVnaW9uVGlwU2hvdzogZnVuY3Rpb24oZSwgY291bnRyeU5hbWUsIGNvZGUpIHtcbiAgICAgICAgICAgICAgICAvLyBjb2RlIGNvbnRhaW5zIHRoZSBjb2RlIG9mIHRoZSBjb3VudHJ5IChpLmUuLCBQVCwgRVMsIEZSLCBldGMpXG4gICAgICAgICAgICAgICAgLy8gc2hvdyB0aGUgQ291bnQgYXNzb2NpYXRlZCB0byB0aGF0IENvdW50cnkgLSBsb29rIGZvciB0aGUgY291bnRyeVxuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZENvdW50cnkgPSAtMTtcbiAgICAgICAgICAgICAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeS5Db3VudHJ5ID09PSBjb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENvdW50cnkgPSBjdXJyZW50Q291bnRyeTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZENvdW50cnkgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmFsVG9vbHRpcCA9IGJ1aWxkQ291bnRyeVRvb2x0aXAoY291bnRyeU5hbWUsIHNlbGVjdGVkQ291bnRyeSk7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50cnlOYW1lLmh0bWwoZmluYWxUb29sdGlwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgY291bnRyeU5hbWUuaHRtbChjb3VudHJ5TmFtZS5odG1sKCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlcmllczoge1xuICAgICAgICAgICAgICAgIG1hcmtlcnM6IFtmaW5hbE1hcmtlcnNJbk1hcF0sXG4gICAgICAgICAgICAgICAgcmVnaW9uczogW3tcbiAgICAgICAgICAgICAgICAgICAgLy8gbWluIGFuZCBtYXggdmFsdWVzIG9mIGNvdW50XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlOiBbbWluQ29sb3JNYXAsIG1heENvbG9yTWFwXSxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlOiAnZmlsbCcsXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBjb2xvcnMgYXJlICdzdHJldGNoZWQnIHRvIGZpbGwgdGhlIHNjYWxlXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogY29sb3JzXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc3VibWFwXG4gICAgICAgIC8vIHVwZGF0ZSBtaW4gYW5kIG1heCBDb3VudCBvZiB0aGUgY291bnRyaWVzXG4gICAgICAgIGlmIChqc29uQ291bnRyaWVzLmxlbmd0aCA+IDApXG4gICAgICAgICAgICByZWFkTWluTWF4KGNvbG9ycyk7XG5cbiAgICAgICAgLy8gZXJhc2UgdGhlIG1hcFxuICAgICAgICAkKFwiI1wiICsgbURpdikuZW1wdHkoKTtcbiAgICAgICAgcmVtb3ZlVG9vbHRpcCgpO1xuICAgICAgICBzd2l0Y2hNYXAobWFwVHlwZSk7XG4gICAgfVxuXG5cbn1cblxuZnVuY3Rpb24gcmVtb3ZlVG9vbHRpcCgpIHtcbiAgICAvLyBlcmFzZSB0aGUgcHJldmlvdXMgbWFwIHRvb2x0aXBcbiAgICAkKCcuanZlY3Rvcm1hcC10aXAnKS5yZW1vdmUoKTtcbn1cblxuZnVuY3Rpb24gc3dpdGNoTWFwKG5ld01hcCkge1xuICAgIC8vIHRoaXMgZnVuY3Rpb24gZ2V0cyBjYWxsZWQgd2hlbiBhIGNvdW50cnkgb24gdGhlIHdvcmxkIG1hcCBpcyBjbGlja2VkXG4gICAgLy8gZXJhc2UgdGhlIHByZXZpb3VzIG1hcFxuICAgICQoJyMnICsgbURpdikuZW1wdHkoKTtcbiAgICByZW1vdmVUb29sdGlwKCk7XG5cbiAgICB2YXIgcmVnaW9uQ29sb3JzID0gZ2VuZXJhdGVDb2xvcnNGb3JUaGVSZWdpb25zKG5ld01hcCk7XG5cbiAgICBtYXAgPSBuZXcganZtLk1hcCh7XG4gICAgICAgIG1hcDogbmV3TWFwLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmQsXG4gICAgICAgIGNvbnRhaW5lcjogJCgnIycgKyBtRGl2KSxcbiAgICAgICAgb25NYXJrZXJUaXBTaG93OiBmdW5jdGlvbihlLCBsYWJlbCwgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBmaW5hbFRvb2x0aXAgPSBidWlsZE1hcmtlclRvb2x0aXAoanNvbk1hcmtlcnMsIGluZGV4KTtcbiAgICAgICAgICAgIGxhYmVsLmh0bWwoZmluYWxUb29sdGlwKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25SZWdpb25UaXBTaG93OiBmdW5jdGlvbihlLCByZWdpb25OYW1lLCBjb2RlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjb2RlKTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50TWFwID0gbmV3TWFwLnNwbGl0KCdfJylbMF0udG9VcHBlckNhc2UoKVxuICAgICAgICAgICAgICAgIC8vIGNvZGUgY29udGFpbnMgdGhlIGNvZGUgb2YgdGhlIHJlZ2lvbiAoaS5lLiwgUFQtMSwgRVMtTSwgZXRjKVxuICAgICAgICAgICAgICAgIC8vIHNob3cgdGhlIENvdW50IGFzc29jaWF0ZWQgdG8gdGhhdCBSZWdpb24gLSBsb29rIGZvciB0aGUgUmVnaW9uXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRDb3VudHJ5ID0gLTE7XG4gICAgICAgICAgICAvLyBmaW5kIHRoZSBjb3JyZXNwb25kaW5nIGNvdW50cnlcbiAgICAgICAgICAgICQuZWFjaChqc29uQ291bnRyaWVzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnkuQ291bnRyeSA9PSBjdXJyZW50TWFwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ291bnRyeSA9IGN1cnJlbnRDb3VudHJ5O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgc2VsZWN0ZWQgcmVnaW9uIGhhcyBhbnkgZGF0YSBpbnNpZGUgdGhhdCBjb3VudHJ5XG4gICAgICAgICAgICB2YXIgcmVnaW9uRm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFJlZ2lvbjtcbiAgICAgICAgICAgICQuZWFjaChtYXAucmVnaW9ucywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRSZWdpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFJlZ2lvbi5uYW1lID09IGNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJysnKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSZWdpb24gPSBjdXJyZW50UmVnaW9uO1xuICAgICAgICAgICAgICAgICAgICByZWdpb25Gb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChyZWdpb25Gb3VuZCkge1xuICAgICAgICAgICAgICAgIHJlZ2lvbk5hbWUuaHRtbChidWlsZFJlZ2lvblRvb2x0aXAoc2VsZWN0ZWRSZWdpb24pKTtcbiAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgIHJlZ2lvbk5hbWUuaHRtbChyZWdpb25OYW1lLmh0bWwoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNlcmllczoge1xuICAgICAgICAgICAgbWFya2VyczogW3tcbiAgICAgICAgICAgICAgICAvLyBjaGFuZ2UgdGhlIHNjYWxlIHRvIGZpdCB0aGUgY3VycmVudCBtaW4gYW5kIG1heCB2YWx1ZXNcbiAgICAgICAgICAgICAgICBzY2FsZTogW21pbkNvbG9yTWFwLCBtYXhDb2xvck1hcF0sXG4gICAgICAgICAgICAgICAgdmFsdWVzOiBbbWluQ291bnQsIG1heENvdW50XSxcbiAgICAgICAgICAgICAgICBsZWdlbmQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdmVydGljYWw6IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIHJlZ2lvbnM6IFt7XG4gICAgICAgICAgICAgICAgLy8gbWluIGFuZCBtYXggdmFsdWVzIG9mIGNvdW50XG4gICAgICAgICAgICAgICAgc2NhbGU6IFttaW5Db2xvck1hcCwgbWF4Q29sb3JNYXBdLFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogJ2ZpbGwnLFxuICAgICAgICAgICAgICAgIC8vIHRoZSBjb2xvcnMgYXJlICdzdHJldGNoZWQnIHRvIGZpbGwgdGhlIHNjYWxlXG4gICAgICAgICAgICAgICAgdmFsdWVzOiByZWdpb25Db2xvcnNcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGFkZCBiYWNrIGJ1dHRvblxuICAgICQoJyNteV9tYXAnKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJqdmVjdG9ybWFwLWdvYmFja1wiPkJhY2s8L2Rpdj4nKTtcbiAgICAkKFwiLmp2ZWN0b3JtYXAtZ29iYWNrXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBlcmFzZSB0aGUgcHJldmlvdXMgbWFwXG4gICAgICAgICQoJyMnICsgbURpdikuZW1wdHkoKTtcbiAgICAgICAgcmVtb3ZlVG9vbHRpcCgpO1xuICAgICAgICAvLyB3aGVuIHRoZSBsZWZ0IGJ1dHRvbiBpcyBjbGlja2VkXG4gICAgICAgIC8vIHJldHVybiB0byB0aGUgbWFpbiBtYXBcbiAgICAgICAgbWFwID0gbmV3IGp2bS5NYXAoe1xuICAgICAgICAgICAgY29udGFpbmVyOiAkKCcjJyArIG1EaXYpLFxuICAgICAgICAgICAgLy8gY29uZmlndXJhdGlvbiBvZiB0aGUgbWFpbiBtYXBcbiAgICAgICAgICAgIC8vIHR5cGUgb2YgbWFwICh3b3JsZCwgRXVyb3BlLCBVU0EsIGV0YylcbiAgICAgICAgICAgIG1hcDogbVR5cGUsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmQsXG4gICAgICAgICAgICAvLyB0cmlnZ2VyZWQgd2hlbiBhIG1hcmtlciBpcyBob3ZlcmVkXG4gICAgICAgICAgICBvblJlZ2lvbkNsaWNrOiBmdW5jdGlvbihlLCBjb2RlKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVsb2FkIGEgbmV3IG1hcFxuICAgICAgICAgICAgICAgIGNvdW50cnlDb2RlID0gY29kZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIC8vIHdhaXRUb0FkZE1hcmtlcnMoMTAwKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3TWFwID0gY291bnRyeUNvZGUgKyAnX21pbGxfZW4nO1xuICAgICAgICAgICAgICAgIC8vIHN3aXRoIHRvIG5ldyBtYXBcbiAgICAgICAgICAgICAgICBzd2l0Y2hNYXAobmV3TWFwKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbk1hcmtlclRpcFNob3c6IGZ1bmN0aW9uKGUsIGxhYmVsLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIC8vIHNlbGVjdCB3aGF0IHRleHQgdG8gZGlzcGxheSB3aGVuIG1hcmtlciBpcyBob3ZlcmVkXG4gICAgICAgICAgICAgICAgdmFyIGZpbmFsVG9vbHRpcCA9IGJ1aWxkTWFya2VyVG9vbHRpcChqc29uTWFya2VycywgaW5kZXgpO1xuICAgICAgICAgICAgICAgIGxhYmVsLmh0bWwoZmluYWxUb29sdGlwKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyB0cmlnZ2VyZWQgd2hlbiBhIHJlZ2lvbiBpcyBob3ZlcmVkXG4gICAgICAgICAgICBvblJlZ2lvblRpcFNob3c6IGZ1bmN0aW9uKGUsIGNvdW50cnlOYW1lLCBjb2RlKSB7XG4gICAgICAgICAgICAgICAgLy8gY29kZSBjb250YWlucyB0aGUgY29kZSBvZiB0aGUgY291bnRyeSAoaS5lLiwgUFQsIEVTLCBGUiwgZXRjKVxuICAgICAgICAgICAgICAgIC8vIHNob3cgdGhlIENvdW50IGFzc29jaWF0ZWQgdG8gdGhhdCBDb3VudHJ5IC0gbG9vayBmb3IgdGhlIGNvdW50cnlcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRDb3VudHJ5ID0gLTE7XG4gICAgICAgICAgICAgICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnkuQ291bnRyeSA9PT0gY29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDb3VudHJ5ID0gY3VycmVudENvdW50cnk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRDb3VudHJ5ICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZpbmQgb2NjdXJyZW5jZSBvZiBzZXZlcmFsIHN0cmluZ3MgaW5zaWRlIHRoZSB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICB2YXIgZmluYWxUb29sdGlwID0gYnVpbGRDb3VudHJ5VG9vbHRpcChjb3VudHJ5TmFtZSwgc2VsZWN0ZWRDb3VudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgY291bnRyeU5hbWUuaHRtbChmaW5hbFRvb2x0aXApO1xuICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICBjb3VudHJ5TmFtZS5odG1sKGNvdW50cnlOYW1lLmh0bWwoKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VyaWVzOiB7XG4gICAgICAgICAgICAgICAgbWFya2VyczogW3tcbiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IFttaW5Db2xvck1hcCwgbWF4Q29sb3JNYXBdLFxuICAgICAgICAgICAgICAgICAgICAvLyByYW5nZSBvZiB2YWx1ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBDb3VudFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IFttaW5Db3VudCwgbWF4Q291bnRdLFxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgYSBsZWdlbmRcbiAgICAgICAgICAgICAgICAgICAgbGVnZW5kOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgICAgcmVnaW9uczogW3tcbiAgICAgICAgICAgICAgICAgICAgLy8gbWluIGFuZCBtYXggdmFsdWVzIG9mIGNvdW50XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlOiBbbWluQ29sb3JNYXAsIG1heENvbG9yTWFwXSxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlOiAnZmlsbCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogYXV4Q29sb3JzXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gYWRkIHRoZSBtYXJrZXMgdG8gdGhlIG1hcFxuICAgICAgICBpZiAodGhlcmVBcmVNYXJrZXJzKSB7XG4gICAgICAgICAgICBhZGRNYXJrZXJzVG9NYXAoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gYWRkIHRoZSBtYXJrZXJzXG4gICAgaWYgKHRoZXJlQXJlTWFya2Vycykge1xuICAgICAgICBhZGRNYXJrZXJzVG9NYXAoKTtcbiAgICB9XG5cbiAgICBpZiAoanNvbkNvdW50cmllcykge1xuICAgICAgICAvLyBjaGVjayBpZiB0aGUgc2VsZWN0ZWQgbWFwIGhhcyBhbnkgcmVnaW9uIHRvIGhpZ2hsaWdodFxuICAgICAgICAvLyBhZGRSZWdpb25zVG9NYXAobmV3TWFwKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gYWRkTWFya2Vyc1RvTWFwKCkge1xuICAgIHZhciBtYXJrZXJzSlNPTkFycmF5ID0gW107XG4gICAgJC5lYWNoKGZpbHRlcmVkTWFya2VycywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRNYXJrZXJKU09OID0ge1xuICAgICAgICAgICAgbGF0TG5nOiBbY3VycmVudE1hcmtlci5MYXRpdHVkZSwgY3VycmVudE1hcmtlci5Mb25naXR1ZGVdLFxuICAgICAgICAgICAgbmFtZTogY3VycmVudE1hcmtlci5kZXNjLFxuICAgICAgICAgICAgLy8gc2V0IHRoZSBzdHlsZSBmb3IgdGhpcyBtYXJrZXJcbiAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgZmlsbDogJ2dyZWVuJyxcbiAgICAgICAgICAgICAgICByOiBtYXBSYW5nZShjdXJyZW50TWFya2VyLkNvdW50LCBtaW5Db3VudCwgbWF4Q291bnQsIG1pblJhZGl1cywgbWF4UmFkaXVzKVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBtYXJrZXJzSlNPTkFycmF5LnB1c2goY3VycmVudE1hcmtlckpTT04pO1xuICAgIH0pO1xuICAgIG1hcC5hZGRNYXJrZXJzKG1hcmtlcnNKU09OQXJyYXkpO1xufVxuIiwiLy8gTWFya2VyIGRlZmluaXRpb25cbnZhciBNYXJrZXIgPSBmdW5jdGlvbiAobWFya2VyT2JqZWN0LG5hbWUsIGNvdW50LCBsYXRpdHVkZSwgbG9uZ2l0dWRlKSB7XG5cdGlmKG1hcmtlck9iamVjdCA9PSAnJylcblx0e1xuXHRcdHRoaXMuQ291bnRyeSA9IG5hbWU7XG5cdFx0dGhpcy5Db3VudCA9ICtjb3VudDtcblx0XHR0aGlzLlZhciA9ICcnO1xuXHRcdHRoaXMuTGF0aXR1ZGUgPSBsYXRpdHVkZTtcblx0XHR0aGlzLkxvbmdpdHVkZSA9IGxvbmdpdHVkZTtcblx0XHQvLyBUT0RPIC0gYWRkIGVzY3JpcHRpb24gdG8gYSBNYXJrZXIgZnJvbSB0aGUgSlNPTiBmaWxlXG5cdFx0dGhpcy5kZXNjID0gJ2FiYyc7XG5cdH1cblx0ZWxzZSB7XG5cdFx0Ly8gdHJ5IHRvIHJlYWQgYWxsIHRoZSBuYW1lcyBhbmQgdmFsdWVzXG5cdFx0dmFyIGhhc05hbWUgPSB0cnVlO1xuXHRcdHZhciBpID0gMDtcblx0XHRkbyB7XG5cdFx0XHRpKys7XG5cdFx0XHR2YXIgY3VycmVudE5hbWVUb0NoZWNrID0gJ05hbWUnICsgaTtcblx0XHRcdHZhciBjdXJyZW50VmFsdWUgPSAnVmFsdWUnICsgaTtcblx0XHRcdGlmKCFtYXJrZXJPYmplY3RbY3VycmVudE5hbWVUb0NoZWNrXSkge1xuXHRcdFx0XHRoYXNOYW1lID0gZmFsc2U7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzW2N1cnJlbnROYW1lVG9DaGVja10gPSBtYXJrZXJPYmplY3RbY3VycmVudE5hbWVUb0NoZWNrXTtcblx0XHRcdFx0dGhpc1tjdXJyZW50VmFsdWVdID0gbWFya2VyT2JqZWN0W2N1cnJlbnRWYWx1ZV07XG5cdFx0XHR9XG5cdFx0fSB3aGlsZSAoaGFzTmFtZSlcblxuXHRcdHRoaXMuQ291bnRyeSA9IG1hcmtlck9iamVjdC5Db3VudHJ5O1xuXHRcdHRoaXMuQ291bnQgPSArbWFya2VyT2JqZWN0LkNvdW50O1xuXHRcdHRoaXMuVmFyID0gbWFya2VyT2JqZWN0LlZhcjtcblx0XHR0aGlzLkxhdGl0dWRlID0gbWFya2VyT2JqZWN0LkxhdGl0dWRlO1xuXHRcdHRoaXMuTG9uZ2l0dWRlID0gbWFya2VyT2JqZWN0LkxvbmdpdHVkZTtcblx0XHQvLyBUT0RPIC0gYWRkIGVzY3JpcHRpb24gdG8gYSBNYXJrZXIgZnJvbSB0aGUgSlNPTiBmaWxlXG5cdFx0dGhpcy5kZXNjID0gJ2FiYyc7XG5cdH1cbn07XG5cbi8vIHJlYWQgdGhlIG1hcmtlcnMgZnJvbSBhIEpTT04gZmlsZVxuZnVuY3Rpb24gcmVhZE1hcmtlcnNGcm9tSlNPTihqc29uTWFya2Vycykge1xuXHR2YXIgbWFya2VycyA9IFtdO1xuXG5cdG1pbkNvdW50ID0gSW5maW5pdHk7XG5cdG1heENvdW50ID0gLUluZmluaXR5O1xuXG5cdCQuZWFjaChqc29uTWFya2VycywgZnVuY3Rpb24gKGluZGV4LCBjdXJyZW50SlNPTk1hcmtlcikge1xuXHRcdG1hcmtlcnNbaW5kZXhdID0gbmV3IE1hcmtlcihjdXJyZW50SlNPTk1hcmtlcik7XG5cdFx0dmFyIGN1cnJlbnRDb3VudFZhbHVlID0gbWFya2Vyc1tpbmRleF0uQ291bnQ7XG5cblx0XHRpZihjdXJyZW50Q291bnRWYWx1ZSA+IG1heENvdW50KSB7XG5cdFx0XHRtYXhDb3VudCA9IGN1cnJlbnRDb3VudFZhbHVlO1xuXHRcdH1cblx0XHRpZihjdXJyZW50Q291bnRWYWx1ZSA8IG1pbkNvdW50KVxuXHRcdFx0bWluQ291bnQgPSBjdXJyZW50Q291bnRWYWx1ZTtcblx0fSk7XG5cdHJldHVybiBtYXJrZXJzO1xufVxuIiwiZnVuY3Rpb24gZmlsdGVyKGlucHV0QXJncykge1xuXG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dEFyZ3MpXG4gICAgdmFyIG51bWJlcktleXMgPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgdmFsaWRGaWx0ZXJzID0gMDtcblxuICAgIHZhciBjb3VudHJpZXNCeUZpbHRlciA9IG5ldyBBcnJheSgpO1xuICAgIHZhciBtYXJrZXJzQnlGaWx0ZXIgPSBuZXcgQXJyYXkoKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbnVtYmVyS2V5czsgaSsrKSB7XG4gICAgICAgIGNvdW50cmllc0J5RmlsdGVyW2ldID0gbmV3IEFycmF5KCk7XG4gICAgICAgIG1hcmtlcnNCeUZpbHRlcltpXSA9IG5ldyBBcnJheSgpO1xuICAgIH1cblxuICAgIC8vIGNoZWNrIGlmIGFueSBvZiB0aGUgbmFtZXMgaXMgYWxsIChyZXNldCBhbGwgYXBwbGllZCBmaWx0ZXJzXHQpXG4gICAgdmFyIGV4aXQgPSBmYWxzZTtcbiAgICAkLmVhY2goa2V5cywgZnVuY3Rpb24oaW5kZXgsIGZpbHRlck5hbWUpIHtcbiAgICAgICAgaWYgKGZpbHRlck5hbWUudG9Mb3dlckNhc2UoKSA9PSAnYWxsJykge1xuICAgICAgICAgICAgZXhpdCA9IHRydWU7XG4gICAgICAgICAgICAvLyByZWxvYWRzIHRoZSBvcmlnaW5hbCBtYXJrZXJzIGFuZCBjb3VudHJpZXMgb24gdGhlIG1hcFxuICAgICAgICAgICAgcmVzZXRGaWx0ZXJzKCk7XG4gICAgICAgICAgICAvLyBlcmFzZSB0aGUgdGV4dCBmcm9tIHRoZSBmaWx0ZXJzIGJveFxuICAgICAgICAgICAgcmVzZXRGaWx0ZXJzQm94KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoZXhpdClcbiAgICAgICAgcmV0dXJuO1xuXG4gICAgLy8gZm9yIGV2ZXJ5IGtleS9maWx0ZXJcbiAgICAkLmVhY2goa2V5cywgZnVuY3Rpb24oaW5kZXgsIGZpbHRlck5hbWUpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGZpbHRlck5hbWUgaXMgdmFsaWRcbiAgICAgICAgaWYgKCFjaGVja0ZpbHRlck5hbWVJc1ZhbGlkKGZpbHRlck5hbWUpKSB7XG4gICAgICAgICAgICAvLyBpbnZhbGlkIGZpbHRlciBuYW1lXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSW52YWxpZCBmaWx0ZXIgbmFtZSEoJyArIGZpbHRlck5hbWUgKyAnKScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBnZXQgdGhlIGZpbHRlciB2YWx1ZSAoY2FuIGNvbnRhaW4gZW51bWVyYXRpb24gYW5kIHJhbmdlKVxuICAgICAgICAgICAgLy8gJzIwMDQtMjAwNicgLCAnRixNJywgZXRjXG4gICAgICAgICAgICB2YXIgZmlsdGVyVmFsdWUgPSBpbnB1dEFyZ3NbZmlsdGVyTmFtZV07XG4gICAgICAgICAgICAvLyBnZXQgYWxsIHNpbmdsZSBmaWx0ZXIgdmFsdWVzXG4gICAgICAgICAgICB2YXIgZmluYWxQYXJ0cyA9IGdldEFsbEZpbHRlclZhbHVlcyhmaWx0ZXJWYWx1ZSk7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGZpbmFsUGFydHMpO1xuICAgICAgICAgICAgdmFsaWRGaWx0ZXJzKys7XG5cbiAgICAgICAgICAgIC8vIGZvciBldmVyeSBzaW5nbGUgdmFsdWUgZ2V0IGFsbCB0aGUgY291bnRydWVzIGFuZCBtYXJrZXJzXG4gICAgICAgICAgICAkLmVhY2goZmluYWxQYXJ0cywgZnVuY3Rpb24oaSwgcGFydCkge1xuICAgICAgICAgICAgICAgIHZhciBjaGVja1JldHVybiA9IGNoZWNrV2hhdENvdW50cmllc01hcmtlcnNUb0FkZChmaWx0ZXJPYmplY3QsIHBhcnQpO1xuICAgICAgICAgICAgICAgIHZhciBjb3VudHJpZXNBdXggPSBjaGVja1JldHVyblswXTtcbiAgICAgICAgICAgICAgICB2YXIgbWFya2Vyc0F1eCA9IGNoZWNrUmV0dXJuWzFdO1xuICAgICAgICAgICAgICAgIC8vIGFkZCBldmVyeSBjb3VudHJ5IHRvIHRoZSBsaXN0IG9mIGNvdW50cmllc0J5RmlsdGVyXG4gICAgICAgICAgICAgICAgLy8gYWRkIGV2ZXJ5IG1hcmtlciB0byB0aGUgbGlzdCBvZiBtYXJrZXJzQnlGaWx0ZXJcbiAgICAgICAgICAgICAgICAkLmVhY2goT2JqZWN0LmtleXMoY291bnRyaWVzQXV4KSwgZnVuY3Rpb24oaiwgY3VycmVudEtleSkge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgY29sb3JzIHRoYXQgYXJlIHJldHVybmVkIGFyZSBpbiBhIGpzb24gZm9ybWF0XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlWYWx1ZSA9IGNvdW50cmllc0F1eFtjdXJyZW50S2V5XTtcbiAgICAgICAgICAgICAgICAgICAgY291bnRyaWVzQnlGaWx0ZXJbaW5kZXhdW2N1cnJlbnRLZXldID0ga2V5VmFsdWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBtYXJrZXJzXG4gICAgICAgICAgICAgICAgJC5lYWNoKG1hcmtlcnNBdXgsIGZ1bmN0aW9uKGosIGN1cnJlbnRNYXJrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2Vyc0J5RmlsdGVyW2luZGV4XS5wdXNoKGN1cnJlbnRNYXJrZXIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGdldCB0aGUgZmluYWwgY291bnRyaWVzXG4gICAgdmFyIGZpbmFsQ291bnRyaWVzID0gW107XG4gICAgaWYgKGNvdW50cmllc0J5RmlsdGVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZmluYWxDb3VudHJpZXMgPSBjb3VudHJpZXNCeUZpbHRlclswXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudHJpZXNCeUZpbHRlci5sZW5ndGggLSAxOyBpKyspXG4gICAgICAgICAgICBmaW5hbENvdW50cmllcyA9IGdldENvdW50cmllc0ludGVyc2VjdGlvbihmaW5hbENvdW50cmllcywgY291bnRyaWVzQnlGaWx0ZXJbaSArIDFdKTtcbiAgICB9XG5cbiAgICAvLyBhZGQgY291bnRyaWVzIHRvIE1hcFxuICAgIHJlbG9hZE1hcChmaW5hbENvdW50cmllcyk7XG5cbiAgICAvLyBnZXQgdGhlIGZpbmFsIG1hcmtlcnNcbiAgICBmaWx0ZXJlZE1hcmtlcnMgPSBbXTtcbiAgICBpZiAobWFya2Vyc0J5RmlsdGVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZmlsdGVyZWRNYXJrZXJzID0gbWFya2Vyc0J5RmlsdGVyWzBdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtlcnNCeUZpbHRlci5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICAgIGZpbHRlcmVkTWFya2VycyA9IGdldE1hcmtlcnNJbnRlcnNlY3Rpb24oZmlsdGVyZWRNYXJrZXJzLCBtYXJrZXJzQnlGaWx0ZXJbaSArIDFdKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGFkZCBtYXJrZXJzIHRvIHRoZSBtYXBcbiAgICBhZGRNYXJrZXJzVG9NYXAoKTtcbn1cblxuZnVuY3Rpb24gZ2V0TWFya2Vyc0ludGVyc2VjdGlvbihtYXJrZXJzR3JvdXAxLCBtYXJrZXJzR3JvdXAyKSB7XG4gICAgdmFyIG1hcmtlcnMgPSBbXTtcblxuICAgIC8vIG1hcmtlcnMgdGhhdCBiZWxvbmcgdG8gdGhlIHR3byBncm91cHNcbiAgICAkLmVhY2gobWFya2Vyc0dyb3VwMSwgZnVuY3Rpb24oaW5kZXgsIG1hcmtlcjEpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhpcyBtYXJrZXIgbmFtZSBpcyBpbnNpZGUgdGhlIHNlY29uZCBncm91cFxuICAgICAgICB2YXIgbWFya2VyMUNvdW50cnkgPSBtYXJrZXIxLkNvdW50cnk7XG4gICAgICAgICQuZWFjaChtYXJrZXJzR3JvdXAyLCBmdW5jdGlvbihpbmRleCwgbWFya2VyMikge1xuICAgICAgICAgICAgdmFyIG1hcmtlcjJDb3VudHJ5ID0gbWFya2VyMi5Db3VudHJ5O1xuICAgICAgICAgICAgaWYgKG1hcmtlcjFDb3VudHJ5ID09IG1hcmtlcjJDb3VudHJ5KVxuICAgICAgICAgICAgICAgIG1hcmtlcnMucHVzaChtYXJrZXIxKVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gbWFya2Vycztcbn1cblxuZnVuY3Rpb24gZ2V0Q291bnRyaWVzSW50ZXJzZWN0aW9uKGNvdW50cmllc0dyb3VwMSwgY291bnRyaWVzR3JvdXAyKSB7XG4gICAgLy8gY291bnRyaWVzIHRoYXQgYmVsb25nIHRvIHRoZSB0d28gZ3JvdXBzXG4gICAgdmFyIGNvdW50cmllcyA9IFtdO1xuXG4gICAgJC5lYWNoKE9iamVjdC5rZXlzKGNvdW50cmllc0dyb3VwMSksIGZ1bmN0aW9uKGluZGV4LCBjb3VudHJ5TmFtZTEpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhpcyBjb3VudHJ5IG5hbWUgaXMgaW5zaWRlIHRoZSBzZWNvbmQgZ3JvdXBcbiAgICAgICAgJC5lYWNoKE9iamVjdC5rZXlzKGNvdW50cmllc0dyb3VwMiksIGZ1bmN0aW9uKGluZGV4LCBjb3VudHJ5TmFtZTIpIHtcbiAgICAgICAgICAgIGlmIChjb3VudHJ5TmFtZTEgPT0gY291bnRyeU5hbWUyKVxuICAgICAgICAgICAgICAgIGNvdW50cmllc1tjb3VudHJ5TmFtZTFdID0gY291bnRyaWVzR3JvdXAxW2NvdW50cnlOYW1lMV07XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBjb3VudHJpZXM7XG59XG5cbmZ1bmN0aW9uIGFwcGx5TXVsdGlwbGVGaWx0ZXJzUHJvZ3JhbWF0dGljYWxseShmaWx0ZXJzVG9BcHBseSkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZmlsdGVyc1RvQXBwbHkpXG4gICAgdmFyIG51bUZpbHRlcnNUb0FwcGx5ID0ga2V5cy5sZW5ndGg7XG4gICAgdmFyIGNvdW50cmllc0hhdmVGaWx0ZXIgPSBbXTtcbiAgICB2YXIgbWFya2Vyc0hhdmVGaWx0ZXIgPSBbXTtcblxuICAgIC8vIGZvciBldmVyeSBrZXlcbiAgICAkLmVhY2goa2V5cywgZnVuY3Rpb24oaW5kZXgsIGZpbHRlck5hbWUpIHtcbiAgICAgICAgdmFyIGZpbHRlclZhbHVlID0gZmlsdGVyc1RvQXBwbHlbZmlsdGVyTmFtZV07XG4gICAgfSk7XG4gICAgdmFyIGNvbG9ycyA9IFtdO1xuXG4gICAgLy8gcmVtb3ZlIGFsbCBtYXJrZXJzIGZyb20gdGhlIG1hcFxuICAgIG1hcC5yZW1vdmVBbGxNYXJrZXJzKCk7XG5cbiAgICAvLyBmb3IgZWFjaCBvZiB0aGUgY291bnRyaWVzXG4gICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGNvdW50cnlJbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgLy8gc2V0IHRvIDAgdGhlIG51bWJlciBvZiBmaWx0ZXJzXG4gICAgICAgIGNvdW50cmllc0hhdmVGaWx0ZXJbY291bnRyeUluZGV4XSA9IDA7XG4gICAgICAgIC8vIGNoZWNrIGlmIGl0IGhhcyB0aGUgbmVlZGVkIHZhbHVlc1xuICAgICAgICAkLmVhY2goa2V5cywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRGaWx0ZXJOYW1lKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnTmFtZScgKyBpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSAnVmFsdWUnICsgaTtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgQ291bnRyeSBoYXMgdGhhdCBuYW1lXG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50Q291bnRyeVtjdXJyZW50TmFtZVRvQ2hlY2tdKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeVtjdXJyZW50TmFtZVRvQ2hlY2tdLnRvTG93ZXJDYXNlKCkgPT0gY3VycmVudEZpbHRlck5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBieSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnlbY3VycmVudFZhbHVlXSA9PSBmaWx0ZXJzVG9BcHBseVtjdXJyZW50RmlsdGVyTmFtZV0pXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudHJpZXNIYXZlRmlsdGVyW2NvdW50cnlJbmRleF0rKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIGNvbG91ciBvbmx5IHRoZSBjb3VudHJpcyB3aG9zZSBjb3VudHJpZXNIYXZlRmlsdGVyW2luZGV4XSA9PSBudW1iZXJGaWx0ZXJzXG4gICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGNvdW50cnlJbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgaWYgKGNvdW50cmllc0hhdmVGaWx0ZXJbY291bnRyeUluZGV4XSA9PSBudW1GaWx0ZXJzVG9BcHBseSlcbiAgICAgICAgICAgIGNvbG9yc1tjdXJyZW50Q291bnRyeS5Db3VudHJ5XSA9IGN1cnJlbnRDb3VudHJ5LkNvdW50O1xuICAgIH0pO1xuICAgIHJlbG9hZE1hcChjb2xvcnMpO1xuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvKlxuICAgIE1hcmtlcnNcbiAgICAqL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAvLyBmb3IgZWFjaCBvZiB0aGUgbWFya2Vyc1xuICAgICQuZWFjaChqc29uTWFya2VycywgZnVuY3Rpb24obWFya2VySW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcbiAgICAgICAgLy8gc2V0IHRvIDAgdGhlIG51bWJlciBvZiBmaWx0ZXJzXG4gICAgICAgIG1hcmtlcnNIYXZlRmlsdGVyW21hcmtlckluZGV4XSA9IDA7XG4gICAgICAgIC8vIGNoZWNrIGlmIGl0IGhhcyB0aGUgbmVlZGVkIHZhbHVlc1xuICAgICAgICAkLmVhY2goa2V5cywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRGaWx0ZXJOYW1lKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnTmFtZScgKyBpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSAnVmFsdWUnICsgaTtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgQ291bnRyeSBoYXMgdGhhdCBuYW1lXG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50TWFya2VyW2N1cnJlbnROYW1lVG9DaGVja10pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNYXJrZXJbY3VycmVudE5hbWVUb0NoZWNrXS50b0xvd2VyQ2FzZSgpID09IGN1cnJlbnRGaWx0ZXJOYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgYnkgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNYXJrZXJbY3VycmVudFZhbHVlXSA9PSBmaWx0ZXJzVG9BcHBseVtjdXJyZW50RmlsdGVyTmFtZV0pXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzSGF2ZUZpbHRlclttYXJrZXJJbmRleF0rKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIGFkZCBvbmx5IHRoZSBtYXJrZXJzIHdobyBzYXRpc2Z5IHRoZSBjcml0ZXJpYVxuICAgICQuZWFjaChqc29uTWFya2VycywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcbiAgICAgICAgaWYgKG1hcmtlcnNIYXZlRmlsdGVyW2luZGV4XSA9PSBudW1GaWx0ZXJzVG9BcHBseSkge1xuICAgICAgICAgICAgbWFwLmFkZE1hcmtlcihpbmRleCwge1xuICAgICAgICAgICAgICAgIGxhdExuZzogW2N1cnJlbnRNYXJrZXIuTGF0aXR1ZGUsIGN1cnJlbnRNYXJrZXIuTG9uZ2l0dWRlXSxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50TWFya2VyLmRlc2MsXG5cbiAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIHN0eWxlIGZvciB0aGlzIG1hcmtlclxuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGw6ICdncmVlbicsXG4gICAgICAgICAgICAgICAgICAgIHI6IG1hcFJhbmdlKGN1cnJlbnRNYXJrZXIuQ291bnQsIG1pbkNvdW50LCBtYXhDb3VudCwgbWluUmFkaXVzLCBtYXhSYWRpdXMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxufVxuXG5mdW5jdGlvbiBhcHBseU11bHRpcGxlRmlsdGVycyhzZWxlY3RlZE11bHRpcGxlRmlsdGVycywganNvbkZpbHRlcnMpIHtcblxuICAgIC8vIG51bWJlciBvZiBmaWx0ZXJzIHRvIGJlIGFwcGxpZWRcbiAgICB2YXIgbnVtRmlsdGVyc1RvQXBwbHkgPSBzZWxlY3RlZE11bHRpcGxlRmlsdGVycy5maWx0ZXIoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWRcbiAgICB9KS5sZW5ndGg7XG5cbiAgICB2YXIgY291bnRyaWVzSGF2ZUZpbHRlciA9IFtdO1xuICAgIHZhciBtYXJrZXJzSGF2ZUZpbHRlciA9IFtdO1xuXG4gICAgLy8gZm9yIGVhY2ggb2YgdGhlIGNvdW50cmllc1xuICAgICQuZWFjaChqc29uQ291bnRyaWVzLCBmdW5jdGlvbihjb3VudHJ5SW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgIC8vIHNldCB0byAwIHRoZSBudW1iZXIgb2YgZmlsdGVyc1xuICAgICAgICBjb3VudHJpZXNIYXZlRmlsdGVyW2NvdW50cnlJbmRleF0gPSAwO1xuICAgICAgICAvLyBjaGVjayBpZiBpdCBoYXMgdGhlIG5lZWRlZCB2YWx1ZXNcbiAgICAgICAgJC5lYWNoKHNlbGVjdGVkTXVsdGlwbGVGaWx0ZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEZpbHRlclZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnTmFtZScgKyBpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSAnVmFsdWUnICsgaTtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgQ291bnRyeSBoYXMgdGhhdCBuYW1lXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5W2N1cnJlbnROYW1lVG9DaGVja10gPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeVtjdXJyZW50TmFtZVRvQ2hlY2tdID09PSBqc29uRmlsdGVyc1tpbmRleF0uTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBieSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnlbY3VycmVudFZhbHVlXSA9PSBjdXJyZW50RmlsdGVyVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cmllc0hhdmVGaWx0ZXJbY291bnRyeUluZGV4XSsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB3aGlsZSAodHJ1ZSlcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB2YXIgY29sb3JzID0gW107XG5cbiAgICAvLyBjb2xvdXIgb25seSB0aGUgY291bnRyaXMgd2hvc2UgY291bnRyaWVzSGF2ZUZpbHRlcltpbmRleF0gPT0gbnVtYmVyRmlsdGVyc1xuICAgICQuZWFjaChqc29uQ291bnRyaWVzLCBmdW5jdGlvbihjb3VudHJ5SW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgIGlmIChjb3VudHJpZXNIYXZlRmlsdGVyW2NvdW50cnlJbmRleF0gPT0gbnVtRmlsdGVyc1RvQXBwbHkpXG4gICAgICAgICAgICBjb2xvcnNbY3VycmVudENvdW50cnkuQ291bnRyeV0gPSBjdXJyZW50Q291bnRyeS5Db3VudDtcbiAgICB9KTtcblxuICAgIC8vIGNvbG91ciB0aGUgY291bnRyaWVzXG4gICAgcmVsb2FkTWFwKGNvbG9ycyk7XG5cblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLypcbiAgICBNYXJrZXJzXG4gICAgKi9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgLy8gZm9yIGVhY2ggb2YgdGhlIG1hcmtlcnNcbiAgICAkLmVhY2goanNvbk1hcmtlcnMsIGZ1bmN0aW9uKG1hcmtlckluZGV4LCBjdXJyZW50TWFya2VyKSB7XG4gICAgICAgIC8vIHNldCB0byAwIHRoZSBudW1iZXIgb2YgZmlsdGVyc1xuICAgICAgICBtYXJrZXJzSGF2ZUZpbHRlclttYXJrZXJJbmRleF0gPSAwO1xuICAgICAgICAvLyBjaGVjayBpZiBpdCBoYXMgdGhlIG5lZWRlZCB2YWx1ZXNcbiAgICAgICAgJC5lYWNoKHNlbGVjdGVkTXVsdGlwbGVGaWx0ZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEZpbHRlclZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnTmFtZScgKyBpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSAnVmFsdWUnICsgaTtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgQ291bnRyeSBoYXMgdGhhdCBuYW1lXG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50TWFya2VyW2N1cnJlbnROYW1lVG9DaGVja10pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNYXJrZXJbY3VycmVudE5hbWVUb0NoZWNrXS50b0xvd2VyQ2FzZSgpID09IGpzb25GaWx0ZXJzW2luZGV4XS5OYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgYnkgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNYXJrZXJbY3VycmVudFZhbHVlXSA9PSBjdXJyZW50RmlsdGVyVmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzSGF2ZUZpbHRlclttYXJrZXJJbmRleF0rKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIGFkZCBvbmx5IHRoZSBtYXJrZXJzIHdobyBzYXRpc2Z5IHRoZSBjcml0ZXJpYVxuICAgICQuZWFjaChqc29uTWFya2VycywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcbiAgICAgICAgaWYgKG1hcmtlcnNIYXZlRmlsdGVyW2luZGV4XSA9PSBudW1GaWx0ZXJzVG9BcHBseSkge1xuICAgICAgICAgICAgbWFwLmFkZE1hcmtlcihpbmRleCwge1xuICAgICAgICAgICAgICAgIGxhdExuZzogW2N1cnJlbnRNYXJrZXIuTGF0aXR1ZGUsIGN1cnJlbnRNYXJrZXIuTG9uZ2l0dWRlXSxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50TWFya2VyLmRlc2MsXG5cbiAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIHN0eWxlIGZvciB0aGlzIG1hcmtlclxuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGw6ICdncmVlbicsXG4gICAgICAgICAgICAgICAgICAgIHI6IG1hcFJhbmdlKGN1cnJlbnRNYXJrZXIuQ291bnQsIG1pbkNvdW50LCBtYXhDb3VudCwgbWluUmFkaXVzLCBtYXhSYWRpdXMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiIsInZhciBSZWdpb24gPSBmdW5jdGlvbihyZWdpb25PYmplY3QsIGNvdW50cnkpIHtcbiAgICAvLyByZWFkIGZyb20gdGhlIGlucHV0IHBhcmFtZXRlcnNcbiAgICB0aGlzLlJlZ2lvbiA9IHJlZ2lvbk9iamVjdC5uYW1lO1xuICAgIHRoaXMuQ291bnRyeSA9IGNvdW50cnk7XG4gICAgLy8gKyBpcyB1c2VkIHRvIGFzc3VyZSB0aGF0IGEgTnVtYmVyIGlzIGJlaW5nIHJlYWRcbiAgICB0aGlzLmRlc2MgPSAnanVzdCBhIHJlZ2lvbi4uLic7XG59O1xuXG5mdW5jdGlvbiByZWFkUmVnaW9uc0Zyb21KU09OKHJlZ2lvbnMsIGNvdW50cnkpIHtcbiAgICB2YXIgcmVnaW9uc0FyciA9IFtdO1xuICAgICQuZWFjaChyZWdpb25zLCBmdW5jdGlvbihpbmRleCwgY3VycmVudFJlZ2lvbikge1xuICAgICAgICByZWdpb25zQXJyW2luZGV4XSA9IG5ldyBSZWdpb24oY3VycmVudFJlZ2lvbiwgY291bnRyeSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlZ2lvbnM7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlQ29sb3JzRm9yVGhlUmVnaW9ucyhjb3VudHJ5KXtcbiAgICB2YXIgaXNvQ29kZSA9IGNvdW50cnkuc3BsaXQoXCJfXCIpWzBdLnRvVXBwZXJDYXNlKCk7XG4gICAgLy8gZmluZCB0aGUgY291bnRyeSB3aXRoIHRoYXQgaXNvQ29kZVxuICAgIHZhciByZWdpb25Db2xvcnMgPSBbXTtcbiAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgIGlmIChjdXJyZW50Q291bnRyeS5Db3VudHJ5ID09IGlzb0NvZGUpIHtcbiAgICAgICAgICAgIC8vIGNvdW50cnkgd2FzIGZvdW5kLCBjaGVjayBpZiBpdCBoYXMgYW55IHJlZ2lvblxuICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5LlJlZ2lvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVnaW9ucyA9IGN1cnJlbnRDb3VudHJ5LlJlZ2lvbnM7XG4gICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSByZWdpb25zIG9mIHRoZSBjb3VudHJ5XG4gICAgICAgICAgICBcdCQuZWFjaChyZWdpb25zLCBmdW5jdGlvbihpbmRleCwgY3VycmVudFJlZ2lvbikge1xuICAgICAgICAgICAgXHRcdHJlZ2lvbkNvbG9yc1tjdXJyZW50UmVnaW9uLm5hbWVdID0gMTAwO1xuICAgICAgICAgICAgXHR9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXHRyZXR1cm4gcmVnaW9uQ29sb3JzO1xufVxuXG5mdW5jdGlvbiBhZGRSZWdpb25zVG9NYXAoa2V5KSB7XG4gICAgLy8gY2hlY2sgaWYgdGhlIGhpZ2hsaWdodGVkIGNvdW50cnkgaGFzIGFueSByZWdpb25cbiAgICB2YXIgaXNvQ29kZSA9IGtleS5zcGxpdChcIl9cIilbMF0udG9VcHBlckNhc2UoKTtcbiAgICAvLyBmaW5kIHRoZSBjb3VudHJ5IHdpdGggdGhhdCBpc29Db2RlXG4gICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuICAgICAgICBpZiAoY3VycmVudENvdW50cnkuQ291bnRyeSA9PSBpc29Db2RlKSB7XG4gICAgICAgICAgICAvLyBjb3VudHJ5IHdhcyBmb3VuZCwgY2hlY2sgaWYgaXQgaGFzIGFueSByZWdpb25cbiAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeS5SZWdpb25zKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlZ2lvbnMgPSBjdXJyZW50Q291bnRyeS5SZWdpb25zO1xuXG4gICAgICAgICAgICAgICAgdmFyIHBhbGV0dGUgPSBbJyM2NkMyQTUnLCAnI0ZDOEQ2MicsICcjOERBMENCJywgJyNFNzhBQzMnLCAnI0E2RDg1NCddO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVDb2xvcnMoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2xvcnMgPSB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTtcbiAgICAgICAgICAgICAgICAgICAgY29sb3JzW21hcHMucmVnaW9uXVxuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIG1hcHMucmVnaW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JzW2tleV0gPSBwYWxldHRlW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBhbGV0dGUubGVuZ3RoKV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9ycztcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGdlbmVyYXRlQ29sb3JzKCkpO1xuICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgY29sb3JzIG9mIHRoZSByZWdpb25zXG4gICAgICAgICAgICAgICAgbWFwcy5zZXJpZXMucmVnaW9uc1swXS5zZXRWYWx1ZXMoZ2VuZXJhdGVDb2xvcnMoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==