function mapRange(e,r,o,n,t){return n+(t-n)*(e-r)/(o-r)}function buildCountryTooltip(e,r){var o=countryTooltip;return $.each(Object.keys(r),function(e,n){o=o.replace(n,r[n])}),o}function generateColorsForTheCountries(e){e||(e=jsonCountries);var r=[];return $.each(e,function(e,o){r[o.name]=o.count}),r}function readCountriesFromJSON(e){var r=[];return minCount=1/0,maxCount=-(1/0),$.each(e,function(e,o){r.push(new Country(o)),r[e].Count>maxCount&&(maxCount=r[e].Count),r[e].Count<minCount&&(minCount=r[e].Count)}),r}function findCountryByName(e){var r=null;return $.each(jsonCountries,function(o,n){return n.country==e?r=n:void 0}),r}function readMinMax(e){minCount=1/0,maxCount=-(1/0);var r=[];for(var o in e)e.hasOwnProperty(o)&&r.push(o);$.each(r,function(e,r){var o=findCountryByName(r);o.Count>maxCount&&(maxCount=o.Count),o.Count<minCount&&(minCount=o.Count)})}function resetFiltersBox(){for(var e=0;numFilters>e;e++){$("#fbox"+e).text(""),$("#fbox"+e).val("")}var r=generateColorsForTheCountries();reloadMap(r),filteredMarkers=jsonMarkers,addMarkersToMap()}function createFiltersBoxCheckboxes(){$("filter-box").append('<ul class="nav navbar-nav" id="filterBoxCheckboxes" style="border-style: solid; border-width: 2px;"></ul>'),$.each(jsonFiltersArray,function(e,r){function o(e){return"<p>"+JSON.stringify(e)+"</p>"}function n(){var e=$("p.status").empty();e.append(o(widget.checked()))}numFilters++;var t="#box"+(e+1);$("#filterBoxCheckboxes").append('<li class="col-sm-6" id="box'+(e+1)+'" class="dropdown-checkbox-example dropdown-checkbox dropdown"></li>');var a=[];r.continuous||$.each(r.values,function(e,r){a.push({id:e+1,label:r,isChecked:!1})});var i=r.name.toLowerCase();i=i.charAt(0).toUpperCase()+i.slice(1),$(t).dropdownCheckbox({data:a,autosearch:!0,hideHeader:!1,showNbSelected:!1,templateButton:'<a class="dropdown-checkbox-toggle" data-toggle="dropdown" href="#">'+i+'<span class="dropdown-checkbox-nbselected"></span><b class="caret"></b>'}),widget=$(t).data("dropdownCheckbox"),$("body").on("change:dropdown-checkbox checked checked:all check:all uncheck:all check:checked uncheck:checked",n()),n()});var e='<div id="filters_box" class="row col-sm-12"><button id="filter_box_apply_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Filter</button><button id="filter_box_reset_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Reset</button></div>';$("#filterBoxCheckboxes").append(e),$("#filter_box_apply_filters").click(function(){restoreInputBoxes();for(var e={},r=jsonFiltersArray.length,o=0,n=0;n<jsonFiltersArray.length;n++){for(var t="#box"+(n+1),a=getSelectedItems(t),i=[],s=Object.keys(a),u=0;u<s.length;u++)i.push(a[s[u]].label);s.length>0?e[jsonFiltersArray[n].name]=i.join():o++}o!=r&&filter(e)}),$("#filter_box_reset_filters").click(function(){resetFiltersBox()})}function createFiltersBoxWithEnumeration(e){numFilters=e.length,$.each(e,function(e,r){var o=r.name.toLowerCase();o=o.charAt(0).toUpperCase()+o.slice(1);var n="";n+="<p><b>"+o+":</b></p>",n+='<div class="form-group">',n+='<input type="text" class="form-control" id="fbox'+e+'"',n+=r.continuous?'placeholder="'+r.min+"..."+r.max+'" +>':'placeholder="'+r.values.join()+'" +>',n+="</div>",$("filter-box").append(n),$("#filter-box").tooltip({title:"Use this filter box to filter by multiple filters",placement:"bottom"})}),$(".form-control").append('<span class="glyphicon glyphicon-remove form-control-feedback">');var r='<div id="filters_box"><button id="filter_box_apply_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Filter</button><button id="filter_box_reset_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Reset</button></div>';$("filter-box").append(r),$("#filter_box_apply_filters").click(function(){restoreInputBoxes();for(var r={},o=e.length,n=0,t=0;t<e.length;t++){var a="#fbox"+t,i=$(a).val();""!==i?r[e[t].name]=i:n++}n!=o&&filter(r)}),$("#filter_box_reset_filters").click(function(){restoreInputBoxes(),resetFiltersBox()})}function getAllFilterValues(e){var r=[];if(console.log(e),-1!=String(e).indexOf(",")){var o=String(e).split(",");$.each(o,function(e,o){if(-1!=o.indexOf("-")){var n=String(o).split("-");checkFilterValuesAreValid(filterObject,n);for(var t=n[0],a=n[1];a>=t;t++)r.push(t)}else r.push(o)})}else if(console.log("single"),-1!=e.indexOf("-")){console.log("range");var n=String(e).split("-");console.log(n),checkFilterValuesAreValid(filterObject,n);for(var t=n[0],a=n[1];a>=t;t++)r.push(t)}else console.log("single value"),checkFilterValuesAreValid(filterObject,e.split("")),r.push(e);return r}function checkWhatCountriesToAdd(e,r){var o=[];return $.each(jsonCountries,function(e,n){for(var t=0;;){t++;var a="name"+t,i="value"+t;if(!n[a])break;n[i]==r&&(countryValueToCheck=i,n[i]==r&&(o[n.country]=n.Count))}}),o}function checkWhatMarkersToAdd(e,r){var o=[];return $.each(jsonMarkers,function(n,t){$.each(Object.keys(t),function(n,a){a.toLowerCase()==e.name.toLowerCase()&&t[a]==r&&o.push(t)})}),o}function checkWhatCountriesMarkersToAdd(e,r){var o=[],n=[];return o=checkWhatCountriesToAdd(e,r),n=checkWhatMarkersToAdd(e,r),[o,n]}function checkFilterNameIsValid(e){var r=!1;return $.each(jsonFiltersArray,function(o,n){return n.name.toLowerCase()===e.toLowerCase()?(filterObject=n,void(r=!0)):void 0}),r}function restoreInputBoxes(){console.log("restoring");for(var e=0;e<jsonFiltersArray.length;e++)$("#fbox"+e).parent().removeClass("has-error")}function getSelectedItems(e){return $(e).dropdownCheckbox("checked")}function checkFilterValuesAreValid(e,r){var o=!0;if(1==e.continuous){var n=e.min,t=e.max;$.each(r,function(r,a){return console.log(+a),n>+a||+a>t?(o=!1,void highlightInputBoxError(e,a)):void 0})}else $.each(r,function(r,n){o=!1,$.each(e.values,function(e,r){return r==n?void(o=!0):void 0}),o||highlightInputBoxError(e,n)});return o}function highlightInputBoxError(e,r){console.log("Invalid value for the filter: "+r);var o=e.name;$.each(jsonFiltersArray,function(e,r){o==r.name&&$("#fbox"+e).parent().addClass("has-error")})}function resetFilters(){var e=generateColorsForTheCountries();reloadMap(e),$.each(jsonMarkers,function(e,r){map.addMarker(e,{latLng:[r.Latitude,r.Longitude],name:r.desc,style:{fill:"green",r:mapRange(r.Count,minCount,maxCount,minRadius,maxRadius)}})})}function readFiltersFromJSON(e){var r=[];return $.each(e,function(e,o){r.push(new Filter(o))}),r}function jsonMapCountries(e,r){var o=[];$.getJSON(r,function(r){$.each(e,function(e,n){var t=n[r.country],a=0;o[e]=new Country("",t,a)}),mappingCountries=o,console.log(mappingCountries)})}function jsonMapMarkers(e,r){var o=[];$.getJSON(r,function(r){$.each(e,function(e,n){var t=n[r.country],a=0,i=n[r.Latitude],s=n[r.Longitude];o[e]=new Marker("",t,a,i,s)}),mappingMarkers=o,console.log(mappingMarkers)})}function reloadMap(e){jsonCountries.length>0&&readMinMax(e),$("#"+mDiv).empty(),map=new jvm.Map({map:mType,backgroundColor:background,container:$("#"+mDiv),onRegionClick:function(e,r){countryCode=r.toLowerCase();var o=countryCode+"_mill_en";switchMap(o)},onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,o);r.html(n)},onRegionTipShow:function(e,r,o){var n=-1;if($.each(jsonCountries,function(e,r){return r.country===o?void(n=r):void 0}),-1!=n){var t=buildCountryTooltip(r,n);r.html(t)}else r.html(r.html())},series:{markers:[finalMarkersInMap],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:e}]}}),thereAreMarkers&&addMarkersToMap()}function removeTooltip(){$(".jvectormap-tip").remove()}function removeBackButton(){$(".jvectormap-goback").remove()}function switchMap(e){$("#"+mDiv).empty(),removeTooltip();var r="countries"==dataType?generateColorsForTheCountries(e):[];map=new jvm.Map({map:e,backgroundColor:background,container:$("#"+mDiv),onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,o);r.html(n)},onRegionTipShow:function(r,o,n){var t=e.split("_")[0].toUpperCase(),a=-1;$.each(jsonCountries,function(e,r){return r.country==t?void(a=r):void 0});var i,s=!1;$.each(map.regions,function(e,r){return r.name==n?(i=r,void(s=!0)):void 0}),o.html(s?buildRegionTooltip(i):o.html())},series:{markers:[finalMarkersInMap],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:r}]}}),$("#my_map").append('<div class="jvectormap-goback">Back</div>'),$(".jvectormap-goback").click(function(){$("#"+mDiv).empty(),removeTooltip(),reloadMap(auxColors)}),thereAreMarkers&&addMarkersToMap()}function readMarkersFromJSON(e){var r=[];return minCount=1/0,maxCount=-(1/0),$.each(e,function(e,o){r.push(new Marker(o));var n=r[e].Count;n>maxCount&&(maxCount=n),n<minCount&&(minCount=n)}),r}function addMarkersToMap(){var e=[];$.each(filteredMarkers,function(r,o){var n={latLng:[o.latitude,o.longitude],name:o.desc,style:{r:mapRange(o.count,minCount,maxCount,minRadius,maxRadius),image:"../img/"+o.icon+".png"}};e.push(n)}),map.addMarkers(e)}function buildMarkerTooltip(e,r){var o=markerTooltip;return $.each(Object.keys(r),function(e,n){o=o.replace(n,r[n])}),o}function filter(e){var r=Object.keys(e),o=r.length,n=0,t=new Array,a=new Array;for(u=0;o>u;u++)t[u]=new Array,a[u]=new Array;var i=!1;if($.each(r,function(e,r){return"all"==r.toLowerCase()?(i=!0,resetFilters(),void resetFiltersBox()):void 0}),!i){$.each(r,function(r,o){if(!checkFilterNameIsValid(o))return void console.log("Invalid filter name!("+o+")");var i=e[o],s=getAllFilterValues(i);n++,$.each(s,function(e,o){var n=checkWhatCountriesMarkersToAdd(filterObject,o),i=n[0],s=n[1];$.each(Object.keys(i),function(e,o){var n=i[o];t[r][o]=n}),$.each(s,function(e,o){a[r].push(o)})})});var s=[];if(t.length>0){s=t[0];for(var u=0;u<t.length-1;u++)s=getCountriesIntersection(s,t[u+1])}if(reloadMap(s),filteredMarkers=[],a.length>0){filteredMarkers=a[0];for(var u=0;u<a.length-1;u++)filteredMarkers=getMarkersIntersection(filteredMarkers,a[u+1])}addMarkersToMap()}}function getMarkersIntersection(e,r){var o=[];return $.each(e,function(e,n){var t=n.country;$.each(r,function(e,r){var a=r.country;t==a&&o.push(n)})}),o}function getCountriesIntersection(e,r){var o=[];return $.each(Object.keys(e),function(n,t){$.each(Object.keys(r),function(r,n){t==n&&(o[t]=e[t])})}),o}function applyMultipleFiltersProgramattically(e){var r=Object.keys(e),o=r.length,n=[],t=[];$.each(r,function(r,o){e[o]});var a=[];map.removeAllMarkers(),$.each(jsonCountries,function(o,t){n[o]=0,$.each(r,function(r,a){for(var i=0;;){i++;var s="Name"+i,u="Value"+i;if(!t[s])break;t[s].toLowerCase()==a.toLowerCase()&&t[u]==e[a]&&n[o]++}})}),$.each(jsonCountries,function(e,r){n[e]==o&&(a[r.country]=r.Count)}),reloadMap(a),$.each(jsonMarkers,function(o,n){t[o]=0,$.each(r,function(r,a){for(var i=0;;){i++;var s="Name"+i,u="Value"+i;if(!n[s])break;n[s].toLowerCase()==a.toLowerCase()&&n[u]==e[a]&&t[o]++}})}),$.each(jsonMarkers,function(e,r){t[e]==o&&map.addMarker(e,{latLng:[r.Latitude,r.Longitude],name:r.desc,style:{fill:"green",r:mapRange(r.Count,minCount,maxCount,minRadius,maxRadius)}})})}function applyMultipleFilters(e,r){var o=e.filter(function(e){return void 0!==e}).length,n=[],t=[];$.each(jsonCountries,function(o,t){n[o]=0,$.each(e,function(e,a){for(var i=0;;){i++;var s="Name"+i,u="Value"+i;if(void 0==t[s])break;t[s]===r[e].Name&&t[u]==a&&n[o]++}})});var a=[];$.each(jsonCountries,function(e,r){n[e]==o&&(a[r.country]=r.Count)}),reloadMap(a),$.each(jsonMarkers,function(o,n){t[o]=0,$.each(e,function(e,a){for(var i=0;;){i++;var s="Name"+i,u="Value"+i;if(!n[s])break;n[s].toLowerCase()==r[e].Name.toLowerCase()&&n[u]==a&&t[o]++}})}),$.each(jsonMarkers,function(e,r){t[e]==o&&map.addMarker(e,{latLng:[r.Latitude,r.Longitude],name:r.desc,style:{fill:"green",r:mapRange(r.Count,minCount,maxCount,minRadius,maxRadius)}})})}function readRegionsFromJSON(e,r){var o=[];return $.each(e,function(e,n){o[e]=new Region(n,r)}),e}function generateColorsForTheRegions(e){var r=e.split("_")[0].toUpperCase(),o=[];return $.each(jsonCountries,function(e,n){if(n.country==r&&n.Regions){var t=n.Regions;$.each(t,function(e,r){o[r.name]=100})}}),o}function buildRegionTooltip(e){var r=regionTooltip;return r=r.replace("name",e.name)}function addRegionsToMap(e){var r=e.split("_")[0].toUpperCase();$.each(jsonCountries,function(e,o){function n(){var e,r={};r[maps.region];for(e in maps.regions)r[e]=t[Math.floor(Math.random()*t.length)];return r}if(o.country==r&&o.Regions){var t=(o.Regions,["#66C2A5","#FC8D62","#8DA0CB","#E78AC3","#A6D854"]);console.log(n()),maps.series.regions[0].setValues(n())}})}var vectorMap,jsonFilters=[],minColorMap,maxColorMap,mDiv,mType,background,filteredMarkers,thereAreMarkers=!1,VectorialMap=function(){};VectorialMap.prototype.createMap=function(e,r,o,n,t,a,i,s,u){if(background=s,mType=i,jsonCountries=[],jsonMarkers=[],mDiv=n,minColorMap=t,maxColorMap=a,"countries"==u)jsonCountries=readCountriesFromJSON(e),jQuery.ajax({url:"../tooltip-templates/country_tooltip.html",success:function(e){countryTooltip=e},async:!1}),jQuery.ajax({url:"../tooltip-templates/region_tooltip.html",success:function(e){regionTooltip=e},async:!1});else{if("markers"!=u)return void console.error("You must give as input a list of markers or countries!");thereAreMarkers=!0,jsonMarkers=readMarkersFromJSON(e),filteredMarkers=jsonMarkers,numMarkers=jsonMarkers.length,jQuery.ajax({url:"../tooltip-templates/marker_tooltip.html",success:function(e){markerTooltip=e},async:!1})}auxColors="countries"==u?generateColorsForTheCountries():[];var c={vertical:!0};markersWithLegend={scale:[minColorMap,maxColorMap],values:[minCount,maxCount],legend:c},markersWithoutLegend={scale:[minColorMap,maxColorMap],values:[minCount,maxCount]},finalMarkersInMap=markersWithLegend,"markers"==u&&(finalMarkersInMap=markersWithoutLegend),map=new jvm.Map({container:$("#"+n),map:mType,backgroundColor:background,onRegionClick:function(e,r){countryCode=r.toLowerCase();var o=countryCode+"_mill_en";switchMap(o)},onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,jsonMarkers[o]);r.html(n)},onRegionTipShow:function(e,r,o){var n=-1;if($.each(jsonCountries,function(e,r){return r.name===o?void(n=r):void 0}),-1!=n){var t=buildCountryTooltip(r,n);r.html(t)}else r.html(r.html())},series:{markers:[finalMarkersInMap],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:auxColors}]}}),"markers"==u&&(filteredMarkers=jsonMarkers,addMarkersToMap())};var Country=function(e){var r=e.attributes,o=this;$.each(Object.keys(r),function(e,n){o[n]=r[n]}),e.Regions&&(this.Regions=readRegionsFromJSON(e.Regions,e.country)),this.name=e.name,this.count=+e.count,this.desc="abc"},numFilters=0,Filter=function(e){this.name=e.name,"false"==e.continuous?(this.values=[],this.values=e.values,this.continuous=!1):(this.continuous=!0,this.min=e.min,this.max=e.max)},mappingMarkers=[],mappingCountries=[];VectorialMap.prototype.registerTransformer=function(e,r,o){var r="../mappingJSON/mappingCountriesSample.json",o="../mappingJSON/mappingMarkersSample.json";return r?o?(e="../json/espid-spain.json",void $.getJSON(e,function(e){jsonMapCountries(e,r),jsonMapMarkers(e,o)})):void console.error("you must specify a markers mapping json"):void console.error("you must specify a countries mapping json")},VectorialMap.prototype.filterOnServer=function(e){$.getJSON("../json/serverFilter.json",function(e){var r=JSON.stringify(e),o="http://serverFiltering.com/?data="+encodeURIComponent(r);o="../json/countries_plus_markers2.json",$.getJSON(o,function(e){jsonCountries=readCountriesFromJSON(e.countries);var r=generateColorsForTheCountries(jsonCountries);reloadMap(r),e.markers&&(jsonMarkers=readMarkersFromJSON(e.markers),addMarkersToMap())})})};var Marker=function(e){var r=e.attributes,o=this;$.each(Object.keys(r),function(e,n){o[n]=r[n]}),this.country=e.country,this.count=+e.count,this.latitude=e.latitude,this.longitude=e.longitude,this.icon=e.icon,this.desc="abc"},Region=function(e,r){this.Region=e.name,this.country=r,this.desc="just a region..."};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJjb3VudHJpZXMuanMiLCJjcmVhdGVGaWx0ZXJzLmpzIiwiZmlsdGVycy1hdXhpbGlhcnkuanMiLCJmaWx0ZXJzLmpzIiwianNvbi1tYXBwaW5nLmpzIiwibWFwcy1hdXhpbGlhcnkuanMiLCJtYXJrZXJzLmpzIiwibXVsdGlwbGUtZmlsdGVycy5qcyIsInJlZ2lvbnMuanMiXSwibmFtZXMiOlsibWFwUmFuZ2UiLCJ2YWx1ZSIsImxvdzEiLCJoaWdoMSIsImxvdzIiLCJoaWdoMiIsImJ1aWxkQ291bnRyeVRvb2x0aXAiLCJjb3VudHJ5TmFtZSIsImNvdW50cnkiLCJmaW5hbFRvb2x0aXAiLCJjb3VudHJ5VG9vbHRpcCIsIiQiLCJlYWNoIiwiT2JqZWN0Iiwia2V5cyIsImluZGV4IiwiYXR0ciIsInJlcGxhY2UiLCJnZW5lcmF0ZUNvbG9yc0ZvclRoZUNvdW50cmllcyIsImNvdW50cmllcyIsImpzb25Db3VudHJpZXMiLCJjb3VudHJ5Q29sb3JzIiwiY3VycmVudENvdW50cnkiLCJuYW1lIiwiY291bnQiLCJyZWFkQ291bnRyaWVzRnJvbUpTT04iLCJjb3VudHJpZXNKU09OIiwibWluQ291bnQiLCJJbmZpbml0eSIsIm1heENvdW50IiwicHVzaCIsIkNvdW50cnkiLCJDb3VudCIsImZpbmRDb3VudHJ5QnlOYW1lIiwicmV0dXJuQ291bnRyeSIsInJlYWRNaW5NYXgiLCJjb3VudHJpZXNOYW1lcyIsImtleSIsImhhc093blByb3BlcnR5IiwiY3VycmVudENvdW50cnlOYW1lIiwicmVzZXRGaWx0ZXJzQm94IiwiaSIsIm51bUZpbHRlcnMiLCJ0ZXh0IiwidmFsIiwiY29sb3JzIiwicmVsb2FkTWFwIiwiZmlsdGVyZWRNYXJrZXJzIiwianNvbk1hcmtlcnMiLCJhZGRNYXJrZXJzVG9NYXAiLCJjcmVhdGVGaWx0ZXJzQm94Q2hlY2tib3hlcyIsImFwcGVuZCIsImpzb25GaWx0ZXJzQXJyYXkiLCJjdXJyZW50RmlsdGVyIiwicCIsIndhdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1cGRhdGVTdGF0dXMiLCIkcCIsImVtcHR5Iiwid2lkZ2V0IiwiY2hlY2tlZCIsImJveElEIiwidGFiIiwiY29udGludW91cyIsInZhbHVlcyIsImN1cnJlbnRWYWx1ZSIsImlkIiwibGFiZWwiLCJpc0NoZWNrZWQiLCJ0b0xvd2VyQ2FzZSIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJkcm9wZG93bkNoZWNrYm94IiwiZGF0YSIsImF1dG9zZWFyY2giLCJoaWRlSGVhZGVyIiwic2hvd05iU2VsZWN0ZWQiLCJ0ZW1wbGF0ZUJ1dHRvbiIsIm9uIiwidGV4dFRvQXBwZW5kIiwiY2xpY2siLCJyZXN0b3JlSW5wdXRCb3hlcyIsImpzb25PYmplY3QiLCJsZW5ndGgiLCJlbXB0eUZpbHRlcnMiLCJzZWxlY3RlZEl0ZW1zIiwiZ2V0U2VsZWN0ZWRJdGVtcyIsIml0ZW1zQXJyYXkiLCJqIiwiam9pbiIsImZpbHRlciIsImNyZWF0ZUZpbHRlcnNCb3hXaXRoRW51bWVyYXRpb24iLCJqc29uRmlsdGVycyIsImZpbHRlck5hbWUiLCJ0b0FwcGVuZCIsIm1pbiIsIm1heCIsInRvb2x0aXAiLCJ0aXRsZSIsInBsYWNlbWVudCIsImN1cnJlbnRGaWx0ZXJWYWx1ZSIsImdldEFsbEZpbHRlclZhbHVlcyIsImZpbHRlclZhbHVlIiwicmV0dXJuUGFydHMiLCJjb25zb2xlIiwibG9nIiwiU3RyaW5nIiwiaW5kZXhPZiIsImVudW1lcmF0aW9uUGFydHMiLCJzcGxpdCIsImN1cnJlbnRFbnVtZXJhdGlvbiIsInJhbmdlUGFydHMiLCJjaGVja0ZpbHRlclZhbHVlc0FyZVZhbGlkIiwiZmlsdGVyT2JqZWN0Iiwic3ViUGFydHMiLCJjaGVja1doYXRDb3VudHJpZXNUb0FkZCIsInNlbGVjdGVkRmlsdGVyIiwiY3VycmVudE5hbWVUb0NoZWNrIiwiY291bnRyeVZhbHVlVG9DaGVjayIsImNoZWNrV2hhdE1hcmtlcnNUb0FkZCIsIm1hcmtlcnMiLCJjdXJyZW50TWFya2VyIiwiY2hlY2tXaGF0Q291bnRyaWVzTWFya2Vyc1RvQWRkIiwiY291bnRyaWVzVG9BZGQiLCJtYXJrZXJzVG9BZGQiLCJjaGVja0ZpbHRlck5hbWVJc1ZhbGlkIiwidmFsaWQiLCJwYXJlbnQiLCJyZW1vdmVDbGFzcyIsImZpbHRlclZhbHVlcyIsImhpZ2hsaWdodElucHV0Qm94RXJyb3IiLCJmaWx0ZXJUb0ZpbmQiLCJhZGRDbGFzcyIsInJlc2V0RmlsdGVycyIsIm1hcCIsImFkZE1hcmtlciIsImxhdExuZyIsIkxhdGl0dWRlIiwiTG9uZ2l0dWRlIiwiZGVzYyIsInN0eWxlIiwiZmlsbCIsInIiLCJtaW5SYWRpdXMiLCJtYXhSYWRpdXMiLCJyZWFkRmlsdGVyc0Zyb21KU09OIiwiZmlsdGVyc0pTT04iLCJmaWx0ZXJzIiwiRmlsdGVyIiwianNvbk1hcENvdW50cmllcyIsImpzb24iLCJjb3VudHJpZXNNYXBwaW5nSnNvbiIsImdldEpTT04iLCJqc29uTWFwcGluZyIsImN1cnJlbnRKU09OIiwibWFwcGluZ0NvdW50cmllcyIsImpzb25NYXBNYXJrZXJzIiwibWFya2Vyc01hcHBpbmdKc29uIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJNYXJrZXIiLCJtYXBwaW5nTWFya2VycyIsIm1EaXYiLCJqdm0iLCJNYXAiLCJtVHlwZSIsImJhY2tncm91bmRDb2xvciIsImJhY2tncm91bmQiLCJjb250YWluZXIiLCJvblJlZ2lvbkNsaWNrIiwiZSIsImNvZGUiLCJjb3VudHJ5Q29kZSIsIm5ld01hcCIsInN3aXRjaE1hcCIsIm9uTWFya2VyVGlwU2hvdyIsImJ1aWxkTWFya2VyVG9vbHRpcCIsImh0bWwiLCJvblJlZ2lvblRpcFNob3ciLCJzZWxlY3RlZENvdW50cnkiLCJzZXJpZXMiLCJmaW5hbE1hcmtlcnNJbk1hcCIsInJlZ2lvbnMiLCJzY2FsZSIsIm1pbkNvbG9yTWFwIiwibWF4Q29sb3JNYXAiLCJhdHRyaWJ1dGUiLCJ0aGVyZUFyZU1hcmtlcnMiLCJyZW1vdmVUb29sdGlwIiwicmVtb3ZlIiwicmVtb3ZlQmFja0J1dHRvbiIsInJlZ2lvbkNvbG9ycyIsImRhdGFUeXBlIiwicmVnaW9uTmFtZSIsImN1cnJlbnRNYXAiLCJzZWxlY3RlZFJlZ2lvbiIsInJlZ2lvbkZvdW5kIiwiY3VycmVudFJlZ2lvbiIsImJ1aWxkUmVnaW9uVG9vbHRpcCIsImF1eENvbG9ycyIsInJlYWRNYXJrZXJzRnJvbUpTT04iLCJjdXJyZW50SlNPTk1hcmtlciIsImN1cnJlbnRDb3VudFZhbHVlIiwibWFya2Vyc0pTT05BcnJheSIsImN1cnJlbnRNYXJrZXJKU09OIiwiaW1hZ2UiLCJpY29uIiwiYWRkTWFya2VycyIsIm1hcmtlciIsIm1hcmtlclRvb2x0aXAiLCJpbnB1dEFyZ3MiLCJudW1iZXJLZXlzIiwidmFsaWRGaWx0ZXJzIiwiY291bnRyaWVzQnlGaWx0ZXIiLCJBcnJheSIsIm1hcmtlcnNCeUZpbHRlciIsImV4aXQiLCJmaW5hbFBhcnRzIiwicGFydCIsImNoZWNrUmV0dXJuIiwiY291bnRyaWVzQXV4IiwibWFya2Vyc0F1eCIsImN1cnJlbnRLZXkiLCJrZXlWYWx1ZSIsImZpbmFsQ291bnRyaWVzIiwiZ2V0Q291bnRyaWVzSW50ZXJzZWN0aW9uIiwiZ2V0TWFya2Vyc0ludGVyc2VjdGlvbiIsIm1hcmtlcnNHcm91cDEiLCJtYXJrZXJzR3JvdXAyIiwibWFya2VyMSIsIm1hcmtlcjFDb3VudHJ5IiwibWFya2VyMiIsIm1hcmtlcjJDb3VudHJ5IiwiY291bnRyaWVzR3JvdXAxIiwiY291bnRyaWVzR3JvdXAyIiwiY291bnRyeU5hbWUxIiwiY291bnRyeU5hbWUyIiwiYXBwbHlNdWx0aXBsZUZpbHRlcnNQcm9ncmFtYXR0aWNhbGx5IiwiZmlsdGVyc1RvQXBwbHkiLCJudW1GaWx0ZXJzVG9BcHBseSIsImNvdW50cmllc0hhdmVGaWx0ZXIiLCJtYXJrZXJzSGF2ZUZpbHRlciIsInJlbW92ZUFsbE1hcmtlcnMiLCJjb3VudHJ5SW5kZXgiLCJjdXJyZW50RmlsdGVyTmFtZSIsIm1hcmtlckluZGV4IiwiYXBwbHlNdWx0aXBsZUZpbHRlcnMiLCJzZWxlY3RlZE11bHRpcGxlRmlsdGVycyIsInVuZGVmaW5lZCIsIk5hbWUiLCJyZWFkUmVnaW9uc0Zyb21KU09OIiwicmVnaW9uc0FyciIsIlJlZ2lvbiIsImdlbmVyYXRlQ29sb3JzRm9yVGhlUmVnaW9ucyIsImlzb0NvZGUiLCJSZWdpb25zIiwicmVnaW9uIiwicmVnaW9uVG9vbHRpcCIsImFkZFJlZ2lvbnNUb01hcCIsImdlbmVyYXRlQ29sb3JzIiwibWFwcyIsInBhbGV0dGUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJzZXRWYWx1ZXMiLCJ2ZWN0b3JNYXAiLCJWZWN0b3JpYWxNYXAiLCJwcm90b3R5cGUiLCJjcmVhdGVNYXAiLCJpbnB1dEpTT04iLCJtYXBEaXYiLCJtaW5Db2xvciIsIm1heENvbG9yIiwibWFwVHlwZSIsImpRdWVyeSIsImFqYXgiLCJ1cmwiLCJzdWNjZXNzIiwicmVzdWx0IiwiYXN5bmMiLCJlcnJvciIsIm51bU1hcmtlcnMiLCJsZWdlbmRWYXIiLCJ2ZXJ0aWNhbCIsIm1hcmtlcnNXaXRoTGVnZW5kIiwibGVnZW5kIiwibWFya2Vyc1dpdGhvdXRMZWdlbmQiLCJjb3VudHJ5T2JqZWN0IiwiYXR0cmlidXRlcyIsInRoaXMiLCJyZWdpc3RlclRyYW5zZm9ybWVyIiwianNvbkxvY2F0aW9uIiwiZmlsdGVyT25TZXJ2ZXIiLCJmaWx0ZXJzU3RyaW5nIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwibWFya2VyT2JqZWN0IiwicmVnaW9uT2JqZWN0Il0sIm1hcHBpbmdzIjoiQUE4SUEsUUFBQUEsVUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQSxNQUFBRCxJQUFBQyxFQUFBRCxJQUFBSCxFQUFBQyxJQUFBQyxFQUFBRCxHQzVIQSxRQUFBSSxxQkFBQUMsRUFBQUMsR0FDQSxHQUFBQyxHQUFBQyxjQUlBLE9BSEFDLEdBQUFDLEtBQUFDLE9BQUFDLEtBQUFOLEdBQUEsU0FBQU8sRUFBQUMsR0FDQVAsRUFBQUEsRUFBQVEsUUFBQUQsRUFBQVIsRUFBQVEsTUFFQVAsRUFH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a0IsbUJBQUFELEVBR0FqQixHQUFBLHVDQUVBN1EsRUFBQWdKLFFBQUE2SCxFQUFBLFNBQUEvSCxHQVVBckksY0FBQUssc0JBQUFnSSxFQUFBdEksVUFFQSxJQUFBRSxHQUFBSCw4QkFBQUUsY0FFQTBCLFdBQUF6QixHQUdBb0ksRUFBQTlCLFVBRUEzRSxZQUFBMkosb0JBQUFsRCxFQUFBOUIsU0FFQTFFLHVCRXBIQSxJQUFBa0gsUUFBQSxTQUFBd0ksR0FFQSxHQUFBUCxHQUFBTyxFQUFBLFdBQ0F4RixFQUFBa0YsSUFDQTFSLEdBQUFDLEtBQUFDLE9BQUFDLEtBQUFzUixHQUFBLFNBQUFyUixFQUFBQyxHQUNBbU0sRUFBQW5NLEdBQUFvUixFQUFBcFIsS0FHQXFSLEtBQUE3UixRQUFBbVMsRUFBQW5TLFFBQ0E2UixLQUFBN1EsT0FBQW1SLEVBQUFuUixNQUNBNlEsS0FBQXBJLFNBQUEwSSxFQUFBMUksU0FDQW9JLEtBQUFuSSxVQUFBeUksRUFBQXpJLFVBQ0FtSSxLQUFBcEYsS0FBQTBGLEVBQUExRixLQUVBb0YsS0FBQXZKLEtBQUEsT0VmQWlILE9BQUEsU0FBQTZDLEVBQUFwUyxHQUVBNlIsS0FBQXRDLE9BQUE2QyxFQUFBclIsS0FDQThRLEtBQUE3UixRQUFBQSxFQUVBNlIsS0FBQXZKLEtBQUEiLCJmaWxlIjoianNNYXBzQXBpLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHZlY3Rvck1hcDtcbnZhciBqc29uRmlsdGVycyA9IFtdO1xudmFyIG1pbkNvbG9yTWFwO1xudmFyIG1heENvbG9yTWFwO1xudmFyIG1EaXY7XG52YXIgbVR5cGU7XG52YXIgYmFja2dyb3VuZDtcbnZhciBmaWx0ZXJlZE1hcmtlcnM7XG52YXIgdGhlcmVBcmVNYXJrZXJzID0gZmFsc2U7XG5cbnZhciBWZWN0b3JpYWxNYXAgPSBmdW5jdGlvbigpIHt9O1xuXG4vLyBWZWN0b3JpYWxNYXAgUHJvdG90eXBlXG5WZWN0b3JpYWxNYXAucHJvdG90eXBlLmNyZWF0ZU1hcCA9IGZ1bmN0aW9uKGlucHV0SlNPTiwgbWluUmFkaXVzLCBtYXhSYWRpdXMsIG1hcERpdiwgbWluQ29sb3IsIG1heENvbG9yLCBtYXBUeXBlLCBiYWNrZ3JvdW5kQ29sb3IsIGRhdGFUeXBlKSB7XG4gICAgYmFja2dyb3VuZCA9IGJhY2tncm91bmRDb2xvcjtcbiAgICBtVHlwZSA9IG1hcFR5cGU7XG4gICAgLy8gY291bnRyaWVzIGxpc3RcbiAgICBqc29uQ291bnRyaWVzID0gW107XG4gICAgLy8gbWFya2VycyBsaXN0XG4gICAganNvbk1hcmtlcnMgPSBbXTtcbiAgICAvLyBpZCBvZiB0aGUgbWFwXG4gICAgbURpdiA9IG1hcERpdjtcbiAgICAvLyBhc3NpZ24gdGhlIGNvbG9ycyBmb3IgdGhlIHJhbmdlXG4gICAgbWluQ29sb3JNYXAgPSBtaW5Db2xvcjtcbiAgICBtYXhDb2xvck1hcCA9IG1heENvbG9yO1xuXG4gICAgaWYgKGRhdGFUeXBlID09ICdjb3VudHJpZXMnKSB7XG4gICAgICAgIGpzb25Db3VudHJpZXMgPSByZWFkQ291bnRyaWVzRnJvbUpTT04oaW5wdXRKU09OKTtcbiAgICAgICAgLy8gZ2V0IHRoZSB0b29sdGlwIHRlbXBsYXRlc1xuICAgICAgICAvLyBDT1VOVFJZIHRvb2x0aXBcbiAgICAgICAgalF1ZXJ5LmFqYXgoe1xuICAgICAgICAgICAgdXJsOiAnLi4vdG9vbHRpcC10ZW1wbGF0ZXMvY291bnRyeV90b29sdGlwLmh0bWwnLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgY291bnRyeVRvb2x0aXAgPSByZXN1bHQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXN5bmM6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBSRUdJT04gdG9vbHRpcFxuICAgICAgICBqUXVlcnkuYWpheCh7XG4gICAgICAgICAgICB1cmw6ICcuLi90b29sdGlwLXRlbXBsYXRlcy9yZWdpb25fdG9vbHRpcC5odG1sJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHJlZ2lvblRvb2x0aXAgPSByZXN1bHQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXN5bmM6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoZGF0YVR5cGUgPT0gJ21hcmtlcnMnKSB7XG4gICAgICAgIHRoZXJlQXJlTWFya2VycyA9IHRydWU7XG4gICAgICAgIGpzb25NYXJrZXJzID0gcmVhZE1hcmtlcnNGcm9tSlNPTihpbnB1dEpTT04pO1xuICAgICAgICBmaWx0ZXJlZE1hcmtlcnMgPSBqc29uTWFya2VycztcbiAgICAgICAgbnVtTWFya2VycyA9IGpzb25NYXJrZXJzLmxlbmd0aDtcbiAgICAgICAgLy8gTUFSS0VSIHRvb2x0aXBcbiAgICAgICAgalF1ZXJ5LmFqYXgoe1xuICAgICAgICAgICAgdXJsOiAnLi4vdG9vbHRpcC10ZW1wbGF0ZXMvbWFya2VyX3Rvb2x0aXAuaHRtbCcsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBtYXJrZXJUb29sdGlwID0gcmVzdWx0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFzeW5jOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdZb3UgbXVzdCBnaXZlIGFzIGlucHV0IGEgbGlzdCBvZiBtYXJrZXJzIG9yIGNvdW50cmllcyEnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGdldCB0aGUgQ291bnQgdmFsdWUgZm9yIGVhY2ggQ291bnRyeVxuICAgIGF1eENvbG9ycyA9ICgoZGF0YVR5cGU9PSdjb3VudHJpZXMnKSA/IGdlbmVyYXRlQ29sb3JzRm9yVGhlQ291bnRyaWVzKCkgOiBbXSk7XG5cbiAgICAvLyBtYXJrZXIgbGVnZW5kXG4gICAgdmFyIGxlZ2VuZFZhciA9IHtcbiAgICAgICAgdmVydGljYWw6IHRydWUsXG4gICAgICAgIC8vdGl0bGU6ICdDb3VudHJpZXMnLFxuICAgIH07XG4gICAgbWFya2Vyc1dpdGhMZWdlbmQgPSB7XG4gICAgICAgIHNjYWxlOiBbbWluQ29sb3JNYXAsIG1heENvbG9yTWFwXSxcbiAgICAgICAgLy8gcmFuZ2Ugb2YgdmFsdWVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgQ291bnRcbiAgICAgICAgdmFsdWVzOiBbbWluQ291bnQsIG1heENvdW50XSxcbiAgICAgICAgLy8gYWRkIGEgbGVnZW5kXG4gICAgICAgIGxlZ2VuZDogbGVnZW5kVmFyXG4gICAgfTtcbiAgICBtYXJrZXJzV2l0aG91dExlZ2VuZCA9IHtcbiAgICAgICAgc2NhbGU6IFttaW5Db2xvck1hcCwgbWF4Q29sb3JNYXBdLFxuICAgICAgICAvLyByYW5nZSBvZiB2YWx1ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBDb3VudFxuICAgICAgICB2YWx1ZXM6IFttaW5Db3VudCwgbWF4Q291bnRdXG4gICAgfTtcbiAgICBmaW5hbE1hcmtlcnNJbk1hcCA9IG1hcmtlcnNXaXRoTGVnZW5kO1xuICAgIGlmIChkYXRhVHlwZSA9PSAnbWFya2VycycpIHtcbiAgICAgICAgZmluYWxNYXJrZXJzSW5NYXAgPSBtYXJrZXJzV2l0aG91dExlZ2VuZDtcbiAgICB9XG5cbiAgICAvLyBjcmVhdGUgYSBuZXcgTWFwXG4gICAgbWFwID0gbmV3IGp2bS5NYXAoe1xuICAgICAgICBjb250YWluZXI6ICQoJyMnICsgbWFwRGl2KSxcbiAgICAgICAgLy8gY29uZmlndXJhdGlvbiBvZiB0aGUgbWFpbiBtYXBcbiAgICAgICAgLy8gdHlwZSBvZiBtYXAgKHdvcmxkLCBFdXJvcGUsIFVTQSwgZXRjKVxuICAgICAgICBtYXA6IG1UeXBlLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmQsXG4gICAgICAgIC8vIHRyaWdnZXJlZCB3aGVuIGEgbWFya2VyIGlzIGhvdmVyZWRcbiAgICAgICAgb25SZWdpb25DbGljazogZnVuY3Rpb24oZSwgY29kZSkge1xuICAgICAgICAgICAgY291bnRyeUNvZGUgPSBjb2RlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB2YXIgbmV3TWFwID0gY291bnRyeUNvZGUgKyAnX21pbGxfZW4nO1xuICAgICAgICAgICAgc3dpdGNoTWFwKG5ld01hcCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uTWFya2VyVGlwU2hvdzogZnVuY3Rpb24oZSwgbGFiZWwsIGluZGV4KSB7XG4gICAgICAgICAgICAvLyBzZWxlY3Qgd2hhdCB0ZXh0IHRvIGRpc3BsYXkgd2hlbiBtYXJrZXIgaXMgaG92ZXJlZFxuICAgICAgICAgICAgdmFyIGZpbmFsVG9vbHRpcCA9IGJ1aWxkTWFya2VyVG9vbHRpcChqc29uTWFya2VycywganNvbk1hcmtlcnNbaW5kZXhdKTtcbiAgICAgICAgICAgIGxhYmVsLmh0bWwoZmluYWxUb29sdGlwKTtcbiAgICAgICAgfSxcbiAgICAgICAgLy8gdHJpZ2dlcmVkIHdoZW4gYSByZWdpb24gaXMgaG92ZXJlZFxuICAgICAgICBvblJlZ2lvblRpcFNob3c6IGZ1bmN0aW9uKGUsIGNvdW50cnlOYW1lLCBjb2RlKSB7XG4gICAgICAgICAgICAvLyBjb2RlIGNvbnRhaW5zIHRoZSBjb2RlIG9mIHRoZSBjb3VudHJ5IChpLmUuLCBQVCwgRVMsIEZSLCBldGMpXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRDb3VudHJ5ID0gLTE7XG4gICAgICAgICAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5Lm5hbWUgPT09IGNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDb3VudHJ5ID0gY3VycmVudENvdW50cnk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZENvdW50cnkgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAvLyBmaW5kIG9jY3VycmVuY2Ugb2Ygc2V2ZXJhbCBzdHJpbmdzIGluc2lkZSB0aGUgdGVtcGxhdGVcbiAgICAgICAgICAgICAgICB2YXIgZmluYWxUb29sdGlwID0gYnVpbGRDb3VudHJ5VG9vbHRpcChjb3VudHJ5TmFtZSwgc2VsZWN0ZWRDb3VudHJ5KTtcbiAgICAgICAgICAgICAgICBjb3VudHJ5TmFtZS5odG1sKGZpbmFsVG9vbHRpcCk7XG4gICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICBjb3VudHJ5TmFtZS5odG1sKGNvdW50cnlOYW1lLmh0bWwoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNlcmllczoge1xuICAgICAgICAgICAgbWFya2VyczogW2ZpbmFsTWFya2Vyc0luTWFwXSxcbiAgICAgICAgICAgIHJlZ2lvbnM6IFt7XG4gICAgICAgICAgICAgICAgLy8gbWluIGFuZCBtYXggdmFsdWVzIG9mIGNvdW50XG4gICAgICAgICAgICAgICAgc2NhbGU6IFttaW5Db2xvck1hcCwgbWF4Q29sb3JNYXBdLFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogJ2ZpbGwnLFxuICAgICAgICAgICAgICAgIHZhbHVlczogYXV4Q29sb3JzXG4gICAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBkcmF3IG1hcmtlcnMgb24gdGhlIG1hcFxuICAgIGlmIChkYXRhVHlwZSA9PSAnbWFya2VycycpIHtcbiAgICAgICAgZmlsdGVyZWRNYXJrZXJzID0ganNvbk1hcmtlcnM7XG4gICAgICAgIGFkZE1hcmtlcnNUb01hcCgpO1xuICAgIH1cbn07XG5cbi8vIEF1eGlsaWFyeSBmdW5jdGlvbiB0byB0cmFuc3Bvc2UgYSB2YWx1ZSBmcm9tIGFuIGluaXRpYWwgcmFuZ2UgdG8gYW5vdGhlciByYW5nZVxuZnVuY3Rpb24gbWFwUmFuZ2UodmFsdWUsIGxvdzEsIGhpZ2gxLCBsb3cyLCBoaWdoMikge1xuICAgIHJldHVybiBsb3cyICsgKGhpZ2gyIC0gbG93MikgKiAodmFsdWUgLSBsb3cxKSAvIChoaWdoMSAtIGxvdzEpO1xufVxuIiwidmFyIENvdW50cnkgPSBmdW5jdGlvbihjb3VudHJ5T2JqZWN0KSB7XG4gICAgLy8gcmVhZCBmcm9tIHRoZSBKU09OXG4gICAgLy8gYWRkIGF0dHJpYnV0ZXNcbiAgICB2YXIgYXR0cmlidXRlcyA9IGNvdW50cnlPYmplY3RbXCJhdHRyaWJ1dGVzXCJdO1xuICAgIHZhciBjb3VudHJ5ID0gdGhpcztcbiAgICAkLmVhY2goT2JqZWN0LmtleXMoYXR0cmlidXRlcyksIGZ1bmN0aW9uKGluZGV4LCBhdHRyKSB7XG4gICAgICAgIGNvdW50cnlbYXR0cl0gPSBhdHRyaWJ1dGVzW2F0dHJdO1xuICAgIH0pO1xuXG4gICAgLy8gdHJ5IHRvIHJlYWQgaXRzIHJlZ2lvbnMgaW4gY2FzZSBoZSBoYXMgYW55XG4gICAgaWYgKGNvdW50cnlPYmplY3QuUmVnaW9ucylcbiAgICAgICAgdGhpcy5SZWdpb25zID0gcmVhZFJlZ2lvbnNGcm9tSlNPTihjb3VudHJ5T2JqZWN0LlJlZ2lvbnMsIGNvdW50cnlPYmplY3QuY291bnRyeSk7XG5cbiAgICB0aGlzLm5hbWUgPSBjb3VudHJ5T2JqZWN0Lm5hbWU7XG4gICAgLy8gKyBpcyB1c2VkIHRvIGFzc3VyZSB0aGF0IGEgTnVtYmVyIGlzIGJlaW5nIHJlYWRcbiAgICB0aGlzLmNvdW50ID0gK2NvdW50cnlPYmplY3QuY291bnQ7XG4gICAgdGhpcy5kZXNjID0gJ2FiYyc7XG59O1xuXG5mdW5jdGlvbiBidWlsZENvdW50cnlUb29sdGlwKGNvdW50cnlOYW1lLCBjb3VudHJ5KSB7XG4gICAgdmFyIGZpbmFsVG9vbHRpcCA9IGNvdW50cnlUb29sdGlwO1xuICAgICQuZWFjaChPYmplY3Qua2V5cyhjb3VudHJ5KSwgZnVuY3Rpb24oaW5kZXgsIGF0dHIpIHtcbiAgICAgICAgZmluYWxUb29sdGlwID0gZmluYWxUb29sdGlwLnJlcGxhY2UoYXR0ciwgY291bnRyeVthdHRyXSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZpbmFsVG9vbHRpcDtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVDb2xvcnNGb3JUaGVDb3VudHJpZXMoY291bnRyaWVzKSB7XG4gICAgaWYgKCFjb3VudHJpZXMpXG4gICAgICAgIGNvdW50cmllcyA9IGpzb25Db3VudHJpZXM7XG4gICAgdmFyIGNvdW50cnlDb2xvcnMgPSBbXTtcbiAgICAkLmVhY2goY291bnRyaWVzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgY291bnRyeUNvbG9yc1tjdXJyZW50Q291bnRyeS5uYW1lXSA9IGN1cnJlbnRDb3VudHJ5LmNvdW50O1xuICAgIH0pO1xuICAgIHJldHVybiBjb3VudHJ5Q29sb3JzO1xufTtcblxuZnVuY3Rpb24gcmVhZENvdW50cmllc0Zyb21KU09OKGNvdW50cmllc0pTT04pIHtcbiAgICB2YXIgY291bnRyaWVzID0gW107XG5cbiAgICBtaW5Db3VudCA9IEluZmluaXR5O1xuICAgIG1heENvdW50ID0gLUluZmluaXR5O1xuXG4gICAgJC5lYWNoKGNvdW50cmllc0pTT04sIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuICAgICAgICBjb3VudHJpZXMucHVzaChuZXcgQ291bnRyeShjdXJyZW50Q291bnRyeSkpO1xuXG4gICAgICAgIGlmIChjb3VudHJpZXNbaW5kZXhdLkNvdW50ID4gbWF4Q291bnQpXG4gICAgICAgICAgICBtYXhDb3VudCA9IGNvdW50cmllc1tpbmRleF0uQ291bnQ7XG5cbiAgICAgICAgaWYgKGNvdW50cmllc1tpbmRleF0uQ291bnQgPCBtaW5Db3VudClcbiAgICAgICAgICAgIG1pbkNvdW50ID0gY291bnRyaWVzW2luZGV4XS5Db3VudDtcbiAgICB9KTtcbiAgICByZXR1cm4gY291bnRyaWVzO1xufVxuXG4vLyByZXR1cm4gdGhlIGNvdW50cnkgd2hvc2UgbmFtZSBpcyBwYXNzZWQgYXMgYW4gYXJndW1lbnRcbmZ1bmN0aW9uIGZpbmRDb3VudHJ5QnlOYW1lKGNvdW50cnlOYW1lKSB7XG4gICAgdmFyIHJldHVybkNvdW50cnkgPSBudWxsO1xuICAgICQuZWFjaChqc29uQ291bnRyaWVzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5LmNvdW50cnkgPT0gY291bnRyeU5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybkNvdW50cnkgPSBjdXJyZW50Q291bnRyeTtcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5Db3VudHJ5O1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJldHVybkNvdW50cnk7XG59XG5cbi8vIHJlYWQgdGhlIG1pbiBhbmQgbWF4IGNvdW50IG9mIHRoZSBjb3VudHJpc1xuZnVuY3Rpb24gcmVhZE1pbk1heChjb3VudHJpZXNOYW1lcykge1xuICAgIG1pbkNvdW50ID0gSW5maW5pdHk7XG4gICAgbWF4Q291bnQgPSAtSW5maW5pdHk7XG5cbiAgICAvLyBjb3VudHJpZXMgbmFtZXMgaXMgYSBKU09OIG9iamVjdFxuICAgIC8vIHJlYWQga2V5cyB0byBhbiBhcnJheVxuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIGNvdW50cmllc05hbWVzKSB7XG4gICAgICAgIGlmIChjb3VudHJpZXNOYW1lcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGZpbmQgY291bnRyeSBieSBuYW1lXG4gICAgJC5lYWNoKGtleXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50Q291bnRyeU5hbWUpIHtcbiAgICAgICAgLy8gZmluZCB0aGUgY291bnRyeSBieSBpdHMgbmFtZVxuICAgICAgICB2YXIgY3VycmVudENvdW50cnkgPSBmaW5kQ291bnRyeUJ5TmFtZShjdXJyZW50Q291bnRyeU5hbWUpO1xuICAgICAgICBpZiAoY3VycmVudENvdW50cnkuQ291bnQgPiBtYXhDb3VudClcbiAgICAgICAgICAgIG1heENvdW50ID0gY3VycmVudENvdW50cnkuQ291bnQ7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5LkNvdW50IDwgbWluQ291bnQpXG4gICAgICAgICAgICBtaW5Db3VudCA9IGN1cnJlbnRDb3VudHJ5LkNvdW50O1xuICAgIH0pO1xufVxuIiwidmFyIG51bUZpbHRlcnMgPSAwO1xuXG5mdW5jdGlvbiByZXNldEZpbHRlcnNCb3goKSB7XG4gICAgLy8gcmVzZXQgYWxsIHRoZSAnZmJveGVzJ1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtRmlsdGVyczsgaSsrKSB7XG4gICAgICAgIHZhciBjdXJyZW50SWQgPSBcIiNmYm94XCIgKyBpO1xuICAgICAgICAkKFwiI2Zib3hcIiArIGkpLnRleHQoJycpO1xuICAgICAgICAkKFwiI2Zib3hcIiArIGkpLnZhbCgnJyk7XG4gICAgfVxuXG4gICAgLy8gcmVsb2FkIHRoZSBtYXBcbiAgICB2YXIgY29sb3JzID0gZ2VuZXJhdGVDb2xvcnNGb3JUaGVDb3VudHJpZXMoKTtcbiAgICByZWxvYWRNYXAoY29sb3JzKTtcblxuICAgIGZpbHRlcmVkTWFya2VycyA9IGpzb25NYXJrZXJzO1xuICAgIGFkZE1hcmtlcnNUb01hcCgpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVGaWx0ZXJzQm94Q2hlY2tib3hlcygpIHtcblxuICAgICQoJ2ZpbHRlci1ib3gnKS5hcHBlbmQoJzx1bCBjbGFzcz1cIm5hdiBuYXZiYXItbmF2XCIgaWQ9XCJmaWx0ZXJCb3hDaGVja2JveGVzXCIgc3R5bGU9XCJib3JkZXItc3R5bGU6IHNvbGlkOyBib3JkZXItd2lkdGg6IDJweDtcIj48L3VsPicpO1xuXG4gICAgLy8gZ2V0IGFsbCB0aGUgZmlsdGVyc1xuICAgICQuZWFjaChqc29uRmlsdGVyc0FycmF5LCBmdW5jdGlvbihpbmRleCwgY3VycmVudEZpbHRlcikge1xuICAgICAgICBudW1GaWx0ZXJzKys7XG4gICAgICAgIHZhciBib3hJRCA9ICcjYm94JyArIChpbmRleCArIDEpO1xuICAgICAgICAvLyBhcHBlbmQgdG8gdGhlIEhUTUxcbiAgICAgICAgJCgnI2ZpbHRlckJveENoZWNrYm94ZXMnKS5hcHBlbmQoJzxsaSBjbGFzcz1cImNvbC1zbS02XCIgaWQ9XCJib3gnICsgKGluZGV4ICsgMSkgKyAnXCIgY2xhc3M9XCJkcm9wZG93bi1jaGVja2JveC1leGFtcGxlIGRyb3Bkb3duLWNoZWNrYm94IGRyb3Bkb3duXCI+PC9saT4nKTtcblxuICAgICAgICAvLyBmaWxsIHRoZSB0YWJzIGZvciB0aGUgeWVhciBmaWx0ZXJcbiAgICAgICAgdmFyIHRhYiA9IFtdO1xuICAgICAgICAvLyBjaGVjayBpZiB0aGUgdmFsdWVzIGFyZSBjb250aW51b3VzIG9yIGRpc2NyZXRlXG4gICAgICAgIGlmIChjdXJyZW50RmlsdGVyLmNvbnRpbnVvdXMpIHtcbiAgICAgICAgICAgIC8vIGNvbnRpbnVvdXMgdmFsdWVzXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBkaXNjcmV0ZSB2YWx1ZXNcbiAgICAgICAgICAgICQuZWFjaChjdXJyZW50RmlsdGVyLnZhbHVlcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRhYi5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgJ2lkJzogaW5kZXggKyAxLFxuICAgICAgICAgICAgICAgICAgICAnbGFiZWwnOiBjdXJyZW50VmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICdpc0NoZWNrZWQnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwKHdhdCkge1xuICAgICAgICAgICAgcmV0dXJuICc8cD4nICsgSlNPTi5zdHJpbmdpZnkod2F0KSArICc8L3A+JztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVN0YXR1cygpIHtcbiAgICAgICAgICAgIHZhciAkcCA9ICQoJ3Auc3RhdHVzJykuZW1wdHkoKTtcbiAgICAgICAgICAgICRwLmFwcGVuZChwKHdpZGdldC5jaGVja2VkKCkpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRyb3Bkb3duIHdpdGggY2hlY2tib3hlcyBpbml0aWFsaXphdGlvblxuICAgICAgICB2YXIgbmFtZSA9IGN1cnJlbnRGaWx0ZXIubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBuYW1lID0gbmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoMSk7XG4gICAgICAgICQoYm94SUQpLmRyb3Bkb3duQ2hlY2tib3goe1xuICAgICAgICAgICAgZGF0YTogdGFiLFxuICAgICAgICAgICAgYXV0b3NlYXJjaDogdHJ1ZSxcbiAgICAgICAgICAgIGhpZGVIZWFkZXI6IGZhbHNlLFxuICAgICAgICAgICAgLy8gc2hvdyBudW1iZXIgb2Ygc2VsZWN0ZWQgaXRlbXNcbiAgICAgICAgICAgIHNob3dOYlNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIHRlbXBsYXRlQnV0dG9uOiAnPGEgY2xhc3M9XCJkcm9wZG93bi1jaGVja2JveC10b2dnbGVcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgaHJlZj1cIiNcIj4nICsgbmFtZSArICc8c3BhbiBjbGFzcz1cImRyb3Bkb3duLWNoZWNrYm94LW5ic2VsZWN0ZWRcIj48L3NwYW4+PGIgY2xhc3M9XCJjYXJldFwiPjwvYj4nXG4gICAgICAgIH0pO1xuICAgICAgICB3aWRnZXQgPSAkKGJveElEKS5kYXRhKCdkcm9wZG93bkNoZWNrYm94Jyk7XG5cbiAgICAgICAgJCgnYm9keScpLm9uKCdjaGFuZ2U6ZHJvcGRvd24tY2hlY2tib3ggY2hlY2tlZCBjaGVja2VkOmFsbCBjaGVjazphbGwgdW5jaGVjazphbGwgY2hlY2s6Y2hlY2tlZCB1bmNoZWNrOmNoZWNrZWQnLCB1cGRhdGVTdGF0dXMoKSk7XG4gICAgICAgIHVwZGF0ZVN0YXR1cygpO1xuICAgIH0pO1xuXG4gICAgLy8gYXBwZW5kIGZpbHRlciBhbmQgcmVzZXQgYnV0dG9uXG4gICAgdmFyIHRleHRUb0FwcGVuZCA9ICc8ZGl2IGlkPVwiZmlsdGVyc19ib3hcIiBjbGFzcz1cInJvdyBjb2wtc20tMTJcIj4nICtcbiAgICAgICAgJzxidXR0b24gaWQ9XCJmaWx0ZXJfYm94X2FwcGx5X2ZpbHRlcnNcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgY29sLXNtLTQgY29sLXNtLW9mZnNldC0xXCI+RmlsdGVyPC9idXR0b24+JyArXG4gICAgICAgICc8YnV0dG9uIGlkPVwiZmlsdGVyX2JveF9yZXNldF9maWx0ZXJzXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGNvbC1zbS00IGNvbC1zbS1vZmZzZXQtMVwiPlJlc2V0PC9idXR0b24+PC9kaXY+JztcbiAgICAkKCcjZmlsdGVyQm94Q2hlY2tib3hlcycpLmFwcGVuZCh0ZXh0VG9BcHBlbmQpO1xuXG4gICAgLy8gdHJpZ2dlcmVkIHdoZW4gdGhlIHNlYXJjaCBidXR0b24gaXMgY2xpY2tlZFxuICAgICQoXCIjZmlsdGVyX2JveF9hcHBseV9maWx0ZXJzXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyByZW1vdmUgYWxsIHRoZSAnaGFzLWVycm9yJyBpbnB1dCBib3hlc1xuICAgICAgICByZXN0b3JlSW5wdXRCb3hlcygpO1xuICAgICAgICB2YXIganNvbk9iamVjdCA9IHt9O1xuICAgICAgICB2YXIgbnVtRmlsdGVycyA9IGpzb25GaWx0ZXJzQXJyYXkubGVuZ3RoO1xuICAgICAgICB2YXIgZW1wdHlGaWx0ZXJzID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBqc29uRmlsdGVyc0FycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBjdXJyZW50IGFuZCBuZXh0IGZpbHRlciBpZCdzXG4gICAgICAgICAgICB2YXIgY3VycmVudEZpbHRlciA9IFwiI2JveFwiICsgKGkgKyAxKTtcbiAgICAgICAgICAgIC8vIGN1cnJlbnQgZmlsdGVyIHZhbHVlcyAtIHNlbGVjdGVkIGl0ZW1zXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRJdGVtcyA9IGdldFNlbGVjdGVkSXRlbXMoY3VycmVudEZpbHRlcik7XG4gICAgICAgICAgICB2YXIgaXRlbXNBcnJheSA9IFtdO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhzZWxlY3RlZEl0ZW1zKTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwga2V5cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGl0ZW1zQXJyYXkucHVzaChzZWxlY3RlZEl0ZW1zW2tleXNbal1dLmxhYmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHdlIGhhdmUgYW55IGZpbHRlcmluZyB0byBhcHBseSBvciBub3RcbiAgICAgICAgICAgIGlmIChrZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBqc29uT2JqZWN0W2pzb25GaWx0ZXJzQXJyYXlbaV0ubmFtZV0gPSBpdGVtc0FycmF5LmpvaW4oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZW1wdHlGaWx0ZXJzKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXZvaWQgdGhlIHVzZXIgc2VsZWN0aW5nIHRoZSBGaWx0ZXIgYnV0dG9uIHdpdGhvdXQgaW5wdXRpbmcgYW55IGRhdGFcbiAgICAgICAgaWYgKGVtcHR5RmlsdGVycyAhPSBudW1GaWx0ZXJzKSB7XG4gICAgICAgICAgICBmaWx0ZXIoanNvbk9iamVjdCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIHRyaWdnZXJlZCB3aGVuIHRoZSByZXNldCBidXR0b24gaXMgY2xpY2tlZFxuICAgICQoXCIjZmlsdGVyX2JveF9yZXNldF9maWx0ZXJzXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNldEZpbHRlcnNCb3goKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRmlsdGVyc0JveFdpdGhFbnVtZXJhdGlvbihqc29uRmlsdGVycykge1xuICAgIG51bUZpbHRlcnMgPSBqc29uRmlsdGVycy5sZW5ndGg7XG4gICAgLy8gY3JlYXRlIGZpbHRlcnMgYm94IHdpdGggZW51bWVyYXRpb25cbiAgICAkLmVhY2goanNvbkZpbHRlcnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50RmlsdGVyKSB7XG4gICAgICAgIHZhciBmaWx0ZXJOYW1lID0gY3VycmVudEZpbHRlci5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGZpbHRlck5hbWUgPSBmaWx0ZXJOYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZmlsdGVyTmFtZS5zbGljZSgxKTtcbiAgICAgICAgdmFyIGJ1dHRvbklkID0gJ2Ryb3Bkb3duJyArIGluZGV4ICsgJ2J1dHRvbic7XG4gICAgICAgIHZhciB1bElkID0gJ2Ryb3Bkb3duJyArIGluZGV4O1xuICAgICAgICB2YXIgdG9BcHBlbmQgPSAnJztcblxuICAgICAgICAvLyBmaWx0ZXIgdGV4dFxuICAgICAgICB0b0FwcGVuZCArPSAnPHA+PGI+JyArIGZpbHRlck5hbWUgKyAnOjwvYj48L3A+JztcbiAgICAgICAgdG9BcHBlbmQgKz0gJzxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+JztcbiAgICAgICAgdG9BcHBlbmQgKz0gJzxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJmYm94JyArIGluZGV4ICsgJ1wiJztcblxuICAgICAgICAvLyBidWlsZCB0aGUgcGxhY2Vob2xkZXIgLSBjaGVjayBpZiB3ZSBoYXZlIGNvbnRpbnVvdXMgb3IgZGlzY3JldGUgdmFsdWVzXG4gICAgICAgIGlmIChjdXJyZW50RmlsdGVyLmNvbnRpbnVvdXMpXG4gICAgICAgICAgICB0b0FwcGVuZCArPSAncGxhY2Vob2xkZXI9XCInICsgY3VycmVudEZpbHRlci5taW4gKyAnLi4uJyArIGN1cnJlbnRGaWx0ZXIubWF4ICsgJ1wiICs+JztcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdG9BcHBlbmQgKz0gJ3BsYWNlaG9sZGVyPVwiJyArIGN1cnJlbnRGaWx0ZXIudmFsdWVzLmpvaW4oKSArICdcIiArPic7XG4gICAgICAgIHRvQXBwZW5kICs9ICc8L2Rpdj4nO1xuXG4gICAgICAgICQoJ2ZpbHRlci1ib3gnKS5hcHBlbmQodG9BcHBlbmQpO1xuXG4gICAgICAgIC8vIGFkZCBCb290c3RyYXAgdG9vbHRpcCB0byB0aGUgZmlsdGVycyBib3hcbiAgICAgICAgJCgnI2ZpbHRlci1ib3gnKS50b29sdGlwKHtcbiAgICAgICAgICAgIHRpdGxlOiBcIlVzZSB0aGlzIGZpbHRlciBib3ggdG8gZmlsdGVyIGJ5IG11bHRpcGxlIGZpbHRlcnNcIixcbiAgICAgICAgICAgIHBsYWNlbWVudDogXCJib3R0b21cIlxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIGFwcGVuZCBlcnJvcnNcbiAgICAkKCcuZm9ybS1jb250cm9sJykuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlIGZvcm0tY29udHJvbC1mZWVkYmFja1wiPicpO1xuXG4gICAgLy8gYWRkIHRoZSBidXR0b25zXG4gICAgdmFyIHRleHRUb0FwcGVuZCA9ICc8ZGl2IGlkPVwiZmlsdGVyc19ib3hcIj4nICtcbiAgICAgICAgJzxidXR0b24gaWQ9XCJmaWx0ZXJfYm94X2FwcGx5X2ZpbHRlcnNcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgY29sLXNtLTQgY29sLXNtLW9mZnNldC0xXCI+RmlsdGVyPC9idXR0b24+JyArXG4gICAgICAgICc8YnV0dG9uIGlkPVwiZmlsdGVyX2JveF9yZXNldF9maWx0ZXJzXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGNvbC1zbS00IGNvbC1zbS1vZmZzZXQtMVwiPlJlc2V0PC9idXR0b24+PC9kaXY+JztcbiAgICAkKCdmaWx0ZXItYm94JykuYXBwZW5kKHRleHRUb0FwcGVuZCk7XG5cbiAgICAvLyB0cmlnZ2VyZWQgd2hlbiB0aGUgc2VhcmNoIGJ1dHRvbiBpcyBjbGlja2VkXG4gICAgJChcIiNmaWx0ZXJfYm94X2FwcGx5X2ZpbHRlcnNcIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIHJlbW92ZSBhbGwgdGhlICdoYXMtZXJyb3InIGlucHV0IGJveGVzXG4gICAgICAgIHJlc3RvcmVJbnB1dEJveGVzKCk7XG4gICAgICAgIHZhciBqc29uT2JqZWN0ID0ge307XG4gICAgICAgIHZhciBudW1GaWx0ZXJzID0ganNvbkZpbHRlcnMubGVuZ3RoO1xuICAgICAgICB2YXIgZW1wdHlGaWx0ZXJzID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBqc29uRmlsdGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gY3VycmVudCBhbmQgbmV4dCBmaWx0ZXIgaWQnc1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRGaWx0ZXIgPSBcIiNmYm94XCIgKyBpO1xuICAgICAgICAgICAgLy8gY3VycmVudCBhbmQgbmV4dCBmaWx0ZXIgdmFsdWVzXG4gICAgICAgICAgICB2YXIgY3VycmVudEZpbHRlclZhbHVlID0gJChjdXJyZW50RmlsdGVyKS52YWwoKTtcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHdlIGhhdmUgYW55IGZpbHRlcmluZyB0byBhcHBseSBvciBub3RcbiAgICAgICAgICAgIGlmIChjdXJyZW50RmlsdGVyVmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAganNvbk9iamVjdFtqc29uRmlsdGVyc1tpXS5uYW1lXSA9IGN1cnJlbnRGaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZW1wdHlGaWx0ZXJzKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXZvaWQgdGhlIHVzZXIgc2VsZWN0aW5nIHRoZSBGaWx0ZXIgYnV0dG9uIHdpdGhvdXQgaW5wdXRpbmcgYW55IGRhdGFcbiAgICAgICAgaWYgKGVtcHR5RmlsdGVycyAhPSBudW1GaWx0ZXJzKSB7XG4gICAgICAgICAgICBmaWx0ZXIoanNvbk9iamVjdCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIHRyaWdnZXJlZCB3aGVuIHRoZSByZXNldCBidXR0b24gaXMgY2xpY2tlZFxuICAgICQoXCIjZmlsdGVyX2JveF9yZXNldF9maWx0ZXJzXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXN0b3JlSW5wdXRCb3hlcygpO1xuICAgICAgICByZXNldEZpbHRlcnNCb3goKTtcbiAgICB9KTtcbn1cbiIsImZ1bmN0aW9uIGdldEFsbEZpbHRlclZhbHVlcyhmaWx0ZXJWYWx1ZSkge1xuICAgIHZhciByZXR1cm5QYXJ0cyA9IFtdO1xuICAgIGNvbnNvbGUubG9nKGZpbHRlclZhbHVlKTtcbiAgICAvLyBjaGVjayBpZiB3ZSBoYXZlIGFuIGVudW1lcmF0aW9uIChjb21tYS1zZXBhcmF0ZWQgdmFsdWVzIGFuZC9vciByYW5nZXMpXG4gICAgaWYgKFN0cmluZyhmaWx0ZXJWYWx1ZSkuaW5kZXhPZihcIixcIikgIT0gLTEpIHtcbiAgICAgICAgLy8gZ2V0IGFsbCB0aGUgZW51bWVyYXRlZCB2YWx1ZXMgKGNhbiBiZSBzaW5ndWxhciBvciByYW5nZSlcbiAgICAgICAgdmFyIGVudW1lcmF0aW9uUGFydHMgPSBTdHJpbmcoZmlsdGVyVmFsdWUpLnNwbGl0KFwiLFwiKTtcbiAgICAgICAgLy8gY2hlY2sgaWYgd2UgaGF2ZSBhIHNpbXBsZSB2YWx1ZSBvciBhIHJhbmdlXG4gICAgICAgICQuZWFjaChlbnVtZXJhdGlvblBhcnRzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEVudW1lcmF0aW9uKSB7XG4gICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIGEgcmFuZ2UuLi5cbiAgICAgICAgICAgIGlmIChjdXJyZW50RW51bWVyYXRpb24uaW5kZXhPZihcIi1cIikgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAvLyBhbGwgdGhlIHJhbmdlIHBhcnRzXG4gICAgICAgICAgICAgICAgdmFyIHJhbmdlUGFydHMgPSBTdHJpbmcoY3VycmVudEVudW1lcmF0aW9uKS5zcGxpdChcIi1cIik7XG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGV4dHJlbWUgdmFsdWVzIGFyZSB2YWxpZFxuICAgICAgICAgICAgICAgIGNoZWNrRmlsdGVyVmFsdWVzQXJlVmFsaWQoZmlsdGVyT2JqZWN0LCByYW5nZVBhcnRzKTtcbiAgICAgICAgICAgICAgICAvLyBnZXQgYWxsIHRoZSB2YWx1ZXMgYmV0d2VlbiB0aG9zZSB0d28gbnVtYmVyc1xuICAgICAgICAgICAgICAgIC8vIGFuZCBhZGQgdGhlbVxuICAgICAgICAgICAgICAgIHZhciBtaW4gPSByYW5nZVBhcnRzWzBdO1xuICAgICAgICAgICAgICAgIHZhciBtYXggPSByYW5nZVBhcnRzWzFdO1xuICAgICAgICAgICAgICAgIGZvciAoOyBtaW4gPD0gbWF4OyBtaW4rKylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuUGFydHMucHVzaChtaW4pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBpZiB3ZSBkb24ndCBoYXZlIGEgcmFuZ2VcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgc2luZ2xlIHZhbHVlIGlzIHZhbGlkXG4gICAgICAgICAgICAgICAgcmV0dXJuUGFydHMucHVzaChjdXJyZW50RW51bWVyYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBqdXN0IGEgc2luZ2xlIHBhcnRcbiAgICAgICAgY29uc29sZS5sb2coJ3NpbmdsZScpO1xuICAgICAgICBpZiAoZmlsdGVyVmFsdWUuaW5kZXhPZihcIi1cIikgIT0gLTEpIHtcbiAgICAgICAgICAgIC8vIHdlIGhhdmUgYSByYW5nZVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3JhbmdlJyk7XG4gICAgICAgICAgICB2YXIgc3ViUGFydHMgPSBTdHJpbmcoZmlsdGVyVmFsdWUpLnNwbGl0KFwiLVwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHN1YlBhcnRzKTtcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBleHRyZW1lIHZhbHVlcyBhcmUgdmFsaWRcbiAgICAgICAgICAgIGNoZWNrRmlsdGVyVmFsdWVzQXJlVmFsaWQoZmlsdGVyT2JqZWN0LCBzdWJQYXJ0cyk7XG4gICAgICAgICAgICAvLyBnZXQgYWxsIHRoZSB2YWx1ZXMgYmV0d2VlbiB0aG9zZSB0d28gbnVtYmVyc1xuICAgICAgICAgICAgdmFyIG1pbiA9IHN1YlBhcnRzWzBdO1xuICAgICAgICAgICAgdmFyIG1heCA9IHN1YlBhcnRzWzFdO1xuICAgICAgICAgICAgZm9yICg7IG1pbiA8PSBtYXg7IG1pbisrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuUGFydHMucHVzaChtaW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgLy8ganVzdCBhIHNpbmdsZSB2YWx1ZVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NpbmdsZSB2YWx1ZScpO1xuICAgICAgICAgICAgLy8gY2hlY2sgdGhlIHZhbGlkaXR5IG9mIHRoaXMgdmFsdWVcbiAgICAgICAgICAgIGNoZWNrRmlsdGVyVmFsdWVzQXJlVmFsaWQoZmlsdGVyT2JqZWN0LGZpbHRlclZhbHVlLnNwbGl0KCcnKSk7XG4gICAgICAgICAgICByZXR1cm5QYXJ0cy5wdXNoKGZpbHRlclZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0dXJuUGFydHM7XG59XG5cbmZ1bmN0aW9uIGNoZWNrV2hhdENvdW50cmllc1RvQWRkKHNlbGVjdGVkRmlsdGVyLCBmaWx0ZXJWYWx1ZSkge1xuXG4gICAgdmFyIGNvdW50cmllcyA9IFtdO1xuICAgICQuZWFjaChqc29uQ291bnRyaWVzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgYW55IG9mIHRoZSBuYW1lcyBpcyBlcXVhbCB0byB0aGUgc2VsZWN0ZWQgZmlsdGVyXG4gICAgICAgIC8vIHRyeSB0byByZWFkIGFsbCB0aGUgbmFtZXMgYW5kIHZhbHVlc1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnbmFtZScgKyBpO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9ICd2YWx1ZScgKyBpO1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIENvdW50cnkgaGFzIHRoYXQgbmFtZVxuICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5W2N1cnJlbnROYW1lVG9DaGVja10pIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnlbY3VycmVudFZhbHVlXSA9PSBmaWx0ZXJWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb3VudHJ5VmFsdWVUb0NoZWNrID0gY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBieSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnlbY3VycmVudFZhbHVlXSA9PSBmaWx0ZXJWYWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cmllc1tjdXJyZW50Q291bnRyeS5jb3VudHJ5XSA9IGN1cnJlbnRDb3VudHJ5LkNvdW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IHdoaWxlICh0cnVlKVxuICAgIH0pO1xuICAgIHJldHVybiBjb3VudHJpZXM7XG59O1xuXG5mdW5jdGlvbiBjaGVja1doYXRNYXJrZXJzVG9BZGQoc2VsZWN0ZWRGaWx0ZXIsIGZpbHRlclZhbHVlKSB7XG4gICAgdmFyIG1hcmtlcnMgPSBbXTtcbiAgICAvLyBhZGQgb25seSB0aGUgbWFya2VycyB3aG8gaGF2ZSB0aGF0IGZpbHRlciB2YWx1ZVxuICAgICQuZWFjaChqc29uTWFya2VycywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcbiAgICAgICAgJC5lYWNoKE9iamVjdC5rZXlzKGN1cnJlbnRNYXJrZXIpLCBmdW5jdGlvbihpbmRleCwgYXR0cikge1xuICAgICAgICAgICAgaWYgKGF0dHIudG9Mb3dlckNhc2UoKSA9PSBzZWxlY3RlZEZpbHRlci5uYW1lLnRvTG93ZXJDYXNlKCkgJiYgY3VycmVudE1hcmtlclthdHRyXSA9PSBmaWx0ZXJWYWx1ZSlcbiAgICAgICAgICAgICAgICBtYXJrZXJzLnB1c2goY3VycmVudE1hcmtlcilcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIG1hcmtlcnM7XG59O1xuXG5mdW5jdGlvbiBjaGVja1doYXRDb3VudHJpZXNNYXJrZXJzVG9BZGQoc2VsZWN0ZWRGaWx0ZXIsIGZpbHRlclZhbHVlKSB7XG4gICAgdmFyIGNvdW50cmllc1RvQWRkID0gW107XG4gICAgdmFyIG1hcmtlcnNUb0FkZCA9IFtdO1xuXG4gICAgLy8gY2hlY2sgd2hhdCBjb3VudHJpZXMgdG8gY29sb3VyXG4gICAgY291bnRyaWVzVG9BZGQgPSBjaGVja1doYXRDb3VudHJpZXNUb0FkZChzZWxlY3RlZEZpbHRlciwgZmlsdGVyVmFsdWUpO1xuICAgIG1hcmtlcnNUb0FkZCA9IGNoZWNrV2hhdE1hcmtlcnNUb0FkZChzZWxlY3RlZEZpbHRlciwgZmlsdGVyVmFsdWUpO1xuXG4gICAgcmV0dXJuIFtjb3VudHJpZXNUb0FkZCwgbWFya2Vyc1RvQWRkXTtcbn1cblxuZnVuY3Rpb24gY2hlY2tGaWx0ZXJOYW1lSXNWYWxpZChmaWx0ZXJOYW1lKSB7XG4gICAgdmFyIHZhbGlkID0gZmFsc2U7XG4gICAgJC5lYWNoKGpzb25GaWx0ZXJzQXJyYXksIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50RmlsdGVyKSB7XG4gICAgICAgIGlmIChjdXJyZW50RmlsdGVyLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gZmlsdGVyTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICBmaWx0ZXJPYmplY3QgPSBjdXJyZW50RmlsdGVyO1xuICAgICAgICAgICAgdmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbGlkO1xufVxuXG5mdW5jdGlvbiByZXN0b3JlSW5wdXRCb3hlcygpXG57XG4gICAgY29uc29sZS5sb2coJ3Jlc3RvcmluZycpO1xuICAgIGZvcih2YXIgaSA9IDAgOyBpIDwganNvbkZpbHRlcnNBcnJheS5sZW5ndGggOyBpKyspXG4gICAgICAgICQoJyNmYm94JytpKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImhhcy1lcnJvclwiKTtcbn1cblxuZnVuY3Rpb24gZ2V0U2VsZWN0ZWRJdGVtcyhib3hJRCkge1xuICAgIHJldHVybiAkKGJveElEKS5kcm9wZG93bkNoZWNrYm94KFwiY2hlY2tlZFwiKTtcbn1cblxuXG5mdW5jdGlvbiBjaGVja0ZpbHRlclZhbHVlc0FyZVZhbGlkKGZpbHRlciwgZmlsdGVyVmFsdWVzKSB7XG4gICAgdmFyIHZhbGlkID0gdHJ1ZTtcbiAgICAvLyBjaGVjayBpZiB0aGUgZmlsdGVyIGlzIGNvbnRpbnVvdXMgb3Igbm90XG4gICAgaWYgKGZpbHRlci5jb250aW51b3VzID09IHRydWUpIHtcbiAgICAgICAgdmFyIG1pbiA9IGZpbHRlci5taW47XG4gICAgICAgIHZhciBtYXggPSBmaWx0ZXIubWF4O1xuICAgICAgICAvLyBjaGVjayBpZiB0aGUgdmFsdWVzIGFyZSBiZXR3ZWVuIG1pbiBhbmQgbWF4XG4gICAgICAgICQuZWFjaChmaWx0ZXJWYWx1ZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50VmFsdWUpIHtcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHdlIGhhdmUgYSB2YWx1ZSBvdXRzaWRlIHRoZSByYW5nZVxuICAgICAgICAgICAgY29uc29sZS5sb2coK2N1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgICBpZiAoK2N1cnJlbnRWYWx1ZSA8IG1pbiB8fCArY3VycmVudFZhbHVlID4gbWF4KSB7XG4gICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBoaWdobGlnaHRJbnB1dEJveEVycm9yKGZpbHRlciwgY3VycmVudFZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZSB2YWx1ZXMgYmVsb25nIGluIHRoZSBcInZhbHVlc1wiIHByb3BlcnR5IG9mIHRoZSBmaWx0ZXJcbiAgICAgICAgJC5lYWNoKGZpbHRlclZhbHVlcywgZnVuY3Rpb24oaW5kZXgsIGZpbHRlclZhbHVlKSB7XG4gICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGN1cnJlbnQgdmFsdWUgaXMgdmFsaWRcbiAgICAgICAgICAgICQuZWFjaChmaWx0ZXIudmFsdWVzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRWYWx1ZSA9PSBmaWx0ZXJWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmKCF2YWxpZClcbiAgICAgICAgICAgICAgICBoaWdobGlnaHRJbnB1dEJveEVycm9yKGZpbHRlciwgZmlsdGVyVmFsdWUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbGlkO1xufVxuXG5mdW5jdGlvbiBoaWdobGlnaHRJbnB1dEJveEVycm9yKGZpbHRlciwgZmlsdGVyVmFsdWUpXG57XG4gICAgY29uc29sZS5sb2coJ0ludmFsaWQgdmFsdWUgZm9yIHRoZSBmaWx0ZXI6ICcgKyBmaWx0ZXJWYWx1ZSk7XG4gICAgLy8gaGlnaGxpZ2h0IHRoZSBpbnB1dCB3aXRoIGVycm9yXG4gICAgdmFyIGZpbHRlclRvRmluZCA9IGZpbHRlci5uYW1lO1xuICAgIC8vIGZpbmQgaW5kZXggb2YgdGhlIGZpbHRlclxuICAgICQuZWFjaChqc29uRmlsdGVyc0FycmF5LCBmdW5jdGlvbihpbmRleCwgY3VycmVudEZpbHRlcikge1xuICAgICAgICBpZihmaWx0ZXJUb0ZpbmQgPT0gY3VycmVudEZpbHRlci5uYW1lKVxuICAgICAgICAgICAgJCgnI2Zib3gnK2luZGV4KS5wYXJlbnQoKS5hZGRDbGFzcyhcImhhcy1lcnJvclwiKTtcbiAgICB9KTtcbn1cbiIsIi8vIGNyZWF0ZSBhIG5ldyBGSWx0ZXIgb2JqZWN0XG52YXIgRmlsdGVyID0gZnVuY3Rpb24oZmlsdGVyT2JqZWN0KSB7XG4gICAgdGhpcy5uYW1lID0gZmlsdGVyT2JqZWN0WyduYW1lJ107XG4gICAgLy8gY2hlY2sgaWYgdGhlIHZhbHVlcyBhcmUgY29udGludW91cyBvciBkaXNjcmV0ZVxuICAgIGlmIChmaWx0ZXJPYmplY3RbJ2NvbnRpbnVvdXMnXSA9PSAnZmFsc2UnKSB7XG4gICAgICAgIC8vIGRpc2NyZXRlIHZhbHVlcyAtIHJlYWQgZnJvbSB2YWx1ZXNcbiAgICAgICAgdGhpcy52YWx1ZXMgPSBbXTtcbiAgICAgICAgdGhpcy52YWx1ZXMgPSBmaWx0ZXJPYmplY3RbJ3ZhbHVlcyddO1xuICAgICAgICB0aGlzLmNvbnRpbnVvdXMgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb250aW51b3VzIHZhbHVlc1xuICAgICAgICB0aGlzLmNvbnRpbnVvdXMgPSB0cnVlO1xuICAgICAgICB0aGlzLm1pbiA9IGZpbHRlck9iamVjdFsnbWluJ11cbiAgICAgICAgdGhpcy5tYXggPSBmaWx0ZXJPYmplY3RbJ21heCddXG4gICAgfVxufVxuXG5mdW5jdGlvbiByZXNldEZpbHRlcnMoKSB7XG4gICAgLy8gY29sb3IgdGhlIG9yaWdpbmFsIG1hcFxuICAgIHZhciBjb2xvcnMgPSBnZW5lcmF0ZUNvbG9yc0ZvclRoZUNvdW50cmllcygpO1xuICAgIHJlbG9hZE1hcChjb2xvcnMpO1xuXG4gICAgLy8gYWRkIG9ubHkgdGhlIG1hcmtlcnMgd2hvIGhhdmUgdGhhdCBmaWx0ZXIgdmFsdWVcbiAgICAkLmVhY2goanNvbk1hcmtlcnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50TWFya2VyKSB7XG4gICAgICAgIG1hcC5hZGRNYXJrZXIoaW5kZXgsIHtcbiAgICAgICAgICAgIGxhdExuZzogW2N1cnJlbnRNYXJrZXIuTGF0aXR1ZGUsIGN1cnJlbnRNYXJrZXIuTG9uZ2l0dWRlXSxcbiAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRNYXJrZXIuZGVzYyxcblxuICAgICAgICAgICAgLy8gc2V0IHRoZSBzdHlsZSBmb3IgdGhpcyBtYXJrZXJcbiAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgZmlsbDogJ2dyZWVuJyxcbiAgICAgICAgICAgICAgICByOiBtYXBSYW5nZShjdXJyZW50TWFya2VyLkNvdW50LCBtaW5Db3VudCwgbWF4Q291bnQsIG1pblJhZGl1cywgbWF4UmFkaXVzKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gcmVhZEZpbHRlcnNGcm9tSlNPTihmaWx0ZXJzSlNPTikge1xuICAgIHZhciBmaWx0ZXJzID0gW107XG4gICAgJC5lYWNoKGZpbHRlcnNKU09OLCBmdW5jdGlvbihpbmRleCwgZmlsdGVyKSB7XG4gICAgICAgIGZpbHRlcnMucHVzaChuZXcgRmlsdGVyKGZpbHRlcikpO1xuICAgIH0pO1xuICAgIHJldHVybiBmaWx0ZXJzO1xufVxuIiwidmFyIG1hcHBpbmdNYXJrZXJzID0gW107XG52YXIgbWFwcGluZ0NvdW50cmllcyA9IFtdO1xuXG5WZWN0b3JpYWxNYXAucHJvdG90eXBlLnJlZ2lzdGVyVHJhbnNmb3JtZXIgPSBmdW5jdGlvbihqc29uTG9jYXRpb24sIGNvdW50cmllc01hcHBpbmdKc29uLCBtYXJrZXJzTWFwcGluZ0pzb24pIHtcblx0Ly8ganNvbkxvY2F0aW9uIC0gdXJsIG9mIHRoZSBuZXcganNvblxuXHQvLyBjb3VudHJpZXNNYXBwaW5nSnNvbiAtIGpzb24gdGhhdCBjb250YWlucyB0aGUganNvbiBjb3VudHJ5IG1hcHBpbmdcblx0dmFyIGNvdW50cmllc01hcHBpbmdKc29uID0gXCIuLi9tYXBwaW5nSlNPTi9tYXBwaW5nQ291bnRyaWVzU2FtcGxlLmpzb25cIjtcblx0Ly8gbWFya2Vyc01hcHBpbmdKc29uIC0ganNvbiB0aGF0IGNvbnRhaW5zIHRoZSBqc29uIG1hcmtlcnMgbWFwcGluZ1xuXHR2YXIgbWFya2Vyc01hcHBpbmdKc29uID0gXCIuLi9tYXBwaW5nSlNPTi9tYXBwaW5nTWFya2Vyc1NhbXBsZS5qc29uXCI7XG5cblx0aWYoIWNvdW50cmllc01hcHBpbmdKc29uKSB7XG5cdFx0Y29uc29sZS5lcnJvcigneW91IG11c3Qgc3BlY2lmeSBhIGNvdW50cmllcyBtYXBwaW5nIGpzb24nKTtcblx0XHRyZXR1cm47XG5cdH1cblx0aWYoIW1hcmtlcnNNYXBwaW5nSnNvbikge1xuXHRcdGNvbnNvbGUuZXJyb3IoJ3lvdSBtdXN0IHNwZWNpZnkgYSBtYXJrZXJzIG1hcHBpbmcganNvbicpO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIGdldCB0aGUgSlNPTlxuXHRqc29uTG9jYXRpb24gPSBcIi4uL2pzb24vZXNwaWQtc3BhaW4uanNvblwiO1xuXHQkLmdldEpTT04oanNvbkxvY2F0aW9uLCBmdW5jdGlvbihqc29uKSB7XG5cdFx0Ly8gcmVhZCBjb3VudHJpZXNcblx0XHRqc29uTWFwQ291bnRyaWVzKGpzb24sIGNvdW50cmllc01hcHBpbmdKc29uKTtcblx0XHQvLyByZWFkIG1hcmtlcnNcblx0XHRqc29uTWFwTWFya2Vycyhqc29uLCBtYXJrZXJzTWFwcGluZ0pzb24pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24ganNvbk1hcENvdW50cmllcyhqc29uLCBjb3VudHJpZXNNYXBwaW5nSnNvbikge1xuXHR2YXIgY291bnRyaWVzID0gW107XG5cdC8vIGFjY2VzcyB0aGUgSlNPTiBmaWxlIHRoYXQgc3BlY2lmaWVzIHRoZSBtYXBwaW5nXG5cdCQuZ2V0SlNPTihjb3VudHJpZXNNYXBwaW5nSnNvbiwgZnVuY3Rpb24oanNvbk1hcHBpbmcpIHtcblxuXHRcdC8vIGluIHRoaXMgY2FzZSB0aGUgJ2NvdW50cmllcycgYXJlIGRlZmluZWQgdGhlIHRvcCBsZXZlbFxuXHRcdC8vIGl0ZXJhdGUgdGhyb3VnaCBldmVyeSAnY291bnRyeSdcblx0XHQkLmVhY2goanNvbiwgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRKU09OKSB7XG5cdFx0XHR2YXIganNvbkNvdW50cnkgPSAneyc7XG5cdFx0XHQvLyBnZXQgdGhlIG5hbWUgb2YgdGhlIGNvdW50cnlcblx0XHRcdHZhciBuYW1lID0gY3VycmVudEpTT05banNvbk1hcHBpbmcuY291bnRyeV07XG5cdFx0XHQvLyB0aGUgY291bnRyeSBuYW1lIG11c3QgYmUgb24gdGhlIHR3by1kaWdpdCBmb3JtYXRcblx0XHRcdC8vIGdldCB0aGUgY291bnQgLSBXSEFUIElTIFRIRSBDT1VOVD9cblx0XHRcdHZhciBjb3VudCA9IDA7XG5cdFx0XHQvL2dldCB0aGUgZGVzY3JpcHRpb24gLSBXSFQgSVMgVEhFIERFU0NSSVBUSU9OIE9GIEEgTUFSS0VSP1xuXHRcdFx0dmFyIGRlc2NyaXB0aW9uID0gJyc7XG5cdFx0XHQvKlxuXHRcdFx0V0hBVCBBUkUgVEhFIE5BTUVTPz8/XG5cdFx0XHQqL1xuXHRcdFx0Y291bnRyaWVzW2luZGV4XSA9IG5ldyBDb3VudHJ5KCcnLCBuYW1lLCBjb3VudCk7XG5cdFx0fSk7XG5cdFx0bWFwcGluZ0NvdW50cmllcyA9IGNvdW50cmllcztcblx0XHRjb25zb2xlLmxvZyhtYXBwaW5nQ291bnRyaWVzKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGpzb25NYXBNYXJrZXJzKGpzb24sIG1hcmtlcnNNYXBwaW5nSnNvbikge1xuXHR2YXIgbWFya2VycyA9IFtdO1xuXG5cdC8vIGFjY2VzcyB0aGUgSlNPTiBmaWxlIHRoYXQgc3BlY2lmaWVzIHRoZSBtYXBwaW5nXG5cdCQuZ2V0SlNPTihtYXJrZXJzTWFwcGluZ0pzb24sIGZ1bmN0aW9uKGpzb25NYXBwaW5nKSB7XG5cdFx0Ly8gaW4gdGhpcyBjYXNlIHRoZSAnbWFya2VycycgYXJlIGRlZmluZWQgdGhlIHRvcCBsZXZlbFxuXHRcdC8vIGl0ZXJhdGUgdGhyb3VnaCBldmVyeSAnbWFya2VyJ1xuXHRcdCQuZWFjaChqc29uLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEpTT04pIHtcblx0XHRcdC8vIGdldCB0aGUgbmFtZSBvZiB0aGUgY291bnRyeVxuXHRcdFx0dmFyIG5hbWUgPSBjdXJyZW50SlNPTltqc29uTWFwcGluZy5jb3VudHJ5XTtcblx0XHRcdC8vIHRoZSBjb3VudHJ5IG5hbWUgbXVzdCBiZSBvbiB0aGUgdHdvLWRpZ2l0IGZvcm1hdFxuXHRcdFx0Ly8gZ2V0IHRoZSBjb3VudCAtIFdIQVQgSVMgVEhFIENPVU5UP1xuXHRcdFx0dmFyIGNvdW50ID0gMDtcblx0XHRcdC8vIGdldCB0aGUgbGF0aXR1ZGVcblx0XHRcdHZhciBsYXRpdHVkZSA9IGN1cnJlbnRKU09OW2pzb25NYXBwaW5nLkxhdGl0dWRlXTtcblx0XHRcdC8vIGdldCB0aGUgbG9uZ2l0dWRlXG5cdFx0XHR2YXIgbG9uZ2l0dWRlID0gY3VycmVudEpTT05banNvbk1hcHBpbmcuTG9uZ2l0dWRlXTtcblx0XHRcdC8vZ2V0IHRoZSBkZXNjcmlwdGlvbiAtIFdIQVQgSVMgVEhFIERFU0NSSVBUSU9OIE9GIEEgTUFSS0VSP1xuXHRcdFx0dmFyIGRlc2NyaXB0aW9uID0gJyc7XG5cdFx0XHQvKlxuXHRcdFx0V0hBVCBBUkUgVEhFIE5BTUVTPz8/XG5cdFx0XHQqL1xuXHRcdFx0Ly8gY3JlYXRlIGEgbmV3IG1hcmtlclxuXHRcdFx0bWFya2Vyc1tpbmRleF0gPSBuZXcgTWFya2VyKCcnLCBuYW1lLCBjb3VudCwgbGF0aXR1ZGUsIGxvbmdpdHVkZSk7XG5cdFx0fSk7XG5cdFx0bWFwcGluZ01hcmtlcnMgPSBtYXJrZXJzO1xuXHRcdGNvbnNvbGUubG9nKG1hcHBpbmdNYXJrZXJzKTtcblx0fSk7XG59XG5cblZlY3RvcmlhbE1hcC5wcm90b3R5cGUuZmlsdGVyT25TZXJ2ZXIgPSBmdW5jdGlvbihmaWx0ZXJzKSB7XG4gICAgLy8gcmVhZCB0aGUgZmlsdGVycyBmcm9tIGEgSlNPTiBmaWxlIChqdXN0IGZvciB0ZXN0aW5nKVxuICAgICQuZ2V0SlNPTihcIi4uL2pzb24vc2VydmVyRmlsdGVyLmpzb25cIiwgZnVuY3Rpb24oZmlsdGVyc0pTT04pIHtcbiAgICAgICAgLy8gY29udmVydCB0aGUgZmlsdGVyc0pTT04gdG8gYSBzdHJpbmdcbiAgICAgICAgdmFyIGZpbHRlcnNTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShmaWx0ZXJzSlNPTik7XG4gICAgICAgIC8vIGJ1aWxkIHRoZSB1cmwgdG8gc2VuZCB0byB0aGUgc2VydmVyXG4gICAgICAgIHZhciB1cmwgPSAnaHR0cDovL3NlcnZlckZpbHRlcmluZy5jb20vP2RhdGE9JyArIGVuY29kZVVSSUNvbXBvbmVudChmaWx0ZXJzU3RyaW5nKTtcbiAgICAgICAgLy8gRk9SIFRFU1RJTkcgUFVSUE9TRVMgLSB0aGlzIGZpbGUgY29udGFpbnMgYSBkaWZmZXJlbnQgc2V0XG4gICAgICAgIC8vIG9mIGNvdW50cmllcyBhbmQgbWFya2Vyc1xuICAgICAgICB1cmwgPSAnLi4vanNvbi9jb3VudHJpZXNfcGx1c19tYXJrZXJzMi5qc29uJztcbiAgICAgICAgLy8gc2VuZCByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgdG8gZ2V0IHRoZSBtYXJrZXJzIGFuZCBjb3VudHJpZXNcbiAgICAgICAgJC5nZXRKU09OKHVybCwgZnVuY3Rpb24oanNvbikge1xuICAgICAgICAgICAgLy8gZ2V0IHRoZSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICBUSElTIENPREUgSVMgU0VSVkVSIFNJREVcbiAgICAgICAgICAgIHZhciBteVBhcmFtID0gdXJsLnNwbGl0KCdkYXRhPScpWzFdO1xuICAgICAgICAgICAgdmFyIHJldHVybkpTT04gPSBkZWNvZGVVUklDb21wb25lbnQobXlQYXJhbSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnBhcnNlKHJldHVybkpTT04pKTtcbiAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIC8vIHBhcnNlIHRoZSBKU09OIHRvIGdldCB0aGUgY291bnRyaWVzIGFuZCBtYXJrZXJzXG4gICAgICAgICAgICBqc29uQ291bnRyaWVzID0gcmVhZENvdW50cmllc0Zyb21KU09OKGpzb24uY291bnRyaWVzKTtcbiAgICAgICAgICAgIC8vIGdldCB0aGUgY29sb3VycyBmb3IgdGhlIGNvdW50cmllc1xuICAgICAgICAgICAgdmFyIGNvdW50cnlDb2xvcnMgPSBnZW5lcmF0ZUNvbG9yc0ZvclRoZUNvdW50cmllcyhqc29uQ291bnRyaWVzKTtcbiAgICAgICAgICAgIC8vIGRpc3BsYXkgdGhlIGNvdW50cmllcyBvbiB0aGUgbWFwXG4gICAgICAgICAgICByZWxvYWRNYXAoY291bnRyeUNvbG9ycyk7XG5cbiAgICAgICAgICAgIC8vIGluIGNhc2Ugd2UgYWxzbyBoYXZlIG1hcmtlcnNcbiAgICAgICAgICAgIGlmIChqc29uLm1hcmtlcnMpIHtcbiAgICAgICAgICAgICAgICAvLyByZWFkIHRoZSBtYXJrZXJzIGZyb20gdGhlIEpTT04gZmlsZVxuICAgICAgICAgICAgICAgIGpzb25NYXJrZXJzID0gcmVhZE1hcmtlcnNGcm9tSlNPTihqc29uLm1hcmtlcnMpO1xuICAgICAgICAgICAgICAgIC8vIGFkZCBtYXJrZXJzIHRvIHRoZSBtYXBcbiAgICAgICAgICAgICAgICBhZGRNYXJrZXJzVG9NYXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4iLCIvLyByZWRyYXcgdGhlIG1hcFxuZnVuY3Rpb24gcmVsb2FkTWFwKGNvbG9ycykge1xuICAgIC8vIHVwZGF0ZSBtaW4gYW5kIG1heCBDb3VudCBvZiB0aGUgY291bnRyaWVzXG4gICAgaWYgKGpzb25Db3VudHJpZXMubGVuZ3RoID4gMClcbiAgICAgICAgcmVhZE1pbk1heChjb2xvcnMpO1xuXG4gICAgLy8gZXJhc2UgdGhlIG1hcFxuICAgICQoXCIjXCIgKyBtRGl2KS5lbXB0eSgpO1xuXG4gICAgbWFwID0gbmV3IGp2bS5NYXAoe1xuICAgICAgICBtYXA6IG1UeXBlLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmQsXG4gICAgICAgIGNvbnRhaW5lcjogJCgnIycgKyBtRGl2KSxcbiAgICAgICAgb25SZWdpb25DbGljazogZnVuY3Rpb24oZSwgY29kZSkge1xuICAgICAgICAgICAgY291bnRyeUNvZGUgPSBjb2RlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB2YXIgbmV3TWFwID0gY291bnRyeUNvZGUgKyAnX21pbGxfZW4nO1xuICAgICAgICAgICAgLy8gc3dpdGggdG8gbmV3IG1hcFxuICAgICAgICAgICAgc3dpdGNoTWFwKG5ld01hcCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uTWFya2VyVGlwU2hvdzogZnVuY3Rpb24oZSwgbGFiZWwsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgZmluYWxUb29sdGlwID0gYnVpbGRNYXJrZXJUb29sdGlwKGpzb25NYXJrZXJzLCBpbmRleCk7XG4gICAgICAgICAgICBsYWJlbC5odG1sKGZpbmFsVG9vbHRpcCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uUmVnaW9uVGlwU2hvdzogZnVuY3Rpb24oZSwgY291bnRyeU5hbWUsIGNvZGUpIHtcbiAgICAgICAgICAgIC8vIGNvZGUgY29udGFpbnMgdGhlIGNvZGUgb2YgdGhlIGNvdW50cnkgKGkuZS4sIFBULCBFUywgRlIsIGV0YylcbiAgICAgICAgICAgIC8vIHNob3cgdGhlIENvdW50IGFzc29jaWF0ZWQgdG8gdGhhdCBDb3VudHJ5IC0gbG9vayBmb3IgdGhlIGNvdW50cnlcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZENvdW50cnkgPSAtMTtcbiAgICAgICAgICAgICQuZWFjaChqc29uQ291bnRyaWVzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnkuY291bnRyeSA9PT0gY29kZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENvdW50cnkgPSBjdXJyZW50Q291bnRyeTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ291bnRyeSAhPSAtMSkge1xuICAgICAgICAgICAgICAgIHZhciBmaW5hbFRvb2x0aXAgPSBidWlsZENvdW50cnlUb29sdGlwKGNvdW50cnlOYW1lLCBzZWxlY3RlZENvdW50cnkpO1xuICAgICAgICAgICAgICAgIGNvdW50cnlOYW1lLmh0bWwoZmluYWxUb29sdGlwKTtcbiAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgIGNvdW50cnlOYW1lLmh0bWwoY291bnRyeU5hbWUuaHRtbCgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2VyaWVzOiB7XG4gICAgICAgICAgICBtYXJrZXJzOiBbZmluYWxNYXJrZXJzSW5NYXBdLFxuICAgICAgICAgICAgcmVnaW9uczogW3tcbiAgICAgICAgICAgICAgICAvLyBtaW4gYW5kIG1heCB2YWx1ZXMgb2YgY291bnRcbiAgICAgICAgICAgICAgICBzY2FsZTogW21pbkNvbG9yTWFwLCBtYXhDb2xvck1hcF0sXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlOiAnZmlsbCcsXG4gICAgICAgICAgICAgICAgdmFsdWVzOiBjb2xvcnNcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvLyBhZGQgdGhlIG1hcmtlcyB0byB0aGUgbWFwXG4gICAgaWYgKHRoZXJlQXJlTWFya2Vycykge1xuICAgICAgICBhZGRNYXJrZXJzVG9NYXAoKTtcbiAgICB9XG5cbn1cblxuZnVuY3Rpb24gcmVtb3ZlVG9vbHRpcCgpIHtcbiAgICAvLyBlcmFzZSB0aGUgcHJldmlvdXMgbWFwIHRvb2x0aXBcbiAgICAkKCcuanZlY3Rvcm1hcC10aXAnKS5yZW1vdmUoKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQmFja0J1dHRvbigpIHtcbiAgICAvLyBlcmFzZSB0aGUgcHJldmlvdXMgbWFwIHRvb2x0aXBcbiAgICAkKCcuanZlY3Rvcm1hcC1nb2JhY2snKS5yZW1vdmUoKTtcbn1cblxuZnVuY3Rpb24gc3dpdGNoTWFwKG5ld01hcCkge1xuICAgIC8vIHRoaXMgZnVuY3Rpb24gZ2V0cyBjYWxsZWQgd2hlbiBhIGNvdW50cnkgb24gdGhlIHdvcmxkIG1hcCBpcyBjbGlja2VkXG4gICAgLy8gZXJhc2UgdGhlIHByZXZpb3VzIG1hcFxuICAgICQoJyMnICsgbURpdikuZW1wdHkoKTtcbiAgICByZW1vdmVUb29sdGlwKCk7XG4gICAgdmFyIHJlZ2lvbkNvbG9ycyA9ICgoZGF0YVR5cGUgPT0gJ2NvdW50cmllcycpID8gZ2VuZXJhdGVDb2xvcnNGb3JUaGVDb3VudHJpZXMobmV3TWFwKSA6IFtdKTtcblxuICAgIG1hcCA9IG5ldyBqdm0uTWFwKHtcbiAgICAgICAgbWFwOiBuZXdNYXAsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogYmFja2dyb3VuZCxcbiAgICAgICAgY29udGFpbmVyOiAkKCcjJyArIG1EaXYpLFxuICAgICAgICBvbk1hcmtlclRpcFNob3c6IGZ1bmN0aW9uKGUsIGxhYmVsLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIGZpbmFsVG9vbHRpcCA9IGJ1aWxkTWFya2VyVG9vbHRpcChqc29uTWFya2VycywgaW5kZXgpO1xuICAgICAgICAgICAgbGFiZWwuaHRtbChmaW5hbFRvb2x0aXApO1xuICAgICAgICB9LFxuICAgICAgICBvblJlZ2lvblRpcFNob3c6IGZ1bmN0aW9uKGUsIHJlZ2lvbk5hbWUsIGNvZGUpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50TWFwID0gbmV3TWFwLnNwbGl0KCdfJylbMF0udG9VcHBlckNhc2UoKVxuICAgICAgICAgICAgICAgIC8vIGNvZGUgY29udGFpbnMgdGhlIGNvZGUgb2YgdGhlIHJlZ2lvbiAoaS5lLiwgUFQtMSwgRVMtTSwgZXRjKVxuICAgICAgICAgICAgICAgIC8vIHNob3cgdGhlIENvdW50IGFzc29jaWF0ZWQgdG8gdGhhdCBSZWdpb24gLSBsb29rIGZvciB0aGUgUmVnaW9uXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRDb3VudHJ5ID0gLTE7XG4gICAgICAgICAgICAvLyBmaW5kIHRoZSBjb3JyZXNwb25kaW5nIGNvdW50cnlcbiAgICAgICAgICAgICQuZWFjaChqc29uQ291bnRyaWVzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnkuY291bnRyeSA9PSBjdXJyZW50TWFwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ291bnRyeSA9IGN1cnJlbnRDb3VudHJ5O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgc2VsZWN0ZWQgcmVnaW9uIGhhcyBhbnkgZGF0YSBpbnNpZGUgdGhhdCBjb3VudHJ5XG4gICAgICAgICAgICB2YXIgcmVnaW9uRm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFJlZ2lvbjtcbiAgICAgICAgICAgICQuZWFjaChtYXAucmVnaW9ucywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRSZWdpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFJlZ2lvbi5uYW1lID09IGNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSZWdpb24gPSBjdXJyZW50UmVnaW9uO1xuICAgICAgICAgICAgICAgICAgICByZWdpb25Gb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChyZWdpb25Gb3VuZCkge1xuICAgICAgICAgICAgICAgIHJlZ2lvbk5hbWUuaHRtbChidWlsZFJlZ2lvblRvb2x0aXAoc2VsZWN0ZWRSZWdpb24pKTtcbiAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgIHJlZ2lvbk5hbWUuaHRtbChyZWdpb25OYW1lLmh0bWwoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNlcmllczoge1xuICAgICAgICAgICAgbWFya2VyczogW2ZpbmFsTWFya2Vyc0luTWFwXSxcbiAgICAgICAgICAgIHJlZ2lvbnM6IFt7XG4gICAgICAgICAgICAgICAgLy8gbWluIGFuZCBtYXggdmFsdWVzIG9mIGNvdW50XG4gICAgICAgICAgICAgICAgc2NhbGU6IFttaW5Db2xvck1hcCwgbWF4Q29sb3JNYXBdLFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogJ2ZpbGwnLFxuICAgICAgICAgICAgICAgIHZhbHVlczogcmVnaW9uQ29sb3JzXG4gICAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBhZGQgYmFjayBidXR0b25cbiAgICAkKCcjbXlfbWFwJykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwianZlY3Rvcm1hcC1nb2JhY2tcIj5CYWNrPC9kaXY+Jyk7XG4gICAgJChcIi5qdmVjdG9ybWFwLWdvYmFja1wiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gZXJhc2UgdGhlIHByZXZpb3VzIG1hcFxuICAgICAgICAkKCcjJyArIG1EaXYpLmVtcHR5KCk7XG4gICAgICAgIHJlbW92ZVRvb2x0aXAoKTtcbiAgICAgICAgcmVsb2FkTWFwKGF1eENvbG9ycyk7XG4gICAgfSk7XG5cbiAgICAvLyBhZGQgdGhlIG1hcmtlcyB0byB0aGUgbWFwXG4gICAgaWYgKHRoZXJlQXJlTWFya2Vycykge1xuICAgICAgICBhZGRNYXJrZXJzVG9NYXAoKTtcbiAgICB9XG59XG4iLCIvLyBNYXJrZXIgZGVmaW5pdGlvblxudmFyIE1hcmtlciA9IGZ1bmN0aW9uKG1hcmtlck9iamVjdCkge1xuICAgIC8vIGFkZCBhdHRyaWJ1dGVzXG4gICAgdmFyIGF0dHJpYnV0ZXMgPSBtYXJrZXJPYmplY3RbXCJhdHRyaWJ1dGVzXCJdO1xuICAgIHZhciBtYXJrZXIgPSB0aGlzO1xuICAgICQuZWFjaChPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKSwgZnVuY3Rpb24oaW5kZXgsIGF0dHIpIHtcbiAgICAgICAgbWFya2VyW2F0dHJdID0gYXR0cmlidXRlc1thdHRyXTtcbiAgICB9KTtcblxuICAgIHRoaXMuY291bnRyeSA9IG1hcmtlck9iamVjdC5jb3VudHJ5O1xuICAgIHRoaXMuY291bnQgPSArbWFya2VyT2JqZWN0LmNvdW50O1xuICAgIHRoaXMubGF0aXR1ZGUgPSBtYXJrZXJPYmplY3QubGF0aXR1ZGU7XG4gICAgdGhpcy5sb25naXR1ZGUgPSBtYXJrZXJPYmplY3QubG9uZ2l0dWRlO1xuICAgIHRoaXMuaWNvbiA9IG1hcmtlck9iamVjdC5pY29uO1xuICAgIC8vIFRPRE8gLSBhZGQgZXNjcmlwdGlvbiB0byBhIE1hcmtlciBmcm9tIHRoZSBKU09OIGZpbGVcbiAgICB0aGlzLmRlc2MgPSAnYWJjJztcbn07XG5cbi8vIHJlYWQgdGhlIG1hcmtlcnMgZnJvbSBhIEpTT04gZmlsZVxuZnVuY3Rpb24gcmVhZE1hcmtlcnNGcm9tSlNPTihqc29uTWFya2Vycykge1xuICAgIHZhciBtYXJrZXJzID0gW107XG5cbiAgICBtaW5Db3VudCA9IEluZmluaXR5O1xuICAgIG1heENvdW50ID0gLUluZmluaXR5O1xuXG4gICAgJC5lYWNoKGpzb25NYXJrZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEpTT05NYXJrZXIpIHtcbiAgICAgICAgbWFya2Vycy5wdXNoKG5ldyBNYXJrZXIoY3VycmVudEpTT05NYXJrZXIpKTtcbiAgICAgICAgdmFyIGN1cnJlbnRDb3VudFZhbHVlID0gbWFya2Vyc1tpbmRleF0uQ291bnQ7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRDb3VudFZhbHVlID4gbWF4Q291bnQpIHtcbiAgICAgICAgICAgIG1heENvdW50ID0gY3VycmVudENvdW50VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnJlbnRDb3VudFZhbHVlIDwgbWluQ291bnQpXG4gICAgICAgICAgICBtaW5Db3VudCA9IGN1cnJlbnRDb3VudFZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBtYXJrZXJzO1xufVxuXG5mdW5jdGlvbiBhZGRNYXJrZXJzVG9NYXAoKSB7XG4gICAgdmFyIG1hcmtlcnNKU09OQXJyYXkgPSBbXTtcbiAgICAkLmVhY2goZmlsdGVyZWRNYXJrZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudE1hcmtlcikge1xuICAgICAgICB2YXIgY3VycmVudE1hcmtlckpTT04gPSB7XG4gICAgICAgICAgICBsYXRMbmc6IFtjdXJyZW50TWFya2VyLmxhdGl0dWRlLCBjdXJyZW50TWFya2VyLmxvbmdpdHVkZV0sXG4gICAgICAgICAgICBuYW1lOiBjdXJyZW50TWFya2VyLmRlc2MsXG4gICAgICAgICAgICAvLyBzZXQgdGhlIHN0eWxlIGZvciB0aGlzIG1hcmtlclxuICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICByOiBtYXBSYW5nZShjdXJyZW50TWFya2VyLmNvdW50LCBtaW5Db3VudCwgbWF4Q291bnQsIG1pblJhZGl1cywgbWF4UmFkaXVzKSxcbiAgICAgICAgICAgICAgICBpbWFnZTogJy4uL2ltZy8nICsgY3VycmVudE1hcmtlci5pY29uICsgJy5wbmcnXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIG1hcmtlcnNKU09OQXJyYXkucHVzaChjdXJyZW50TWFya2VySlNPTik7XG4gICAgfSk7XG4gICAgbWFwLmFkZE1hcmtlcnMobWFya2Vyc0pTT05BcnJheSk7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkTWFya2VyVG9vbHRpcChqc29uTWFya2VycywgbWFya2VyKSB7XG4gICAgdmFyIGZpbmFsVG9vbHRpcCA9IG1hcmtlclRvb2x0aXA7XG4gICAgJC5lYWNoKE9iamVjdC5rZXlzKG1hcmtlciksIGZ1bmN0aW9uKGluZGV4LCBhdHRyKSB7XG4gICAgICAgIGZpbmFsVG9vbHRpcCA9IGZpbmFsVG9vbHRpcC5yZXBsYWNlKGF0dHIsIG1hcmtlclthdHRyXSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZpbmFsVG9vbHRpcDtcbn1cbiIsImZ1bmN0aW9uIGZpbHRlcihpbnB1dEFyZ3MpIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0QXJncylcbiAgICB2YXIgbnVtYmVyS2V5cyA9IGtleXMubGVuZ3RoO1xuICAgIHZhciB2YWxpZEZpbHRlcnMgPSAwO1xuXG4gICAgdmFyIGNvdW50cmllc0J5RmlsdGVyID0gbmV3IEFycmF5KCk7XG4gICAgdmFyIG1hcmtlcnNCeUZpbHRlciA9IG5ldyBBcnJheSgpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBudW1iZXJLZXlzOyBpKyspIHtcbiAgICAgICAgY291bnRyaWVzQnlGaWx0ZXJbaV0gPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgbWFya2Vyc0J5RmlsdGVyW2ldID0gbmV3IEFycmF5KCk7XG4gICAgfVxuXG4gICAgLy8gY2hlY2sgaWYgYW55IG9mIHRoZSBuYW1lcyBpcyBhbGwgKHJlc2V0IGFsbCBhcHBsaWVkIGZpbHRlcnNcdClcbiAgICB2YXIgZXhpdCA9IGZhbHNlO1xuICAgICQuZWFjaChrZXlzLCBmdW5jdGlvbihpbmRleCwgZmlsdGVyTmFtZSkge1xuICAgICAgICBpZiAoZmlsdGVyTmFtZS50b0xvd2VyQ2FzZSgpID09ICdhbGwnKSB7XG4gICAgICAgICAgICBleGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIHJlbG9hZHMgdGhlIG9yaWdpbmFsIG1hcmtlcnMgYW5kIGNvdW50cmllcyBvbiB0aGUgbWFwXG4gICAgICAgICAgICByZXNldEZpbHRlcnMoKTtcbiAgICAgICAgICAgIC8vIGVyYXNlIHRoZSB0ZXh0IGZyb20gdGhlIGZpbHRlcnMgYm94XG4gICAgICAgICAgICByZXNldEZpbHRlcnNCb3goKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChleGl0KVxuICAgICAgICByZXR1cm47XG5cbiAgICAvLyBmb3IgZXZlcnkga2V5L2ZpbHRlclxuICAgICQuZWFjaChrZXlzLCBmdW5jdGlvbihpbmRleCwgZmlsdGVyTmFtZSkge1xuICAgICAgICAvLyBjaGVjayBpZiB0aGUgZmlsdGVyTmFtZSBpcyB2YWxpZFxuICAgICAgICBpZiAoIWNoZWNrRmlsdGVyTmFtZUlzVmFsaWQoZmlsdGVyTmFtZSkpIHtcbiAgICAgICAgICAgIC8vIGludmFsaWQgZmlsdGVyIG5hbWVcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJbnZhbGlkIGZpbHRlciBuYW1lISgnICsgZmlsdGVyTmFtZSArICcpJyk7XG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGdldCB0aGUgZmlsdGVyIHZhbHVlIChjYW4gY29udGFpbiBlbnVtZXJhdGlvbiBhbmQgcmFuZ2UpXG4gICAgICAgICAgICAvLyAnMjAwNC0yMDA2JyAsICdGLE0nLCBldGNcbiAgICAgICAgICAgIHZhciBmaWx0ZXJWYWx1ZSA9IGlucHV0QXJnc1tmaWx0ZXJOYW1lXTtcbiAgICAgICAgICAgIC8vIGdldCBhbGwgc2luZ2xlIGZpbHRlciB2YWx1ZXNcbiAgICAgICAgICAgIHZhciBmaW5hbFBhcnRzID0gZ2V0QWxsRmlsdGVyVmFsdWVzKGZpbHRlclZhbHVlKTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coZmluYWxQYXJ0cyk7XG4gICAgICAgICAgICB2YWxpZEZpbHRlcnMrKztcblxuICAgICAgICAgICAgLy8gZm9yIGV2ZXJ5IHNpbmdsZSB2YWx1ZSBnZXQgYWxsIHRoZSBjb3VudHJ1ZXMgYW5kIG1hcmtlcnNcbiAgICAgICAgICAgICQuZWFjaChmaW5hbFBhcnRzLCBmdW5jdGlvbihpLCBwYXJ0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrUmV0dXJuID0gY2hlY2tXaGF0Q291bnRyaWVzTWFya2Vyc1RvQWRkKGZpbHRlck9iamVjdCwgcGFydCk7XG4gICAgICAgICAgICAgICAgdmFyIGNvdW50cmllc0F1eCA9IGNoZWNrUmV0dXJuWzBdO1xuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJzQXV4ID0gY2hlY2tSZXR1cm5bMV07XG4gICAgICAgICAgICAgICAgLy8gYWRkIGV2ZXJ5IGNvdW50cnkgdG8gdGhlIGxpc3Qgb2YgY291bnRyaWVzQnlGaWx0ZXJcbiAgICAgICAgICAgICAgICAvLyBhZGQgZXZlcnkgbWFya2VyIHRvIHRoZSBsaXN0IG9mIG1hcmtlcnNCeUZpbHRlclxuICAgICAgICAgICAgICAgICQuZWFjaChPYmplY3Qua2V5cyhjb3VudHJpZXNBdXgpLCBmdW5jdGlvbihqLCBjdXJyZW50S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBjb2xvcnMgdGhhdCBhcmUgcmV0dXJuZWQgYXJlIGluIGEganNvbiBmb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleVZhbHVlID0gY291bnRyaWVzQXV4W2N1cnJlbnRLZXldO1xuICAgICAgICAgICAgICAgICAgICBjb3VudHJpZXNCeUZpbHRlcltpbmRleF1bY3VycmVudEtleV0gPSBrZXlWYWx1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIG1hcmtlcnNcbiAgICAgICAgICAgICAgICAkLmVhY2gobWFya2Vyc0F1eCwgZnVuY3Rpb24oaiwgY3VycmVudE1hcmtlcikge1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXJzQnlGaWx0ZXJbaW5kZXhdLnB1c2goY3VycmVudE1hcmtlcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gZ2V0IHRoZSBmaW5hbCBjb3VudHJpZXNcbiAgICB2YXIgZmluYWxDb3VudHJpZXMgPSBbXTtcbiAgICBpZiAoY291bnRyaWVzQnlGaWx0ZXIubGVuZ3RoID4gMCkge1xuICAgICAgICBmaW5hbENvdW50cmllcyA9IGNvdW50cmllc0J5RmlsdGVyWzBdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50cmllc0J5RmlsdGVyLmxlbmd0aCAtIDE7IGkrKylcbiAgICAgICAgICAgIGZpbmFsQ291bnRyaWVzID0gZ2V0Q291bnRyaWVzSW50ZXJzZWN0aW9uKGZpbmFsQ291bnRyaWVzLCBjb3VudHJpZXNCeUZpbHRlcltpICsgMV0pO1xuICAgIH1cblxuICAgIC8vIGFkZCBjb3VudHJpZXMgdG8gTWFwXG4gICAgcmVsb2FkTWFwKGZpbmFsQ291bnRyaWVzKTtcblxuICAgIC8vIGdldCB0aGUgZmluYWwgbWFya2Vyc1xuICAgIGZpbHRlcmVkTWFya2VycyA9IFtdO1xuICAgIGlmIChtYXJrZXJzQnlGaWx0ZXIubGVuZ3RoID4gMCkge1xuICAgICAgICBmaWx0ZXJlZE1hcmtlcnMgPSBtYXJrZXJzQnlGaWx0ZXJbMF07XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFya2Vyc0J5RmlsdGVyLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgZmlsdGVyZWRNYXJrZXJzID0gZ2V0TWFya2Vyc0ludGVyc2VjdGlvbihmaWx0ZXJlZE1hcmtlcnMsIG1hcmtlcnNCeUZpbHRlcltpICsgMV0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gYWRkIG1hcmtlcnMgdG8gdGhlIG1hcFxuICAgIGFkZE1hcmtlcnNUb01hcCgpO1xufVxuXG5mdW5jdGlvbiBnZXRNYXJrZXJzSW50ZXJzZWN0aW9uKG1hcmtlcnNHcm91cDEsIG1hcmtlcnNHcm91cDIpIHtcbiAgICB2YXIgbWFya2VycyA9IFtdO1xuXG4gICAgLy8gbWFya2VycyB0aGF0IGJlbG9uZyB0byB0aGUgdHdvIGdyb3Vwc1xuICAgICQuZWFjaChtYXJrZXJzR3JvdXAxLCBmdW5jdGlvbihpbmRleCwgbWFya2VyMSkge1xuICAgICAgICAvLyBjaGVjayBpZiB0aGlzIG1hcmtlciBuYW1lIGlzIGluc2lkZSB0aGUgc2Vjb25kIGdyb3VwXG4gICAgICAgIHZhciBtYXJrZXIxQ291bnRyeSA9IG1hcmtlcjEuY291bnRyeTtcbiAgICAgICAgJC5lYWNoKG1hcmtlcnNHcm91cDIsIGZ1bmN0aW9uKGluZGV4LCBtYXJrZXIyKSB7XG4gICAgICAgICAgICB2YXIgbWFya2VyMkNvdW50cnkgPSBtYXJrZXIyLmNvdW50cnk7XG4gICAgICAgICAgICBpZiAobWFya2VyMUNvdW50cnkgPT0gbWFya2VyMkNvdW50cnkpXG4gICAgICAgICAgICAgICAgbWFya2Vycy5wdXNoKG1hcmtlcjEpXG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBtYXJrZXJzO1xufVxuXG5mdW5jdGlvbiBnZXRDb3VudHJpZXNJbnRlcnNlY3Rpb24oY291bnRyaWVzR3JvdXAxLCBjb3VudHJpZXNHcm91cDIpIHtcbiAgICAvLyBjb3VudHJpZXMgdGhhdCBiZWxvbmcgdG8gdGhlIHR3byBncm91cHNcbiAgICB2YXIgY291bnRyaWVzID0gW107XG5cbiAgICAkLmVhY2goT2JqZWN0LmtleXMoY291bnRyaWVzR3JvdXAxKSwgZnVuY3Rpb24oaW5kZXgsIGNvdW50cnlOYW1lMSkge1xuICAgICAgICAvLyBjaGVjayBpZiB0aGlzIGNvdW50cnkgbmFtZSBpcyBpbnNpZGUgdGhlIHNlY29uZCBncm91cFxuICAgICAgICAkLmVhY2goT2JqZWN0LmtleXMoY291bnRyaWVzR3JvdXAyKSwgZnVuY3Rpb24oaW5kZXgsIGNvdW50cnlOYW1lMikge1xuICAgICAgICAgICAgaWYgKGNvdW50cnlOYW1lMSA9PSBjb3VudHJ5TmFtZTIpXG4gICAgICAgICAgICAgICAgY291bnRyaWVzW2NvdW50cnlOYW1lMV0gPSBjb3VudHJpZXNHcm91cDFbY291bnRyeU5hbWUxXTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvdW50cmllcztcbn1cblxuZnVuY3Rpb24gYXBwbHlNdWx0aXBsZUZpbHRlcnNQcm9ncmFtYXR0aWNhbGx5KGZpbHRlcnNUb0FwcGx5KSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhmaWx0ZXJzVG9BcHBseSlcbiAgICB2YXIgbnVtRmlsdGVyc1RvQXBwbHkgPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgY291bnRyaWVzSGF2ZUZpbHRlciA9IFtdO1xuICAgIHZhciBtYXJrZXJzSGF2ZUZpbHRlciA9IFtdO1xuXG4gICAgLy8gZm9yIGV2ZXJ5IGtleVxuICAgICQuZWFjaChrZXlzLCBmdW5jdGlvbihpbmRleCwgZmlsdGVyTmFtZSkge1xuICAgICAgICB2YXIgZmlsdGVyVmFsdWUgPSBmaWx0ZXJzVG9BcHBseVtmaWx0ZXJOYW1lXTtcbiAgICB9KTtcbiAgICB2YXIgY29sb3JzID0gW107XG5cbiAgICAvLyByZW1vdmUgYWxsIG1hcmtlcnMgZnJvbSB0aGUgbWFwXG4gICAgbWFwLnJlbW92ZUFsbE1hcmtlcnMoKTtcblxuICAgIC8vIGZvciBlYWNoIG9mIHRoZSBjb3VudHJpZXNcbiAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oY291bnRyeUluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuICAgICAgICAvLyBzZXQgdG8gMCB0aGUgbnVtYmVyIG9mIGZpbHRlcnNcbiAgICAgICAgY291bnRyaWVzSGF2ZUZpbHRlcltjb3VudHJ5SW5kZXhdID0gMDtcbiAgICAgICAgLy8gY2hlY2sgaWYgaXQgaGFzIHRoZSBuZWVkZWQgdmFsdWVzXG4gICAgICAgICQuZWFjaChrZXlzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEZpbHRlck5hbWUpIHtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnROYW1lVG9DaGVjayA9ICdOYW1lJyArIGk7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9ICdWYWx1ZScgKyBpO1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBDb3VudHJ5IGhhcyB0aGF0IG5hbWVcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRDb3VudHJ5W2N1cnJlbnROYW1lVG9DaGVja10pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5W2N1cnJlbnROYW1lVG9DaGVja10udG9Mb3dlckNhc2UoKSA9PSBjdXJyZW50RmlsdGVyTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGJ5IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeVtjdXJyZW50VmFsdWVdID09IGZpbHRlcnNUb0FwcGx5W2N1cnJlbnRGaWx0ZXJOYW1lXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cmllc0hhdmVGaWx0ZXJbY291bnRyeUluZGV4XSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKHRydWUpXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gY29sb3VyIG9ubHkgdGhlIGNvdW50cmlzIHdob3NlIGNvdW50cmllc0hhdmVGaWx0ZXJbaW5kZXhdID09IG51bWJlckZpbHRlcnNcbiAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oY291bnRyeUluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuICAgICAgICBpZiAoY291bnRyaWVzSGF2ZUZpbHRlcltjb3VudHJ5SW5kZXhdID09IG51bUZpbHRlcnNUb0FwcGx5KVxuICAgICAgICAgICAgY29sb3JzW2N1cnJlbnRDb3VudHJ5LmNvdW50cnldID0gY3VycmVudENvdW50cnkuQ291bnQ7XG4gICAgfSk7XG4gICAgcmVsb2FkTWFwKGNvbG9ycyk7XG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8qXG4gICAgTWFya2Vyc1xuICAgICovXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgIC8vIGZvciBlYWNoIG9mIHRoZSBtYXJrZXJzXG4gICAgJC5lYWNoKGpzb25NYXJrZXJzLCBmdW5jdGlvbihtYXJrZXJJbmRleCwgY3VycmVudE1hcmtlcikge1xuICAgICAgICAvLyBzZXQgdG8gMCB0aGUgbnVtYmVyIG9mIGZpbHRlcnNcbiAgICAgICAgbWFya2Vyc0hhdmVGaWx0ZXJbbWFya2VySW5kZXhdID0gMDtcbiAgICAgICAgLy8gY2hlY2sgaWYgaXQgaGFzIHRoZSBuZWVkZWQgdmFsdWVzXG4gICAgICAgICQuZWFjaChrZXlzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEZpbHRlck5hbWUpIHtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnROYW1lVG9DaGVjayA9ICdOYW1lJyArIGk7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9ICdWYWx1ZScgKyBpO1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBDb3VudHJ5IGhhcyB0aGF0IG5hbWVcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRNYXJrZXJbY3VycmVudE5hbWVUb0NoZWNrXSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudE1hcmtlcltjdXJyZW50TmFtZVRvQ2hlY2tdLnRvTG93ZXJDYXNlKCkgPT0gY3VycmVudEZpbHRlck5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBieSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudE1hcmtlcltjdXJyZW50VmFsdWVdID09IGZpbHRlcnNUb0FwcGx5W2N1cnJlbnRGaWx0ZXJOYW1lXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnNIYXZlRmlsdGVyW21hcmtlckluZGV4XSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKHRydWUpXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gYWRkIG9ubHkgdGhlIG1hcmtlcnMgd2hvIHNhdGlzZnkgdGhlIGNyaXRlcmlhXG4gICAgJC5lYWNoKGpzb25NYXJrZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudE1hcmtlcikge1xuICAgICAgICBpZiAobWFya2Vyc0hhdmVGaWx0ZXJbaW5kZXhdID09IG51bUZpbHRlcnNUb0FwcGx5KSB7XG4gICAgICAgICAgICBtYXAuYWRkTWFya2VyKGluZGV4LCB7XG4gICAgICAgICAgICAgICAgbGF0TG5nOiBbY3VycmVudE1hcmtlci5MYXRpdHVkZSwgY3VycmVudE1hcmtlci5Mb25naXR1ZGVdLFxuICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRNYXJrZXIuZGVzYyxcblxuICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgc3R5bGUgZm9yIHRoaXMgbWFya2VyXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogJ2dyZWVuJyxcbiAgICAgICAgICAgICAgICAgICAgcjogbWFwUmFuZ2UoY3VycmVudE1hcmtlci5Db3VudCwgbWluQ291bnQsIG1heENvdW50LCBtaW5SYWRpdXMsIG1heFJhZGl1cylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG59XG5cbmZ1bmN0aW9uIGFwcGx5TXVsdGlwbGVGaWx0ZXJzKHNlbGVjdGVkTXVsdGlwbGVGaWx0ZXJzLCBqc29uRmlsdGVycykge1xuXG4gICAgLy8gbnVtYmVyIG9mIGZpbHRlcnMgdG8gYmUgYXBwbGllZFxuICAgIHZhciBudW1GaWx0ZXJzVG9BcHBseSA9IHNlbGVjdGVkTXVsdGlwbGVGaWx0ZXJzLmZpbHRlcihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZFxuICAgIH0pLmxlbmd0aDtcblxuICAgIHZhciBjb3VudHJpZXNIYXZlRmlsdGVyID0gW107XG4gICAgdmFyIG1hcmtlcnNIYXZlRmlsdGVyID0gW107XG5cbiAgICAvLyBmb3IgZWFjaCBvZiB0aGUgY291bnRyaWVzXG4gICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGNvdW50cnlJbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgLy8gc2V0IHRvIDAgdGhlIG51bWJlciBvZiBmaWx0ZXJzXG4gICAgICAgIGNvdW50cmllc0hhdmVGaWx0ZXJbY291bnRyeUluZGV4XSA9IDA7XG4gICAgICAgIC8vIGNoZWNrIGlmIGl0IGhhcyB0aGUgbmVlZGVkIHZhbHVlc1xuICAgICAgICAkLmVhY2goc2VsZWN0ZWRNdWx0aXBsZUZpbHRlcnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50RmlsdGVyVmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnROYW1lVG9DaGVjayA9ICdOYW1lJyArIGk7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9ICdWYWx1ZScgKyBpO1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBDb3VudHJ5IGhhcyB0aGF0IG5hbWVcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnlbY3VycmVudE5hbWVUb0NoZWNrXSA9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5W2N1cnJlbnROYW1lVG9DaGVja10gPT09IGpzb25GaWx0ZXJzW2luZGV4XS5OYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGJ5IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeVtjdXJyZW50VmFsdWVdID09IGN1cnJlbnRGaWx0ZXJWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRyaWVzSGF2ZUZpbHRlcltjb3VudHJ5SW5kZXhdKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHZhciBjb2xvcnMgPSBbXTtcblxuICAgIC8vIGNvbG91ciBvbmx5IHRoZSBjb3VudHJpcyB3aG9zZSBjb3VudHJpZXNIYXZlRmlsdGVyW2luZGV4XSA9PSBudW1iZXJGaWx0ZXJzXG4gICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGNvdW50cnlJbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgaWYgKGNvdW50cmllc0hhdmVGaWx0ZXJbY291bnRyeUluZGV4XSA9PSBudW1GaWx0ZXJzVG9BcHBseSlcbiAgICAgICAgICAgIGNvbG9yc1tjdXJyZW50Q291bnRyeS5jb3VudHJ5XSA9IGN1cnJlbnRDb3VudHJ5LkNvdW50O1xuICAgIH0pO1xuXG4gICAgLy8gY29sb3VyIHRoZSBjb3VudHJpZXNcbiAgICByZWxvYWRNYXAoY29sb3JzKTtcblxuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvKlxuICAgIE1hcmtlcnNcbiAgICAqL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAvLyBmb3IgZWFjaCBvZiB0aGUgbWFya2Vyc1xuICAgICQuZWFjaChqc29uTWFya2VycywgZnVuY3Rpb24obWFya2VySW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcbiAgICAgICAgLy8gc2V0IHRvIDAgdGhlIG51bWJlciBvZiBmaWx0ZXJzXG4gICAgICAgIG1hcmtlcnNIYXZlRmlsdGVyW21hcmtlckluZGV4XSA9IDA7XG4gICAgICAgIC8vIGNoZWNrIGlmIGl0IGhhcyB0aGUgbmVlZGVkIHZhbHVlc1xuICAgICAgICAkLmVhY2goc2VsZWN0ZWRNdWx0aXBsZUZpbHRlcnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50RmlsdGVyVmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnROYW1lVG9DaGVjayA9ICdOYW1lJyArIGk7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9ICdWYWx1ZScgKyBpO1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBDb3VudHJ5IGhhcyB0aGF0IG5hbWVcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRNYXJrZXJbY3VycmVudE5hbWVUb0NoZWNrXSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudE1hcmtlcltjdXJyZW50TmFtZVRvQ2hlY2tdLnRvTG93ZXJDYXNlKCkgPT0ganNvbkZpbHRlcnNbaW5kZXhdLk5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBieSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudE1hcmtlcltjdXJyZW50VmFsdWVdID09IGN1cnJlbnRGaWx0ZXJWYWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnNIYXZlRmlsdGVyW21hcmtlckluZGV4XSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKHRydWUpXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gYWRkIG9ubHkgdGhlIG1hcmtlcnMgd2hvIHNhdGlzZnkgdGhlIGNyaXRlcmlhXG4gICAgJC5lYWNoKGpzb25NYXJrZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudE1hcmtlcikge1xuICAgICAgICBpZiAobWFya2Vyc0hhdmVGaWx0ZXJbaW5kZXhdID09IG51bUZpbHRlcnNUb0FwcGx5KSB7XG4gICAgICAgICAgICBtYXAuYWRkTWFya2VyKGluZGV4LCB7XG4gICAgICAgICAgICAgICAgbGF0TG5nOiBbY3VycmVudE1hcmtlci5MYXRpdHVkZSwgY3VycmVudE1hcmtlci5Mb25naXR1ZGVdLFxuICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRNYXJrZXIuZGVzYyxcblxuICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgc3R5bGUgZm9yIHRoaXMgbWFya2VyXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogJ2dyZWVuJyxcbiAgICAgICAgICAgICAgICAgICAgcjogbWFwUmFuZ2UoY3VycmVudE1hcmtlci5Db3VudCwgbWluQ291bnQsIG1heENvdW50LCBtaW5SYWRpdXMsIG1heFJhZGl1cylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuIiwidmFyIFJlZ2lvbiA9IGZ1bmN0aW9uKHJlZ2lvbk9iamVjdCwgY291bnRyeSkge1xuICAgIC8vIHJlYWQgZnJvbSB0aGUgaW5wdXQgcGFyYW1ldGVyc1xuICAgIHRoaXMuUmVnaW9uID0gcmVnaW9uT2JqZWN0Lm5hbWU7XG4gICAgdGhpcy5jb3VudHJ5ID0gY291bnRyeTtcbiAgICAvLyArIGlzIHVzZWQgdG8gYXNzdXJlIHRoYXQgYSBOdW1iZXIgaXMgYmVpbmcgcmVhZFxuICAgIHRoaXMuZGVzYyA9ICdqdXN0IGEgcmVnaW9uLi4uJztcbn07XG5cbmZ1bmN0aW9uIHJlYWRSZWdpb25zRnJvbUpTT04ocmVnaW9ucywgY291bnRyeSkge1xuICAgIHZhciByZWdpb25zQXJyID0gW107XG4gICAgJC5lYWNoKHJlZ2lvbnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50UmVnaW9uKSB7XG4gICAgICAgIHJlZ2lvbnNBcnJbaW5kZXhdID0gbmV3IFJlZ2lvbihjdXJyZW50UmVnaW9uLCBjb3VudHJ5KTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVnaW9ucztcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVDb2xvcnNGb3JUaGVSZWdpb25zKGNvdW50cnkpe1xuICAgIHZhciBpc29Db2RlID0gY291bnRyeS5zcGxpdChcIl9cIilbMF0udG9VcHBlckNhc2UoKTtcbiAgICAvLyBmaW5kIHRoZSBjb3VudHJ5IHdpdGggdGhhdCBpc29Db2RlXG4gICAgdmFyIHJlZ2lvbkNvbG9ycyA9IFtdO1xuICAgICQuZWFjaChqc29uQ291bnRyaWVzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5LmNvdW50cnkgPT0gaXNvQ29kZSkge1xuICAgICAgICAgICAgLy8gY291bnRyeSB3YXMgZm91bmQsIGNoZWNrIGlmIGl0IGhhcyBhbnkgcmVnaW9uXG4gICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnkuUmVnaW9ucykge1xuICAgICAgICAgICAgICAgIHZhciByZWdpb25zID0gY3VycmVudENvdW50cnkuUmVnaW9ucztcbiAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIHJlZ2lvbnMgb2YgdGhlIGNvdW50cnlcbiAgICAgICAgICAgIFx0JC5lYWNoKHJlZ2lvbnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50UmVnaW9uKSB7XG4gICAgICAgICAgICBcdFx0cmVnaW9uQ29sb3JzW2N1cnJlbnRSZWdpb24ubmFtZV0gPSAxMDA7XG4gICAgICAgICAgICBcdH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cdHJldHVybiByZWdpb25Db2xvcnM7XG59XG5cblxuZnVuY3Rpb24gYnVpbGRSZWdpb25Ub29sdGlwKHJlZ2lvbikge1xuICAgIHZhciBmaW5hbFRvb2x0aXAgPSByZWdpb25Ub29sdGlwO1xuICAgIGZpbmFsVG9vbHRpcCA9IGZpbmFsVG9vbHRpcC5yZXBsYWNlKCduYW1lJywgcmVnaW9uLm5hbWUpO1xuICAgIHJldHVybiBmaW5hbFRvb2x0aXA7XG59XG5cbmZ1bmN0aW9uIGFkZFJlZ2lvbnNUb01hcChrZXkpIHtcbiAgICAvLyBjaGVjayBpZiB0aGUgaGlnaGxpZ2h0ZWQgY291bnRyeSBoYXMgYW55IHJlZ2lvblxuICAgIHZhciBpc29Db2RlID0ga2V5LnNwbGl0KFwiX1wiKVswXS50b1VwcGVyQ2FzZSgpO1xuICAgIC8vIGZpbmQgdGhlIGNvdW50cnkgd2l0aCB0aGF0IGlzb0NvZGVcbiAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgIGlmIChjdXJyZW50Q291bnRyeS5jb3VudHJ5ID09IGlzb0NvZGUpIHtcbiAgICAgICAgICAgIC8vIGNvdW50cnkgd2FzIGZvdW5kLCBjaGVjayBpZiBpdCBoYXMgYW55IHJlZ2lvblxuICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5LlJlZ2lvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVnaW9ucyA9IGN1cnJlbnRDb3VudHJ5LlJlZ2lvbnM7XG4gICAgICAgICAgICAgICAgdmFyIHBhbGV0dGUgPSBbJyM2NkMyQTUnLCAnI0ZDOEQ2MicsICcjOERBMENCJywgJyNFNzhBQzMnLCAnI0E2RDg1NCddO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlQ29sb3JzKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3JzID0ge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yc1ttYXBzLnJlZ2lvbl1cblxuICAgICAgICAgICAgICAgICAgICBmb3IgKGtleSBpbiBtYXBzLnJlZ2lvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yc1trZXldID0gcGFsZXR0ZVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwYWxldHRlLmxlbmd0aCldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2xvcnM7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhnZW5lcmF0ZUNvbG9ycygpKTtcbiAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIGNvbG9ycyBvZiB0aGUgcmVnaW9uc1xuICAgICAgICAgICAgICAgIG1hcHMuc2VyaWVzLnJlZ2lvbnNbMF0uc2V0VmFsdWVzKGdlbmVyYXRlQ29sb3JzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=