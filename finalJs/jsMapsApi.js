function mapRange(e,r,o,n,t){return n+(t-n)*(e-r)/(o-r)}function buildCountryTooltip(e,r){var o=countryTooltip;return $.each(Object.keys(r),function(e,n){o=o.replace(n,r[n])}),o}function generateColorsForTheCountries(e){e||(e=jsonCountries);var r=[];return $.each(e,function(e,o){r[o.name]=o.count}),r}function readCountriesFromJSON(e){var r=[];return minCount=1/0,maxCount=-(1/0),$.each(e,function(e,o){r.push(new Country(o)),r[e].Count>maxCount&&(maxCount=r[e].Count),r[e].Count<minCount&&(minCount=r[e].Count)}),r}function findCountryByName(e){var r=null;return $.each(jsonCountries,function(o,n){return n.country==e?r=n:void 0}),r}function readMinMax(e){minCount=1/0,maxCount=-(1/0);var r=[];for(var o in e)e.hasOwnProperty(o)&&r.push(o);$.each(r,function(e,r){var o=findCountryByName(r);o.Count>maxCount&&(maxCount=o.Count),o.Count<minCount&&(minCount=o.Count)})}function createFiltersBoxCheckboxes(){$("filter-box").append('<ul class="nav navbar-nav" id="filterBoxCheckboxes" style="border-style: solid; border-width: 2px;"></ul>'),$.each(jsonFiltersArray,function(e,r){function o(e){return"<p>"+JSON.stringify(e)+"</p>"}function n(){var e=$("p.status").empty();e.append(o(widget.checked()))}var t="#box"+(e+1);$("#filterBoxCheckboxes").append('<li class="col-sm-6" id="box'+(e+1)+'" class="dropdown-checkbox-example dropdown-checkbox dropdown"></li>');var a=[];$.each(r.Values,function(e,r){a.push({id:e+1,label:r,isChecked:!1})});var i=r.Name.toLowerCase();i=i.charAt(0).toUpperCase()+i.slice(1),$(t).dropdownCheckbox({data:a,autosearch:!0,hideHeader:!1,showNbSelected:!1,templateButton:'<a class="dropdown-checkbox-toggle" data-toggle="dropdown" href="#">'+i+'<span class="dropdown-checkbox-nbselected"></span><b class="caret"></b>'}),widget=$(t).data("dropdownCheckbox"),$("body").on("change:dropdown-checkbox checked checked:all check:all uncheck:all check:checked uncheck:checked",n()),n()});var e='<div id="filters_box" class="row col-sm-12"><button id="filter_box_apply_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Filter</button><button id="filter_box_reset_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Reset</button></div>';$("#filterBoxCheckboxes").append(e),$("#filter_box_apply_filters").click(function(){for(var e={},r=jsonFiltersArray.length,o=0,n=0;n<jsonFiltersArray.length;n++){for(var t="#box"+(n+1),a=getSelectedItems(t),i=[],s=Object.keys(a),u=0;u<s.length;u++)i.push(a[s[u]].label);s.length>0?e[jsonFiltersArray[n].Name]=i.join():o++}o!=r&&filter(e)}),$("#filter_box_reset_filters").click(function(){resetFiltersBox()})}function getSelectedItems(e){return $(e).dropdownCheckbox("checked")}function createFiltersBoxWithEnumeration(e){e.length;$.each(e,function(e,r){var o=r.Name.toLowerCase();o=o.charAt(0).toUpperCase()+o.slice(1);var n="";n+="<p><b>"+o+":</b></p>",n+='<div class="form-group">',n+='<input type="text" class="form-control" id="fbox'+e+'"';var t=r.Values;n+='placeholder="'+t+'" +>',n+="</div>",$("filter-box").append(n),$("#filter-box").tooltip({title:"Use this filter box to filter by multiple filters",placement:"bottom"})});var r='<div id="filters_box"><button id="filter_box_apply_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Filter</button><button id="filter_box_reset_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Reset</button></div>';$("filter-box").append(r),$("#filter_box_apply_filters").click(function(){for(var r={},o=e.length,n=0,t=0;t<e.length;t++){var a="#fbox"+t,i=$(a).val();""!==i?r[e[t].Name]=i:n++}n!=o&&filter(r)}),$("#filter_box_reset_filters").click(function(){resetFiltersBox()})}function getAllFilterValues(e){var r=[];if(-1!=String(e).indexOf(",")){var o=String(e).split(",");$.each(o,function(e,o){if(-1!=o.indexOf("-")){var n=String(o).split("-");checkFilterValuesAreValid(filterObject,n);for(var t=n[0],a=n[1];a>=t;t++)r.push(t)}else r.push(o)})}else if(-1!=e.indexOf("-")){var n=String(e).split("-");checkFilterValuesAreValid(filterObject,n);for(var t=n[0],a=n[1];a>=t;t++)r.push(t)}else r.push(e);return r}function checkWhatCountriesToAdd(e,r){var o=[];return $.each(jsonCountries,function(e,n){for(var t=0;;){t++;var a="name"+t,i="value"+t;if(!n[a])break;n[i]==r&&(countryValueToCheck=i,n[i]==r&&(o[n.country]=n.Count))}}),o}function checkWhatMarkersToAdd(e,r){var o=[];return $.each(jsonMarkers,function(n,t){$.each(Object.keys(t),function(n,a){a.toLowerCase()==e.Name.toLowerCase()&&t[a]==r&&o.push(t)})}),o}function checkWhatCountriesMarkersToAdd(e,r){var o=[],n=[];return o=checkWhatCountriesToAdd(e,r),n=checkWhatMarkersToAdd(e,r),[o,n]}function checkFilterNameIsValid(e){var r=!1;return $.each(jsonFiltersArray,function(o,n){return n.Name.toLowerCase()===e.toLowerCase()?(filterObject=n,void(r=!0)):void 0}),r}function checkFilterValuesAreValid(e,r){var o=!1;return $.each(r,function(e,r){return $.each(filterObject.Values,function(e,n){return n==r?void(o=!0):void 0}),o?void 0:void console.log("Invalid value for the filter: "+r)}),o}function resetFilters(){var e=generateColorsForTheCountries();reloadMap(e),$.each(jsonMarkers,function(e,r){map.addMarker(e,{latLng:[r.Latitude,r.Longitude],name:r.desc,style:{fill:"green",r:mapRange(r.Count,minCount,maxCount,minRadius,maxRadius)}})})}function filterFromMenuSelected(e,r){currentFilter=e;var o=checkWhatCountriesToAdd(e,r);if(reloadMap(o),$.each(jsonMarkers,function(o,n){for(var t=0;;){t++;var a="Name"+t,i="Value"+t;if(!n[a])break;n[a]===e.Name&&n[i]===r&&map.addMarker(o,{latLng:[n.Latitude,n.Longitude],name:n.desc,style:{fill:"green",r:mapRange(n.Count,minCount,maxCount,minRadius,maxRadius)}})}}),isNaN(e.Values[0]))$("#slider").hide(),$("#minSlider").hide(),$("#maxSlider").hide();else{$("#slider").show(),$("#minSlider").show(),$("#maxSlider").show();var n=$("#slider").slider(),t=e.Values[0],a=e.Values[e.Values.length-1];n.slider("option","min",t),n.slider("option","max",a),$("#minSlider").text(t),$("#maxSlider").text(a)}}function sliderChanged(){var e=slider.slider("option","values"),r=e[0],o=e[1],n=currentFilter.Name;$("#minSlider").text(r),$("#maxSlider").text(o);var t=[];$.each(jsonCountries,function(e,n){var a=+n[countryValueToCheck];a>=r&&o>=a&&(t[n.country]=n.Count)}),reloadMap(t);for(var a,i=jsonCountries[0],s=0;;){s++;var u="Name"+s,l="Value"+s;if(i[u]===n){a=l;break}}$.each(jsonMarkers,function(e,n){n[a]>=r&&n[a]<=o&&map.addMarker(e,{latLng:[n.Latitude,n.Longitude],name:n.desc,style:{fill:"green",r:mapRange(n.Count,minCount,maxCount,minRadius,maxRadius)}})})}function readFiltersFromJSON(e){for(var r=[],o=0;o<e.values.length;o++){currentFilter=e.values[o];for(var n=currentFilter.name,t=[],a=0;a<currentFilter.values.length;a++)t.push(currentFilter.values[a]);r[o]=new Filter(n,t)}return numFilters=r.length,r}function jsonMapCountries(e,r){var o=[];$.getJSON(r,function(r){$.each(e,function(e,n){var t=n[r.country],a=0;o[e]=new Country("",t,a)}),mappingCountries=o,console.log(mappingCountries)})}function jsonMapMarkers(e,r){var o=[];$.getJSON(r,function(r){$.each(e,function(e,n){var t=n[r.country],a=0,i=n[r.Latitude],s=n[r.Longitude];o[e]=new Marker("",t,a,i,s)}),mappingMarkers=o,console.log(mappingMarkers)})}function reloadMap(e){map.params.map==mType?(jsonCountries.length>0&&readMinMax(e),$("#"+mDiv).empty(),map=new jvm.Map({map:mType,backgroundColor:background,container:$("#"+mDiv),onRegionClick:function(e,r){countryCode=r.toLowerCase();var o=countryCode+"_mill_en";switchMap(o)},onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,o);r.html(n)},onRegionTipShow:function(e,r,o){var n=-1;if($.each(jsonCountries,function(e,r){return r.country===o?void(n=r):void 0}),-1!=n){var t=buildCountryTooltip(r,n);r.html(t)}else r.html(r.html())},series:{markers:[finalMarkersInMap],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:e}]}})):(jsonCountries.length>0&&readMinMax(e),$("#"+mDiv).empty(),removeTooltip(),switchMap(mapType))}function removeTooltip(){$(".jvectormap-tip").remove()}function switchMap(e){$("#"+mDiv).empty(),removeTooltip();var r="countries"==dataType?generateColorsForTheCountries(e):[];map=new jvm.Map({map:e,backgroundColor:background,container:$("#"+mDiv),onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,o);r.html(n)},onRegionTipShow:function(r,o,n){var t=e.split("_")[0].toUpperCase(),a=-1;$.each(jsonCountries,function(e,r){return r.country==t?void(a=r):void 0});var i,s=!1;$.each(map.regions,function(e,r){return r.name==n?(i=r,void(s=!0)):void 0}),o.html(s?buildRegionTooltip(i):o.html())},series:{markers:[finalMarkersInMap],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:r}]}}),$("#my_map").append('<div class="jvectormap-goback">Back</div>'),$(".jvectormap-goback").click(function(){$("#"+mDiv).empty(),removeTooltip(),map=new jvm.Map({container:$("#"+mDiv),map:mType,backgroundColor:background,onRegionClick:function(e,r){countryCode=r.toLowerCase();var o=countryCode+"_mill_en";switchMap(o)},onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,o);r.html(n)},onRegionTipShow:function(e,r,o){var n=-1;if($.each(jsonCountries,function(e,r){return r.country===o?void(n=r):void 0}),-1!=n){var t=buildCountryTooltip(r,n);r.html(t)}else r.html(r.html())},series:{markers:[finalMarkersInMap],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:auxColors}]}}),thereAreMarkers&&addMarkersToMap()}),thereAreMarkers&&addMarkersToMap(),jsonCountries}function readMarkersFromJSON(e){var r=[];return minCount=1/0,maxCount=-(1/0),$.each(e,function(e,o){r.push(new Marker(o));var n=r[e].Count;n>maxCount&&(maxCount=n),n<minCount&&(minCount=n)}),r}function addMarkersToMap(){var e=[];$.each(filteredMarkers,function(r,o){var n={latLng:[o.latitude,o.longitude],name:o.desc,style:{r:mapRange(o.count,minCount,maxCount,minRadius,maxRadius),image:"../img/"+o.icon+".png"}};e.push(n)}),map.addMarkers(e)}function buildMarkerTooltip(e,r){var o=markerTooltip;return $.each(Object.keys(r),function(e,n){o=o.replace(n,r[n])}),o}function filter(e){var r=Object.keys(e),o=r.length,n=0,t=new Array,a=new Array;for(u=0;o>u;u++)t[u]=new Array,a[u]=new Array;var i=!1;if($.each(r,function(e,r){return"all"==r.toLowerCase()?(i=!0,resetFilters(),void resetFiltersBox()):void 0}),!i){$.each(r,function(r,o){if(!checkFilterNameIsValid(o))return void console.log("Invalid filter name!("+o+")");var i=e[o],s=getAllFilterValues(i);n++,$.each(s,function(e,o){var n=checkWhatCountriesMarkersToAdd(filterObject,o),i=n[0],s=n[1];$.each(Object.keys(i),function(e,o){var n=i[o];t[r][o]=n}),$.each(s,function(e,o){a[r].push(o)})})});var s=[];if(t.length>0){s=t[0];for(var u=0;u<t.length-1;u++)s=getCountriesIntersection(s,t[u+1])}if(reloadMap(s),filteredMarkers=[],a.length>0){filteredMarkers=a[0];for(var u=0;u<a.length-1;u++)filteredMarkers=getMarkersIntersection(filteredMarkers,a[u+1])}addMarkersToMap()}}function getMarkersIntersection(e,r){var o=[];return $.each(e,function(e,n){var t=n.country;$.each(r,function(e,r){var a=r.country;t==a&&o.push(n)})}),o}function getCountriesIntersection(e,r){var o=[];return $.each(Object.keys(e),function(n,t){$.each(Object.keys(r),function(r,n){t==n&&(o[t]=e[t])})}),o}function applyMultipleFiltersProgramattically(e){var r=Object.keys(e),o=r.length,n=[],t=[];$.each(r,function(r,o){e[o]});var a=[];map.removeAllMarkers(),$.each(jsonCountries,function(o,t){n[o]=0,$.each(r,function(r,a){for(var i=0;;){i++;var s="Name"+i,u="Value"+i;if(!t[s])break;t[s].toLowerCase()==a.toLowerCase()&&t[u]==e[a]&&n[o]++}})}),$.each(jsonCountries,function(e,r){n[e]==o&&(a[r.country]=r.Count)}),reloadMap(a),$.each(jsonMarkers,function(o,n){t[o]=0,$.each(r,function(r,a){for(var i=0;;){i++;var s="Name"+i,u="Value"+i;if(!n[s])break;n[s].toLowerCase()==a.toLowerCase()&&n[u]==e[a]&&t[o]++}})}),$.each(jsonMarkers,function(e,r){t[e]==o&&map.addMarker(e,{latLng:[r.Latitude,r.Longitude],name:r.desc,style:{fill:"green",r:mapRange(r.Count,minCount,maxCount,minRadius,maxRadius)}})})}function applyMultipleFilters(e,r){var o=e.filter(function(e){return void 0!==e}).length,n=[],t=[];$.each(jsonCountries,function(o,t){n[o]=0,$.each(e,function(e,a){for(var i=0;;){i++;var s="Name"+i,u="Value"+i;if(void 0==t[s])break;t[s]===r[e].Name&&t[u]==a&&n[o]++}})});var a=[];$.each(jsonCountries,function(e,r){n[e]==o&&(a[r.country]=r.Count)}),reloadMap(a),$.each(jsonMarkers,function(o,n){t[o]=0,$.each(e,function(e,a){for(var i=0;;){i++;var s="Name"+i,u="Value"+i;if(!n[s])break;n[s].toLowerCase()==r[e].Name.toLowerCase()&&n[u]==a&&t[o]++}})}),$.each(jsonMarkers,function(e,r){t[e]==o&&map.addMarker(e,{latLng:[r.Latitude,r.Longitude],name:r.desc,style:{fill:"green",r:mapRange(r.Count,minCount,maxCount,minRadius,maxRadius)}})})}function readRegionsFromJSON(e,r){var o=[];return $.each(e,function(e,n){o[e]=new Region(n,r)}),e}function generateColorsForTheRegions(e){var r=e.split("_")[0].toUpperCase(),o=[];return $.each(jsonCountries,function(e,n){if(n.country==r&&n.Regions){var t=n.Regions;$.each(t,function(e,r){o[r.name]=100})}}),o}function buildRegionTooltip(e){var r=regionTooltip;return r=r.replace("name",e.name)}function addRegionsToMap(e){var r=e.split("_")[0].toUpperCase();$.each(jsonCountries,function(e,o){function n(){var e,r={};r[maps.region];for(e in maps.regions)r[e]=t[Math.floor(Math.random()*t.length)];return r}if(o.country==r&&o.Regions){var t=(o.Regions,["#66C2A5","#FC8D62","#8DA0CB","#E78AC3","#A6D854"]);console.log(n()),maps.series.regions[0].setValues(n())}})}var vectorMap,jsonFilters=[],minColorMap,maxColorMap,mDiv,mType,background,filteredMarkers,thereAreMarkers=!1,VectorialMap=function(){};VectorialMap.prototype.createMap=function(e,r,o,n,t,a,i,s,u){if(background=s,mType=i,jsonCountries=[],jsonMarkers=[],mDiv=n,minColorMap=t,maxColorMap=a,"countries"==u)jsonCountries=readCountriesFromJSON(e),jQuery.ajax({url:"../tooltip-templates/country_tooltip.html",success:function(e){countryTooltip=e},async:!1}),jQuery.ajax({url:"../tooltip-templates/region_tooltip.html",success:function(e){regionTooltip=e},async:!1});else{if("markers"!=u)return void console.error("You must give as input a list of markers or countries!");thereAreMarkers=!0,jsonMarkers=readMarkersFromJSON(e),filteredMarkers=jsonMarkers,numMarkers=jsonMarkers.length,jQuery.ajax({url:"../tooltip-templates/marker_tooltip.html",success:function(e){markerTooltip=e},async:!1})}auxColors="countries"==u?generateColorsForTheCountries():[];var l={vertical:!0};markersWithLegend={scale:[minColorMap,maxColorMap],values:[minCount,maxCount],legend:l},markersWithoutLegend={scale:[minColorMap,maxColorMap],values:[minCount,maxCount]},finalMarkersInMap=markersWithLegend,"markers"==u&&(finalMarkersInMap=markersWithoutLegend),map=new jvm.Map({container:$("#"+n),map:mType,backgroundColor:background,onRegionClick:function(e,r){countryCode=r.toLowerCase();var o=countryCode+"_mill_en";switchMap(o)},onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,jsonMarkers[o]);r.html(n)},onRegionTipShow:function(e,r,o){var n=-1;if($.each(jsonCountries,function(e,r){return r.name===o?void(n=r):void 0}),-1!=n){var t=buildCountryTooltip(r,n);r.html(t)}else r.html(r.html())},series:{markers:[finalMarkersInMap],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:auxColors}]}}),"markers"==u&&(filteredMarkers=jsonMarkers,addMarkersToMap())},VectorialMap.prototype.filterOnServer=function(e){$.getJSON("../json/serverFilter.json",function(e){var r=JSON.stringify(e),o="http://serverFiltering.com/?data="+encodeURIComponent(r);o="../json/countries_plus_markers2.json",$.getJSON(o,function(e){jsonCountries=readCountriesFromJSON(e.countries);var r=generateColorsForTheCountries(jsonCountries);reloadMap(r),e.markers&&(jsonMarkers=readMarkersFromJSON(e.markers),addMarkersToMap())})})};var Country=function(e){var r=e.attributes,o=this;$.each(Object.keys(r),function(e,n){o[n]=r[n]}),e.Regions&&(this.Regions=readRegionsFromJSON(e.Regions,e.country)),this.name=e.name,this.count=+e.count,this.desc="abc"},resetFiltersBox=function(){for(var e=0;numFilters>e;e++)$("#fbox"+e).text(""),$("#fbox"+e).val("");var r=generateColorsForTheCountries();reloadMap(r),filteredMarkers=jsonMarkers,addMarkersToMap()},Filter=function(e,r){this.Name=e,this.Values=r},numFilters,currentFilter,countryValueToCheck;VectorialMap.prototype.createSlider=function(){slider=$("#slider").slider(),slider.slider("option","min",minRadius),slider.slider("option","max",maxRadius),slider.slider("option","range",!0),slider.slider("option","animate","slow"),slider.on("slidechange",function(e,r){sliderChanged()}),$("#slider").hide(),$("#minSlider").hide(),$("#maxSlider").hide()};var mappingMarkers=[],mappingCountries=[];VectorialMap.prototype.registerTransformer=function(e,r,o){var r="../mappingJSON/mappingCountriesSample.json",o="../mappingJSON/mappingMarkersSample.json";return r?o?(e="../json/espid-spain.json",void $.getJSON(e,function(e){jsonMapCountries(e,r),jsonMapMarkers(e,o)})):void console.error("you must specify a markers mapping json"):void console.error("you must specify a countries mapping json")};var Marker=function(e){var r=e.attributes,o=this;$.each(Object.keys(r),function(e,n){o[n]=r[n]}),this.country=e.country,this.count=+e.count,this.latitude=e.latitude,this.longitude=e.longitude,this.icon=e.icon,this.desc="abc"},Region=function(e,r){this.Region=e.name,this.country=r,this.desc="just a region..."};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJjb3VudHJpZXMuanMiLCJjcmVhdGVGaWx0ZXJzLmpzIiwiZmlsdGVycy1hdXhpbGlhcnkuanMiLCJmaWx0ZXJzLmpzIiwianNvbi1tYXBwaW5nLmpzIiwibWFwcy1hdXhpbGlhcnkuanMiLCJtYXJrZXJzLmpzIiwibXVsdGlwbGUtZmlsdGVycy5qcyIsInJlZ2lvbnMuanMiXSwibmFtZXMiOlsibWFwUmFuZ2UiLCJ2YWx1ZSIsImxvdzEiLCJoaWdoMSIsImxvdzIiLCJoaWdoMiIsImJ1aWxkQ291bnRyeVRvb2x0aXAiLCJjb3VudHJ5TmFtZSIsImNvdW50cnkiLCJmaW5hbFRvb2x0aXAiLCJjb3VudHJ5VG9vbHRpcCIsIiQiLCJlYWNoIiwiT2JqZWN0Iiwia2V5cyIsImluZGV4IiwiYXR0ciIsInJlcGxhY2UiLCJnZW5lcmF0ZUNvbG9yc0ZvclRoZUNvdW50cmllcyIsImNvdW50cmllcyIsImpzb25Db3VudHJpZXMiLCJjb3VudHJ5Q29sb3JzIiwiY3VycmVudENvdW50cnkiLCJuYW1lIiwiY291bnQiLCJyZWFkQ291bnRyaWVzRnJvbUpTT04iLCJjb3VudHJpZXNKU09OIiwibWluQ291bnQiLCJJbmZpbml0eSIsIm1heENvdW50IiwicHVzaCIsIkNvdW50cnkiLCJDb3VudCIsImZpbmRDb3VudHJ5QnlOYW1lIiwicmV0dXJuQ291bnRyeSIsInJlYWRNaW5NYXgiLCJjb3VudHJpZXNOYW1lcyIsImtleSIsImhhc093blByb3BlcnR5IiwiY3VycmVudENvdW50cnlOYW1lIiwiY3JlYXRlRmlsdGVyc0JveENoZWNrYm94ZXMiLCJhcHBlbmQiLCJqc29uRmlsdGVyc0FycmF5IiwiY3VycmVudEZpbHRlciIsInAiLCJ3YXQiLCJKU09OIiwic3RyaW5naWZ5IiwidXBkYXRlU3RhdHVzIiwiJHAiLCJlbXB0eSIsIndpZGdldCIsImNoZWNrZWQiLCJib3hJRCIsInRhYiIsIlZhbHVlcyIsImN1cnJlbnRWYWx1ZSIsImlkIiwibGFiZWwiLCJpc0NoZWNrZWQiLCJOYW1lIiwidG9Mb3dlckNhc2UiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiZHJvcGRvd25DaGVja2JveCIsImRhdGEiLCJhdXRvc2VhcmNoIiwiaGlkZUhlYWRlciIsInNob3dOYlNlbGVjdGVkIiwidGVtcGxhdGVCdXR0b24iLCJvbiIsInRleHRUb0FwcGVuZCIsImNsaWNrIiwianNvbk9iamVjdCIsIm51bUZpbHRlcnMiLCJsZW5ndGgiLCJlbXB0eUZpbHRlcnMiLCJpIiwic2VsZWN0ZWRJdGVtcyIsImdldFNlbGVjdGVkSXRlbXMiLCJpdGVtc0FycmF5IiwiaiIsImpvaW4iLCJmaWx0ZXIiLCJyZXNldEZpbHRlcnNCb3giLCJjcmVhdGVGaWx0ZXJzQm94V2l0aEVudW1lcmF0aW9uIiwianNvbkZpbHRlcnMiLCJmaWx0ZXJOYW1lIiwidG9BcHBlbmQiLCJwbGFjZWhvbGRlciIsInRvb2x0aXAiLCJ0aXRsZSIsInBsYWNlbWVudCIsImN1cnJlbnRGaWx0ZXJWYWx1ZSIsInZhbCIsImdldEFsbEZpbHRlclZhbHVlcyIsImZpbHRlclZhbHVlIiwicmV0dXJuUGFydHMiLCJTdHJpbmciLCJpbmRleE9mIiwiZW51bWVyYXRpb25QYXJ0cyIsInNwbGl0IiwiY3VycmVudEVudW1lcmF0aW9uIiwicmFuZ2VQYXJ0cyIsImNoZWNrRmlsdGVyVmFsdWVzQXJlVmFsaWQiLCJmaWx0ZXJPYmplY3QiLCJtaW4iLCJtYXgiLCJzdWJQYXJ0cyIsImNoZWNrV2hhdENvdW50cmllc1RvQWRkIiwic2VsZWN0ZWRGaWx0ZXIiLCJjdXJyZW50TmFtZVRvQ2hlY2siLCJjb3VudHJ5VmFsdWVUb0NoZWNrIiwiY2hlY2tXaGF0TWFya2Vyc1RvQWRkIiwibWFya2VycyIsImpzb25NYXJrZXJzIiwiY3VycmVudE1hcmtlciIsImNoZWNrV2hhdENvdW50cmllc01hcmtlcnNUb0FkZCIsImNvdW50cmllc1RvQWRkIiwibWFya2Vyc1RvQWRkIiwiY2hlY2tGaWx0ZXJOYW1lSXNWYWxpZCIsInZhbGlkIiwiZmlsdGVyVmFsdWVzIiwicGFydCIsImNvbnNvbGUiLCJsb2ciLCJyZXNldEZpbHRlcnMiLCJjb2xvcnMiLCJyZWxvYWRNYXAiLCJtYXAiLCJhZGRNYXJrZXIiLCJsYXRMbmciLCJMYXRpdHVkZSIsIkxvbmdpdHVkZSIsImRlc2MiLCJzdHlsZSIsImZpbGwiLCJyIiwibWluUmFkaXVzIiwibWF4UmFkaXVzIiwiZmlsdGVyRnJvbU1lbnVTZWxlY3RlZCIsImlzTmFOIiwiaGlkZSIsInNob3ciLCJzbGlkZXIiLCJtaW5WYWx1ZSIsIm1heFZhbHVlIiwidGV4dCIsInNsaWRlckNoYW5nZWQiLCJjdXJyZW50UmFuZ2UiLCJjdXJyZW50RmlsdGVyTmFtZSIsImZpbHRlclZhbHVlRm9yQ291bnRyeSIsInNlbGVjdGVkTmFtZSIsInJlYWRGaWx0ZXJzRnJvbUpTT04iLCJpbnB1dEZpbHRlcnMiLCJmaWx0ZXJzIiwidmFsdWVzIiwiRmlsdGVyIiwianNvbk1hcENvdW50cmllcyIsImpzb24iLCJjb3VudHJpZXNNYXBwaW5nSnNvbiIsImdldEpTT04iLCJqc29uTWFwcGluZyIsImN1cnJlbnRKU09OIiwibWFwcGluZ0NvdW50cmllcyIsImpzb25NYXBNYXJrZXJzIiwibWFya2Vyc01hcHBpbmdKc29uIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJNYXJrZXIiLCJtYXBwaW5nTWFya2VycyIsInBhcmFtcyIsIm1UeXBlIiwibURpdiIsImp2bSIsIk1hcCIsImJhY2tncm91bmRDb2xvciIsImJhY2tncm91bmQiLCJjb250YWluZXIiLCJvblJlZ2lvbkNsaWNrIiwiZSIsImNvZGUiLCJjb3VudHJ5Q29kZSIsIm5ld01hcCIsInN3aXRjaE1hcCIsIm9uTWFya2VyVGlwU2hvdyIsImJ1aWxkTWFya2VyVG9vbHRpcCIsImh0bWwiLCJvblJlZ2lvblRpcFNob3ciLCJzZWxlY3RlZENvdW50cnkiLCJzZXJpZXMiLCJmaW5hbE1hcmtlcnNJbk1hcCIsInJlZ2lvbnMiLCJzY2FsZSIsIm1pbkNvbG9yTWFwIiwibWF4Q29sb3JNYXAiLCJhdHRyaWJ1dGUiLCJyZW1vdmVUb29sdGlwIiwibWFwVHlwZSIsInJlbW92ZSIsInJlZ2lvbkNvbG9ycyIsImRhdGFUeXBlIiwicmVnaW9uTmFtZSIsImN1cnJlbnRNYXAiLCJzZWxlY3RlZFJlZ2lvbiIsInJlZ2lvbkZvdW5kIiwiY3VycmVudFJlZ2lvbiIsImJ1aWxkUmVnaW9uVG9vbHRpcCIsImF1eENvbG9ycyIsInRoZXJlQXJlTWFya2VycyIsImFkZE1hcmtlcnNUb01hcCIsInJlYWRNYXJrZXJzRnJvbUpTT04iLCJjdXJyZW50SlNPTk1hcmtlciIsImN1cnJlbnRDb3VudFZhbHVlIiwibWFya2Vyc0pTT05BcnJheSIsImZpbHRlcmVkTWFya2VycyIsImN1cnJlbnRNYXJrZXJKU09OIiwiaW1hZ2UiLCJpY29uIiwiYWRkTWFya2VycyIsIm1hcmtlciIsIm1hcmtlclRvb2x0aXAiLCJpbnB1dEFyZ3MiLCJudW1iZXJLZXlzIiwidmFsaWRGaWx0ZXJzIiwiY291bnRyaWVzQnlGaWx0ZXIiLCJBcnJheSIsIm1hcmtlcnNCeUZpbHRlciIsImV4aXQiLCJmaW5hbFBhcnRzIiwiY2hlY2tSZXR1cm4iLCJjb3VudHJpZXNBdXgiLCJtYXJrZXJzQXV4IiwiY3VycmVudEtleSIsImtleVZhbHVlIiwiZmluYWxDb3VudHJpZXMiLCJnZXRDb3VudHJpZXNJbnRlcnNlY3Rpb24iLCJnZXRNYXJrZXJzSW50ZXJzZWN0aW9uIiwibWFya2Vyc0dyb3VwMSIsIm1hcmtlcnNHcm91cDIiLCJtYXJrZXIxIiwibWFya2VyMUNvdW50cnkiLCJtYXJrZXIyIiwibWFya2VyMkNvdW50cnkiLCJjb3VudHJpZXNHcm91cDEiLCJjb3VudHJpZXNHcm91cDIiLCJjb3VudHJ5TmFtZTEiLCJjb3VudHJ5TmFtZTIiLCJhcHBseU11bHRpcGxlRmlsdGVyc1Byb2dyYW1hdHRpY2FsbHkiLCJmaWx0ZXJzVG9BcHBseSIsIm51bUZpbHRlcnNUb0FwcGx5IiwiY291bnRyaWVzSGF2ZUZpbHRlciIsIm1hcmtlcnNIYXZlRmlsdGVyIiwicmVtb3ZlQWxsTWFya2VycyIsImNvdW50cnlJbmRleCIsIm1hcmtlckluZGV4IiwiYXBwbHlNdWx0aXBsZUZpbHRlcnMiLCJzZWxlY3RlZE11bHRpcGxlRmlsdGVycyIsInVuZGVmaW5lZCIsInJlYWRSZWdpb25zRnJvbUpTT04iLCJyZWdpb25zQXJyIiwiUmVnaW9uIiwiZ2VuZXJhdGVDb2xvcnNGb3JUaGVSZWdpb25zIiwiaXNvQ29kZSIsIlJlZ2lvbnMiLCJyZWdpb24iLCJyZWdpb25Ub29sdGlwIiwiYWRkUmVnaW9uc1RvTWFwIiwiZ2VuZXJhdGVDb2xvcnMiLCJtYXBzIiwicGFsZXR0ZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInNldFZhbHVlcyIsInZlY3Rvck1hcCIsIlZlY3RvcmlhbE1hcCIsInByb3RvdHlwZSIsImNyZWF0ZU1hcCIsImlucHV0SlNPTiIsIm1hcERpdiIsIm1pbkNvbG9yIiwibWF4Q29sb3IiLCJqUXVlcnkiLCJhamF4IiwidXJsIiwic3VjY2VzcyIsInJlc3VsdCIsImFzeW5jIiwiZXJyb3IiLCJudW1NYXJrZXJzIiwibGVnZW5kVmFyIiwidmVydGljYWwiLCJtYXJrZXJzV2l0aExlZ2VuZCIsImxlZ2VuZCIsIm1hcmtlcnNXaXRob3V0TGVnZW5kIiwiZmlsdGVyT25TZXJ2ZXIiLCJmaWx0ZXJzSlNPTiIsImZpbHRlcnNTdHJpbmciLCJlbmNvZGVVUklDb21wb25lbnQiLCJjb3VudHJ5T2JqZWN0IiwiYXR0cmlidXRlcyIsInRoaXMiLCJjcmVhdGVTbGlkZXIiLCJldmVudCIsInVpIiwicmVnaXN0ZXJUcmFuc2Zvcm1lciIsImpzb25Mb2NhdGlvbiIsIm1hcmtlck9iamVjdCIsInJlZ2lvbk9iamVjdCJdLCJtYXBwaW5ncyI6IkFBOElBLFFBQUFBLFVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsTUFBQUQsSUFBQUMsRUFBQUQsSUFBQUgsRUFBQUMsSUFBQUMsRUFBQUQsR0M1SEEsUUFBQUkscUJBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQUMs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TUE2SSxFQUFBLCtCQUNBelMsR0FBQXVKLFFBQUFrSixFQUFBLFNBQUFwSixHQUVBRCxpQkFBQUMsRUFBQUMsR0FFQUssZUFBQU4sRUFBQU8sVUFWQTFDLFNBQUFxSyxNQUFBLCtDQUpBckssU0FBQXFLLE1BQUEsNkNFVkEsSUFBQXhILFFBQUEsU0FBQTJJLEdBRUEsR0FBQVAsR0FBQU8sRUFBQSxXQUNBeEYsRUFBQWtGLElBQ0FwUyxHQUFBQyxLQUFBQyxPQUFBQyxLQUFBZ1MsR0FBQSxTQUFBL1IsRUFBQUMsR0FDQTZNLEVBQUE3TSxHQUFBOFIsRUFBQTlSLEtBR0ErUixLQUFBdlMsUUFBQTZTLEVBQUE3UyxRQUNBdVMsS0FBQXZSLE9BQUE2UixFQUFBN1IsTUFDQXVSLEtBQUF2SSxTQUFBNkksRUFBQTdJLFNBQ0F1SSxLQUFBdEksVUFBQTRJLEVBQUE1SSxVQUNBc0ksS0FBQXBGLEtBQUEwRixFQUFBMUYsS0FFQW9GLEtBQUF4SyxLQUFBLE9FZkErSCxPQUFBLFNBQUFnRCxFQUFBOVMsR0FFQXVTLEtBQUF6QyxPQUFBZ0QsRUFBQS9SLEtBQ0F3UixLQUFBdlMsUUFBQUEsRUFFQXVTLEtBQUF4SyxLQUFBIiwiZmlsZSI6ImpzTWFwc0FwaS5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciB2ZWN0b3JNYXA7XG52YXIganNvbkZpbHRlcnMgPSBbXTtcbnZhciBtaW5Db2xvck1hcDtcbnZhciBtYXhDb2xvck1hcDtcbnZhciBtRGl2O1xudmFyIG1UeXBlO1xudmFyIGJhY2tncm91bmQ7XG52YXIgZmlsdGVyZWRNYXJrZXJzO1xudmFyIHRoZXJlQXJlTWFya2VycyA9IGZhbHNlO1xuXG52YXIgVmVjdG9yaWFsTWFwID0gZnVuY3Rpb24oKSB7fTtcblxuLy8gVmVjdG9yaWFsTWFwIFByb3RvdHlwZVxuVmVjdG9yaWFsTWFwLnByb3RvdHlwZS5jcmVhdGVNYXAgPSBmdW5jdGlvbihpbnB1dEpTT04sIG1pblJhZGl1cywgbWF4UmFkaXVzLCBtYXBEaXYsIG1pbkNvbG9yLCBtYXhDb2xvciwgbWFwVHlwZSwgYmFja2dyb3VuZENvbG9yLCBkYXRhVHlwZSkge1xuICAgIGJhY2tncm91bmQgPSBiYWNrZ3JvdW5kQ29sb3I7XG4gICAgbVR5cGUgPSBtYXBUeXBlO1xuICAgIC8vIGNvdW50cmllcyBsaXN0XG4gICAganNvbkNvdW50cmllcyA9IFtdO1xuICAgIC8vIG1hcmtlcnMgbGlzdFxuICAgIGpzb25NYXJrZXJzID0gW107XG4gICAgLy8gaWQgb2YgdGhlIG1hcFxuICAgIG1EaXYgPSBtYXBEaXY7XG4gICAgLy8gYXNzaWduIHRoZSBjb2xvcnMgZm9yIHRoZSByYW5nZVxuICAgIG1pbkNvbG9yTWFwID0gbWluQ29sb3I7XG4gICAgbWF4Q29sb3JNYXAgPSBtYXhDb2xvcjtcblxuICAgIGlmIChkYXRhVHlwZSA9PSAnY291bnRyaWVzJykge1xuICAgICAgICBqc29uQ291bnRyaWVzID0gcmVhZENvdW50cmllc0Zyb21KU09OKGlucHV0SlNPTik7XG4gICAgICAgIC8vIGdldCB0aGUgdG9vbHRpcCB0ZW1wbGF0ZXNcbiAgICAgICAgLy8gQ09VTlRSWSB0b29sdGlwXG4gICAgICAgIGpRdWVyeS5hamF4KHtcbiAgICAgICAgICAgIHVybDogJy4uL3Rvb2x0aXAtdGVtcGxhdGVzL2NvdW50cnlfdG9vbHRpcC5odG1sJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGNvdW50cnlUb29sdGlwID0gcmVzdWx0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFzeW5jOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gUkVHSU9OIHRvb2x0aXBcbiAgICAgICAgalF1ZXJ5LmFqYXgoe1xuICAgICAgICAgICAgdXJsOiAnLi4vdG9vbHRpcC10ZW1wbGF0ZXMvcmVnaW9uX3Rvb2x0aXAuaHRtbCcsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZWdpb25Ub29sdGlwID0gcmVzdWx0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFzeW5jOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGRhdGFUeXBlID09ICdtYXJrZXJzJykge1xuICAgICAgICB0aGVyZUFyZU1hcmtlcnMgPSB0cnVlO1xuICAgICAgICBqc29uTWFya2VycyA9IHJlYWRNYXJrZXJzRnJvbUpTT04oaW5wdXRKU09OKTtcbiAgICAgICAgZmlsdGVyZWRNYXJrZXJzID0ganNvbk1hcmtlcnM7XG4gICAgICAgIG51bU1hcmtlcnMgPSBqc29uTWFya2Vycy5sZW5ndGg7XG4gICAgICAgIC8vIE1BUktFUiB0b29sdGlwXG4gICAgICAgIGpRdWVyeS5hamF4KHtcbiAgICAgICAgICAgIHVybDogJy4uL3Rvb2x0aXAtdGVtcGxhdGVzL21hcmtlcl90b29sdGlwLmh0bWwnLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgbWFya2VyVG9vbHRpcCA9IHJlc3VsdDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3luYzogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignWW91IG11c3QgZ2l2ZSBhcyBpbnB1dCBhIGxpc3Qgb2YgbWFya2VycyBvciBjb3VudHJpZXMhJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBnZXQgdGhlIENvdW50IHZhbHVlIGZvciBlYWNoIENvdW50cnlcbiAgICBhdXhDb2xvcnMgPSAoKGRhdGFUeXBlPT0nY291bnRyaWVzJykgPyBnZW5lcmF0ZUNvbG9yc0ZvclRoZUNvdW50cmllcygpIDogW10pO1xuXG4gICAgLy8gbWFya2VyIGxlZ2VuZFxuICAgIHZhciBsZWdlbmRWYXIgPSB7XG4gICAgICAgIHZlcnRpY2FsOiB0cnVlLFxuICAgICAgICAvL3RpdGxlOiAnQ291bnRyaWVzJyxcbiAgICB9O1xuICAgIG1hcmtlcnNXaXRoTGVnZW5kID0ge1xuICAgICAgICBzY2FsZTogW21pbkNvbG9yTWFwLCBtYXhDb2xvck1hcF0sXG4gICAgICAgIC8vIHJhbmdlIG9mIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggdGhlIENvdW50XG4gICAgICAgIHZhbHVlczogW21pbkNvdW50LCBtYXhDb3VudF0sXG4gICAgICAgIC8vIGFkZCBhIGxlZ2VuZFxuICAgICAgICBsZWdlbmQ6IGxlZ2VuZFZhclxuICAgIH07XG4gICAgbWFya2Vyc1dpdGhvdXRMZWdlbmQgPSB7XG4gICAgICAgIHNjYWxlOiBbbWluQ29sb3JNYXAsIG1heENvbG9yTWFwXSxcbiAgICAgICAgLy8gcmFuZ2Ugb2YgdmFsdWVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgQ291bnRcbiAgICAgICAgdmFsdWVzOiBbbWluQ291bnQsIG1heENvdW50XVxuICAgIH07XG4gICAgZmluYWxNYXJrZXJzSW5NYXAgPSBtYXJrZXJzV2l0aExlZ2VuZDtcbiAgICBpZiAoZGF0YVR5cGUgPT0gJ21hcmtlcnMnKSB7XG4gICAgICAgIGZpbmFsTWFya2Vyc0luTWFwID0gbWFya2Vyc1dpdGhvdXRMZWdlbmQ7XG4gICAgfVxuXG4gICAgLy8gY3JlYXRlIGEgbmV3IE1hcFxuICAgIG1hcCA9IG5ldyBqdm0uTWFwKHtcbiAgICAgICAgY29udGFpbmVyOiAkKCcjJyArIG1hcERpdiksXG4gICAgICAgIC8vIGNvbmZpZ3VyYXRpb24gb2YgdGhlIG1haW4gbWFwXG4gICAgICAgIC8vIHR5cGUgb2YgbWFwICh3b3JsZCwgRXVyb3BlLCBVU0EsIGV0YylcbiAgICAgICAgbWFwOiBtVHlwZSxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBiYWNrZ3JvdW5kLFxuICAgICAgICAvLyB0cmlnZ2VyZWQgd2hlbiBhIG1hcmtlciBpcyBob3ZlcmVkXG4gICAgICAgIG9uUmVnaW9uQ2xpY2s6IGZ1bmN0aW9uKGUsIGNvZGUpIHtcbiAgICAgICAgICAgIGNvdW50cnlDb2RlID0gY29kZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgdmFyIG5ld01hcCA9IGNvdW50cnlDb2RlICsgJ19taWxsX2VuJztcbiAgICAgICAgICAgIHN3aXRjaE1hcChuZXdNYXApO1xuICAgICAgICB9LFxuICAgICAgICBvbk1hcmtlclRpcFNob3c6IGZ1bmN0aW9uKGUsIGxhYmVsLCBpbmRleCkge1xuICAgICAgICAgICAgLy8gc2VsZWN0IHdoYXQgdGV4dCB0byBkaXNwbGF5IHdoZW4gbWFya2VyIGlzIGhvdmVyZWRcbiAgICAgICAgICAgIHZhciBmaW5hbFRvb2x0aXAgPSBidWlsZE1hcmtlclRvb2x0aXAoanNvbk1hcmtlcnMsIGpzb25NYXJrZXJzW2luZGV4XSk7XG4gICAgICAgICAgICBsYWJlbC5odG1sKGZpbmFsVG9vbHRpcCk7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIHRyaWdnZXJlZCB3aGVuIGEgcmVnaW9uIGlzIGhvdmVyZWRcbiAgICAgICAgb25SZWdpb25UaXBTaG93OiBmdW5jdGlvbihlLCBjb3VudHJ5TmFtZSwgY29kZSkge1xuICAgICAgICAgICAgLy8gY29kZSBjb250YWlucyB0aGUgY29kZSBvZiB0aGUgY291bnRyeSAoaS5lLiwgUFQsIEVTLCBGUiwgZXRjKVxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ291bnRyeSA9IC0xO1xuICAgICAgICAgICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeS5uYW1lID09PSBjb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ291bnRyeSA9IGN1cnJlbnRDb3VudHJ5O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRDb3VudHJ5ICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgLy8gZmluZCBvY2N1cnJlbmNlIG9mIHNldmVyYWwgc3RyaW5ncyBpbnNpZGUgdGhlIHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgdmFyIGZpbmFsVG9vbHRpcCA9IGJ1aWxkQ291bnRyeVRvb2x0aXAoY291bnRyeU5hbWUsIHNlbGVjdGVkQ291bnRyeSk7XG4gICAgICAgICAgICAgICAgY291bnRyeU5hbWUuaHRtbChmaW5hbFRvb2x0aXApO1xuICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgY291bnRyeU5hbWUuaHRtbChjb3VudHJ5TmFtZS5odG1sKCkpO1xuICAgICAgICB9LFxuICAgICAgICBzZXJpZXM6IHtcbiAgICAgICAgICAgIG1hcmtlcnM6IFtmaW5hbE1hcmtlcnNJbk1hcF0sXG4gICAgICAgICAgICByZWdpb25zOiBbe1xuICAgICAgICAgICAgICAgIC8vIG1pbiBhbmQgbWF4IHZhbHVlcyBvZiBjb3VudFxuICAgICAgICAgICAgICAgIHNjYWxlOiBbbWluQ29sb3JNYXAsIG1heENvbG9yTWFwXSxcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICdmaWxsJyxcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IGF1eENvbG9yc1xuICAgICAgICAgICAgfV1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gZHJhdyBtYXJrZXJzIG9uIHRoZSBtYXBcbiAgICBpZiAoZGF0YVR5cGUgPT0gJ21hcmtlcnMnKSB7XG4gICAgICAgIGZpbHRlcmVkTWFya2VycyA9IGpzb25NYXJrZXJzO1xuICAgICAgICBhZGRNYXJrZXJzVG9NYXAoKTtcbiAgICB9XG59O1xuXG4vLyBBdXhpbGlhcnkgZnVuY3Rpb24gdG8gdHJhbnNwb3NlIGEgdmFsdWUgZnJvbSBhbiBpbml0aWFsIHJhbmdlIHRvIGFub3RoZXIgcmFuZ2VcbmZ1bmN0aW9uIG1hcFJhbmdlKHZhbHVlLCBsb3cxLCBoaWdoMSwgbG93MiwgaGlnaDIpIHtcbiAgICByZXR1cm4gbG93MiArIChoaWdoMiAtIGxvdzIpICogKHZhbHVlIC0gbG93MSkgLyAoaGlnaDEgLSBsb3cxKTtcbn1cblxuVmVjdG9yaWFsTWFwLnByb3RvdHlwZS5maWx0ZXJPblNlcnZlciA9IGZ1bmN0aW9uKGZpbHRlcnMpIHtcbiAgICAvLyByZWFkIHRoZSBmaWx0ZXJzIGZyb20gYSBKU09OIGZpbGUgKGp1c3QgZm9yIHRlc3RpbmcpXG4gICAgJC5nZXRKU09OKFwiLi4vanNvbi9zZXJ2ZXJGaWx0ZXIuanNvblwiLCBmdW5jdGlvbihmaWx0ZXJzSlNPTikge1xuICAgICAgICAvLyBjb252ZXJ0IHRoZSBmaWx0ZXJzSlNPTiB0byBhIHN0cmluZ1xuICAgICAgICB2YXIgZmlsdGVyc1N0cmluZyA9IEpTT04uc3RyaW5naWZ5KGZpbHRlcnNKU09OKTtcbiAgICAgICAgLy8gYnVpbGQgdGhlIHVybCB0byBzZW5kIHRvIHRoZSBzZXJ2ZXJcbiAgICAgICAgdmFyIHVybCA9ICdodHRwOi8vc2VydmVyRmlsdGVyaW5nLmNvbS8/ZGF0YT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGZpbHRlcnNTdHJpbmcpO1xuICAgICAgICAvLyBGT1IgVEVTVElORyBQVVJQT1NFUyAtIHRoaXMgZmlsZSBjb250YWlucyBhIGRpZmZlcmVudCBzZXRcbiAgICAgICAgLy8gb2YgY291bnRyaWVzIGFuZCBtYXJrZXJzXG4gICAgICAgIHVybCA9ICcuLi9qc29uL2NvdW50cmllc19wbHVzX21hcmtlcnMyLmpzb24nO1xuICAgICAgICAvLyBzZW5kIHJlcXVlc3QgdG8gdGhlIHNlcnZlciB0byBnZXQgdGhlIG1hcmtlcnMgYW5kIGNvdW50cmllc1xuICAgICAgICAkLmdldEpTT04odXJsLCBmdW5jdGlvbihqc29uKSB7XG4gICAgICAgICAgICAvLyBnZXQgdGhlIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlclxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgIFRISVMgQ09ERSBJUyBTRVJWRVIgU0lERVxuICAgICAgICAgICAgdmFyIG15UGFyYW0gPSB1cmwuc3BsaXQoJ2RhdGE9JylbMV07XG4gICAgICAgICAgICB2YXIgcmV0dXJuSlNPTiA9IGRlY29kZVVSSUNvbXBvbmVudChteVBhcmFtKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04ucGFyc2UocmV0dXJuSlNPTikpO1xuICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLy8gcGFyc2UgdGhlIEpTT04gdG8gZ2V0IHRoZSBjb3VudHJpZXMgYW5kIG1hcmtlcnNcbiAgICAgICAgICAgIGpzb25Db3VudHJpZXMgPSByZWFkQ291bnRyaWVzRnJvbUpTT04oanNvbi5jb3VudHJpZXMpO1xuICAgICAgICAgICAgLy8gZ2V0IHRoZSBjb2xvdXJzIGZvciB0aGUgY291bnRyaWVzXG4gICAgICAgICAgICB2YXIgY291bnRyeUNvbG9ycyA9IGdlbmVyYXRlQ29sb3JzRm9yVGhlQ291bnRyaWVzKGpzb25Db3VudHJpZXMpO1xuICAgICAgICAgICAgLy8gZGlzcGxheSB0aGUgY291bnRyaWVzIG9uIHRoZSBtYXBcbiAgICAgICAgICAgIHJlbG9hZE1hcChjb3VudHJ5Q29sb3JzKTtcblxuICAgICAgICAgICAgLy8gaW4gY2FzZSB3ZSBhbHNvIGhhdmUgbWFya2Vyc1xuICAgICAgICAgICAgaWYgKGpzb24ubWFya2Vycykge1xuICAgICAgICAgICAgICAgIC8vIHJlYWQgdGhlIG1hcmtlcnMgZnJvbSB0aGUgSlNPTiBmaWxlXG4gICAgICAgICAgICAgICAganNvbk1hcmtlcnMgPSByZWFkTWFya2Vyc0Zyb21KU09OKGpzb24ubWFya2Vycyk7XG4gICAgICAgICAgICAgICAgLy8gYWRkIG1hcmtlcnMgdG8gdGhlIG1hcFxuICAgICAgICAgICAgICAgIGFkZE1hcmtlcnNUb01hcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbiIsInZhciBDb3VudHJ5ID0gZnVuY3Rpb24oY291bnRyeU9iamVjdCkge1xuICAgIC8vIHJlYWQgZnJvbSB0aGUgSlNPTlxuICAgIC8vIGFkZCBhdHRyaWJ1dGVzXG4gICAgdmFyIGF0dHJpYnV0ZXMgPSBjb3VudHJ5T2JqZWN0W1wiYXR0cmlidXRlc1wiXTtcbiAgICB2YXIgY291bnRyeSA9IHRoaXM7XG4gICAgJC5lYWNoKE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLCBmdW5jdGlvbihpbmRleCwgYXR0cikge1xuICAgICAgICBjb3VudHJ5W2F0dHJdID0gYXR0cmlidXRlc1thdHRyXTtcbiAgICB9KTtcblxuICAgIC8vIHRyeSB0byByZWFkIGl0cyByZWdpb25zIGluIGNhc2UgaGUgaGFzIGFueVxuICAgIGlmIChjb3VudHJ5T2JqZWN0LlJlZ2lvbnMpXG4gICAgICAgIHRoaXMuUmVnaW9ucyA9IHJlYWRSZWdpb25zRnJvbUpTT04oY291bnRyeU9iamVjdC5SZWdpb25zLCBjb3VudHJ5T2JqZWN0LmNvdW50cnkpO1xuXG4gICAgdGhpcy5uYW1lID0gY291bnRyeU9iamVjdC5uYW1lO1xuICAgIC8vICsgaXMgdXNlZCB0byBhc3N1cmUgdGhhdCBhIE51bWJlciBpcyBiZWluZyByZWFkXG4gICAgdGhpcy5jb3VudCA9ICtjb3VudHJ5T2JqZWN0LmNvdW50O1xuICAgIHRoaXMuZGVzYyA9ICdhYmMnO1xufTtcblxuZnVuY3Rpb24gYnVpbGRDb3VudHJ5VG9vbHRpcChjb3VudHJ5TmFtZSwgY291bnRyeSkge1xuICAgIHZhciBmaW5hbFRvb2x0aXAgPSBjb3VudHJ5VG9vbHRpcDtcbiAgICAkLmVhY2goT2JqZWN0LmtleXMoY291bnRyeSksIGZ1bmN0aW9uKGluZGV4LCBhdHRyKSB7XG4gICAgICAgIGZpbmFsVG9vbHRpcCA9IGZpbmFsVG9vbHRpcC5yZXBsYWNlKGF0dHIsIGNvdW50cnlbYXR0cl0pO1xuICAgIH0pO1xuICAgIHJldHVybiBmaW5hbFRvb2x0aXA7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlQ29sb3JzRm9yVGhlQ291bnRyaWVzKGNvdW50cmllcykge1xuICAgIGlmICghY291bnRyaWVzKVxuICAgICAgICBjb3VudHJpZXMgPSBqc29uQ291bnRyaWVzO1xuICAgIHZhciBjb3VudHJ5Q29sb3JzID0gW107XG4gICAgJC5lYWNoKGNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgIGNvdW50cnlDb2xvcnNbY3VycmVudENvdW50cnkubmFtZV0gPSBjdXJyZW50Q291bnRyeS5jb3VudDtcbiAgICB9KTtcbiAgICByZXR1cm4gY291bnRyeUNvbG9ycztcbn07XG5cbmZ1bmN0aW9uIHJlYWRDb3VudHJpZXNGcm9tSlNPTihjb3VudHJpZXNKU09OKSB7XG4gICAgdmFyIGNvdW50cmllcyA9IFtdO1xuXG4gICAgbWluQ291bnQgPSBJbmZpbml0eTtcbiAgICBtYXhDb3VudCA9IC1JbmZpbml0eTtcblxuICAgICQuZWFjaChjb3VudHJpZXNKU09OLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgY291bnRyaWVzLnB1c2gobmV3IENvdW50cnkoY3VycmVudENvdW50cnkpKTtcblxuICAgICAgICBpZiAoY291bnRyaWVzW2luZGV4XS5Db3VudCA+IG1heENvdW50KVxuICAgICAgICAgICAgbWF4Q291bnQgPSBjb3VudHJpZXNbaW5kZXhdLkNvdW50O1xuXG4gICAgICAgIGlmIChjb3VudHJpZXNbaW5kZXhdLkNvdW50IDwgbWluQ291bnQpXG4gICAgICAgICAgICBtaW5Db3VudCA9IGNvdW50cmllc1tpbmRleF0uQ291bnQ7XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvdW50cmllcztcbn1cblxuLy8gcmV0dXJuIHRoZSBjb3VudHJ5IHdob3NlIG5hbWUgaXMgcGFzc2VkIGFzIGFuIGFyZ3VtZW50XG5mdW5jdGlvbiBmaW5kQ291bnRyeUJ5TmFtZShjb3VudHJ5TmFtZSkge1xuICAgIHZhciByZXR1cm5Db3VudHJ5ID0gbnVsbDtcbiAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgIGlmIChjdXJyZW50Q291bnRyeS5jb3VudHJ5ID09IGNvdW50cnlOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm5Db3VudHJ5ID0gY3VycmVudENvdW50cnk7XG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuQ291bnRyeTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXR1cm5Db3VudHJ5O1xufVxuXG4vLyByZWFkIHRoZSBtaW4gYW5kIG1heCBjb3VudCBvZiB0aGUgY291bnRyaXNcbmZ1bmN0aW9uIHJlYWRNaW5NYXgoY291bnRyaWVzTmFtZXMpIHtcbiAgICBtaW5Db3VudCA9IEluZmluaXR5O1xuICAgIG1heENvdW50ID0gLUluZmluaXR5O1xuXG4gICAgLy8gY291bnRyaWVzIG5hbWVzIGlzIGEgSlNPTiBvYmplY3RcbiAgICAvLyByZWFkIGtleXMgdG8gYW4gYXJyYXlcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBjb3VudHJpZXNOYW1lcykge1xuICAgICAgICBpZiAoY291bnRyaWVzTmFtZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBmaW5kIGNvdW50cnkgYnkgbmFtZVxuICAgICQuZWFjaChrZXlzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnlOYW1lKSB7XG4gICAgICAgIC8vIGZpbmQgdGhlIGNvdW50cnkgYnkgaXRzIG5hbWVcbiAgICAgICAgdmFyIGN1cnJlbnRDb3VudHJ5ID0gZmluZENvdW50cnlCeU5hbWUoY3VycmVudENvdW50cnlOYW1lKTtcbiAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5LkNvdW50ID4gbWF4Q291bnQpXG4gICAgICAgICAgICBtYXhDb3VudCA9IGN1cnJlbnRDb3VudHJ5LkNvdW50O1xuXG4gICAgICAgIGlmIChjdXJyZW50Q291bnRyeS5Db3VudCA8IG1pbkNvdW50KVxuICAgICAgICAgICAgbWluQ291bnQgPSBjdXJyZW50Q291bnRyeS5Db3VudDtcbiAgICB9KTtcbn1cbiIsInZhciByZXNldEZpbHRlcnNCb3ggPSBmdW5jdGlvbigpIHtcblxuICAgIC8vIHJlc2V0IGFsbCB0aGUgJ2Zib3hlcydcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUZpbHRlcnM7IGkrKykge1xuICAgICAgICAkKFwiI2Zib3hcIiArIGkpLnRleHQoJycpO1xuICAgICAgICAkKFwiI2Zib3hcIiArIGkpLnZhbCgnJyk7XG4gICAgfVxuXG4gICAgLy8gcmVsb2FkIHRoZSBtYXBcbiAgICB2YXIgY29sb3JzID0gZ2VuZXJhdGVDb2xvcnNGb3JUaGVDb3VudHJpZXMoKTtcbiAgICByZWxvYWRNYXAoY29sb3JzKTtcblxuICAgIGZpbHRlcmVkTWFya2VycyA9IGpzb25NYXJrZXJzO1xuICAgIGFkZE1hcmtlcnNUb01hcCgpO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlRmlsdGVyc0JveENoZWNrYm94ZXMoKSB7XG5cbiAgICAkKCdmaWx0ZXItYm94JykuYXBwZW5kKCc8dWwgY2xhc3M9XCJuYXYgbmF2YmFyLW5hdlwiIGlkPVwiZmlsdGVyQm94Q2hlY2tib3hlc1wiIHN0eWxlPVwiYm9yZGVyLXN0eWxlOiBzb2xpZDsgYm9yZGVyLXdpZHRoOiAycHg7XCI+PC91bD4nKTtcblxuICAgIC8vIGdldCBhbGwgdGhlIGZpbHRlcnNcbiAgICAkLmVhY2goanNvbkZpbHRlcnNBcnJheSwgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRGaWx0ZXIpIHtcbiAgICAgICAgdmFyIGJveElEID0gJyNib3gnICsgKGluZGV4ICsgMSk7XG4gICAgICAgIC8vIGFwcGVuZCB0byB0aGUgSFRNTFxuICAgICAgICAkKCcjZmlsdGVyQm94Q2hlY2tib3hlcycpLmFwcGVuZCgnPGxpIGNsYXNzPVwiY29sLXNtLTZcIiBpZD1cImJveCcgKyAoaW5kZXggKyAxKSArICdcIiBjbGFzcz1cImRyb3Bkb3duLWNoZWNrYm94LWV4YW1wbGUgZHJvcGRvd24tY2hlY2tib3ggZHJvcGRvd25cIj48L2xpPicpO1xuXG4gICAgICAgIC8vIGZpbGwgdGhlIHRhYnMgZm9yIHRoZSB5ZWFyIGZpbHRlclxuICAgICAgICB2YXIgdGFiID0gW107XG4gICAgICAgICQuZWFjaChjdXJyZW50RmlsdGVyLlZhbHVlcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRWYWx1ZSkge1xuICAgICAgICAgICAgdGFiLnB1c2goe1xuICAgICAgICAgICAgICAgICdpZCc6IGluZGV4ICsgMSxcbiAgICAgICAgICAgICAgICAnbGFiZWwnOiBjdXJyZW50VmFsdWUsXG4gICAgICAgICAgICAgICAgJ2lzQ2hlY2tlZCc6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gcCh3YXQpIHtcbiAgICAgICAgICAgIHJldHVybiAnPHA+JyArIEpTT04uc3RyaW5naWZ5KHdhdCkgKyAnPC9wPic7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVTdGF0dXMoKSB7XG4gICAgICAgICAgICB2YXIgJHAgPSAkKCdwLnN0YXR1cycpLmVtcHR5KCk7XG4gICAgICAgICAgICAkcC5hcHBlbmQocCh3aWRnZXQuY2hlY2tlZCgpKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkcm9wZG93biB3aXRoIGNoZWNrYm94ZXMgaW5pdGlhbGl6YXRpb25cbiAgICAgICAgdmFyIG5hbWUgPSBjdXJyZW50RmlsdGVyLk5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgbmFtZSA9IG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpO1xuICAgICAgICAkKGJveElEKS5kcm9wZG93bkNoZWNrYm94KHtcbiAgICAgICAgICAgIGRhdGE6IHRhYixcbiAgICAgICAgICAgIGF1dG9zZWFyY2g6IHRydWUsXG4gICAgICAgICAgICBoaWRlSGVhZGVyOiBmYWxzZSxcbiAgICAgICAgICAgIC8vIHNob3cgbnVtYmVyIG9mIHNlbGVjdGVkIGl0ZW1zXG4gICAgICAgICAgICBzaG93TmJTZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgICB0ZW1wbGF0ZUJ1dHRvbjogJzxhIGNsYXNzPVwiZHJvcGRvd24tY2hlY2tib3gtdG9nZ2xlXCIgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiIGhyZWY9XCIjXCI+JyArIG5hbWUgKyAnPHNwYW4gY2xhc3M9XCJkcm9wZG93bi1jaGVja2JveC1uYnNlbGVjdGVkXCI+PC9zcGFuPjxiIGNsYXNzPVwiY2FyZXRcIj48L2I+J1xuICAgICAgICB9KTtcbiAgICAgICAgd2lkZ2V0ID0gJChib3hJRCkuZGF0YSgnZHJvcGRvd25DaGVja2JveCcpO1xuXG4gICAgICAgICQoJ2JvZHknKS5vbignY2hhbmdlOmRyb3Bkb3duLWNoZWNrYm94IGNoZWNrZWQgY2hlY2tlZDphbGwgY2hlY2s6YWxsIHVuY2hlY2s6YWxsIGNoZWNrOmNoZWNrZWQgdW5jaGVjazpjaGVja2VkJywgdXBkYXRlU3RhdHVzKCkpO1xuICAgICAgICB1cGRhdGVTdGF0dXMoKTtcbiAgICB9KTtcblxuICAgIC8vIGFwcGVuZCBmaWx0ZXIgYW5kIHJlc2V0IGJ1dHRvblxuXG4gICAgdmFyIHRleHRUb0FwcGVuZCA9ICc8ZGl2IGlkPVwiZmlsdGVyc19ib3hcIiBjbGFzcz1cInJvdyBjb2wtc20tMTJcIj4nICtcbiAgICAgICAgJzxidXR0b24gaWQ9XCJmaWx0ZXJfYm94X2FwcGx5X2ZpbHRlcnNcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgY29sLXNtLTQgY29sLXNtLW9mZnNldC0xXCI+RmlsdGVyPC9idXR0b24+JyArXG4gICAgICAgICc8YnV0dG9uIGlkPVwiZmlsdGVyX2JveF9yZXNldF9maWx0ZXJzXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGNvbC1zbS00IGNvbC1zbS1vZmZzZXQtMVwiPlJlc2V0PC9idXR0b24+PC9kaXY+JztcbiAgICAkKCcjZmlsdGVyQm94Q2hlY2tib3hlcycpLmFwcGVuZCh0ZXh0VG9BcHBlbmQpO1xuXG4gICAgLy8gdHJpZ2dlcmVkIHdoZW4gdGhlIHNlYXJjaCBidXR0b24gaXMgY2xpY2tlZFxuICAgICQoXCIjZmlsdGVyX2JveF9hcHBseV9maWx0ZXJzXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIganNvbk9iamVjdCA9IHt9O1xuICAgICAgICB2YXIgbnVtRmlsdGVycyA9IGpzb25GaWx0ZXJzQXJyYXkubGVuZ3RoO1xuICAgICAgICB2YXIgZW1wdHlGaWx0ZXJzID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBqc29uRmlsdGVyc0FycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBjdXJyZW50IGFuZCBuZXh0IGZpbHRlciBpZCdzXG4gICAgICAgICAgICB2YXIgY3VycmVudEZpbHRlciA9IFwiI2JveFwiICsgKGkgKyAxKTtcbiAgICAgICAgICAgIC8vIGN1cnJlbnQgZmlsdGVyIHZhbHVlcyAtIHNlbGVjdGVkIGl0ZW1zXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRJdGVtcyA9IGdldFNlbGVjdGVkSXRlbXMoY3VycmVudEZpbHRlcik7XG4gICAgICAgICAgICB2YXIgaXRlbXNBcnJheSA9IFtdO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhzZWxlY3RlZEl0ZW1zKTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwga2V5cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGl0ZW1zQXJyYXkucHVzaChzZWxlY3RlZEl0ZW1zW2tleXNbal1dLmxhYmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHdlIGhhdmUgYW55IGZpbHRlcmluZyB0byBhcHBseSBvciBub3RcbiAgICAgICAgICAgIGlmIChrZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBqc29uT2JqZWN0W2pzb25GaWx0ZXJzQXJyYXlbaV0uTmFtZV0gPSBpdGVtc0FycmF5LmpvaW4oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZW1wdHlGaWx0ZXJzKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXZvaWQgdGhlIHVzZXIgc2VsZWN0aW5nIHRoZSBGaWx0ZXIgYnV0dG9uIHdpdGhvdXQgaW5wdXRpbmcgYW55IGRhdGFcbiAgICAgICAgaWYgKGVtcHR5RmlsdGVycyAhPSBudW1GaWx0ZXJzKSB7XG4gICAgICAgICAgICBmaWx0ZXIoanNvbk9iamVjdCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIHRyaWdnZXJlZCB3aGVuIHRoZSByZXNldCBidXR0b24gaXMgY2xpY2tlZFxuICAgICQoXCIjZmlsdGVyX2JveF9yZXNldF9maWx0ZXJzXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNldEZpbHRlcnNCb3goKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0U2VsZWN0ZWRJdGVtcyhib3hJRCkge1xuICAgIHJldHVybiAkKGJveElEKS5kcm9wZG93bkNoZWNrYm94KFwiY2hlY2tlZFwiKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRmlsdGVyc0JveFdpdGhFbnVtZXJhdGlvbihqc29uRmlsdGVycykge1xuXG4gICAgdmFyIG51bUZpbHRlcnMgPSBqc29uRmlsdGVycy5sZW5ndGg7XG4gICAgLy8gY3JlYXRlIGZpbHRlcnMgYm94IHdpdGggZW51bWVyYXRpb25cbiAgICAkLmVhY2goanNvbkZpbHRlcnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50RmlsdGVyKSB7XG4gICAgICAgIHZhciBmaWx0ZXJOYW1lID0gY3VycmVudEZpbHRlci5OYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGZpbHRlck5hbWUgPSBmaWx0ZXJOYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZmlsdGVyTmFtZS5zbGljZSgxKTtcbiAgICAgICAgdmFyIGJ1dHRvbklkID0gJ2Ryb3Bkb3duJyArIGluZGV4ICsgJ2J1dHRvbic7XG4gICAgICAgIHZhciB1bElkID0gJ2Ryb3Bkb3duJyArIGluZGV4O1xuICAgICAgICB2YXIgdG9BcHBlbmQgPSAnJztcblxuICAgICAgICAvLyBmaWx0ZXIgdGV4dFxuICAgICAgICB0b0FwcGVuZCArPSAnPHA+PGI+JyArIGZpbHRlck5hbWUgKyAnOjwvYj48L3A+JztcbiAgICAgICAgdG9BcHBlbmQgKz0gJzxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+JztcbiAgICAgICAgdG9BcHBlbmQgKz0gJzxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJmYm94JyArIGluZGV4ICsgJ1wiJztcbiAgICAgICAgLy8gYnVpbGQgdGhlIHBsYWNlaG9sZGVyXG4gICAgICAgIHZhciBwbGFjZWhvbGRlciA9IGN1cnJlbnRGaWx0ZXIuVmFsdWVzXG4gICAgICAgIHRvQXBwZW5kICs9ICdwbGFjZWhvbGRlcj1cIicgKyBwbGFjZWhvbGRlciArICdcIiArPic7XG4gICAgICAgIHRvQXBwZW5kICs9ICc8L2Rpdj4nO1xuXG4gICAgICAgICQoJ2ZpbHRlci1ib3gnKS5hcHBlbmQodG9BcHBlbmQpO1xuXG4gICAgICAgIC8vIGFkZCBCb290c3RyYXAgdG9vbHRpcCB0byB0aGUgZmlsdGVycyBib3hcbiAgICAgICAgJCgnI2ZpbHRlci1ib3gnKS50b29sdGlwKHtcbiAgICAgICAgICAgIHRpdGxlOiBcIlVzZSB0aGlzIGZpbHRlciBib3ggdG8gZmlsdGVyIGJ5IG11bHRpcGxlIGZpbHRlcnNcIixcbiAgICAgICAgICAgIHBsYWNlbWVudDogXCJib3R0b21cIlxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIGFkZCB0aGUgYnV0dG9uc1xuICAgIHZhciB0ZXh0VG9BcHBlbmQgPSAnPGRpdiBpZD1cImZpbHRlcnNfYm94XCI+JyArXG4gICAgICAgICc8YnV0dG9uIGlkPVwiZmlsdGVyX2JveF9hcHBseV9maWx0ZXJzXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGNvbC1zbS00IGNvbC1zbS1vZmZzZXQtMVwiPkZpbHRlcjwvYnV0dG9uPicgK1xuICAgICAgICAnPGJ1dHRvbiBpZD1cImZpbHRlcl9ib3hfcmVzZXRfZmlsdGVyc1wiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBjb2wtc20tNCBjb2wtc20tb2Zmc2V0LTFcIj5SZXNldDwvYnV0dG9uPjwvZGl2Pic7XG4gICAgJCgnZmlsdGVyLWJveCcpLmFwcGVuZCh0ZXh0VG9BcHBlbmQpO1xuXG4gICAgLy8gdHJpZ2dlcmVkIHdoZW4gdGhlIHNlYXJjaCBidXR0b24gaXMgY2xpY2tlZFxuICAgICQoXCIjZmlsdGVyX2JveF9hcHBseV9maWx0ZXJzXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIganNvbk9iamVjdCA9IHt9O1xuICAgICAgICB2YXIgbnVtRmlsdGVycyA9IGpzb25GaWx0ZXJzLmxlbmd0aDtcbiAgICAgICAgdmFyIGVtcHR5RmlsdGVycyA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwganNvbkZpbHRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vIGN1cnJlbnQgYW5kIG5leHQgZmlsdGVyIGlkJ3NcbiAgICAgICAgICAgIHZhciBjdXJyZW50RmlsdGVyID0gXCIjZmJveFwiICsgaTtcbiAgICAgICAgICAgIC8vIGN1cnJlbnQgYW5kIG5leHQgZmlsdGVyIHZhbHVlc1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRGaWx0ZXJWYWx1ZSA9ICQoY3VycmVudEZpbHRlcikudmFsKCk7XG4gICAgICAgICAgICAvLyBjaGVjayBpZiB3ZSBoYXZlIGFueSBmaWx0ZXJpbmcgdG8gYXBwbHkgb3Igbm90XG4gICAgICAgICAgICBpZiAoY3VycmVudEZpbHRlclZhbHVlICE9PSAnJykge1xuICAgICAgICAgICAgICAgIGpzb25PYmplY3RbanNvbkZpbHRlcnNbaV0uTmFtZV0gPSBjdXJyZW50RmlsdGVyVmFsdWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVtcHR5RmlsdGVycysrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGF2b2lkIHRoZSB1c2VyIHNlbGVjdGluZyB0aGUgRmlsdGVyIGJ1dHRvbiB3aXRob3V0IGlucHV0aW5nIGFueSBkYXRhXG4gICAgICAgIGlmIChlbXB0eUZpbHRlcnMgIT0gbnVtRmlsdGVycykge1xuICAgICAgICAgICAgZmlsdGVyKGpzb25PYmplY3QpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyB0cmlnZ2VyZWQgd2hlbiB0aGUgcmVzZXQgYnV0dG9uIGlzIGNsaWNrZWRcbiAgICAkKFwiI2ZpbHRlcl9ib3hfcmVzZXRfZmlsdGVyc1wiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzZXRGaWx0ZXJzQm94KCk7XG4gICAgfSk7XG59XG4iLCJmdW5jdGlvbiBnZXRBbGxGaWx0ZXJWYWx1ZXMoZmlsdGVyVmFsdWUpIHtcbiAgICB2YXIgcmV0dXJuUGFydHMgPSBbXTtcblxuICAgIC8vIGNoZWNrIGlmIHdlIGhhdmUgYW4gZW51bWVyYXRpb24gKGNvbW1hLXNlcGFyYXRlZCB2YWx1ZXMgYW5kL29yIHJhbmdlcylcbiAgICBpZiAoU3RyaW5nKGZpbHRlclZhbHVlKS5pbmRleE9mKFwiLFwiKSAhPSAtMSkge1xuXG4gICAgICAgIC8vIGdldCBhbGwgdGhlIGVudW1lcmF0ZWQgdmFsdWVzIChjYW4gYmUgc2luZ3VsYXIgb3IgcmFuZ2UpXG4gICAgICAgIHZhciBlbnVtZXJhdGlvblBhcnRzID0gU3RyaW5nKGZpbHRlclZhbHVlKS5zcGxpdChcIixcIik7XG5cbiAgICAgICAgLy8gY2hlY2sgaWYgd2UgaGF2ZSBhIHNpbXBsZSB2YWx1ZSBvciBhIHJhbmdlXG4gICAgICAgICQuZWFjaChlbnVtZXJhdGlvblBhcnRzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEVudW1lcmF0aW9uKSB7XG5cbiAgICAgICAgICAgIC8vIGlmIHdlIGhhdmUgYSByYW5nZS4uLlxuICAgICAgICAgICAgaWYgKGN1cnJlbnRFbnVtZXJhdGlvbi5pbmRleE9mKFwiLVwiKSAhPSAtMSkge1xuXG4gICAgICAgICAgICAgICAgLy8gYWxsIHRoZSByYW5nZSBwYXJ0c1xuICAgICAgICAgICAgICAgIHZhciByYW5nZVBhcnRzID0gU3RyaW5nKGN1cnJlbnRFbnVtZXJhdGlvbikuc3BsaXQoXCItXCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGV4dHJlbWUgdmFsdWVzIGFyZSB2YWxpZFxuICAgICAgICAgICAgICAgIGNoZWNrRmlsdGVyVmFsdWVzQXJlVmFsaWQoZmlsdGVyT2JqZWN0LCByYW5nZVBhcnRzKTtcblxuICAgICAgICAgICAgICAgIC8vIGdldCBhbGwgdGhlIHZhbHVlcyBiZXR3ZWVuIHRob3NlIHR3byBudW1iZXJzXG4gICAgICAgICAgICAgICAgLy8gYW5kIGFkZCB0aGVtXG4gICAgICAgICAgICAgICAgdmFyIG1pbiA9IHJhbmdlUGFydHNbMF07XG4gICAgICAgICAgICAgICAgdmFyIG1heCA9IHJhbmdlUGFydHNbMV07XG4gICAgICAgICAgICAgICAgZm9yICg7IG1pbiA8PSBtYXg7IG1pbisrKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5QYXJ0cy5wdXNoKG1pbik7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBhIHJhbmdlXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIHNpbmdsZSB2YWx1ZSBpcyB2YWxpZFxuICAgICAgICAgICAgICAgIHJldHVyblBhcnRzLnB1c2goY3VycmVudEVudW1lcmF0aW9uKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBqdXN0IGEgc2luZ2xlIHBhcnRcbiAgICAgICAgaWYgKGZpbHRlclZhbHVlLmluZGV4T2YoXCItXCIpICE9IC0xKSB7XG4gICAgICAgICAgICAvLyB3ZSBoYXZlIGEgcmFuZ2VcbiAgICAgICAgICAgIHZhciBzdWJQYXJ0cyA9IFN0cmluZyhmaWx0ZXJWYWx1ZSkuc3BsaXQoXCItXCIpO1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGV4dHJlbWUgdmFsdWVzIGFyZSB2YWxpZFxuICAgICAgICAgICAgY2hlY2tGaWx0ZXJWYWx1ZXNBcmVWYWxpZChmaWx0ZXJPYmplY3QsIHN1YlBhcnRzKTtcbiAgICAgICAgICAgIC8vIGdldCBhbGwgdGhlIHZhbHVlcyBiZXR3ZWVuIHRob3NlIHR3byBudW1iZXJzXG4gICAgICAgICAgICB2YXIgbWluID0gc3ViUGFydHNbMF07XG4gICAgICAgICAgICB2YXIgbWF4ID0gc3ViUGFydHNbMV07XG4gICAgICAgICAgICBmb3IgKDsgbWluIDw9IG1heDsgbWluKyspIHtcbiAgICAgICAgICAgICAgICByZXR1cm5QYXJ0cy5wdXNoKG1pbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgcmV0dXJuUGFydHMucHVzaChmaWx0ZXJWYWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiByZXR1cm5QYXJ0cztcbn1cblxuZnVuY3Rpb24gY2hlY2tXaGF0Q291bnRyaWVzVG9BZGQoc2VsZWN0ZWRGaWx0ZXIsIGZpbHRlclZhbHVlKSB7XG5cbiAgICB2YXIgY291bnRyaWVzID0gW107XG4gICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuICAgICAgICAvLyBjaGVjayBpZiBhbnkgb2YgdGhlIG5hbWVzIGlzIGVxdWFsIHRvIHRoZSBzZWxlY3RlZCBmaWx0ZXJcbiAgICAgICAgLy8gdHJ5IHRvIHJlYWQgYWxsIHRoZSBuYW1lcyBhbmQgdmFsdWVzXG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnROYW1lVG9DaGVjayA9ICduYW1lJyArIGk7XG4gICAgICAgICAgICB2YXIgY3VycmVudFZhbHVlID0gJ3ZhbHVlJyArIGk7XG4gICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgQ291bnRyeSBoYXMgdGhhdCBuYW1lXG4gICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnlbY3VycmVudE5hbWVUb0NoZWNrXSkge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeVtjdXJyZW50VmFsdWVdID09IGZpbHRlclZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50cnlWYWx1ZVRvQ2hlY2sgPSBjdXJyZW50VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGJ5IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeVtjdXJyZW50VmFsdWVdID09IGZpbHRlclZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRyaWVzW2N1cnJlbnRDb3VudHJ5LmNvdW50cnldID0gY3VycmVudENvdW50cnkuQ291bnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gd2hpbGUgKHRydWUpXG4gICAgfSk7XG4gICAgcmV0dXJuIGNvdW50cmllcztcbn07XG5cbmZ1bmN0aW9uIGNoZWNrV2hhdE1hcmtlcnNUb0FkZChzZWxlY3RlZEZpbHRlciwgZmlsdGVyVmFsdWUpIHtcbiAgICB2YXIgbWFya2VycyA9IFtdO1xuICAgIC8vIGFkZCBvbmx5IHRoZSBtYXJrZXJzIHdobyBoYXZlIHRoYXQgZmlsdGVyIHZhbHVlXG4gICAgJC5lYWNoKGpzb25NYXJrZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudE1hcmtlcikge1xuICAgICAgICAkLmVhY2goT2JqZWN0LmtleXMoY3VycmVudE1hcmtlciksIGZ1bmN0aW9uKGluZGV4LCBhdHRyKSB7XG4gICAgICAgICAgICBpZiAoYXR0ci50b0xvd2VyQ2FzZSgpID09IHNlbGVjdGVkRmlsdGVyLk5hbWUudG9Mb3dlckNhc2UoKSAmJiBjdXJyZW50TWFya2VyW2F0dHJdID09IGZpbHRlclZhbHVlKVxuICAgICAgICAgICAgICAgIG1hcmtlcnMucHVzaChjdXJyZW50TWFya2VyKVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gbWFya2Vycztcbn07XG5cbmZ1bmN0aW9uIGNoZWNrV2hhdENvdW50cmllc01hcmtlcnNUb0FkZChzZWxlY3RlZEZpbHRlciwgZmlsdGVyVmFsdWUpIHtcbiAgICB2YXIgY291bnRyaWVzVG9BZGQgPSBbXTtcbiAgICB2YXIgbWFya2Vyc1RvQWRkID0gW107XG5cbiAgICAvLyBjaGVjayB3aGF0IGNvdW50cmllcyB0byBjb2xvdXJcbiAgICBjb3VudHJpZXNUb0FkZCA9IGNoZWNrV2hhdENvdW50cmllc1RvQWRkKHNlbGVjdGVkRmlsdGVyLCBmaWx0ZXJWYWx1ZSk7XG4gICAgbWFya2Vyc1RvQWRkID0gY2hlY2tXaGF0TWFya2Vyc1RvQWRkKHNlbGVjdGVkRmlsdGVyLCBmaWx0ZXJWYWx1ZSk7XG5cbiAgICByZXR1cm4gW2NvdW50cmllc1RvQWRkLCBtYXJrZXJzVG9BZGRdO1xufVxuXG5mdW5jdGlvbiBjaGVja0ZpbHRlck5hbWVJc1ZhbGlkKGZpbHRlck5hbWUpIHtcbiAgICB2YXIgdmFsaWQgPSBmYWxzZTtcbiAgICAkLmVhY2goanNvbkZpbHRlcnNBcnJheSwgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRGaWx0ZXIpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRGaWx0ZXIuTmFtZS50b0xvd2VyQ2FzZSgpID09PSBmaWx0ZXJOYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGZpbHRlck9iamVjdCA9IGN1cnJlbnRGaWx0ZXI7XG4gICAgICAgICAgICB2YWxpZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdmFsaWQ7XG59XG5cbmZ1bmN0aW9uIGNoZWNrRmlsdGVyVmFsdWVzQXJlVmFsaWQoZmlsdGVyLCBmaWx0ZXJWYWx1ZXMpIHtcbiAgICB2YXIgdmFsaWQgPSBmYWxzZTtcbiAgICAkLmVhY2goZmlsdGVyVmFsdWVzLCBmdW5jdGlvbihpbmRleCwgcGFydCkge1xuICAgICAgICAvLyBjaGVjayBpZiB0aGUgY3VycmVudCB2YWx1ZSBpcyB2YWxpZFxuICAgICAgICAkLmVhY2goZmlsdGVyT2JqZWN0LlZhbHVlcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRWYWx1ZSkge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRWYWx1ZSA9PSBwYXJ0KSB7XG4gICAgICAgICAgICAgICAgdmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghdmFsaWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJbnZhbGlkIHZhbHVlIGZvciB0aGUgZmlsdGVyOiAnICsgcGFydCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdmFsaWQ7XG59XG4iLCIvLyBjcmVhdGUgYSBuZXcgRklsdGVyIG9iamVjdFxudmFyIEZpbHRlciA9IGZ1bmN0aW9uKE5hbWUsIFZhbHVlcykge1xuXHR0aGlzLk5hbWUgPSBOYW1lO1xuXHR0aGlzLlZhbHVlcyA9IFZhbHVlcztcbn07XG5cbi8vIG51bWJlciBvZiBmaWx0ZXJzXG52YXIgbnVtRmlsdGVycztcbnZhciBjdXJyZW50RmlsdGVyO1xudmFyIGNvdW50cnlWYWx1ZVRvQ2hlY2s7XG5cbmZ1bmN0aW9uIHJlc2V0RmlsdGVycygpIHtcblx0Ly8gY29sb3IgdGhlIG9yaWdpbmFsIG1hcFxuXHR2YXIgY29sb3JzID0gZ2VuZXJhdGVDb2xvcnNGb3JUaGVDb3VudHJpZXMoKTtcblx0cmVsb2FkTWFwKGNvbG9ycyk7XG5cblx0Ly8gYWRkIG9ubHkgdGhlIG1hcmtlcnMgd2hvIGhhdmUgdGhhdCBmaWx0ZXIgdmFsdWVcblx0JC5lYWNoKGpzb25NYXJrZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudE1hcmtlcikge1xuXHRcdG1hcC5hZGRNYXJrZXIoaW5kZXgsIHtcblx0XHRcdGxhdExuZzogW2N1cnJlbnRNYXJrZXIuTGF0aXR1ZGUsIGN1cnJlbnRNYXJrZXIuTG9uZ2l0dWRlXSxcblx0XHRcdG5hbWU6IGN1cnJlbnRNYXJrZXIuZGVzYyxcblxuXHRcdFx0Ly8gc2V0IHRoZSBzdHlsZSBmb3IgdGhpcyBtYXJrZXJcblx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdGZpbGw6ICdncmVlbicsXG5cdFx0XHRcdHI6IG1hcFJhbmdlKGN1cnJlbnRNYXJrZXIuQ291bnQsIG1pbkNvdW50LCBtYXhDb3VudCwgbWluUmFkaXVzLCBtYXhSYWRpdXMpXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0pO1xufVxuXG5WZWN0b3JpYWxNYXAucHJvdG90eXBlLmNyZWF0ZVNsaWRlciA9IGZ1bmN0aW9uKCkge1xuXG4gICAgLy8galF1ZXJ5VUkgc2xpZGVyXG4gICAgc2xpZGVyID0gJChcIiNzbGlkZXJcIikuc2xpZGVyKCk7XG5cbiAgICAvLyBzZXQgbWF4IGFuZCBtaW4gdmFsdWUgZm9yIHRoZSBzbGlkZXJcbiAgICBzbGlkZXIuc2xpZGVyKFwib3B0aW9uXCIsIFwibWluXCIsIG1pblJhZGl1cyk7XG4gICAgc2xpZGVyLnNsaWRlcihcIm9wdGlvblwiLCBcIm1heFwiLCBtYXhSYWRpdXMpO1xuXG4gICAgLy8gYWxsb3cgdGhlIHVzZXIgdG8gc2VsZWN0IGEgcmFuZ2VcbiAgICBzbGlkZXIuc2xpZGVyKFwib3B0aW9uXCIsIFwicmFuZ2VcIiwgdHJ1ZSk7XG5cbiAgICAvLyB3aGVuIHVzZXIgY2xpY2tzIHRoZSBzbGlkZXIsIGl0IHdpbGwgYW5pbWF0ZSB0byB0aGUgY2xpY2tlZCBwb3NpdGlvblxuICAgIHNsaWRlci5zbGlkZXIoXCJvcHRpb25cIiwgXCJhbmltYXRlXCIsIFwic2xvd1wiKTtcblxuICAgIC8vIGFmdGVyIHNlbGVjdGluZyBhIG5ldyBzbGlkZXIgdmFsdWVcbiAgICBzbGlkZXIub24oXCJzbGlkZWNoYW5nZVwiLCBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAgICAgc2xpZGVyQ2hhbmdlZCgpO1xuICAgIH0pO1xuXG4gICAgLy8gaGlkZSBhbGwgdGhlIGNvbXBvbmVudHMgdW50aWwgdGhleSBhcmUgaGlkZGVuXG4gICAgJCgnI3NsaWRlcicpLmhpZGUoKTtcbiAgICAkKCcjbWluU2xpZGVyJykuaGlkZSgpO1xuICAgICQoJyNtYXhTbGlkZXInKS5oaWRlKCk7XG59XG5cbmZ1bmN0aW9uIGZpbHRlckZyb21NZW51U2VsZWN0ZWQoc2VsZWN0ZWRGaWx0ZXIsIGZpbHRlclZhbHVlKSB7XG5cblx0Y3VycmVudEZpbHRlciA9IHNlbGVjdGVkRmlsdGVyO1xuXG5cdC8vIGNoZWNrIHdoYXQgY291bnRyaWVzIHRvIGFkZCB0byB0aGUgbWFwXG5cdHZhciBjb3VudHJpZXMgPSBjaGVja1doYXRDb3VudHJpZXNUb0FkZChzZWxlY3RlZEZpbHRlciwgZmlsdGVyVmFsdWUpO1xuXG5cdC8vIHJlbG9hZCB0aGUgbWFwIGFuZCBhZGQgdGhvc2UgY291bnRyaWVzXG5cdHJlbG9hZE1hcChjb3VudHJpZXMpO1xuXG5cdC8vIGFkZCBvbmx5IHRoZSBtYXJrZXJzIHdobyBoYXZlIHRoYXQgZmlsdGVyIHZhbHVlXG5cdCQuZWFjaChqc29uTWFya2VycywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcblx0XHQvLyBjaGVjayBpZiBhbnkgb2YgdGhlIG5hbWVzIGlzIGVxdWFsIHRvIHRoZSBzZWxlY3RlZCBmaWx0ZXJcblx0XHQvLyB0cnkgdG8gcmVhZCBhbGwgdGhlIG5hbWVzIGFuZCB2YWx1ZXNcblx0XHR2YXIgaSA9IDA7XG5cdFx0ZG8ge1xuXHRcdFx0aSsrO1xuXHRcdFx0dmFyIGN1cnJlbnROYW1lVG9DaGVjayA9ICdOYW1lJyArIGk7XG5cdFx0XHR2YXIgY3VycmVudFZhbHVlID0gJ1ZhbHVlJyArIGk7XG5cdFx0XHQvLyBjaGVjayBpZiB0aGUgQ291bnRyeSBoYXMgdGhhdCBuYW1lXG5cdFx0XHRpZihjdXJyZW50TWFya2VyW2N1cnJlbnROYW1lVG9DaGVja10pIHtcblx0XHRcdFx0aWYoY3VycmVudE1hcmtlcltjdXJyZW50TmFtZVRvQ2hlY2tdID09PSBzZWxlY3RlZEZpbHRlci5OYW1lKSB7XG5cdFx0XHRcdFx0aWYoY3VycmVudE1hcmtlcltjdXJyZW50VmFsdWVdID09PSBmaWx0ZXJWYWx1ZSkge1xuXHRcdFx0XHRcdFx0bWFwLmFkZE1hcmtlcihpbmRleCwge1xuXHRcdFx0XHRcdFx0XHRsYXRMbmc6IFtjdXJyZW50TWFya2VyLkxhdGl0dWRlLCBjdXJyZW50TWFya2VyLkxvbmdpdHVkZV0sXG5cdFx0XHRcdFx0XHRcdG5hbWU6IGN1cnJlbnRNYXJrZXIuZGVzYyxcblxuXHRcdFx0XHRcdFx0XHQvLyBzZXQgdGhlIHN0eWxlIGZvciB0aGlzIG1hcmtlclxuXHRcdFx0XHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdFx0XHRcdGZpbGw6ICdncmVlbicsXG5cdFx0XHRcdFx0XHRcdFx0cjogbWFwUmFuZ2UoY3VycmVudE1hcmtlci5Db3VudCwgbWluQ291bnQsIG1heENvdW50LCBtaW5SYWRpdXMsIG1heFJhZGl1cylcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9IHdoaWxlICh0cnVlKVxuXHR9KTtcblxuXG5cdC8vIHVwZGF0ZSB0aGUgc2xpZGVyXG5cdC8vIGNoZWNrIGlmIGFueSBvZiB0aGUgdmFsdWVzIGlzIGEgbnVtYmVycywgaWYgaXQgaXMgd2UgdGhlbiB1cGRhdGUgdGhlIHNsaWRlclxuXHRpZighaXNOYU4oc2VsZWN0ZWRGaWx0ZXIuVmFsdWVzWzBdKSkge1xuXHRcdCQoJyNzbGlkZXInKS5zaG93KCk7XG5cdFx0JCgnI21pblNsaWRlcicpLnNob3coKTtcblx0XHQkKCcjbWF4U2xpZGVyJykuc2hvdygpO1xuXG5cdFx0Ly8galF1ZXJ5VUkgc2xpZGVyXG5cdFx0dmFyIHNsaWRlciA9ICQoXCIjc2xpZGVyXCIpLnNsaWRlcigpO1xuXHRcdHZhciBtaW5WYWx1ZSA9IHNlbGVjdGVkRmlsdGVyLlZhbHVlc1swXTtcblx0XHR2YXIgbWF4VmFsdWUgPSBzZWxlY3RlZEZpbHRlci5WYWx1ZXNbc2VsZWN0ZWRGaWx0ZXIuVmFsdWVzLmxlbmd0aCAtIDFdO1xuXG5cdFx0Ly8gc2V0IG1heCBhbmQgbWluIHZhbHVlIGZvciB0aGUgc2xpZGVyXG5cdFx0c2xpZGVyLnNsaWRlcihcIm9wdGlvblwiLCBcIm1pblwiLCBtaW5WYWx1ZSk7XG5cdFx0c2xpZGVyLnNsaWRlcihcIm9wdGlvblwiLCBcIm1heFwiLCBtYXhWYWx1ZSk7XG5cblx0XHQvLyBzZXQgdGhlIHRleHQgb24gdGhlIFVJXG5cdFx0JCgnI21pblNsaWRlcicpLnRleHQobWluVmFsdWUpO1xuXHRcdCQoJyNtYXhTbGlkZXInKS50ZXh0KG1heFZhbHVlKTtcblx0fSBlbHNlIHtcblx0XHQkKCcjc2xpZGVyJykuaGlkZSgpO1xuXHRcdCQoJyNtaW5TbGlkZXInKS5oaWRlKCk7XG5cdFx0JCgnI21heFNsaWRlcicpLmhpZGUoKTtcblx0fVxufVxuXG5mdW5jdGlvbiBzbGlkZXJDaGFuZ2VkKCkge1xuXHQvLyBnZXQgdGhlIG1heCBhbmQgbWluIHZhbHVlcyBmb3IgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCByYW5nZVxuXHR2YXIgY3VycmVudFJhbmdlID0gc2xpZGVyLnNsaWRlcihcIm9wdGlvblwiLCBcInZhbHVlc1wiKTtcblx0dmFyIG1pbiA9IGN1cnJlbnRSYW5nZVswXTtcblx0dmFyIG1heCA9IGN1cnJlbnRSYW5nZVsxXTtcblxuXHR2YXIgY3VycmVudEZpbHRlck5hbWUgPSBjdXJyZW50RmlsdGVyLk5hbWU7XG5cblx0Ly8gc2V0IHRoZSB0ZXh0IG9uIHRoZSBVSVxuXHQkKCcjbWluU2xpZGVyJykudGV4dChtaW4pO1xuXHQkKCcjbWF4U2xpZGVyJykudGV4dChtYXgpO1xuXG5cdC8vIGZpbHRlciB0aGUgQ291bnRyaWVzXG5cdHZhciBjb3VudHJpZXMgPSBbXTtcblx0JC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuXHRcdHZhciBmaWx0ZXJWYWx1ZUZvckNvdW50cnkgPSArY3VycmVudENvdW50cnlbY291bnRyeVZhbHVlVG9DaGVja107XG5cdFx0aWYoZmlsdGVyVmFsdWVGb3JDb3VudHJ5ID49IG1pbiAmJiBmaWx0ZXJWYWx1ZUZvckNvdW50cnkgPD0gbWF4KVxuXHRcdFx0Y291bnRyaWVzW2N1cnJlbnRDb3VudHJ5LmNvdW50cnldID0gY3VycmVudENvdW50cnkuQ291bnQ7XG5cdH0pO1xuXG5cdC8vIGRyYXcgdGhlIGNvdW50cmllcyBvbiB0aGUgbWFwXG5cdHJlbG9hZE1hcChjb3VudHJpZXMpO1xuXG5cdC8vIGZpbHRlciB0aGUgTWFya2Vyc1xuXHR2YXIgY3VycmVudENvdW50cnkgPSBqc29uQ291bnRyaWVzWzBdO1xuXHR2YXIgc2VsZWN0ZWROYW1lO1xuXHR2YXIgaSA9IDA7XG5cdGRvIHtcblx0XHRpKys7XG5cdFx0dmFyIGN1cnJlbnROYW1lVG9DaGVjayA9ICdOYW1lJyArIGk7XG5cdFx0dmFyIGN1cnJlbnRWYWx1ZSA9ICdWYWx1ZScgKyBpO1xuXHRcdC8vIGNoZWNrIGlmIHRoZSBDb3VudHJ5IGhhcyB0aGF0IG5hbWVcblx0XHRpZihjdXJyZW50Q291bnRyeVtjdXJyZW50TmFtZVRvQ2hlY2tdID09PSBjdXJyZW50RmlsdGVyTmFtZSkge1xuXHRcdFx0c2VsZWN0ZWROYW1lID0gY3VycmVudFZhbHVlO1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9IHdoaWxlICh0cnVlKTtcblxuXHQvLyBhZGQgb25seSB0aGUgbWFya2VycyB3aG8gaGF2ZSB0aGF0IGZpbHRlciB2YWx1ZVxuXHQkLmVhY2goanNvbk1hcmtlcnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50TWFya2VyKSB7XG5cdFx0Ly8gY2hlY2sgaWYgdGhlIENvdW50cnkgaGFzIHRoYXQgbmFtZVxuXHRcdGlmKGN1cnJlbnRNYXJrZXJbc2VsZWN0ZWROYW1lXSA+PSBtaW4gJiYgY3VycmVudE1hcmtlcltzZWxlY3RlZE5hbWVdIDw9IG1heCkge1xuXHRcdFx0bWFwLmFkZE1hcmtlcihpbmRleCwge1xuXHRcdFx0XHRsYXRMbmc6IFtjdXJyZW50TWFya2VyLkxhdGl0dWRlLCBjdXJyZW50TWFya2VyLkxvbmdpdHVkZV0sXG5cdFx0XHRcdG5hbWU6IGN1cnJlbnRNYXJrZXIuZGVzYyxcblxuXHRcdFx0XHQvLyBzZXQgdGhlIHN0eWxlIGZvciB0aGlzIG1hcmtlclxuXHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdGZpbGw6ICdncmVlbicsXG5cdFx0XHRcdFx0cjogbWFwUmFuZ2UoY3VycmVudE1hcmtlci5Db3VudCwgbWluQ291bnQsIG1heENvdW50LCBtaW5SYWRpdXMsIG1heFJhZGl1cylcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9KTtcbn07XG5cbmZ1bmN0aW9uIHJlYWRGaWx0ZXJzRnJvbUpTT04oaW5wdXRGaWx0ZXJzKSB7XG5cdHZhciBmaWx0ZXJzID0gW107XG5cblx0Zm9yKHZhciBpID0gMDsgaSA8IGlucHV0RmlsdGVycy52YWx1ZXMubGVuZ3RoOyBpKyspIHtcblx0XHQvLyByZWFkIHRoZSBjdXJyZW50IGZpbHRlclxuXHRcdGN1cnJlbnRGaWx0ZXIgPSBpbnB1dEZpbHRlcnMudmFsdWVzW2ldO1xuXHRcdC8vIGZpZWxkc1xuXHRcdHZhciBuYW1lID0gY3VycmVudEZpbHRlci5uYW1lO1xuXHRcdHZhciB2YWx1ZXMgPSBbXTtcblxuXHRcdGZvcih2YXIgaiA9IDA7IGogPCBjdXJyZW50RmlsdGVyLnZhbHVlcy5sZW5ndGg7IGorKylcblx0XHRcdHZhbHVlcy5wdXNoKGN1cnJlbnRGaWx0ZXIudmFsdWVzW2pdKTtcblx0XHRmaWx0ZXJzW2ldID0gbmV3IEZpbHRlcihuYW1lLCB2YWx1ZXMpO1xuXHR9XG5cdG51bUZpbHRlcnMgPSBmaWx0ZXJzLmxlbmd0aDtcblx0cmV0dXJuIGZpbHRlcnM7XG59O1xuIiwidmFyIG1hcHBpbmdNYXJrZXJzID0gW107XG52YXIgbWFwcGluZ0NvdW50cmllcyA9IFtdO1xuXG5WZWN0b3JpYWxNYXAucHJvdG90eXBlLnJlZ2lzdGVyVHJhbnNmb3JtZXIgPSBmdW5jdGlvbihqc29uTG9jYXRpb24sIGNvdW50cmllc01hcHBpbmdKc29uLCBtYXJrZXJzTWFwcGluZ0pzb24pIHtcblx0Ly8ganNvbkxvY2F0aW9uIC0gdXJsIG9mIHRoZSBuZXcganNvblxuXHQvLyBjb3VudHJpZXNNYXBwaW5nSnNvbiAtIGpzb24gdGhhdCBjb250YWlucyB0aGUganNvbiBjb3VudHJ5IG1hcHBpbmdcblx0dmFyIGNvdW50cmllc01hcHBpbmdKc29uID0gXCIuLi9tYXBwaW5nSlNPTi9tYXBwaW5nQ291bnRyaWVzU2FtcGxlLmpzb25cIjtcblx0Ly8gbWFya2Vyc01hcHBpbmdKc29uIC0ganNvbiB0aGF0IGNvbnRhaW5zIHRoZSBqc29uIG1hcmtlcnMgbWFwcGluZ1xuXHR2YXIgbWFya2Vyc01hcHBpbmdKc29uID0gXCIuLi9tYXBwaW5nSlNPTi9tYXBwaW5nTWFya2Vyc1NhbXBsZS5qc29uXCI7XG5cblx0aWYoIWNvdW50cmllc01hcHBpbmdKc29uKSB7XG5cdFx0Y29uc29sZS5lcnJvcigneW91IG11c3Qgc3BlY2lmeSBhIGNvdW50cmllcyBtYXBwaW5nIGpzb24nKTtcblx0XHRyZXR1cm47XG5cdH1cblx0aWYoIW1hcmtlcnNNYXBwaW5nSnNvbikge1xuXHRcdGNvbnNvbGUuZXJyb3IoJ3lvdSBtdXN0IHNwZWNpZnkgYSBtYXJrZXJzIG1hcHBpbmcganNvbicpO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIGdldCB0aGUgSlNPTlxuXHRqc29uTG9jYXRpb24gPSBcIi4uL2pzb24vZXNwaWQtc3BhaW4uanNvblwiO1xuXHQkLmdldEpTT04oanNvbkxvY2F0aW9uLCBmdW5jdGlvbihqc29uKSB7XG5cdFx0Ly8gcmVhZCBjb3VudHJpZXNcblx0XHRqc29uTWFwQ291bnRyaWVzKGpzb24sIGNvdW50cmllc01hcHBpbmdKc29uKTtcblx0XHQvLyByZWFkIG1hcmtlcnNcblx0XHRqc29uTWFwTWFya2Vycyhqc29uLCBtYXJrZXJzTWFwcGluZ0pzb24pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24ganNvbk1hcENvdW50cmllcyhqc29uLCBjb3VudHJpZXNNYXBwaW5nSnNvbikge1xuXHR2YXIgY291bnRyaWVzID0gW107XG5cdC8vIGFjY2VzcyB0aGUgSlNPTiBmaWxlIHRoYXQgc3BlY2lmaWVzIHRoZSBtYXBwaW5nXG5cdCQuZ2V0SlNPTihjb3VudHJpZXNNYXBwaW5nSnNvbiwgZnVuY3Rpb24oanNvbk1hcHBpbmcpIHtcblxuXHRcdC8vIGluIHRoaXMgY2FzZSB0aGUgJ2NvdW50cmllcycgYXJlIGRlZmluZWQgdGhlIHRvcCBsZXZlbFxuXHRcdC8vIGl0ZXJhdGUgdGhyb3VnaCBldmVyeSAnY291bnRyeSdcblx0XHQkLmVhY2goanNvbiwgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRKU09OKSB7XG5cdFx0XHR2YXIganNvbkNvdW50cnkgPSAneyc7XG5cdFx0XHQvLyBnZXQgdGhlIG5hbWUgb2YgdGhlIGNvdW50cnlcblx0XHRcdHZhciBuYW1lID0gY3VycmVudEpTT05banNvbk1hcHBpbmcuY291bnRyeV07XG5cdFx0XHQvLyB0aGUgY291bnRyeSBuYW1lIG11c3QgYmUgb24gdGhlIHR3by1kaWdpdCBmb3JtYXRcblx0XHRcdC8vIGdldCB0aGUgY291bnQgLSBXSEFUIElTIFRIRSBDT1VOVD9cblx0XHRcdHZhciBjb3VudCA9IDA7XG5cdFx0XHQvL2dldCB0aGUgZGVzY3JpcHRpb24gLSBXSFQgSVMgVEhFIERFU0NSSVBUSU9OIE9GIEEgTUFSS0VSP1xuXHRcdFx0dmFyIGRlc2NyaXB0aW9uID0gJyc7XG5cdFx0XHQvKlxuXHRcdFx0V0hBVCBBUkUgVEhFIE5BTUVTPz8/XG5cdFx0XHQqL1xuXHRcdFx0Y291bnRyaWVzW2luZGV4XSA9IG5ldyBDb3VudHJ5KCcnLCBuYW1lLCBjb3VudCk7XG5cdFx0fSk7XG5cdFx0bWFwcGluZ0NvdW50cmllcyA9IGNvdW50cmllcztcblx0XHRjb25zb2xlLmxvZyhtYXBwaW5nQ291bnRyaWVzKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGpzb25NYXBNYXJrZXJzKGpzb24sIG1hcmtlcnNNYXBwaW5nSnNvbikge1xuXHR2YXIgbWFya2VycyA9IFtdO1xuXG5cdC8vIGFjY2VzcyB0aGUgSlNPTiBmaWxlIHRoYXQgc3BlY2lmaWVzIHRoZSBtYXBwaW5nXG5cdCQuZ2V0SlNPTihtYXJrZXJzTWFwcGluZ0pzb24sIGZ1bmN0aW9uKGpzb25NYXBwaW5nKSB7XG5cdFx0Ly8gaW4gdGhpcyBjYXNlIHRoZSAnbWFya2VycycgYXJlIGRlZmluZWQgdGhlIHRvcCBsZXZlbFxuXHRcdC8vIGl0ZXJhdGUgdGhyb3VnaCBldmVyeSAnbWFya2VyJ1xuXHRcdCQuZWFjaChqc29uLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEpTT04pIHtcblx0XHRcdC8vIGdldCB0aGUgbmFtZSBvZiB0aGUgY291bnRyeVxuXHRcdFx0dmFyIG5hbWUgPSBjdXJyZW50SlNPTltqc29uTWFwcGluZy5jb3VudHJ5XTtcblx0XHRcdC8vIHRoZSBjb3VudHJ5IG5hbWUgbXVzdCBiZSBvbiB0aGUgdHdvLWRpZ2l0IGZvcm1hdFxuXHRcdFx0Ly8gZ2V0IHRoZSBjb3VudCAtIFdIQVQgSVMgVEhFIENPVU5UP1xuXHRcdFx0dmFyIGNvdW50ID0gMDtcblx0XHRcdC8vIGdldCB0aGUgbGF0aXR1ZGVcblx0XHRcdHZhciBsYXRpdHVkZSA9IGN1cnJlbnRKU09OW2pzb25NYXBwaW5nLkxhdGl0dWRlXTtcblx0XHRcdC8vIGdldCB0aGUgbG9uZ2l0dWRlXG5cdFx0XHR2YXIgbG9uZ2l0dWRlID0gY3VycmVudEpTT05banNvbk1hcHBpbmcuTG9uZ2l0dWRlXTtcblx0XHRcdC8vZ2V0IHRoZSBkZXNjcmlwdGlvbiAtIFdIQVQgSVMgVEhFIERFU0NSSVBUSU9OIE9GIEEgTUFSS0VSP1xuXHRcdFx0dmFyIGRlc2NyaXB0aW9uID0gJyc7XG5cdFx0XHQvKlxuXHRcdFx0V0hBVCBBUkUgVEhFIE5BTUVTPz8/XG5cdFx0XHQqL1xuXHRcdFx0Ly8gY3JlYXRlIGEgbmV3IG1hcmtlclxuXHRcdFx0bWFya2Vyc1tpbmRleF0gPSBuZXcgTWFya2VyKCcnLCBuYW1lLCBjb3VudCwgbGF0aXR1ZGUsIGxvbmdpdHVkZSk7XG5cdFx0fSk7XG5cdFx0bWFwcGluZ01hcmtlcnMgPSBtYXJrZXJzO1xuXHRcdGNvbnNvbGUubG9nKG1hcHBpbmdNYXJrZXJzKTtcblx0fSk7XG59XG4iLCIvLyByZWRyYXcgdGhlIG1hcFxuZnVuY3Rpb24gcmVsb2FkTWFwKGNvbG9ycykge1xuICAgIC8vIGdldCB0aGUgbmFtZSBvZiB0aGUgY3VycmVudCBtYXBcbiAgICBpZiAobWFwLnBhcmFtcy5tYXAgPT0gbVR5cGUpIHtcbiAgICAgICAgLy8gbWFpbiBtYXBcbiAgICAgICAgLy8gdXBkYXRlIG1pbiBhbmQgbWF4IENvdW50IG9mIHRoZSBjb3VudHJpZXNcbiAgICAgICAgaWYgKGpzb25Db3VudHJpZXMubGVuZ3RoID4gMClcbiAgICAgICAgICAgIHJlYWRNaW5NYXgoY29sb3JzKTtcblxuICAgICAgICAvLyBlcmFzZSB0aGUgbWFwXG4gICAgICAgICQoXCIjXCIgKyBtRGl2KS5lbXB0eSgpO1xuXG4gICAgICAgIG1hcCA9IG5ldyBqdm0uTWFwKHtcbiAgICAgICAgICAgIG1hcDogbVR5cGUsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmQsXG4gICAgICAgICAgICBjb250YWluZXI6ICQoJyMnICsgbURpdiksXG4gICAgICAgICAgICBvblJlZ2lvbkNsaWNrOiBmdW5jdGlvbihlLCBjb2RlKSB7XG4gICAgICAgICAgICAgICAgY291bnRyeUNvZGUgPSBjb2RlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgdmFyIG5ld01hcCA9IGNvdW50cnlDb2RlICsgJ19taWxsX2VuJztcbiAgICAgICAgICAgICAgICAvLyBzd2l0aCB0byBuZXcgbWFwXG4gICAgICAgICAgICAgICAgc3dpdGNoTWFwKG5ld01hcCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25NYXJrZXJUaXBTaG93OiBmdW5jdGlvbihlLCBsYWJlbCwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmluYWxUb29sdGlwID0gYnVpbGRNYXJrZXJUb29sdGlwKGpzb25NYXJrZXJzLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgbGFiZWwuaHRtbChmaW5hbFRvb2x0aXApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uUmVnaW9uVGlwU2hvdzogZnVuY3Rpb24oZSwgY291bnRyeU5hbWUsIGNvZGUpIHtcbiAgICAgICAgICAgICAgICAvLyBjb2RlIGNvbnRhaW5zIHRoZSBjb2RlIG9mIHRoZSBjb3VudHJ5IChpLmUuLCBQVCwgRVMsIEZSLCBldGMpXG4gICAgICAgICAgICAgICAgLy8gc2hvdyB0aGUgQ291bnQgYXNzb2NpYXRlZCB0byB0aGF0IENvdW50cnkgLSBsb29rIGZvciB0aGUgY291bnRyeVxuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZENvdW50cnkgPSAtMTtcbiAgICAgICAgICAgICAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeS5jb3VudHJ5ID09PSBjb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENvdW50cnkgPSBjdXJyZW50Q291bnRyeTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZENvdW50cnkgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmFsVG9vbHRpcCA9IGJ1aWxkQ291bnRyeVRvb2x0aXAoY291bnRyeU5hbWUsIHNlbGVjdGVkQ291bnRyeSk7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50cnlOYW1lLmh0bWwoZmluYWxUb29sdGlwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgY291bnRyeU5hbWUuaHRtbChjb3VudHJ5TmFtZS5odG1sKCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlcmllczoge1xuICAgICAgICAgICAgICAgIG1hcmtlcnM6IFtmaW5hbE1hcmtlcnNJbk1hcF0sXG4gICAgICAgICAgICAgICAgcmVnaW9uczogW3tcbiAgICAgICAgICAgICAgICAgICAgLy8gbWluIGFuZCBtYXggdmFsdWVzIG9mIGNvdW50XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlOiBbbWluQ29sb3JNYXAsIG1heENvbG9yTWFwXSxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlOiAnZmlsbCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogY29sb3JzXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc3VibWFwXG4gICAgICAgIC8vIHVwZGF0ZSBtaW4gYW5kIG1heCBDb3VudCBvZiB0aGUgY291bnRyaWVzXG4gICAgICAgIGlmIChqc29uQ291bnRyaWVzLmxlbmd0aCA+IDApXG4gICAgICAgICAgICByZWFkTWluTWF4KGNvbG9ycyk7XG5cbiAgICAgICAgLy8gZXJhc2UgdGhlIG1hcFxuICAgICAgICAkKFwiI1wiICsgbURpdikuZW1wdHkoKTtcbiAgICAgICAgcmVtb3ZlVG9vbHRpcCgpO1xuICAgICAgICBzd2l0Y2hNYXAobWFwVHlwZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVUb29sdGlwKCkge1xuICAgIC8vIGVyYXNlIHRoZSBwcmV2aW91cyBtYXAgdG9vbHRpcFxuICAgICQoJy5qdmVjdG9ybWFwLXRpcCcpLnJlbW92ZSgpO1xufVxuXG5mdW5jdGlvbiBzd2l0Y2hNYXAobmV3TWFwKSB7XG4gICAgLy8gdGhpcyBmdW5jdGlvbiBnZXRzIGNhbGxlZCB3aGVuIGEgY291bnRyeSBvbiB0aGUgd29ybGQgbWFwIGlzIGNsaWNrZWRcbiAgICAvLyBlcmFzZSB0aGUgcHJldmlvdXMgbWFwXG4gICAgJCgnIycgKyBtRGl2KS5lbXB0eSgpO1xuICAgIHJlbW92ZVRvb2x0aXAoKTtcblxuICAgIHZhciByZWdpb25Db2xvcnMgPSAoKGRhdGFUeXBlPT0nY291bnRyaWVzJykgPyBnZW5lcmF0ZUNvbG9yc0ZvclRoZUNvdW50cmllcyhuZXdNYXApIDogW10pO1xuXG4gICAgbWFwID0gbmV3IGp2bS5NYXAoe1xuICAgICAgICBtYXA6IG5ld01hcCxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBiYWNrZ3JvdW5kLFxuICAgICAgICBjb250YWluZXI6ICQoJyMnICsgbURpdiksXG4gICAgICAgIG9uTWFya2VyVGlwU2hvdzogZnVuY3Rpb24oZSwgbGFiZWwsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgZmluYWxUb29sdGlwID0gYnVpbGRNYXJrZXJUb29sdGlwKGpzb25NYXJrZXJzLCBpbmRleCk7XG4gICAgICAgICAgICBsYWJlbC5odG1sKGZpbmFsVG9vbHRpcCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uUmVnaW9uVGlwU2hvdzogZnVuY3Rpb24oZSwgcmVnaW9uTmFtZSwgY29kZSkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRNYXAgPSBuZXdNYXAuc3BsaXQoJ18nKVswXS50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgICAgICAgLy8gY29kZSBjb250YWlucyB0aGUgY29kZSBvZiB0aGUgcmVnaW9uIChpLmUuLCBQVC0xLCBFUy1NLCBldGMpXG4gICAgICAgICAgICAgICAgLy8gc2hvdyB0aGUgQ291bnQgYXNzb2NpYXRlZCB0byB0aGF0IFJlZ2lvbiAtIGxvb2sgZm9yIHRoZSBSZWdpb25cbiAgICAgICAgICAgIHZhciBzZWxlY3RlZENvdW50cnkgPSAtMTtcbiAgICAgICAgICAgIC8vIGZpbmQgdGhlIGNvcnJlc3BvbmRpbmcgY291bnRyeVxuICAgICAgICAgICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeS5jb3VudHJ5ID09IGN1cnJlbnRNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDb3VudHJ5ID0gY3VycmVudENvdW50cnk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBzZWxlY3RlZCByZWdpb24gaGFzIGFueSBkYXRhIGluc2lkZSB0aGF0IGNvdW50cnlcbiAgICAgICAgICAgIHZhciByZWdpb25Gb3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkUmVnaW9uO1xuICAgICAgICAgICAgJC5lYWNoKG1hcC5yZWdpb25zLCBmdW5jdGlvbihpbmRleCwgY3VycmVudFJlZ2lvbikge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UmVnaW9uLm5hbWUgPT0gY29kZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJlZ2lvbiA9IGN1cnJlbnRSZWdpb247XG4gICAgICAgICAgICAgICAgICAgIHJlZ2lvbkZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHJlZ2lvbkZvdW5kKSB7XG4gICAgICAgICAgICAgICAgcmVnaW9uTmFtZS5odG1sKGJ1aWxkUmVnaW9uVG9vbHRpcChzZWxlY3RlZFJlZ2lvbikpO1xuICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgcmVnaW9uTmFtZS5odG1sKHJlZ2lvbk5hbWUuaHRtbCgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2VyaWVzOiB7XG4gICAgICAgICAgICBtYXJrZXJzOiBbZmluYWxNYXJrZXJzSW5NYXBdLFxuICAgICAgICAgICAgcmVnaW9uczogW3tcbiAgICAgICAgICAgICAgICAvLyBtaW4gYW5kIG1heCB2YWx1ZXMgb2YgY291bnRcbiAgICAgICAgICAgICAgICBzY2FsZTogW21pbkNvbG9yTWFwLCBtYXhDb2xvck1hcF0sXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlOiAnZmlsbCcsXG4gICAgICAgICAgICAgICAgdmFsdWVzOiByZWdpb25Db2xvcnNcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGFkZCBiYWNrIGJ1dHRvblxuICAgICQoJyNteV9tYXAnKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJqdmVjdG9ybWFwLWdvYmFja1wiPkJhY2s8L2Rpdj4nKTtcbiAgICAkKFwiLmp2ZWN0b3JtYXAtZ29iYWNrXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBlcmFzZSB0aGUgcHJldmlvdXMgbWFwXG4gICAgICAgICQoJyMnICsgbURpdikuZW1wdHkoKTtcbiAgICAgICAgcmVtb3ZlVG9vbHRpcCgpO1xuXG5cbiAgICAgICAgLy8gd2hlbiB0aGUgbGVmdCBidXR0b24gaXMgY2xpY2tlZFxuICAgICAgICAvLyByZXR1cm4gdG8gdGhlIG1haW4gbWFwXG4gICAgICAgIG1hcCA9IG5ldyBqdm0uTWFwKHtcbiAgICAgICAgICAgIGNvbnRhaW5lcjogJCgnIycgKyBtRGl2KSxcbiAgICAgICAgICAgIC8vIGNvbmZpZ3VyYXRpb24gb2YgdGhlIG1haW4gbWFwXG4gICAgICAgICAgICAvLyB0eXBlIG9mIG1hcCAod29ybGQsIEV1cm9wZSwgVVNBLCBldGMpXG4gICAgICAgICAgICBtYXA6IG1UeXBlLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBiYWNrZ3JvdW5kLFxuICAgICAgICAgICAgLy8gdHJpZ2dlcmVkIHdoZW4gYSBtYXJrZXIgaXMgaG92ZXJlZFxuICAgICAgICAgICAgb25SZWdpb25DbGljazogZnVuY3Rpb24oZSwgY29kZSkge1xuICAgICAgICAgICAgICAgIC8vIHJlbG9hZCBhIG5ldyBtYXBcbiAgICAgICAgICAgICAgICBjb3VudHJ5Q29kZSA9IGNvZGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAvLyB3YWl0VG9BZGRNYXJrZXJzKDEwMCk7XG4gICAgICAgICAgICAgICAgdmFyIG5ld01hcCA9IGNvdW50cnlDb2RlICsgJ19taWxsX2VuJztcbiAgICAgICAgICAgICAgICAvLyBzd2l0aCB0byBuZXcgbWFwXG4gICAgICAgICAgICAgICAgc3dpdGNoTWFwKG5ld01hcCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25NYXJrZXJUaXBTaG93OiBmdW5jdGlvbihlLCBsYWJlbCwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAvLyBzZWxlY3Qgd2hhdCB0ZXh0IHRvIGRpc3BsYXkgd2hlbiBtYXJrZXIgaXMgaG92ZXJlZFxuICAgICAgICAgICAgICAgIHZhciBmaW5hbFRvb2x0aXAgPSBidWlsZE1hcmtlclRvb2x0aXAoanNvbk1hcmtlcnMsIGluZGV4KTtcbiAgICAgICAgICAgICAgICBsYWJlbC5odG1sKGZpbmFsVG9vbHRpcCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gdHJpZ2dlcmVkIHdoZW4gYSByZWdpb24gaXMgaG92ZXJlZFxuICAgICAgICAgICAgb25SZWdpb25UaXBTaG93OiBmdW5jdGlvbihlLCBjb3VudHJ5TmFtZSwgY29kZSkge1xuICAgICAgICAgICAgICAgIC8vIGNvZGUgY29udGFpbnMgdGhlIGNvZGUgb2YgdGhlIGNvdW50cnkgKGkuZS4sIFBULCBFUywgRlIsIGV0YylcbiAgICAgICAgICAgICAgICAvLyBzaG93IHRoZSBDb3VudCBhc3NvY2lhdGVkIHRvIHRoYXQgQ291bnRyeSAtIGxvb2sgZm9yIHRoZSBjb3VudHJ5XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ291bnRyeSA9IC0xO1xuICAgICAgICAgICAgICAgICQuZWFjaChqc29uQ291bnRyaWVzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5LmNvdW50cnkgPT09IGNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ291bnRyeSA9IGN1cnJlbnRDb3VudHJ5O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ291bnRyeSAhPSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBmaW5kIG9jY3VycmVuY2Ugb2Ygc2V2ZXJhbCBzdHJpbmdzIGluc2lkZSB0aGUgdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmFsVG9vbHRpcCA9IGJ1aWxkQ291bnRyeVRvb2x0aXAoY291bnRyeU5hbWUsIHNlbGVjdGVkQ291bnRyeSk7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50cnlOYW1lLmh0bWwoZmluYWxUb29sdGlwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgY291bnRyeU5hbWUuaHRtbChjb3VudHJ5TmFtZS5odG1sKCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlcmllczoge1xuICAgICAgICAgICAgICAgIG1hcmtlcnM6IFtmaW5hbE1hcmtlcnNJbk1hcF0sXG4gICAgICAgICAgICAgICAgcmVnaW9uczogW3tcbiAgICAgICAgICAgICAgICAgICAgLy8gbWluIGFuZCBtYXggdmFsdWVzIG9mIGNvdW50XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlOiBbbWluQ29sb3JNYXAsIG1heENvbG9yTWFwXSxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlOiAnZmlsbCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogYXV4Q29sb3JzXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gYWRkIHRoZSBtYXJrZXMgdG8gdGhlIG1hcFxuICAgICAgICBpZiAodGhlcmVBcmVNYXJrZXJzKSB7XG4gICAgICAgICAgICBhZGRNYXJrZXJzVG9NYXAoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gYWRkIHRoZSBtYXJrZXJzXG4gICAgaWYgKHRoZXJlQXJlTWFya2Vycykge1xuICAgICAgICBhZGRNYXJrZXJzVG9NYXAoKTtcbiAgICB9XG5cbiAgICBpZiAoanNvbkNvdW50cmllcykge1xuICAgICAgICAvLyBjaGVjayBpZiB0aGUgc2VsZWN0ZWQgbWFwIGhhcyBhbnkgcmVnaW9uIHRvIGhpZ2hsaWdodFxuICAgICAgICAvLyBhZGRSZWdpb25zVG9NYXAobmV3TWFwKVxuICAgIH1cbn1cbiIsIi8vIE1hcmtlciBkZWZpbml0aW9uXG52YXIgTWFya2VyID0gZnVuY3Rpb24obWFya2VyT2JqZWN0KSB7XG4gICAgLy8gYWRkIGF0dHJpYnV0ZXNcbiAgICB2YXIgYXR0cmlidXRlcyA9IG1hcmtlck9iamVjdFtcImF0dHJpYnV0ZXNcIl07XG4gICAgdmFyIG1hcmtlciA9IHRoaXM7XG4gICAgJC5lYWNoKE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLCBmdW5jdGlvbihpbmRleCwgYXR0cikge1xuICAgICAgICBtYXJrZXJbYXR0cl0gPSBhdHRyaWJ1dGVzW2F0dHJdO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb3VudHJ5ID0gbWFya2VyT2JqZWN0LmNvdW50cnk7XG4gICAgdGhpcy5jb3VudCA9ICttYXJrZXJPYmplY3QuY291bnQ7XG4gICAgdGhpcy5sYXRpdHVkZSA9IG1hcmtlck9iamVjdC5sYXRpdHVkZTtcbiAgICB0aGlzLmxvbmdpdHVkZSA9IG1hcmtlck9iamVjdC5sb25naXR1ZGU7XG4gICAgdGhpcy5pY29uID0gbWFya2VyT2JqZWN0Lmljb247XG4gICAgLy8gVE9ETyAtIGFkZCBlc2NyaXB0aW9uIHRvIGEgTWFya2VyIGZyb20gdGhlIEpTT04gZmlsZVxuICAgIHRoaXMuZGVzYyA9ICdhYmMnO1xufTtcblxuLy8gcmVhZCB0aGUgbWFya2VycyBmcm9tIGEgSlNPTiBmaWxlXG5mdW5jdGlvbiByZWFkTWFya2Vyc0Zyb21KU09OKGpzb25NYXJrZXJzKSB7XG4gICAgdmFyIG1hcmtlcnMgPSBbXTtcblxuICAgIG1pbkNvdW50ID0gSW5maW5pdHk7XG4gICAgbWF4Q291bnQgPSAtSW5maW5pdHk7XG5cbiAgICAkLmVhY2goanNvbk1hcmtlcnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50SlNPTk1hcmtlcikge1xuICAgICAgICBtYXJrZXJzLnB1c2gobmV3IE1hcmtlcihjdXJyZW50SlNPTk1hcmtlcikpO1xuICAgICAgICB2YXIgY3VycmVudENvdW50VmFsdWUgPSBtYXJrZXJzW2luZGV4XS5Db3VudDtcblxuICAgICAgICBpZiAoY3VycmVudENvdW50VmFsdWUgPiBtYXhDb3VudCkge1xuICAgICAgICAgICAgbWF4Q291bnQgPSBjdXJyZW50Q291bnRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudENvdW50VmFsdWUgPCBtaW5Db3VudClcbiAgICAgICAgICAgIG1pbkNvdW50ID0gY3VycmVudENvdW50VmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIG1hcmtlcnM7XG59XG5cbmZ1bmN0aW9uIGFkZE1hcmtlcnNUb01hcCgpIHtcbiAgICB2YXIgbWFya2Vyc0pTT05BcnJheSA9IFtdO1xuICAgICQuZWFjaChmaWx0ZXJlZE1hcmtlcnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50TWFya2VyKSB7XG4gICAgICAgIHZhciBjdXJyZW50TWFya2VySlNPTiA9IHtcbiAgICAgICAgICAgIGxhdExuZzogW2N1cnJlbnRNYXJrZXIubGF0aXR1ZGUsIGN1cnJlbnRNYXJrZXIubG9uZ2l0dWRlXSxcbiAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRNYXJrZXIuZGVzYyxcbiAgICAgICAgICAgIC8vIHNldCB0aGUgc3R5bGUgZm9yIHRoaXMgbWFya2VyXG4gICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgIHI6IG1hcFJhbmdlKGN1cnJlbnRNYXJrZXIuY291bnQsIG1pbkNvdW50LCBtYXhDb3VudCwgbWluUmFkaXVzLCBtYXhSYWRpdXMpLFxuICAgICAgICAgICAgICAgIGltYWdlOiAnLi4vaW1nLycgKyBjdXJyZW50TWFya2VyLmljb24gKyAnLnBuZydcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgbWFya2Vyc0pTT05BcnJheS5wdXNoKGN1cnJlbnRNYXJrZXJKU09OKTtcbiAgICB9KTtcbiAgICBtYXAuYWRkTWFya2VycyhtYXJrZXJzSlNPTkFycmF5KTtcbn1cblxuZnVuY3Rpb24gYnVpbGRNYXJrZXJUb29sdGlwKGpzb25NYXJrZXJzLCBtYXJrZXIpIHtcbiAgICB2YXIgZmluYWxUb29sdGlwID0gbWFya2VyVG9vbHRpcDtcbiAgICAkLmVhY2goT2JqZWN0LmtleXMobWFya2VyKSwgZnVuY3Rpb24oaW5kZXgsIGF0dHIpIHtcbiAgICAgICAgZmluYWxUb29sdGlwID0gZmluYWxUb29sdGlwLnJlcGxhY2UoYXR0ciwgbWFya2VyW2F0dHJdKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZmluYWxUb29sdGlwO1xufVxuIiwiZnVuY3Rpb24gZmlsdGVyKGlucHV0QXJncykge1xuXG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dEFyZ3MpXG4gICAgdmFyIG51bWJlcktleXMgPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgdmFsaWRGaWx0ZXJzID0gMDtcblxuICAgIHZhciBjb3VudHJpZXNCeUZpbHRlciA9IG5ldyBBcnJheSgpO1xuICAgIHZhciBtYXJrZXJzQnlGaWx0ZXIgPSBuZXcgQXJyYXkoKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbnVtYmVyS2V5czsgaSsrKSB7XG4gICAgICAgIGNvdW50cmllc0J5RmlsdGVyW2ldID0gbmV3IEFycmF5KCk7XG4gICAgICAgIG1hcmtlcnNCeUZpbHRlcltpXSA9IG5ldyBBcnJheSgpO1xuICAgIH1cblxuICAgIC8vIGNoZWNrIGlmIGFueSBvZiB0aGUgbmFtZXMgaXMgYWxsIChyZXNldCBhbGwgYXBwbGllZCBmaWx0ZXJzXHQpXG4gICAgdmFyIGV4aXQgPSBmYWxzZTtcbiAgICAkLmVhY2goa2V5cywgZnVuY3Rpb24oaW5kZXgsIGZpbHRlck5hbWUpIHtcbiAgICAgICAgaWYgKGZpbHRlck5hbWUudG9Mb3dlckNhc2UoKSA9PSAnYWxsJykge1xuICAgICAgICAgICAgZXhpdCA9IHRydWU7XG4gICAgICAgICAgICAvLyByZWxvYWRzIHRoZSBvcmlnaW5hbCBtYXJrZXJzIGFuZCBjb3VudHJpZXMgb24gdGhlIG1hcFxuICAgICAgICAgICAgcmVzZXRGaWx0ZXJzKCk7XG4gICAgICAgICAgICAvLyBlcmFzZSB0aGUgdGV4dCBmcm9tIHRoZSBmaWx0ZXJzIGJveFxuICAgICAgICAgICAgcmVzZXRGaWx0ZXJzQm94KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoZXhpdClcbiAgICAgICAgcmV0dXJuO1xuXG4gICAgLy8gZm9yIGV2ZXJ5IGtleS9maWx0ZXJcbiAgICAkLmVhY2goa2V5cywgZnVuY3Rpb24oaW5kZXgsIGZpbHRlck5hbWUpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGZpbHRlck5hbWUgaXMgdmFsaWRcbiAgICAgICAgaWYgKCFjaGVja0ZpbHRlck5hbWVJc1ZhbGlkKGZpbHRlck5hbWUpKSB7XG4gICAgICAgICAgICAvLyBpbnZhbGlkIGZpbHRlciBuYW1lXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSW52YWxpZCBmaWx0ZXIgbmFtZSEoJyArIGZpbHRlck5hbWUgKyAnKScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBnZXQgdGhlIGZpbHRlciB2YWx1ZSAoY2FuIGNvbnRhaW4gZW51bWVyYXRpb24gYW5kIHJhbmdlKVxuICAgICAgICAgICAgLy8gJzIwMDQtMjAwNicgLCAnRixNJywgZXRjXG4gICAgICAgICAgICB2YXIgZmlsdGVyVmFsdWUgPSBpbnB1dEFyZ3NbZmlsdGVyTmFtZV07XG4gICAgICAgICAgICAvLyBnZXQgYWxsIHNpbmdsZSBmaWx0ZXIgdmFsdWVzXG4gICAgICAgICAgICB2YXIgZmluYWxQYXJ0cyA9IGdldEFsbEZpbHRlclZhbHVlcyhmaWx0ZXJWYWx1ZSk7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGZpbmFsUGFydHMpO1xuICAgICAgICAgICAgdmFsaWRGaWx0ZXJzKys7XG5cbiAgICAgICAgICAgIC8vIGZvciBldmVyeSBzaW5nbGUgdmFsdWUgZ2V0IGFsbCB0aGUgY291bnRydWVzIGFuZCBtYXJrZXJzXG4gICAgICAgICAgICAkLmVhY2goZmluYWxQYXJ0cywgZnVuY3Rpb24oaSwgcGFydCkge1xuICAgICAgICAgICAgICAgIHZhciBjaGVja1JldHVybiA9IGNoZWNrV2hhdENvdW50cmllc01hcmtlcnNUb0FkZChmaWx0ZXJPYmplY3QsIHBhcnQpO1xuICAgICAgICAgICAgICAgIHZhciBjb3VudHJpZXNBdXggPSBjaGVja1JldHVyblswXTtcbiAgICAgICAgICAgICAgICB2YXIgbWFya2Vyc0F1eCA9IGNoZWNrUmV0dXJuWzFdO1xuICAgICAgICAgICAgICAgIC8vIGFkZCBldmVyeSBjb3VudHJ5IHRvIHRoZSBsaXN0IG9mIGNvdW50cmllc0J5RmlsdGVyXG4gICAgICAgICAgICAgICAgLy8gYWRkIGV2ZXJ5IG1hcmtlciB0byB0aGUgbGlzdCBvZiBtYXJrZXJzQnlGaWx0ZXJcbiAgICAgICAgICAgICAgICAkLmVhY2goT2JqZWN0LmtleXMoY291bnRyaWVzQXV4KSwgZnVuY3Rpb24oaiwgY3VycmVudEtleSkge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgY29sb3JzIHRoYXQgYXJlIHJldHVybmVkIGFyZSBpbiBhIGpzb24gZm9ybWF0XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlWYWx1ZSA9IGNvdW50cmllc0F1eFtjdXJyZW50S2V5XTtcbiAgICAgICAgICAgICAgICAgICAgY291bnRyaWVzQnlGaWx0ZXJbaW5kZXhdW2N1cnJlbnRLZXldID0ga2V5VmFsdWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBtYXJrZXJzXG4gICAgICAgICAgICAgICAgJC5lYWNoKG1hcmtlcnNBdXgsIGZ1bmN0aW9uKGosIGN1cnJlbnRNYXJrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2Vyc0J5RmlsdGVyW2luZGV4XS5wdXNoKGN1cnJlbnRNYXJrZXIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGdldCB0aGUgZmluYWwgY291bnRyaWVzXG4gICAgdmFyIGZpbmFsQ291bnRyaWVzID0gW107XG4gICAgaWYgKGNvdW50cmllc0J5RmlsdGVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZmluYWxDb3VudHJpZXMgPSBjb3VudHJpZXNCeUZpbHRlclswXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudHJpZXNCeUZpbHRlci5sZW5ndGggLSAxOyBpKyspXG4gICAgICAgICAgICBmaW5hbENvdW50cmllcyA9IGdldENvdW50cmllc0ludGVyc2VjdGlvbihmaW5hbENvdW50cmllcywgY291bnRyaWVzQnlGaWx0ZXJbaSArIDFdKTtcbiAgICB9XG5cbiAgICAvLyBhZGQgY291bnRyaWVzIHRvIE1hcFxuICAgIHJlbG9hZE1hcChmaW5hbENvdW50cmllcyk7XG5cbiAgICAvLyBnZXQgdGhlIGZpbmFsIG1hcmtlcnNcbiAgICBmaWx0ZXJlZE1hcmtlcnMgPSBbXTtcbiAgICBpZiAobWFya2Vyc0J5RmlsdGVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZmlsdGVyZWRNYXJrZXJzID0gbWFya2Vyc0J5RmlsdGVyWzBdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtlcnNCeUZpbHRlci5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICAgIGZpbHRlcmVkTWFya2VycyA9IGdldE1hcmtlcnNJbnRlcnNlY3Rpb24oZmlsdGVyZWRNYXJrZXJzLCBtYXJrZXJzQnlGaWx0ZXJbaSArIDFdKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGFkZCBtYXJrZXJzIHRvIHRoZSBtYXBcbiAgICBhZGRNYXJrZXJzVG9NYXAoKTtcbn1cblxuZnVuY3Rpb24gZ2V0TWFya2Vyc0ludGVyc2VjdGlvbihtYXJrZXJzR3JvdXAxLCBtYXJrZXJzR3JvdXAyKSB7XG4gICAgdmFyIG1hcmtlcnMgPSBbXTtcblxuICAgIC8vIG1hcmtlcnMgdGhhdCBiZWxvbmcgdG8gdGhlIHR3byBncm91cHNcbiAgICAkLmVhY2gobWFya2Vyc0dyb3VwMSwgZnVuY3Rpb24oaW5kZXgsIG1hcmtlcjEpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhpcyBtYXJrZXIgbmFtZSBpcyBpbnNpZGUgdGhlIHNlY29uZCBncm91cFxuICAgICAgICB2YXIgbWFya2VyMUNvdW50cnkgPSBtYXJrZXIxLmNvdW50cnk7XG4gICAgICAgICQuZWFjaChtYXJrZXJzR3JvdXAyLCBmdW5jdGlvbihpbmRleCwgbWFya2VyMikge1xuICAgICAgICAgICAgdmFyIG1hcmtlcjJDb3VudHJ5ID0gbWFya2VyMi5jb3VudHJ5O1xuICAgICAgICAgICAgaWYgKG1hcmtlcjFDb3VudHJ5ID09IG1hcmtlcjJDb3VudHJ5KVxuICAgICAgICAgICAgICAgIG1hcmtlcnMucHVzaChtYXJrZXIxKVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gbWFya2Vycztcbn1cblxuZnVuY3Rpb24gZ2V0Q291bnRyaWVzSW50ZXJzZWN0aW9uKGNvdW50cmllc0dyb3VwMSwgY291bnRyaWVzR3JvdXAyKSB7XG4gICAgLy8gY291bnRyaWVzIHRoYXQgYmVsb25nIHRvIHRoZSB0d28gZ3JvdXBzXG4gICAgdmFyIGNvdW50cmllcyA9IFtdO1xuXG4gICAgJC5lYWNoKE9iamVjdC5rZXlzKGNvdW50cmllc0dyb3VwMSksIGZ1bmN0aW9uKGluZGV4LCBjb3VudHJ5TmFtZTEpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhpcyBjb3VudHJ5IG5hbWUgaXMgaW5zaWRlIHRoZSBzZWNvbmQgZ3JvdXBcbiAgICAgICAgJC5lYWNoKE9iamVjdC5rZXlzKGNvdW50cmllc0dyb3VwMiksIGZ1bmN0aW9uKGluZGV4LCBjb3VudHJ5TmFtZTIpIHtcbiAgICAgICAgICAgIGlmIChjb3VudHJ5TmFtZTEgPT0gY291bnRyeU5hbWUyKVxuICAgICAgICAgICAgICAgIGNvdW50cmllc1tjb3VudHJ5TmFtZTFdID0gY291bnRyaWVzR3JvdXAxW2NvdW50cnlOYW1lMV07XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBjb3VudHJpZXM7XG59XG5cbmZ1bmN0aW9uIGFwcGx5TXVsdGlwbGVGaWx0ZXJzUHJvZ3JhbWF0dGljYWxseShmaWx0ZXJzVG9BcHBseSkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZmlsdGVyc1RvQXBwbHkpXG4gICAgdmFyIG51bUZpbHRlcnNUb0FwcGx5ID0ga2V5cy5sZW5ndGg7XG4gICAgdmFyIGNvdW50cmllc0hhdmVGaWx0ZXIgPSBbXTtcbiAgICB2YXIgbWFya2Vyc0hhdmVGaWx0ZXIgPSBbXTtcblxuICAgIC8vIGZvciBldmVyeSBrZXlcbiAgICAkLmVhY2goa2V5cywgZnVuY3Rpb24oaW5kZXgsIGZpbHRlck5hbWUpIHtcbiAgICAgICAgdmFyIGZpbHRlclZhbHVlID0gZmlsdGVyc1RvQXBwbHlbZmlsdGVyTmFtZV07XG4gICAgfSk7XG4gICAgdmFyIGNvbG9ycyA9IFtdO1xuXG4gICAgLy8gcmVtb3ZlIGFsbCBtYXJrZXJzIGZyb20gdGhlIG1hcFxuICAgIG1hcC5yZW1vdmVBbGxNYXJrZXJzKCk7XG5cbiAgICAvLyBmb3IgZWFjaCBvZiB0aGUgY291bnRyaWVzXG4gICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGNvdW50cnlJbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgLy8gc2V0IHRvIDAgdGhlIG51bWJlciBvZiBmaWx0ZXJzXG4gICAgICAgIGNvdW50cmllc0hhdmVGaWx0ZXJbY291bnRyeUluZGV4XSA9IDA7XG4gICAgICAgIC8vIGNoZWNrIGlmIGl0IGhhcyB0aGUgbmVlZGVkIHZhbHVlc1xuICAgICAgICAkLmVhY2goa2V5cywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRGaWx0ZXJOYW1lKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnTmFtZScgKyBpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSAnVmFsdWUnICsgaTtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgQ291bnRyeSBoYXMgdGhhdCBuYW1lXG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50Q291bnRyeVtjdXJyZW50TmFtZVRvQ2hlY2tdKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeVtjdXJyZW50TmFtZVRvQ2hlY2tdLnRvTG93ZXJDYXNlKCkgPT0gY3VycmVudEZpbHRlck5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBieSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnlbY3VycmVudFZhbHVlXSA9PSBmaWx0ZXJzVG9BcHBseVtjdXJyZW50RmlsdGVyTmFtZV0pXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudHJpZXNIYXZlRmlsdGVyW2NvdW50cnlJbmRleF0rKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIGNvbG91ciBvbmx5IHRoZSBjb3VudHJpcyB3aG9zZSBjb3VudHJpZXNIYXZlRmlsdGVyW2luZGV4XSA9PSBudW1iZXJGaWx0ZXJzXG4gICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGNvdW50cnlJbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgaWYgKGNvdW50cmllc0hhdmVGaWx0ZXJbY291bnRyeUluZGV4XSA9PSBudW1GaWx0ZXJzVG9BcHBseSlcbiAgICAgICAgICAgIGNvbG9yc1tjdXJyZW50Q291bnRyeS5jb3VudHJ5XSA9IGN1cnJlbnRDb3VudHJ5LkNvdW50O1xuICAgIH0pO1xuICAgIHJlbG9hZE1hcChjb2xvcnMpO1xuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvKlxuICAgIE1hcmtlcnNcbiAgICAqL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAvLyBmb3IgZWFjaCBvZiB0aGUgbWFya2Vyc1xuICAgICQuZWFjaChqc29uTWFya2VycywgZnVuY3Rpb24obWFya2VySW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcbiAgICAgICAgLy8gc2V0IHRvIDAgdGhlIG51bWJlciBvZiBmaWx0ZXJzXG4gICAgICAgIG1hcmtlcnNIYXZlRmlsdGVyW21hcmtlckluZGV4XSA9IDA7XG4gICAgICAgIC8vIGNoZWNrIGlmIGl0IGhhcyB0aGUgbmVlZGVkIHZhbHVlc1xuICAgICAgICAkLmVhY2goa2V5cywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRGaWx0ZXJOYW1lKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnTmFtZScgKyBpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSAnVmFsdWUnICsgaTtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgQ291bnRyeSBoYXMgdGhhdCBuYW1lXG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50TWFya2VyW2N1cnJlbnROYW1lVG9DaGVja10pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNYXJrZXJbY3VycmVudE5hbWVUb0NoZWNrXS50b0xvd2VyQ2FzZSgpID09IGN1cnJlbnRGaWx0ZXJOYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgYnkgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNYXJrZXJbY3VycmVudFZhbHVlXSA9PSBmaWx0ZXJzVG9BcHBseVtjdXJyZW50RmlsdGVyTmFtZV0pXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzSGF2ZUZpbHRlclttYXJrZXJJbmRleF0rKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIGFkZCBvbmx5IHRoZSBtYXJrZXJzIHdobyBzYXRpc2Z5IHRoZSBjcml0ZXJpYVxuICAgICQuZWFjaChqc29uTWFya2VycywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcbiAgICAgICAgaWYgKG1hcmtlcnNIYXZlRmlsdGVyW2luZGV4XSA9PSBudW1GaWx0ZXJzVG9BcHBseSkge1xuICAgICAgICAgICAgbWFwLmFkZE1hcmtlcihpbmRleCwge1xuICAgICAgICAgICAgICAgIGxhdExuZzogW2N1cnJlbnRNYXJrZXIuTGF0aXR1ZGUsIGN1cnJlbnRNYXJrZXIuTG9uZ2l0dWRlXSxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50TWFya2VyLmRlc2MsXG5cbiAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIHN0eWxlIGZvciB0aGlzIG1hcmtlclxuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGw6ICdncmVlbicsXG4gICAgICAgICAgICAgICAgICAgIHI6IG1hcFJhbmdlKGN1cnJlbnRNYXJrZXIuQ291bnQsIG1pbkNvdW50LCBtYXhDb3VudCwgbWluUmFkaXVzLCBtYXhSYWRpdXMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxufVxuXG5mdW5jdGlvbiBhcHBseU11bHRpcGxlRmlsdGVycyhzZWxlY3RlZE11bHRpcGxlRmlsdGVycywganNvbkZpbHRlcnMpIHtcblxuICAgIC8vIG51bWJlciBvZiBmaWx0ZXJzIHRvIGJlIGFwcGxpZWRcbiAgICB2YXIgbnVtRmlsdGVyc1RvQXBwbHkgPSBzZWxlY3RlZE11bHRpcGxlRmlsdGVycy5maWx0ZXIoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWRcbiAgICB9KS5sZW5ndGg7XG5cbiAgICB2YXIgY291bnRyaWVzSGF2ZUZpbHRlciA9IFtdO1xuICAgIHZhciBtYXJrZXJzSGF2ZUZpbHRlciA9IFtdO1xuXG4gICAgLy8gZm9yIGVhY2ggb2YgdGhlIGNvdW50cmllc1xuICAgICQuZWFjaChqc29uQ291bnRyaWVzLCBmdW5jdGlvbihjb3VudHJ5SW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgIC8vIHNldCB0byAwIHRoZSBudW1iZXIgb2YgZmlsdGVyc1xuICAgICAgICBjb3VudHJpZXNIYXZlRmlsdGVyW2NvdW50cnlJbmRleF0gPSAwO1xuICAgICAgICAvLyBjaGVjayBpZiBpdCBoYXMgdGhlIG5lZWRlZCB2YWx1ZXNcbiAgICAgICAgJC5lYWNoKHNlbGVjdGVkTXVsdGlwbGVGaWx0ZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEZpbHRlclZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnTmFtZScgKyBpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSAnVmFsdWUnICsgaTtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgQ291bnRyeSBoYXMgdGhhdCBuYW1lXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5W2N1cnJlbnROYW1lVG9DaGVja10gPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeVtjdXJyZW50TmFtZVRvQ2hlY2tdID09PSBqc29uRmlsdGVyc1tpbmRleF0uTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBieSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnlbY3VycmVudFZhbHVlXSA9PSBjdXJyZW50RmlsdGVyVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cmllc0hhdmVGaWx0ZXJbY291bnRyeUluZGV4XSsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB3aGlsZSAodHJ1ZSlcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB2YXIgY29sb3JzID0gW107XG5cbiAgICAvLyBjb2xvdXIgb25seSB0aGUgY291bnRyaXMgd2hvc2UgY291bnRyaWVzSGF2ZUZpbHRlcltpbmRleF0gPT0gbnVtYmVyRmlsdGVyc1xuICAgICQuZWFjaChqc29uQ291bnRyaWVzLCBmdW5jdGlvbihjb3VudHJ5SW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgIGlmIChjb3VudHJpZXNIYXZlRmlsdGVyW2NvdW50cnlJbmRleF0gPT0gbnVtRmlsdGVyc1RvQXBwbHkpXG4gICAgICAgICAgICBjb2xvcnNbY3VycmVudENvdW50cnkuY291bnRyeV0gPSBjdXJyZW50Q291bnRyeS5Db3VudDtcbiAgICB9KTtcblxuICAgIC8vIGNvbG91ciB0aGUgY291bnRyaWVzXG4gICAgcmVsb2FkTWFwKGNvbG9ycyk7XG5cblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLypcbiAgICBNYXJrZXJzXG4gICAgKi9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgLy8gZm9yIGVhY2ggb2YgdGhlIG1hcmtlcnNcbiAgICAkLmVhY2goanNvbk1hcmtlcnMsIGZ1bmN0aW9uKG1hcmtlckluZGV4LCBjdXJyZW50TWFya2VyKSB7XG4gICAgICAgIC8vIHNldCB0byAwIHRoZSBudW1iZXIgb2YgZmlsdGVyc1xuICAgICAgICBtYXJrZXJzSGF2ZUZpbHRlclttYXJrZXJJbmRleF0gPSAwO1xuICAgICAgICAvLyBjaGVjayBpZiBpdCBoYXMgdGhlIG5lZWRlZCB2YWx1ZXNcbiAgICAgICAgJC5lYWNoKHNlbGVjdGVkTXVsdGlwbGVGaWx0ZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEZpbHRlclZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnTmFtZScgKyBpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSAnVmFsdWUnICsgaTtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgQ291bnRyeSBoYXMgdGhhdCBuYW1lXG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50TWFya2VyW2N1cnJlbnROYW1lVG9DaGVja10pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNYXJrZXJbY3VycmVudE5hbWVUb0NoZWNrXS50b0xvd2VyQ2FzZSgpID09IGpzb25GaWx0ZXJzW2luZGV4XS5OYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgYnkgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNYXJrZXJbY3VycmVudFZhbHVlXSA9PSBjdXJyZW50RmlsdGVyVmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzSGF2ZUZpbHRlclttYXJrZXJJbmRleF0rKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIGFkZCBvbmx5IHRoZSBtYXJrZXJzIHdobyBzYXRpc2Z5IHRoZSBjcml0ZXJpYVxuICAgICQuZWFjaChqc29uTWFya2VycywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcbiAgICAgICAgaWYgKG1hcmtlcnNIYXZlRmlsdGVyW2luZGV4XSA9PSBudW1GaWx0ZXJzVG9BcHBseSkge1xuICAgICAgICAgICAgbWFwLmFkZE1hcmtlcihpbmRleCwge1xuICAgICAgICAgICAgICAgIGxhdExuZzogW2N1cnJlbnRNYXJrZXIuTGF0aXR1ZGUsIGN1cnJlbnRNYXJrZXIuTG9uZ2l0dWRlXSxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50TWFya2VyLmRlc2MsXG5cbiAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIHN0eWxlIGZvciB0aGlzIG1hcmtlclxuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGw6ICdncmVlbicsXG4gICAgICAgICAgICAgICAgICAgIHI6IG1hcFJhbmdlKGN1cnJlbnRNYXJrZXIuQ291bnQsIG1pbkNvdW50LCBtYXhDb3VudCwgbWluUmFkaXVzLCBtYXhSYWRpdXMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiIsInZhciBSZWdpb24gPSBmdW5jdGlvbihyZWdpb25PYmplY3QsIGNvdW50cnkpIHtcbiAgICAvLyByZWFkIGZyb20gdGhlIGlucHV0IHBhcmFtZXRlcnNcbiAgICB0aGlzLlJlZ2lvbiA9IHJlZ2lvbk9iamVjdC5uYW1lO1xuICAgIHRoaXMuY291bnRyeSA9IGNvdW50cnk7XG4gICAgLy8gKyBpcyB1c2VkIHRvIGFzc3VyZSB0aGF0IGEgTnVtYmVyIGlzIGJlaW5nIHJlYWRcbiAgICB0aGlzLmRlc2MgPSAnanVzdCBhIHJlZ2lvbi4uLic7XG59O1xuXG5mdW5jdGlvbiByZWFkUmVnaW9uc0Zyb21KU09OKHJlZ2lvbnMsIGNvdW50cnkpIHtcbiAgICB2YXIgcmVnaW9uc0FyciA9IFtdO1xuICAgICQuZWFjaChyZWdpb25zLCBmdW5jdGlvbihpbmRleCwgY3VycmVudFJlZ2lvbikge1xuICAgICAgICByZWdpb25zQXJyW2luZGV4XSA9IG5ldyBSZWdpb24oY3VycmVudFJlZ2lvbiwgY291bnRyeSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlZ2lvbnM7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlQ29sb3JzRm9yVGhlUmVnaW9ucyhjb3VudHJ5KXtcbiAgICB2YXIgaXNvQ29kZSA9IGNvdW50cnkuc3BsaXQoXCJfXCIpWzBdLnRvVXBwZXJDYXNlKCk7XG4gICAgLy8gZmluZCB0aGUgY291bnRyeSB3aXRoIHRoYXQgaXNvQ29kZVxuICAgIHZhciByZWdpb25Db2xvcnMgPSBbXTtcbiAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgIGlmIChjdXJyZW50Q291bnRyeS5jb3VudHJ5ID09IGlzb0NvZGUpIHtcbiAgICAgICAgICAgIC8vIGNvdW50cnkgd2FzIGZvdW5kLCBjaGVjayBpZiBpdCBoYXMgYW55IHJlZ2lvblxuICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5LlJlZ2lvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVnaW9ucyA9IGN1cnJlbnRDb3VudHJ5LlJlZ2lvbnM7XG4gICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSByZWdpb25zIG9mIHRoZSBjb3VudHJ5XG4gICAgICAgICAgICBcdCQuZWFjaChyZWdpb25zLCBmdW5jdGlvbihpbmRleCwgY3VycmVudFJlZ2lvbikge1xuICAgICAgICAgICAgXHRcdHJlZ2lvbkNvbG9yc1tjdXJyZW50UmVnaW9uLm5hbWVdID0gMTAwO1xuICAgICAgICAgICAgXHR9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXHRyZXR1cm4gcmVnaW9uQ29sb3JzO1xufVxuXG5cbmZ1bmN0aW9uIGJ1aWxkUmVnaW9uVG9vbHRpcChyZWdpb24pIHtcbiAgICB2YXIgZmluYWxUb29sdGlwID0gcmVnaW9uVG9vbHRpcDtcbiAgICBmaW5hbFRvb2x0aXAgPSBmaW5hbFRvb2x0aXAucmVwbGFjZSgnbmFtZScsIHJlZ2lvbi5uYW1lKTtcbiAgICByZXR1cm4gZmluYWxUb29sdGlwO1xufVxuXG5mdW5jdGlvbiBhZGRSZWdpb25zVG9NYXAoa2V5KSB7XG4gICAgLy8gY2hlY2sgaWYgdGhlIGhpZ2hsaWdodGVkIGNvdW50cnkgaGFzIGFueSByZWdpb25cbiAgICB2YXIgaXNvQ29kZSA9IGtleS5zcGxpdChcIl9cIilbMF0udG9VcHBlckNhc2UoKTtcbiAgICAvLyBmaW5kIHRoZSBjb3VudHJ5IHdpdGggdGhhdCBpc29Db2RlXG4gICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuICAgICAgICBpZiAoY3VycmVudENvdW50cnkuY291bnRyeSA9PSBpc29Db2RlKSB7XG4gICAgICAgICAgICAvLyBjb3VudHJ5IHdhcyBmb3VuZCwgY2hlY2sgaWYgaXQgaGFzIGFueSByZWdpb25cbiAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeS5SZWdpb25zKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlZ2lvbnMgPSBjdXJyZW50Q291bnRyeS5SZWdpb25zO1xuICAgICAgICAgICAgICAgIHZhciBwYWxldHRlID0gWycjNjZDMkE1JywgJyNGQzhENjInLCAnIzhEQTBDQicsICcjRTc4QUMzJywgJyNBNkQ4NTQnXTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZUNvbG9ycygpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9ycyA9IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5O1xuICAgICAgICAgICAgICAgICAgICBjb2xvcnNbbWFwcy5yZWdpb25dXG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChrZXkgaW4gbWFwcy5yZWdpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcnNba2V5XSA9IHBhbGV0dGVbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcGFsZXR0ZS5sZW5ndGgpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sb3JzO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZ2VuZXJhdGVDb2xvcnMoKSk7XG4gICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBjb2xvcnMgb2YgdGhlIHJlZ2lvbnNcbiAgICAgICAgICAgICAgICBtYXBzLnNlcmllcy5yZWdpb25zWzBdLnNldFZhbHVlcyhnZW5lcmF0ZUNvbG9ycygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9