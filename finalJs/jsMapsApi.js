function mapRange(e,r,o,n,t){return n+(t-n)*(e-r)/(o-r)}function buildCountryTooltip(e,r){var o=countryTooltip;return $.each(Object.keys(r),function(e,n){o=o.replace(n,r[n])}),o}function generateColorsForTheCountries(e){e||(e=jsonCountries);var r=[];return $.each(e,function(e,o){r[o.name]=o.count}),r}function readCountriesFromJSON(e){{var r=[];e.length}return minCount=1/0,maxCount=-(1/0),$.each(e,function(e,o){r[e]=new Country(o),console.log(r[e]),r[e].Count>maxCount&&(maxCount=r[e].Count),r[e].Count<minCount&&(minCount=r[e].Count)}),r}function findCountryByName(e){var r=null;return $.each(jsonCountries,function(o,n){return n.country==e?r=n:void 0}),r}function readMinMax(e){minCount=1/0,maxCount=-(1/0);var r=[];for(var o in e)e.hasOwnProperty(o)&&r.push(o);$.each(r,function(e,r){var o=findCountryByName(r);o.Count>maxCount&&(maxCount=o.Count),o.Count<minCount&&(minCount=o.Count)})}function createFiltersBoxCheckboxes(){$("filter-box").append('<ul class="nav navbar-nav" id="filterBoxCheckboxes" style="border-style: solid; border-width: 2px;"></ul>'),$.each(jsonFiltersArray,function(e,r){function o(e){return"<p>"+JSON.stringify(e)+"</p>"}function n(){var e=$("p.status").empty();e.append(o(widget.checked()))}var t="#box"+(e+1);$("#filterBoxCheckboxes").append('<li class="col-sm-6" id="box'+(e+1)+'" class="dropdown-checkbox-example dropdown-checkbox dropdown"></li>');var a=[];$.each(r.Values,function(e,r){a.push({id:e+1,label:r,isChecked:!1})});var i=r.Name.toLowerCase();i=i.charAt(0).toUpperCase()+i.slice(1),$(t).dropdownCheckbox({data:a,autosearch:!0,hideHeader:!1,showNbSelected:!1,templateButton:'<a class="dropdown-checkbox-toggle" data-toggle="dropdown" href="#">'+i+'<span class="dropdown-checkbox-nbselected"></span><b class="caret"></b>'}),widget=$(t).data("dropdownCheckbox"),$("body").on("change:dropdown-checkbox checked checked:all check:all uncheck:all check:checked uncheck:checked",n()),n()});var e='<div id="filters_box" class="row col-sm-12"><button id="filter_box_apply_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Filter</button><button id="filter_box_reset_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Reset</button></div>';$("#filterBoxCheckboxes").append(e),$("#filter_box_apply_filters").click(function(){for(var e={},r=jsonFiltersArray.length,o=0,n=0;n<jsonFiltersArray.length;n++){for(var t="#box"+(n+1),a=getSelectedItems(t),i=[],s=Object.keys(a),l=0;l<s.length;l++)i.push(a[s[l]].label);s.length>0?e[jsonFiltersArray[n].Name]=i.join():o++}o!=r&&filter(e)}),$("#filter_box_reset_filters").click(function(){resetFiltersBox()})}function getSelectedItems(e){return $(e).dropdownCheckbox("checked")}function createFiltersBoxWithEnumeration(e){e.length;$.each(e,function(e,r){var o=r.Name.toLowerCase();o=o.charAt(0).toUpperCase()+o.slice(1);var n="";n+="<p><b>"+o+":</b></p>",n+='<div class="form-group">',n+='<input type="text" class="form-control" id="fbox'+e+'"';var t=r.Values;n+='placeholder="'+t+'" +>',n+="</div>",$("filter-box").append(n),$("#filter-box").tooltip({title:"Use this filter box to filter by multiple filters",placement:"bottom"})});var r='<div id="filters_box"><button id="filter_box_apply_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Filter</button><button id="filter_box_reset_filters" type="button" class="btn btn-primary col-sm-4 col-sm-offset-1">Reset</button></div>';$("filter-box").append(r),$("#filter_box_apply_filters").click(function(){for(var r={},o=e.length,n=0,t=0;t<e.length;t++){var a="#fbox"+t,i=$(a).val();""!==i?r[e[t].Name]=i:n++}n!=o&&filter(r)}),$("#filter_box_reset_filters").click(function(){resetFiltersBox()})}function getAllFilterValues(e){var r=[];if(-1!=String(e).indexOf(",")){var o=String(e).split(",");$.each(o,function(e,o){if(-1!=o.indexOf("-")){var n=String(o).split("-");checkFilterValuesAreValid(filterObject,n);for(var t=n[0],a=n[1];a>=t;t++)r.push(t)}else r.push(o)})}else if(-1!=e.indexOf("-")){var n=String(e).split("-");checkFilterValuesAreValid(filterObject,n);for(var t=n[0],a=n[1];a>=t;t++)r.push(t)}else r.push(e);return r}function checkWhatCountriesToAdd(e,r){var o=[];return $.each(jsonCountries,function(e,n){for(var t=0;;){t++;var a="name"+t,i="value"+t;if(!n[a])break;n[i]==r&&(countryValueToCheck=i,n[i]==r&&(o[n.country]=n.Count))}}),o}function checkWhatMarkersToAdd(e,r){var o=[];return $.each(jsonMarkers,function(n,t){$.each(Object.keys(t),function(n,a){a.toLowerCase()==e.Name.toLowerCase()&&t[a]==r&&o.push(t)})}),o}function checkWhatCountriesMarkersToAdd(e,r){var o=[],n=[];return o=checkWhatCountriesToAdd(e,r),n=checkWhatMarkersToAdd(e,r),[o,n]}function checkFilterNameIsValid(e){var r=!1;return $.each(jsonFiltersArray,function(o,n){return n.Name.toLowerCase()===e.toLowerCase()?(filterObject=n,void(r=!0)):void 0}),r}function checkFilterValuesAreValid(e,r){var o=!1;return $.each(r,function(e,r){return $.each(filterObject.Values,function(e,n){return n==r?void(o=!0):void 0}),o?void 0:void console.log("Invalid value for the filter: "+r)}),o}function resetFilters(){var e=generateColorsForTheCountries();reloadMap(e),$.each(jsonMarkers,function(e,r){map.addMarker(e,{latLng:[r.Latitude,r.Longitude],name:r.desc,style:{fill:"green",r:mapRange(r.Count,minCount,maxCount,minRadius,maxRadius)}})})}function filterFromMenuSelected(e,r){currentFilter=e;var o=checkWhatCountriesToAdd(e,r);if(reloadMap(o),$.each(jsonMarkers,function(o,n){for(var t=0;;){t++;var a="Name"+t,i="Value"+t;if(!n[a])break;n[a]===e.Name&&n[i]===r&&map.addMarker(o,{latLng:[n.Latitude,n.Longitude],name:n.desc,style:{fill:"green",r:mapRange(n.Count,minCount,maxCount,minRadius,maxRadius)}})}}),isNaN(e.Values[0]))$("#slider").hide(),$("#minSlider").hide(),$("#maxSlider").hide();else{$("#slider").show(),$("#minSlider").show(),$("#maxSlider").show();var n=$("#slider").slider(),t=e.Values[0],a=e.Values[e.Values.length-1];n.slider("option","min",t),n.slider("option","max",a),$("#minSlider").text(t),$("#maxSlider").text(a)}}function sliderChanged(){var e=slider.slider("option","values"),r=e[0],o=e[1],n=currentFilter.Name;$("#minSlider").text(r),$("#maxSlider").text(o);var t=[];$.each(jsonCountries,function(e,n){var a=+n[countryValueToCheck];a>=r&&o>=a&&(t[n.country]=n.Count)}),reloadMap(t);for(var a,i=jsonCountries[0],s=0;;){s++;var l="Name"+s,u="Value"+s;if(i[l]===n){a=u;break}}$.each(jsonMarkers,function(e,n){n[a]>=r&&n[a]<=o&&map.addMarker(e,{latLng:[n.Latitude,n.Longitude],name:n.desc,style:{fill:"green",r:mapRange(n.Count,minCount,maxCount,minRadius,maxRadius)}})})}function readFiltersFromJSON(e){for(var r=[],o=0;o<e.values.length;o++){currentFilter=e.values[o];for(var n=currentFilter.name,t=[],a=0;a<currentFilter.values.length;a++)t.push(currentFilter.values[a]);r[o]=new Filter(n,t)}return numFilters=r.length,r}function jsonMapCountries(e,r){var o=[];$.getJSON(r,function(r){$.each(e,function(e,n){var t=n[r.country],a=0;o[e]=new Country("",t,a)}),mappingCountries=o,console.log(mappingCountries)})}function jsonMapMarkers(e,r){var o=[];$.getJSON(r,function(r){$.each(e,function(e,n){var t=n[r.country],a=0,i=n[r.Latitude],s=n[r.Longitude];o[e]=new Marker("",t,a,i,s)}),mappingMarkers=o,console.log(mappingMarkers)})}function reloadMap(e){map.params.map==mType?(jsonCountries.length>0&&readMinMax(e),$("#"+mDiv).empty(),map=new jvm.Map({map:mType,backgroundColor:background,container:$("#"+mDiv),onRegionClick:function(e,r){countryCode=r.toLowerCase();var o=countryCode+"_mill_en";switchMap(o)},onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,o);r.html(n)},onRegionTipShow:function(e,r,o){var n=-1;if($.each(jsonCountries,function(e,r){return r.country===o?void(n=r):void 0}),-1!=n){var t=buildCountryTooltip(r,n);r.html(t)}else r.html(r.html())},series:{markers:[finalMarkersInMap],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:e}]}})):(jsonCountries.length>0&&readMinMax(e),$("#"+mDiv).empty(),removeTooltip(),switchMap(mapType))}function removeTooltip(){$(".jvectormap-tip").remove()}function switchMap(e){$("#"+mDiv).empty(),removeTooltip();var r=generateColorsForTheRegions(e);map=new jvm.Map({map:e,backgroundColor:background,container:$("#"+mDiv),onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,o);r.html(n)},onRegionTipShow:function(r,o,n){var t=e.split("_")[0].toUpperCase(),a=-1;$.each(jsonCountries,function(e,r){return r.country==t?void(a=r):void 0});var i,s=!1;$.each(map.regions,function(e,r){return r.name==n?(i=r,void(s=!0)):void 0}),o.html(s?buildRegionTooltip(i):o.html())},series:{markers:[{scale:[minColorMap,maxColorMap],values:[minCount,maxCount],legend:{vertical:!0}}],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:r}]}}),$("#my_map").append('<div class="jvectormap-goback">Back</div>'),$(".jvectormap-goback").click(function(){$("#"+mDiv).empty(),removeTooltip(),map=new jvm.Map({container:$("#"+mDiv),map:mType,backgroundColor:background,onRegionClick:function(e,r){countryCode=r.toLowerCase();var o=countryCode+"_mill_en";switchMap(o)},onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,o);r.html(n)},onRegionTipShow:function(e,r,o){var n=-1;if($.each(jsonCountries,function(e,r){return r.country===o?void(n=r):void 0}),-1!=n){var t=buildCountryTooltip(r,n);r.html(t)}else r.html(r.html())},series:{markers:[{scale:[minColorMap,maxColorMap],values:[minCount,maxCount],legend:{vertical:!0}}],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:auxColors}]}}),thereAreMarkers&&addMarkersToMap()}),thereAreMarkers&&addMarkersToMap(),jsonCountries}function readMarkersFromJSON(e){var r=[];return minCount=1/0,maxCount=-(1/0),$.each(e,function(e,o){r[e]=new Marker(o);var n=r[e].Count;n>maxCount&&(maxCount=n),n<minCount&&(minCount=n)}),r}function addMarkersToMap(){var e=[];$.each(filteredMarkers,function(r,o){var n={latLng:[o.latitude,o.longitude],name:o.desc,style:{fill:"red",r:mapRange(o.count,minCount,maxCount,minRadius,maxRadius),image:"../img/"+o.icon+".png"}};e.push(n)}),map.addMarkers(e)}function buildMarkerTooltip(e,r){var o=markerTooltip;return $.each(Object.keys(r),function(e,n){o=o.replace(n,r[n])}),o}function filter(e){var r=Object.keys(e),o=r.length,n=0,t=new Array,a=new Array;for(l=0;o>l;l++)t[l]=new Array,a[l]=new Array;var i=!1;if($.each(r,function(e,r){return"all"==r.toLowerCase()?(i=!0,resetFilters(),void resetFiltersBox()):void 0}),!i){$.each(r,function(r,o){if(!checkFilterNameIsValid(o))return void console.log("Invalid filter name!("+o+")");var i=e[o],s=getAllFilterValues(i);n++,$.each(s,function(e,o){var n=checkWhatCountriesMarkersToAdd(filterObject,o),i=n[0],s=n[1];$.each(Object.keys(i),function(e,o){var n=i[o];t[r][o]=n}),$.each(s,function(e,o){a[r].push(o)})})});var s=[];if(t.length>0){s=t[0];for(var l=0;l<t.length-1;l++)s=getCountriesIntersection(s,t[l+1])}if(reloadMap(s),filteredMarkers=[],a.length>0){filteredMarkers=a[0];for(var l=0;l<a.length-1;l++)filteredMarkers=getMarkersIntersection(filteredMarkers,a[l+1])}addMarkersToMap()}}function getMarkersIntersection(e,r){var o=[];return $.each(e,function(e,n){var t=n.country;$.each(r,function(e,r){var a=r.country;t==a&&o.push(n)})}),o}function getCountriesIntersection(e,r){var o=[];return $.each(Object.keys(e),function(n,t){$.each(Object.keys(r),function(r,n){t==n&&(o[t]=e[t])})}),o}function applyMultipleFiltersProgramattically(e){var r=Object.keys(e),o=r.length,n=[],t=[];$.each(r,function(r,o){e[o]});var a=[];map.removeAllMarkers(),$.each(jsonCountries,function(o,t){n[o]=0,$.each(r,function(r,a){for(var i=0;;){i++;var s="Name"+i,l="Value"+i;if(!t[s])break;t[s].toLowerCase()==a.toLowerCase()&&t[l]==e[a]&&n[o]++}})}),$.each(jsonCountries,function(e,r){n[e]==o&&(a[r.country]=r.Count)}),reloadMap(a),$.each(jsonMarkers,function(o,n){t[o]=0,$.each(r,function(r,a){for(var i=0;;){i++;var s="Name"+i,l="Value"+i;if(!n[s])break;n[s].toLowerCase()==a.toLowerCase()&&n[l]==e[a]&&t[o]++}})}),$.each(jsonMarkers,function(e,r){t[e]==o&&map.addMarker(e,{latLng:[r.Latitude,r.Longitude],name:r.desc,style:{fill:"green",r:mapRange(r.Count,minCount,maxCount,minRadius,maxRadius)}})})}function applyMultipleFilters(e,r){var o=e.filter(function(e){return void 0!==e}).length,n=[],t=[];$.each(jsonCountries,function(o,t){n[o]=0,$.each(e,function(e,a){for(var i=0;;){i++;var s="Name"+i,l="Value"+i;if(void 0==t[s])break;t[s]===r[e].Name&&t[l]==a&&n[o]++}})});var a=[];$.each(jsonCountries,function(e,r){n[e]==o&&(a[r.country]=r.Count)}),reloadMap(a),$.each(jsonMarkers,function(o,n){t[o]=0,$.each(e,function(e,a){for(var i=0;;){i++;var s="Name"+i,l="Value"+i;if(!n[s])break;n[s].toLowerCase()==r[e].Name.toLowerCase()&&n[l]==a&&t[o]++}})}),$.each(jsonMarkers,function(e,r){t[e]==o&&map.addMarker(e,{latLng:[r.Latitude,r.Longitude],name:r.desc,style:{fill:"green",r:mapRange(r.Count,minCount,maxCount,minRadius,maxRadius)}})})}function readRegionsFromJSON(e,r){var o=[];return $.each(e,function(e,n){o[e]=new Region(n,r)}),e}function generateColorsForTheRegions(e){var r=e.split("_")[0].toUpperCase(),o=[];return $.each(jsonCountries,function(e,n){if(n.country==r&&n.Regions){var t=n.Regions;$.each(t,function(e,r){o[r.name]=100})}}),o}function buildRegionTooltip(e){var r=regionTooltip;return r=r.replace("name",e.name)}function addRegionsToMap(e){var r=e.split("_")[0].toUpperCase();$.each(jsonCountries,function(e,o){function n(){var e,r={};r[maps.region];for(e in maps.regions)r[e]=t[Math.floor(Math.random()*t.length)];return r}if(o.country==r&&o.Regions){var t=(o.Regions,["#66C2A5","#FC8D62","#8DA0CB","#E78AC3","#A6D854"]);console.log(n()),maps.series.regions[0].setValues(n())}})}var vectorMap,jsonFilters=[],minColorMap,maxColorMap,mDiv,mType,background,filteredMarkers,thereAreMarkers=!1,VectorialMap=function(){};VectorialMap.prototype.createMap=function(e,r,o,n,t,a,i,s,l){if(background=s,mType=i,jsonCountries=[],jsonMarkers=[],mDiv=n,minColorMap=t,maxColorMap=a,"countries"==l)jsonCountries=readCountriesFromJSON(e),jQuery.ajax({url:"../tooltip-templates/country_tooltip.html",success:function(e){countryTooltip=e},async:!1}),jQuery.ajax({url:"../tooltip-templates/region_tooltip.html",success:function(e){regionTooltip=e},async:!1});else{if("markers"!=l)return void console.error("You must give as input a list of markers or countries!");thereAreMarkers=!0,jsonMarkers=readMarkersFromJSON(e),filteredMarkers=jsonMarkers,numMarkers=jsonMarkers.length,jQuery.ajax({url:"../tooltip-templates/marker_tooltip.html",success:function(e){markerTooltip=e},async:!1})}auxColors=generateColorsForTheCountries();var u={vertical:!0};markersWithLegend={scale:[minColorMap,maxColorMap],values:[minCount,maxCount],legend:u},markersWithoutLegend={scale:[minColorMap,maxColorMap],values:[minCount,maxCount]},finalMarkersInMap=markersWithLegend,"markers"==l&&(finalMarkersInMap=markersWithoutLegend),map=new jvm.Map({container:$("#"+n),map:mType,backgroundColor:background,onRegionClick:function(e,r){countryCode=r.toLowerCase();var o=countryCode+"_mill_en";switchMap(o)},onMarkerTipShow:function(e,r,o){var n=buildMarkerTooltip(jsonMarkers,jsonMarkers[o]);r.html(n)},onRegionTipShow:function(e,r,o){var n=-1;if($.each(jsonCountries,function(e,r){return r.name===o?void(n=r):void 0}),-1!=n){var t=buildCountryTooltip(r,n);r.html(t)}else r.html(r.html())},series:{markers:[finalMarkersInMap],regions:[{scale:[minColorMap,maxColorMap],attribute:"fill",values:auxColors}]}}),"markers"==l&&(filteredMarkers=jsonMarkers,addMarkersToMap())},VectorialMap.prototype.filterOnServer=function(e){$.getJSON("../json/serverFilter.json",function(e){var r=JSON.stringify(e),o="http://serverFiltering.com/?data="+encodeURIComponent(r);o="../json/countries_plus_markers2.json",$.getJSON(o,function(e){jsonCountries=readCountriesFromJSON(e.countries);var r=generateColorsForTheCountries(jsonCountries);reloadMap(r),e.markers&&(jsonMarkers=readMarkersFromJSON(e.markers),addMarkersToMap())})})};var Country=function(e){var r=e.attributes,o=this;$.each(Object.keys(r),function(e,n){o[n]=r[n]}),e.Regions&&(this.Regions=readRegionsFromJSON(e.Regions,e.country)),this.name=e.name,this.count=+e.count,this.desc="abc"},resetFiltersBox=function(){for(var e=0;numFilters>e;e++)$("#fbox"+e).text(""),$("#fbox"+e).val("");var r=generateColorsForTheCountries();reloadMap(r),filteredMarkers=jsonMarkers,addMarkersToMap()},Filter=function(e,r){this.Name=e,this.Values=r},numFilters,currentFilter,countryValueToCheck;VectorialMap.prototype.createSlider=function(){slider=$("#slider").slider(),slider.slider("option","min",minRadius),slider.slider("option","max",maxRadius),slider.slider("option","range",!0),slider.slider("option","animate","slow"),slider.on("slidechange",function(e,r){sliderChanged()}),$("#slider").hide(),$("#minSlider").hide(),$("#maxSlider").hide()};var mappingMarkers=[],mappingCountries=[];VectorialMap.prototype.registerTransformer=function(e,r,o){var r="../mappingJSON/mappingCountriesSample.json",o="../mappingJSON/mappingMarkersSample.json";return r?o?(e="../json/espid-spain.json",void $.getJSON(e,function(e){jsonMapCountries(e,r),jsonMapMarkers(e,o)})):void console.error("you must specify a markers mapping json"):void console.error("you must specify a countries mapping json")};var Marker=function(e){var r=e.attributes,o=this;$.each(Object.keys(r),function(e,n){o[n]=r[n]}),this.country=e.country,this.count=+e.count,this.latitude=e.latitude,this.longitude=e.longitude,this.icon=e.icon,this.desc="abc"},Region=function(e,r){this.Region=e.name,this.country=r,this.desc="just a region..."};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJjb3VudHJpZXMuanMiLCJjcmVhdGVGaWx0ZXJzLmpzIiwiZmlsdGVycy1hdXhpbGlhcnkuanMiLCJmaWx0ZXJzLmpzIiwianNvbi1tYXBwaW5nLmpzIiwibWFwcy1hdXhpbGlhcnkuanMiLCJtYXJrZXJzLmpzIiwibXVsdGlwbGUtZmlsdGVycy5qcyIsInJlZ2lvbnMuanMiXSwibmFtZXMiOlsibWFwUmFuZ2UiLCJ2YWx1ZSIsImxvdzEiLCJoaWdoMSIsImxvdzIiLCJoaWdoMiIsImJ1aWxkQ291bnRyeVRvb2x0aXAiLCJjb3VudHJ5TmFtZSIsImNvdW50cnkiLCJmaW5hbFRvb2x0aXAiLCJjb3VudHJ5VG9vbHRpcCIsIiQiLCJlYWNoIiwiT2JqZWN0Iiwia2V5cyIsImluZGV4IiwiYXR0ciIsInJlcGxhY2UiLCJnZW5lcmF0ZUNvbG9yc0ZvclRoZUNvdW50cmllcyIsImNvdW50cmllcyIsImpzb25Db3VudHJpZXMiLCJjb3VudHJ5Q29sb3JzIiwiY3VycmVudENvdW50cnkiLCJuYW1lIiwiY291bnQiLCJyZWFkQ291bnRyaWVzRnJvbUpTT04iLCJtYXJrZXJzIiwibGVuZ3RoIiwibWluQ291bnQiLCJJbmZpbml0eSIsIm1heENvdW50IiwiQ291bnRyeSIsImNvbnNvbGUiLCJsb2ciLCJDb3VudCIsImZpbmRDb3VudHJ5QnlOYW1lIiwicmV0dXJuQ291bnRyeSIsInJlYWRNaW5NYXgiLCJjb3VudHJpZXNOYW1lcyIsImtleSIsImhhc093blByb3BlcnR5IiwicHVzaCIsImN1cnJlbnRDb3VudHJ5TmFtZSIsImNyZWF0ZUZpbHRlcnNCb3hDaGVja2JveGVzIiwiYXBwZW5kIiwianNvbkZpbHRlcnNBcnJheSIsImN1cnJlbnRGaWx0ZXIiLCJwIiwid2F0IiwiSlNPTiIsInN0cmluZ2lmeSIsInVwZGF0ZVN0YXR1cyIsIiRwIiwiZW1wdHkiLCJ3aWRnZXQiLCJjaGVja2VkIiwiYm94SUQiLCJ0YWIiLCJWYWx1ZXMiLCJjdXJyZW50VmFsdWUiLCJpZCIsImxhYmVsIiwiaXNDaGVja2VkIiwiTmFtZSIsInRvTG93ZXJDYXNlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsImRyb3Bkb3duQ2hlY2tib3giLCJkYXRhIiwiYXV0b3NlYXJjaCIsImhpZGVIZWFkZXIiLCJzaG93TmJTZWxlY3RlZCIsInRlbXBsYXRlQnV0dG9uIiwib24iLCJ0ZXh0VG9BcHBlbmQiLCJjbGljayIsImpzb25PYmplY3QiLCJudW1GaWx0ZXJzIiwiZW1wdHlGaWx0ZXJzIiwiaSIsInNlbGVjdGVkSXRlbXMiLCJnZXRTZWxlY3RlZEl0ZW1zIiwiaXRlbXNBcnJheSIsImoiLCJqb2luIiwiZmlsdGVyIiwicmVzZXRGaWx0ZXJzQm94IiwiY3JlYXRlRmlsdGVyc0JveFdpdGhFbnVtZXJhdGlvbiIsImpzb25GaWx0ZXJzIiwiZmlsdGVyTmFtZSIsInRvQXBwZW5kIiwicGxhY2Vob2xkZXIiLCJ0b29sdGlwIiwidGl0bGUiLCJwbGFjZW1lbnQiLCJjdXJyZW50RmlsdGVyVmFsdWUiLCJ2YWwiLCJnZXRBbGxGaWx0ZXJWYWx1ZXMiLCJmaWx0ZXJWYWx1ZSIsInJldHVyblBhcnRzIiwiU3RyaW5nIiwiaW5kZXhPZiIsImVudW1lcmF0aW9uUGFydHMiLCJzcGxpdCIsImN1cnJlbnRFbnVtZXJhdGlvbiIsInJhbmdlUGFydHMiLCJjaGVja0ZpbHRlclZhbHVlc0FyZVZhbGlkIiwiZmlsdGVyT2JqZWN0IiwibWluIiwibWF4Iiwic3ViUGFydHMiLCJjaGVja1doYXRDb3VudHJpZXNUb0FkZCIsInNlbGVjdGVkRmlsdGVyIiwiY3VycmVudE5hbWVUb0NoZWNrIiwiY291bnRyeVZhbHVlVG9DaGVjayIsImNoZWNrV2hhdE1hcmtlcnNUb0FkZCIsImpzb25NYXJrZXJzIiwiY3VycmVudE1hcmtlciIsImNoZWNrV2hhdENvdW50cmllc01hcmtlcnNUb0FkZCIsImNvdW50cmllc1RvQWRkIiwibWFya2Vyc1RvQWRkIiwiY2hlY2tGaWx0ZXJOYW1lSXNWYWxpZCIsInZhbGlkIiwiZmlsdGVyVmFsdWVzIiwicGFydCIsInJlc2V0RmlsdGVycyIsImNvbG9ycyIsInJlbG9hZE1hcCIsIm1hcCIsImFkZE1hcmtlciIsImxhdExuZyIsIkxhdGl0dWRlIiwiTG9uZ2l0dWRlIiwiZGVzYyIsInN0eWxlIiwiZmlsbCIsInIiLCJtaW5SYWRpdXMiLCJtYXhSYWRpdXMiLCJmaWx0ZXJGcm9tTWVudVNlbGVjdGVkIiwiaXNOYU4iLCJoaWRlIiwic2hvdyIsInNsaWRlciIsIm1pblZhbHVlIiwibWF4VmFsdWUiLCJ0ZXh0Iiwic2xpZGVyQ2hhbmdlZCIsImN1cnJlbnRSYW5nZSIsImN1cnJlbnRGaWx0ZXJOYW1lIiwiZmlsdGVyVmFsdWVGb3JDb3VudHJ5Iiwic2VsZWN0ZWROYW1lIiwicmVhZEZpbHRlcnNGcm9tSlNPTiIsImlucHV0RmlsdGVycyIsImZpbHRlcnMiLCJ2YWx1ZXMiLCJGaWx0ZXIiLCJqc29uTWFwQ291bnRyaWVzIiwianNvbiIsImNvdW50cmllc01hcHBpbmdKc29uIiwiZ2V0SlNPTiIsImpzb25NYXBwaW5nIiwiY3VycmVudEpTT04iLCJtYXBwaW5nQ291bnRyaWVzIiwianNvbk1hcE1hcmtlcnMiLCJtYXJrZXJzTWFwcGluZ0pzb24iLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsIk1hcmtlciIsIm1hcHBpbmdNYXJrZXJzIiwicGFyYW1zIiwibVR5cGUiLCJtRGl2IiwianZtIiwiTWFwIiwiYmFja2dyb3VuZENvbG9yIiwiYmFja2dyb3VuZCIsImNvbnRhaW5lciIsIm9uUmVnaW9uQ2xpY2siLCJlIiwiY29kZSIsImNvdW50cnlDb2RlIiwibmV3TWFwIiwic3dpdGNoTWFwIiwib25NYXJrZXJUaXBTaG93IiwiYnVpbGRNYXJrZXJUb29sdGlwIiwiaHRtbCIsIm9uUmVnaW9uVGlwU2hvdyIsInNlbGVjdGVkQ291bnRyeSIsInNlcmllcyIsImZpbmFsTWFya2Vyc0luTWFwIiwicmVnaW9ucyIsInNjYWxlIiwibWluQ29sb3JNYXAiLCJtYXhDb2xvck1hcCIsImF0dHJpYnV0ZSIsInJlbW92ZVRvb2x0aXAiLCJtYXBUeXBlIiwicmVtb3ZlIiwicmVnaW9uQ29sb3JzIiwiZ2VuZXJhdGVDb2xvcnNGb3JUaGVSZWdpb25zIiwicmVnaW9uTmFtZSIsImN1cnJlbnRNYXAiLCJzZWxlY3RlZFJlZ2lvbiIsInJlZ2lvbkZvdW5kIiwiY3VycmVudFJlZ2lvbiIsImJ1aWxkUmVnaW9uVG9vbHRpcCIsImxlZ2VuZCIsInZlcnRpY2FsIiwiYXV4Q29sb3JzIiwidGhlcmVBcmVNYXJrZXJzIiwiYWRkTWFya2Vyc1RvTWFwIiwicmVhZE1hcmtlcnNGcm9tSlNPTiIsImN1cnJlbnRKU09OTWFya2VyIiwiY3VycmVudENvdW50VmFsdWUiLCJtYXJrZXJzSlNPTkFycmF5IiwiZmlsdGVyZWRNYXJrZXJzIiwiY3VycmVudE1hcmtlckpTT04iLCJpbWFnZSIsImljb24iLCJhZGRNYXJrZXJzIiwibWFya2VyIiwibWFya2VyVG9vbHRpcCIsImlucHV0QXJncyIsIm51bWJlcktleXMiLCJ2YWxpZEZpbHRlcnMiLCJjb3VudHJpZXNCeUZpbHRlciIsIkFycmF5IiwibWFya2Vyc0J5RmlsdGVyIiwiZXhpdCIsImZpbmFsUGFydHMiLCJjaGVja1JldHVybiIsImNvdW50cmllc0F1eCIsIm1hcmtlcnNBdXgiLCJjdXJyZW50S2V5Iiwia2V5VmFsdWUiLCJmaW5hbENvdW50cmllcyIsImdldENvdW50cmllc0ludGVyc2VjdGlvbiIsImdldE1hcmtlcnNJbnRlcnNlY3Rpb24iLCJtYXJrZXJzR3JvdXAxIiwibWFya2Vyc0dyb3VwMiIsIm1hcmtlcjEiLCJtYXJrZXIxQ291bnRyeSIsIm1hcmtlcjIiLCJtYXJrZXIyQ291bnRyeSIsImNvdW50cmllc0dyb3VwMSIsImNvdW50cmllc0dyb3VwMiIsImNvdW50cnlOYW1lMSIsImNvdW50cnlOYW1lMiIsImFwcGx5TXVsdGlwbGVGaWx0ZXJzUHJvZ3JhbWF0dGljYWxseSIsImZpbHRlcnNUb0FwcGx5IiwibnVtRmlsdGVyc1RvQXBwbHkiLCJjb3VudHJpZXNIYXZlRmlsdGVyIiwibWFya2Vyc0hhdmVGaWx0ZXIiLCJyZW1vdmVBbGxNYXJrZXJzIiwiY291bnRyeUluZGV4IiwibWFya2VySW5kZXgiLCJhcHBseU11bHRpcGxlRmlsdGVycyIsInNlbGVjdGVkTXVsdGlwbGVGaWx0ZXJzIiwidW5kZWZpbmVkIiwicmVhZFJlZ2lvbnNGcm9tSlNPTiIsInJlZ2lvbnNBcnIiLCJSZWdpb24iLCJpc29Db2RlIiwiUmVnaW9ucyIsInJlZ2lvbiIsInJlZ2lvblRvb2x0aXAiLCJhZGRSZWdpb25zVG9NYXAiLCJnZW5lcmF0ZUNvbG9ycyIsIm1hcHMiLCJwYWxldHRlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwic2V0VmFsdWVzIiwidmVjdG9yTWFwIiwiVmVjdG9yaWFsTWFwIiwicHJvdG90eXBlIiwiY3JlYXRlTWFwIiwiaW5wdXRKU09OIiwibWFwRGl2IiwibWluQ29sb3IiLCJtYXhDb2xvciIsImRhdGFUeXBlIiwialF1ZXJ5IiwiYWpheCIsInVybCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJhc3luYyIsImVycm9yIiwibnVtTWFya2VycyIsImxlZ2VuZFZhciIsIm1hcmtlcnNXaXRoTGVnZW5kIiwibWFya2Vyc1dpdGhvdXRMZWdlbmQiLCJmaWx0ZXJPblNlcnZlciIsImZpbHRlcnNKU09OIiwiZmlsdGVyc1N0cmluZyIsImVuY29kZVVSSUNvbXBvbmVudCIsImNvdW50cnlPYmplY3QiLCJhdHRyaWJ1dGVzIiwidGhpcyIsImNyZWF0ZVNsaWRlciIsImV2ZW50IiwidWkiLCJyZWdpc3RlclRyYW5zZm9ybWVyIiwianNvbkxvY2F0aW9uIiwibWFya2VyT2JqZWN0IiwicmVnaW9uT2JqZWN0Il0sIm1hcHBpbmdzIjoiQUE4SUEsUUFBQUEsVUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQSxNQUFBRCxJQUFBQyxFQUFBRCxJQUFBSCxFQUFBQyxJQUFBQyxFQUFBRCxHQzVIQSxRQUFBSSxxQkFBQUMsRUFBQUMsR0FDQSxHQUFBQyxHQUFBQyxjQUlBLE9BSEFDLEdBQUFD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NEIsbUJBQ0FOLG1CQUVBaUgsY0FBQUMsVUFBQTRCLG9CQUFBLFNBQUFDLEVBQUFuSixFQUFBTSxHQUdBLEdBQUFOLEdBQUEsNkNBRUFNLEVBQUEsMENBRUEsT0FBQU4sR0FJQU0sR0FNQTZJLEVBQUEsK0JBQ0F4UyxHQUFBc0osUUFBQWtKLEVBQUEsU0FBQXBKLEdBRUFELGlCQUFBQyxFQUFBQyxHQUVBSyxlQUFBTixFQUFBTyxVQVZBdEksU0FBQW1RLE1BQUEsK0NBSkFuUSxTQUFBbVEsTUFBQSw2Q0VWQSxJQUFBMUgsUUFBQSxTQUFBMkksR0FFQSxHQUFBUCxHQUFBTyxFQUFBLFdBQ0F0RixFQUFBZ0YsSUFDQW5TLEdBQUFDLEtBQUFDLE9BQUFDLEtBQUErUixHQUFBLFNBQUE5UixFQUFBQyxHQUNBOE0sRUFBQTlNLEdBQUE2UixFQUFBN1IsS0FHQThSLEtBQUF0UyxRQUFBNFMsRUFBQTVTLFFBQ0FzUyxLQUFBdFIsT0FBQTRSLEVBQUE1UixNQUNBc1IsS0FBQXZJLFNBQUE2SSxFQUFBN0ksU0FDQXVJLEtBQUF0SSxVQUFBNEksRUFBQTVJLFVBQ0FzSSxLQUFBbEYsS0FBQXdGLEVBQUF4RixLQUVBa0YsS0FBQXhLLEtBQUEsT0VmQWlJLE9BQUEsU0FBQThDLEVBQUE3UyxHQUVBc1MsS0FBQXZDLE9BQUE4QyxFQUFBOVIsS0FDQXVSLEtBQUF0UyxRQUFBQSxFQUVBc1MsS0FBQXhLLEtBQUEiLCJmaWxlIjoianNNYXBzQXBpLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHZlY3Rvck1hcDtcbnZhciBqc29uRmlsdGVycyA9IFtdO1xudmFyIG1pbkNvbG9yTWFwO1xudmFyIG1heENvbG9yTWFwO1xudmFyIG1EaXY7XG52YXIgbVR5cGU7XG52YXIgYmFja2dyb3VuZDtcbnZhciBmaWx0ZXJlZE1hcmtlcnM7XG52YXIgdGhlcmVBcmVNYXJrZXJzID0gZmFsc2U7XG5cbnZhciBWZWN0b3JpYWxNYXAgPSBmdW5jdGlvbigpIHt9O1xuXG4vLyBWZWN0b3JpYWxNYXAgUHJvdG90eXBlXG5WZWN0b3JpYWxNYXAucHJvdG90eXBlLmNyZWF0ZU1hcCA9IGZ1bmN0aW9uKGlucHV0SlNPTiwgbWluUmFkaXVzLCBtYXhSYWRpdXMsIG1hcERpdiwgbWluQ29sb3IsIG1heENvbG9yLCBtYXBUeXBlLCBiYWNrZ3JvdW5kQ29sb3IsIGRhdGFUeXBlKSB7XG4gICAgYmFja2dyb3VuZCA9IGJhY2tncm91bmRDb2xvcjtcbiAgICBtVHlwZSA9IG1hcFR5cGU7XG4gICAgLy8gY291bnRyaWVzIGxpc3RcbiAgICBqc29uQ291bnRyaWVzID0gW107XG4gICAgLy8gbWFya2VycyBsaXN0XG4gICAganNvbk1hcmtlcnMgPSBbXTtcbiAgICAvLyBpZCBvZiB0aGUgbWFwXG4gICAgbURpdiA9IG1hcERpdjtcbiAgICAvLyBhc3NpZ24gdGhlIGNvbG9ycyBmb3IgdGhlIHJhbmdlXG4gICAgbWluQ29sb3JNYXAgPSBtaW5Db2xvcjtcbiAgICBtYXhDb2xvck1hcCA9IG1heENvbG9yO1xuXG4gICAgaWYgKGRhdGFUeXBlID09ICdjb3VudHJpZXMnKSB7XG4gICAgICAgIGpzb25Db3VudHJpZXMgPSByZWFkQ291bnRyaWVzRnJvbUpTT04oaW5wdXRKU09OKTtcbiAgICAgICAgLy8gZ2V0IHRoZSB0b29sdGlwIHRlbXBsYXRlc1xuICAgICAgICAvLyBDT1VOVFJZIHRvb2x0aXBcbiAgICAgICAgalF1ZXJ5LmFqYXgoe1xuICAgICAgICAgICAgdXJsOiAnLi4vdG9vbHRpcC10ZW1wbGF0ZXMvY291bnRyeV90b29sdGlwLmh0bWwnLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgY291bnRyeVRvb2x0aXAgPSByZXN1bHQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXN5bmM6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBSRUdJT04gdG9vbHRpcFxuICAgICAgICBqUXVlcnkuYWpheCh7XG4gICAgICAgICAgICB1cmw6ICcuLi90b29sdGlwLXRlbXBsYXRlcy9yZWdpb25fdG9vbHRpcC5odG1sJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHJlZ2lvblRvb2x0aXAgPSByZXN1bHQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXN5bmM6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoZGF0YVR5cGUgPT0gJ21hcmtlcnMnKSB7XG4gICAgICAgIHRoZXJlQXJlTWFya2VycyA9IHRydWU7XG4gICAgICAgIGpzb25NYXJrZXJzID0gcmVhZE1hcmtlcnNGcm9tSlNPTihpbnB1dEpTT04pO1xuICAgICAgICBmaWx0ZXJlZE1hcmtlcnMgPSBqc29uTWFya2VycztcbiAgICAgICAgbnVtTWFya2VycyA9IGpzb25NYXJrZXJzLmxlbmd0aDtcbiAgICAgICAgLy8gTUFSS0VSIHRvb2x0aXBcbiAgICAgICAgalF1ZXJ5LmFqYXgoe1xuICAgICAgICAgICAgdXJsOiAnLi4vdG9vbHRpcC10ZW1wbGF0ZXMvbWFya2VyX3Rvb2x0aXAuaHRtbCcsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBtYXJrZXJUb29sdGlwID0gcmVzdWx0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFzeW5jOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdZb3UgbXVzdCBnaXZlIGFzIGlucHV0IGEgbGlzdCBvZiBtYXJrZXJzIG9yIGNvdW50cmllcyEnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGdldCB0aGUgQ291bnQgdmFsdWUgZm9yIGVhY2ggQ291bnRyeVxuICAgIGF1eENvbG9ycyA9IGdlbmVyYXRlQ29sb3JzRm9yVGhlQ291bnRyaWVzKCk7XG5cbiAgICAvLyBtYXJrZXIgbGVnZW5kXG4gICAgdmFyIGxlZ2VuZFZhciA9IHtcbiAgICAgICAgdmVydGljYWw6IHRydWUsXG4gICAgICAgIC8vdGl0bGU6ICdDb3VudHJpZXMnLFxuICAgIH07XG4gICAgbWFya2Vyc1dpdGhMZWdlbmQgPSB7XG4gICAgICAgIHNjYWxlOiBbbWluQ29sb3JNYXAsIG1heENvbG9yTWFwXSxcbiAgICAgICAgLy8gcmFuZ2Ugb2YgdmFsdWVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgQ291bnRcbiAgICAgICAgdmFsdWVzOiBbbWluQ291bnQsIG1heENvdW50XSxcbiAgICAgICAgLy8gYWRkIGEgbGVnZW5kXG4gICAgICAgIGxlZ2VuZDogbGVnZW5kVmFyXG4gICAgfTtcbiAgICBtYXJrZXJzV2l0aG91dExlZ2VuZCA9IHtcbiAgICAgICAgc2NhbGU6IFttaW5Db2xvck1hcCwgbWF4Q29sb3JNYXBdLFxuICAgICAgICAvLyByYW5nZSBvZiB2YWx1ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBDb3VudFxuICAgICAgICB2YWx1ZXM6IFttaW5Db3VudCwgbWF4Q291bnRdXG4gICAgfTtcbiAgICBmaW5hbE1hcmtlcnNJbk1hcCA9IG1hcmtlcnNXaXRoTGVnZW5kO1xuICAgIGlmIChkYXRhVHlwZSA9PSAnbWFya2VycycpIHtcbiAgICAgICAgZmluYWxNYXJrZXJzSW5NYXAgPSBtYXJrZXJzV2l0aG91dExlZ2VuZDtcbiAgICB9XG5cbiAgICAvLyBjcmVhdGUgYSBuZXcgTWFwXG4gICAgbWFwID0gbmV3IGp2bS5NYXAoe1xuICAgICAgICBjb250YWluZXI6ICQoJyMnICsgbWFwRGl2KSxcbiAgICAgICAgLy8gY29uZmlndXJhdGlvbiBvZiB0aGUgbWFpbiBtYXBcbiAgICAgICAgLy8gdHlwZSBvZiBtYXAgKHdvcmxkLCBFdXJvcGUsIFVTQSwgZXRjKVxuICAgICAgICBtYXA6IG1UeXBlLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmQsXG4gICAgICAgIC8vIHRyaWdnZXJlZCB3aGVuIGEgbWFya2VyIGlzIGhvdmVyZWRcbiAgICAgICAgb25SZWdpb25DbGljazogZnVuY3Rpb24oZSwgY29kZSkge1xuICAgICAgICAgICAgY291bnRyeUNvZGUgPSBjb2RlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB2YXIgbmV3TWFwID0gY291bnRyeUNvZGUgKyAnX21pbGxfZW4nO1xuICAgICAgICAgICAgc3dpdGNoTWFwKG5ld01hcCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uTWFya2VyVGlwU2hvdzogZnVuY3Rpb24oZSwgbGFiZWwsIGluZGV4KSB7XG4gICAgICAgICAgICAvLyBzZWxlY3Qgd2hhdCB0ZXh0IHRvIGRpc3BsYXkgd2hlbiBtYXJrZXIgaXMgaG92ZXJlZFxuICAgICAgICAgICAgdmFyIGZpbmFsVG9vbHRpcCA9IGJ1aWxkTWFya2VyVG9vbHRpcChqc29uTWFya2VycywganNvbk1hcmtlcnNbaW5kZXhdKTtcbiAgICAgICAgICAgIGxhYmVsLmh0bWwoZmluYWxUb29sdGlwKTtcbiAgICAgICAgfSxcbiAgICAgICAgLy8gdHJpZ2dlcmVkIHdoZW4gYSByZWdpb24gaXMgaG92ZXJlZFxuICAgICAgICBvblJlZ2lvblRpcFNob3c6IGZ1bmN0aW9uKGUsIGNvdW50cnlOYW1lLCBjb2RlKSB7XG4gICAgICAgICAgICAvLyBjb2RlIGNvbnRhaW5zIHRoZSBjb2RlIG9mIHRoZSBjb3VudHJ5IChpLmUuLCBQVCwgRVMsIEZSLCBldGMpXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRDb3VudHJ5ID0gLTE7XG4gICAgICAgICAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5Lm5hbWUgPT09IGNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDb3VudHJ5ID0gY3VycmVudENvdW50cnk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZENvdW50cnkgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAvLyBmaW5kIG9jY3VycmVuY2Ugb2Ygc2V2ZXJhbCBzdHJpbmdzIGluc2lkZSB0aGUgdGVtcGxhdGVcbiAgICAgICAgICAgICAgICB2YXIgZmluYWxUb29sdGlwID0gYnVpbGRDb3VudHJ5VG9vbHRpcChjb3VudHJ5TmFtZSwgc2VsZWN0ZWRDb3VudHJ5KTtcbiAgICAgICAgICAgICAgICBjb3VudHJ5TmFtZS5odG1sKGZpbmFsVG9vbHRpcCk7XG4gICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICBjb3VudHJ5TmFtZS5odG1sKGNvdW50cnlOYW1lLmh0bWwoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNlcmllczoge1xuICAgICAgICAgICAgbWFya2VyczogW2ZpbmFsTWFya2Vyc0luTWFwXSxcbiAgICAgICAgICAgIHJlZ2lvbnM6IFt7XG4gICAgICAgICAgICAgICAgLy8gbWluIGFuZCBtYXggdmFsdWVzIG9mIGNvdW50XG4gICAgICAgICAgICAgICAgc2NhbGU6IFttaW5Db2xvck1hcCwgbWF4Q29sb3JNYXBdLFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogJ2ZpbGwnLFxuICAgICAgICAgICAgICAgIHZhbHVlczogYXV4Q29sb3JzXG4gICAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBkcmF3IG1hcmtlcnMgb24gdGhlIG1hcFxuICAgIGlmIChkYXRhVHlwZSA9PSAnbWFya2VycycpIHtcbiAgICAgICAgZmlsdGVyZWRNYXJrZXJzID0ganNvbk1hcmtlcnM7XG4gICAgICAgIGFkZE1hcmtlcnNUb01hcCgpO1xuICAgIH1cbn07XG5cbi8vIEF1eGlsaWFyeSBmdW5jdGlvbiB0byB0cmFuc3Bvc2UgYSB2YWx1ZSBmcm9tIGFuIGluaXRpYWwgcmFuZ2UgdG8gYW5vdGhlciByYW5nZVxuZnVuY3Rpb24gbWFwUmFuZ2UodmFsdWUsIGxvdzEsIGhpZ2gxLCBsb3cyLCBoaWdoMikge1xuICAgIHJldHVybiBsb3cyICsgKGhpZ2gyIC0gbG93MikgKiAodmFsdWUgLSBsb3cxKSAvIChoaWdoMSAtIGxvdzEpO1xufVxuXG5WZWN0b3JpYWxNYXAucHJvdG90eXBlLmZpbHRlck9uU2VydmVyID0gZnVuY3Rpb24oZmlsdGVycykge1xuICAgIC8vIHJlYWQgdGhlIGZpbHRlcnMgZnJvbSBhIEpTT04gZmlsZSAoanVzdCBmb3IgdGVzdGluZylcbiAgICAkLmdldEpTT04oXCIuLi9qc29uL3NlcnZlckZpbHRlci5qc29uXCIsIGZ1bmN0aW9uKGZpbHRlcnNKU09OKSB7XG4gICAgICAgIC8vIGNvbnZlcnQgdGhlIGZpbHRlcnNKU09OIHRvIGEgc3RyaW5nXG4gICAgICAgIHZhciBmaWx0ZXJzU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZmlsdGVyc0pTT04pO1xuICAgICAgICAvLyBidWlsZCB0aGUgdXJsIHRvIHNlbmQgdG8gdGhlIHNlcnZlclxuICAgICAgICB2YXIgdXJsID0gJ2h0dHA6Ly9zZXJ2ZXJGaWx0ZXJpbmcuY29tLz9kYXRhPScgKyBlbmNvZGVVUklDb21wb25lbnQoZmlsdGVyc1N0cmluZyk7XG4gICAgICAgIC8vIEZPUiBURVNUSU5HIFBVUlBPU0VTIC0gdGhpcyBmaWxlIGNvbnRhaW5zIGEgZGlmZmVyZW50IHNldFxuICAgICAgICAvLyBvZiBjb3VudHJpZXMgYW5kIG1hcmtlcnNcbiAgICAgICAgdXJsID0gJy4uL2pzb24vY291bnRyaWVzX3BsdXNfbWFya2VyczIuanNvbic7XG4gICAgICAgIC8vIHNlbmQgcmVxdWVzdCB0byB0aGUgc2VydmVyIHRvIGdldCB0aGUgbWFya2VycyBhbmQgY291bnRyaWVzXG4gICAgICAgICQuZ2V0SlNPTih1cmwsIGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgICAgICAgIC8vIGdldCB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgVEhJUyBDT0RFIElTIFNFUlZFUiBTSURFXG4gICAgICAgICAgICB2YXIgbXlQYXJhbSA9IHVybC5zcGxpdCgnZGF0YT0nKVsxXTtcbiAgICAgICAgICAgIHZhciByZXR1cm5KU09OID0gZGVjb2RlVVJJQ29tcG9uZW50KG15UGFyYW0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5wYXJzZShyZXR1cm5KU09OKSk7XG4gICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAvLyBwYXJzZSB0aGUgSlNPTiB0byBnZXQgdGhlIGNvdW50cmllcyBhbmQgbWFya2Vyc1xuICAgICAgICAgICAganNvbkNvdW50cmllcyA9IHJlYWRDb3VudHJpZXNGcm9tSlNPTihqc29uLmNvdW50cmllcyk7XG4gICAgICAgICAgICAvLyBnZXQgdGhlIGNvbG91cnMgZm9yIHRoZSBjb3VudHJpZXNcbiAgICAgICAgICAgIHZhciBjb3VudHJ5Q29sb3JzID0gZ2VuZXJhdGVDb2xvcnNGb3JUaGVDb3VudHJpZXMoanNvbkNvdW50cmllcyk7XG4gICAgICAgICAgICAvLyBkaXNwbGF5IHRoZSBjb3VudHJpZXMgb24gdGhlIG1hcFxuICAgICAgICAgICAgcmVsb2FkTWFwKGNvdW50cnlDb2xvcnMpO1xuXG4gICAgICAgICAgICAvLyBpbiBjYXNlIHdlIGFsc28gaGF2ZSBtYXJrZXJzXG4gICAgICAgICAgICBpZiAoanNvbi5tYXJrZXJzKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVhZCB0aGUgbWFya2VycyBmcm9tIHRoZSBKU09OIGZpbGVcbiAgICAgICAgICAgICAgICBqc29uTWFya2VycyA9IHJlYWRNYXJrZXJzRnJvbUpTT04oanNvbi5tYXJrZXJzKTtcbiAgICAgICAgICAgICAgICAvLyBhZGQgbWFya2VycyB0byB0aGUgbWFwXG4gICAgICAgICAgICAgICAgYWRkTWFya2Vyc1RvTWFwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuIiwidmFyIENvdW50cnkgPSBmdW5jdGlvbihjb3VudHJ5T2JqZWN0KSB7XG4gICAgLy8gcmVhZCBmcm9tIHRoZSBKU09OXG4gICAgLy8gYWRkIGF0dHJpYnV0ZXNcbiAgICB2YXIgYXR0cmlidXRlcyA9IGNvdW50cnlPYmplY3RbXCJhdHRyaWJ1dGVzXCJdO1xuICAgIHZhciBjb3VudHJ5ID0gdGhpcztcbiAgICAkLmVhY2goT2JqZWN0LmtleXMoYXR0cmlidXRlcyksIGZ1bmN0aW9uKGluZGV4LCBhdHRyKSB7XG4gICAgICAgIGNvdW50cnlbYXR0cl0gPSBhdHRyaWJ1dGVzW2F0dHJdO1xuICAgIH0pO1xuXG4gICAgLy8gdHJ5IHRvIHJlYWQgaXRzIHJlZ2lvbnMgaW4gY2FzZSBoZSBoYXMgYW55XG4gICAgaWYgKGNvdW50cnlPYmplY3QuUmVnaW9ucylcbiAgICAgICAgdGhpcy5SZWdpb25zID0gcmVhZFJlZ2lvbnNGcm9tSlNPTihjb3VudHJ5T2JqZWN0LlJlZ2lvbnMsIGNvdW50cnlPYmplY3QuY291bnRyeSk7XG5cbiAgICB0aGlzLm5hbWUgPSBjb3VudHJ5T2JqZWN0Lm5hbWU7XG4gICAgLy8gKyBpcyB1c2VkIHRvIGFzc3VyZSB0aGF0IGEgTnVtYmVyIGlzIGJlaW5nIHJlYWRcbiAgICB0aGlzLmNvdW50ID0gK2NvdW50cnlPYmplY3QuY291bnQ7XG4gICAgdGhpcy5kZXNjID0gJ2FiYyc7XG59O1xuXG5mdW5jdGlvbiBidWlsZENvdW50cnlUb29sdGlwKGNvdW50cnlOYW1lLCBjb3VudHJ5KSB7XG4gICAgdmFyIGZpbmFsVG9vbHRpcCA9IGNvdW50cnlUb29sdGlwO1xuICAgICQuZWFjaChPYmplY3Qua2V5cyhjb3VudHJ5KSwgZnVuY3Rpb24oaW5kZXgsIGF0dHIpIHtcbiAgICAgICAgZmluYWxUb29sdGlwID0gZmluYWxUb29sdGlwLnJlcGxhY2UoYXR0ciwgY291bnRyeVthdHRyXSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZpbmFsVG9vbHRpcDtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVDb2xvcnNGb3JUaGVDb3VudHJpZXMoY291bnRyaWVzKSB7XG4gICAgaWYgKCFjb3VudHJpZXMpXG4gICAgICAgIGNvdW50cmllcyA9IGpzb25Db3VudHJpZXM7XG4gICAgdmFyIGNvdW50cnlDb2xvcnMgPSBbXTtcbiAgICAkLmVhY2goY291bnRyaWVzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgY291bnRyeUNvbG9yc1tjdXJyZW50Q291bnRyeS5uYW1lXSA9IGN1cnJlbnRDb3VudHJ5LmNvdW50O1xuICAgIH0pO1xuICAgIHJldHVybiBjb3VudHJ5Q29sb3JzO1xufTtcblxuZnVuY3Rpb24gcmVhZENvdW50cmllc0Zyb21KU09OKG1hcmtlcnMpIHtcblxuICAgIHZhciBjb3VudHJpZXMgPSBbXTtcbiAgICB2YXIgbnVtSlNPTkNvdW50cmllcyA9IG1hcmtlcnMubGVuZ3RoO1xuXG4gICAgbWluQ291bnQgPSBJbmZpbml0eTtcbiAgICBtYXhDb3VudCA9IC1JbmZpbml0eTtcblxuICAgICQuZWFjaChtYXJrZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgY291bnRyaWVzW2luZGV4XSA9IG5ldyBDb3VudHJ5KGN1cnJlbnRDb3VudHJ5KTtcbiAgICAgICAgY29uc29sZS5sb2coY291bnRyaWVzW2luZGV4XSk7XG5cbiAgICAgICAgaWYgKGNvdW50cmllc1tpbmRleF0uQ291bnQgPiBtYXhDb3VudClcbiAgICAgICAgICAgIG1heENvdW50ID0gY291bnRyaWVzW2luZGV4XS5Db3VudDtcblxuICAgICAgICBpZiAoY291bnRyaWVzW2luZGV4XS5Db3VudCA8IG1pbkNvdW50KVxuICAgICAgICAgICAgbWluQ291bnQgPSBjb3VudHJpZXNbaW5kZXhdLkNvdW50O1xuICAgIH0pO1xuICAgIHJldHVybiBjb3VudHJpZXM7XG59XG5cbi8vIHJldHVybiB0aGUgY291bnRyeSB3aG9zZSBuYW1lIGlzIHBhc3NlZCBhcyBhbiBhcmd1bWVudFxuZnVuY3Rpb24gZmluZENvdW50cnlCeU5hbWUoY291bnRyeU5hbWUpIHtcbiAgICB2YXIgcmV0dXJuQ291bnRyeSA9IG51bGw7XG4gICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuICAgICAgICBpZiAoY3VycmVudENvdW50cnkuY291bnRyeSA9PSBjb3VudHJ5TmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuQ291bnRyeSA9IGN1cnJlbnRDb3VudHJ5O1xuICAgICAgICAgICAgcmV0dXJuIHJldHVybkNvdW50cnk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmV0dXJuQ291bnRyeTtcbn1cblxuLy8gcmVhZCB0aGUgbWluIGFuZCBtYXggY291bnQgb2YgdGhlIGNvdW50cmlzXG5mdW5jdGlvbiByZWFkTWluTWF4KGNvdW50cmllc05hbWVzKSB7XG4gICAgbWluQ291bnQgPSBJbmZpbml0eTtcbiAgICBtYXhDb3VudCA9IC1JbmZpbml0eTtcblxuICAgIC8vIGNvdW50cmllcyBuYW1lcyBpcyBhIEpTT04gb2JqZWN0XG4gICAgLy8gcmVhZCBrZXlzIHRvIGFuIGFycmF5XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gY291bnRyaWVzTmFtZXMpIHtcbiAgICAgICAgaWYgKGNvdW50cmllc05hbWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gZmluZCBjb3VudHJ5IGJ5IG5hbWVcbiAgICAkLmVhY2goa2V5cywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5TmFtZSkge1xuICAgICAgICAvLyBmaW5kIHRoZSBjb3VudHJ5IGJ5IGl0cyBuYW1lXG4gICAgICAgIHZhciBjdXJyZW50Q291bnRyeSA9IGZpbmRDb3VudHJ5QnlOYW1lKGN1cnJlbnRDb3VudHJ5TmFtZSk7XG4gICAgICAgIGlmIChjdXJyZW50Q291bnRyeS5Db3VudCA+IG1heENvdW50KVxuICAgICAgICAgICAgbWF4Q291bnQgPSBjdXJyZW50Q291bnRyeS5Db3VudDtcblxuICAgICAgICBpZiAoY3VycmVudENvdW50cnkuQ291bnQgPCBtaW5Db3VudClcbiAgICAgICAgICAgIG1pbkNvdW50ID0gY3VycmVudENvdW50cnkuQ291bnQ7XG4gICAgfSk7XG59XG4iLCJ2YXIgcmVzZXRGaWx0ZXJzQm94ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAvLyByZXNldCBhbGwgdGhlICdmYm94ZXMnXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1GaWx0ZXJzOyBpKyspIHtcbiAgICAgICAgJChcIiNmYm94XCIgKyBpKS50ZXh0KCcnKTtcbiAgICAgICAgJChcIiNmYm94XCIgKyBpKS52YWwoJycpO1xuICAgIH1cblxuICAgIC8vIHJlbG9hZCB0aGUgbWFwXG4gICAgdmFyIGNvbG9ycyA9IGdlbmVyYXRlQ29sb3JzRm9yVGhlQ291bnRyaWVzKCk7XG4gICAgcmVsb2FkTWFwKGNvbG9ycyk7XG5cbiAgICBmaWx0ZXJlZE1hcmtlcnMgPSBqc29uTWFya2VycztcbiAgICBhZGRNYXJrZXJzVG9NYXAoKTtcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUZpbHRlcnNCb3hDaGVja2JveGVzKCkge1xuXG4gICAgJCgnZmlsdGVyLWJveCcpLmFwcGVuZCgnPHVsIGNsYXNzPVwibmF2IG5hdmJhci1uYXZcIiBpZD1cImZpbHRlckJveENoZWNrYm94ZXNcIiBzdHlsZT1cImJvcmRlci1zdHlsZTogc29saWQ7IGJvcmRlci13aWR0aDogMnB4O1wiPjwvdWw+Jyk7XG5cbiAgICAvLyBnZXQgYWxsIHRoZSBmaWx0ZXJzXG4gICAgJC5lYWNoKGpzb25GaWx0ZXJzQXJyYXksIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50RmlsdGVyKSB7XG4gICAgICAgIHZhciBib3hJRCA9ICcjYm94JyArIChpbmRleCArIDEpO1xuICAgICAgICAvLyBhcHBlbmQgdG8gdGhlIEhUTUxcbiAgICAgICAgJCgnI2ZpbHRlckJveENoZWNrYm94ZXMnKS5hcHBlbmQoJzxsaSBjbGFzcz1cImNvbC1zbS02XCIgaWQ9XCJib3gnICsgKGluZGV4ICsgMSkgKyAnXCIgY2xhc3M9XCJkcm9wZG93bi1jaGVja2JveC1leGFtcGxlIGRyb3Bkb3duLWNoZWNrYm94IGRyb3Bkb3duXCI+PC9saT4nKTtcblxuICAgICAgICAvLyBmaWxsIHRoZSB0YWJzIGZvciB0aGUgeWVhciBmaWx0ZXJcbiAgICAgICAgdmFyIHRhYiA9IFtdO1xuICAgICAgICAkLmVhY2goY3VycmVudEZpbHRlci5WYWx1ZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50VmFsdWUpIHtcbiAgICAgICAgICAgIHRhYi5wdXNoKHtcbiAgICAgICAgICAgICAgICAnaWQnOiBpbmRleCArIDEsXG4gICAgICAgICAgICAgICAgJ2xhYmVsJzogY3VycmVudFZhbHVlLFxuICAgICAgICAgICAgICAgICdpc0NoZWNrZWQnOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIHAod2F0KSB7XG4gICAgICAgICAgICByZXR1cm4gJzxwPicgKyBKU09OLnN0cmluZ2lmeSh3YXQpICsgJzwvcD4nO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU3RhdHVzKCkge1xuICAgICAgICAgICAgdmFyICRwID0gJCgncC5zdGF0dXMnKS5lbXB0eSgpO1xuICAgICAgICAgICAgJHAuYXBwZW5kKHAod2lkZ2V0LmNoZWNrZWQoKSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZHJvcGRvd24gd2l0aCBjaGVja2JveGVzIGluaXRpYWxpemF0aW9uXG4gICAgICAgIHZhciBuYW1lID0gY3VycmVudEZpbHRlci5OYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIG5hbWUgPSBuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKTtcbiAgICAgICAgJChib3hJRCkuZHJvcGRvd25DaGVja2JveCh7XG4gICAgICAgICAgICBkYXRhOiB0YWIsXG4gICAgICAgICAgICBhdXRvc2VhcmNoOiB0cnVlLFxuICAgICAgICAgICAgaGlkZUhlYWRlcjogZmFsc2UsXG4gICAgICAgICAgICAvLyBzaG93IG51bWJlciBvZiBzZWxlY3RlZCBpdGVtc1xuICAgICAgICAgICAgc2hvd05iU2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgdGVtcGxhdGVCdXR0b246ICc8YSBjbGFzcz1cImRyb3Bkb3duLWNoZWNrYm94LXRvZ2dsZVwiIGRhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIiBocmVmPVwiI1wiPicgKyBuYW1lICsgJzxzcGFuIGNsYXNzPVwiZHJvcGRvd24tY2hlY2tib3gtbmJzZWxlY3RlZFwiPjwvc3Bhbj48YiBjbGFzcz1cImNhcmV0XCI+PC9iPidcbiAgICAgICAgfSk7XG4gICAgICAgIHdpZGdldCA9ICQoYm94SUQpLmRhdGEoJ2Ryb3Bkb3duQ2hlY2tib3gnKTtcblxuICAgICAgICAkKCdib2R5Jykub24oJ2NoYW5nZTpkcm9wZG93bi1jaGVja2JveCBjaGVja2VkIGNoZWNrZWQ6YWxsIGNoZWNrOmFsbCB1bmNoZWNrOmFsbCBjaGVjazpjaGVja2VkIHVuY2hlY2s6Y2hlY2tlZCcsIHVwZGF0ZVN0YXR1cygpKTtcbiAgICAgICAgdXBkYXRlU3RhdHVzKCk7XG4gICAgfSk7XG5cbiAgICAvLyBhcHBlbmQgZmlsdGVyIGFuZCByZXNldCBidXR0b25cblxuICAgIHZhciB0ZXh0VG9BcHBlbmQgPSAnPGRpdiBpZD1cImZpbHRlcnNfYm94XCIgY2xhc3M9XCJyb3cgY29sLXNtLTEyXCI+JyArXG4gICAgICAgICc8YnV0dG9uIGlkPVwiZmlsdGVyX2JveF9hcHBseV9maWx0ZXJzXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGNvbC1zbS00IGNvbC1zbS1vZmZzZXQtMVwiPkZpbHRlcjwvYnV0dG9uPicgK1xuICAgICAgICAnPGJ1dHRvbiBpZD1cImZpbHRlcl9ib3hfcmVzZXRfZmlsdGVyc1wiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBjb2wtc20tNCBjb2wtc20tb2Zmc2V0LTFcIj5SZXNldDwvYnV0dG9uPjwvZGl2Pic7XG4gICAgJCgnI2ZpbHRlckJveENoZWNrYm94ZXMnKS5hcHBlbmQodGV4dFRvQXBwZW5kKTtcblxuICAgIC8vIHRyaWdnZXJlZCB3aGVuIHRoZSBzZWFyY2ggYnV0dG9uIGlzIGNsaWNrZWRcbiAgICAkKFwiI2ZpbHRlcl9ib3hfYXBwbHlfZmlsdGVyc1wiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGpzb25PYmplY3QgPSB7fTtcbiAgICAgICAgdmFyIG51bUZpbHRlcnMgPSBqc29uRmlsdGVyc0FycmF5Lmxlbmd0aDtcbiAgICAgICAgdmFyIGVtcHR5RmlsdGVycyA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwganNvbkZpbHRlcnNBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gY3VycmVudCBhbmQgbmV4dCBmaWx0ZXIgaWQnc1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRGaWx0ZXIgPSBcIiNib3hcIiArIChpICsgMSk7XG4gICAgICAgICAgICAvLyBjdXJyZW50IGZpbHRlciB2YWx1ZXMgLSBzZWxlY3RlZCBpdGVtc1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkSXRlbXMgPSBnZXRTZWxlY3RlZEl0ZW1zKGN1cnJlbnRGaWx0ZXIpO1xuICAgICAgICAgICAgdmFyIGl0ZW1zQXJyYXkgPSBbXTtcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoc2VsZWN0ZWRJdGVtcyk7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGtleXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpdGVtc0FycmF5LnB1c2goc2VsZWN0ZWRJdGVtc1trZXlzW2pdXS5sYWJlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjaGVjayBpZiB3ZSBoYXZlIGFueSBmaWx0ZXJpbmcgdG8gYXBwbHkgb3Igbm90XG4gICAgICAgICAgICBpZiAoa2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAganNvbk9iamVjdFtqc29uRmlsdGVyc0FycmF5W2ldLk5hbWVdID0gaXRlbXNBcnJheS5qb2luKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVtcHR5RmlsdGVycysrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGF2b2lkIHRoZSB1c2VyIHNlbGVjdGluZyB0aGUgRmlsdGVyIGJ1dHRvbiB3aXRob3V0IGlucHV0aW5nIGFueSBkYXRhXG4gICAgICAgIGlmIChlbXB0eUZpbHRlcnMgIT0gbnVtRmlsdGVycykge1xuICAgICAgICAgICAgZmlsdGVyKGpzb25PYmplY3QpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyB0cmlnZ2VyZWQgd2hlbiB0aGUgcmVzZXQgYnV0dG9uIGlzIGNsaWNrZWRcbiAgICAkKFwiI2ZpbHRlcl9ib3hfcmVzZXRfZmlsdGVyc1wiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzZXRGaWx0ZXJzQm94KCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldFNlbGVjdGVkSXRlbXMoYm94SUQpIHtcbiAgICByZXR1cm4gJChib3hJRCkuZHJvcGRvd25DaGVja2JveChcImNoZWNrZWRcIik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZpbHRlcnNCb3hXaXRoRW51bWVyYXRpb24oanNvbkZpbHRlcnMpIHtcblxuICAgIHZhciBudW1GaWx0ZXJzID0ganNvbkZpbHRlcnMubGVuZ3RoO1xuICAgIC8vIGNyZWF0ZSBmaWx0ZXJzIGJveCB3aXRoIGVudW1lcmF0aW9uXG4gICAgJC5lYWNoKGpzb25GaWx0ZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEZpbHRlcikge1xuICAgICAgICB2YXIgZmlsdGVyTmFtZSA9IGN1cnJlbnRGaWx0ZXIuTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBmaWx0ZXJOYW1lID0gZmlsdGVyTmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGZpbHRlck5hbWUuc2xpY2UoMSk7XG4gICAgICAgIHZhciBidXR0b25JZCA9ICdkcm9wZG93bicgKyBpbmRleCArICdidXR0b24nO1xuICAgICAgICB2YXIgdWxJZCA9ICdkcm9wZG93bicgKyBpbmRleDtcbiAgICAgICAgdmFyIHRvQXBwZW5kID0gJyc7XG5cbiAgICAgICAgLy8gZmlsdGVyIHRleHRcbiAgICAgICAgdG9BcHBlbmQgKz0gJzxwPjxiPicgKyBmaWx0ZXJOYW1lICsgJzo8L2I+PC9wPic7XG4gICAgICAgIHRvQXBwZW5kICs9ICc8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPic7XG4gICAgICAgIHRvQXBwZW5kICs9ICc8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwiZmJveCcgKyBpbmRleCArICdcIic7XG4gICAgICAgIC8vIGJ1aWxkIHRoZSBwbGFjZWhvbGRlclxuICAgICAgICB2YXIgcGxhY2Vob2xkZXIgPSBjdXJyZW50RmlsdGVyLlZhbHVlc1xuICAgICAgICB0b0FwcGVuZCArPSAncGxhY2Vob2xkZXI9XCInICsgcGxhY2Vob2xkZXIgKyAnXCIgKz4nO1xuICAgICAgICB0b0FwcGVuZCArPSAnPC9kaXY+JztcblxuICAgICAgICAkKCdmaWx0ZXItYm94JykuYXBwZW5kKHRvQXBwZW5kKTtcblxuICAgICAgICAvLyBhZGQgQm9vdHN0cmFwIHRvb2x0aXAgdG8gdGhlIGZpbHRlcnMgYm94XG4gICAgICAgICQoJyNmaWx0ZXItYm94JykudG9vbHRpcCh7XG4gICAgICAgICAgICB0aXRsZTogXCJVc2UgdGhpcyBmaWx0ZXIgYm94IHRvIGZpbHRlciBieSBtdWx0aXBsZSBmaWx0ZXJzXCIsXG4gICAgICAgICAgICBwbGFjZW1lbnQ6IFwiYm90dG9tXCJcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBhZGQgdGhlIGJ1dHRvbnNcbiAgICB2YXIgdGV4dFRvQXBwZW5kID0gJzxkaXYgaWQ9XCJmaWx0ZXJzX2JveFwiPicgK1xuICAgICAgICAnPGJ1dHRvbiBpZD1cImZpbHRlcl9ib3hfYXBwbHlfZmlsdGVyc1wiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBjb2wtc20tNCBjb2wtc20tb2Zmc2V0LTFcIj5GaWx0ZXI8L2J1dHRvbj4nICtcbiAgICAgICAgJzxidXR0b24gaWQ9XCJmaWx0ZXJfYm94X3Jlc2V0X2ZpbHRlcnNcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgY29sLXNtLTQgY29sLXNtLW9mZnNldC0xXCI+UmVzZXQ8L2J1dHRvbj48L2Rpdj4nO1xuICAgICQoJ2ZpbHRlci1ib3gnKS5hcHBlbmQodGV4dFRvQXBwZW5kKTtcblxuICAgIC8vIHRyaWdnZXJlZCB3aGVuIHRoZSBzZWFyY2ggYnV0dG9uIGlzIGNsaWNrZWRcbiAgICAkKFwiI2ZpbHRlcl9ib3hfYXBwbHlfZmlsdGVyc1wiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGpzb25PYmplY3QgPSB7fTtcbiAgICAgICAgdmFyIG51bUZpbHRlcnMgPSBqc29uRmlsdGVycy5sZW5ndGg7XG4gICAgICAgIHZhciBlbXB0eUZpbHRlcnMgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGpzb25GaWx0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBjdXJyZW50IGFuZCBuZXh0IGZpbHRlciBpZCdzXG4gICAgICAgICAgICB2YXIgY3VycmVudEZpbHRlciA9IFwiI2Zib3hcIiArIGk7XG4gICAgICAgICAgICAvLyBjdXJyZW50IGFuZCBuZXh0IGZpbHRlciB2YWx1ZXNcbiAgICAgICAgICAgIHZhciBjdXJyZW50RmlsdGVyVmFsdWUgPSAkKGN1cnJlbnRGaWx0ZXIpLnZhbCgpO1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgd2UgaGF2ZSBhbnkgZmlsdGVyaW5nIHRvIGFwcGx5IG9yIG5vdFxuICAgICAgICAgICAgaWYgKGN1cnJlbnRGaWx0ZXJWYWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBqc29uT2JqZWN0W2pzb25GaWx0ZXJzW2ldLk5hbWVdID0gY3VycmVudEZpbHRlclZhbHVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbXB0eUZpbHRlcnMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBhdm9pZCB0aGUgdXNlciBzZWxlY3RpbmcgdGhlIEZpbHRlciBidXR0b24gd2l0aG91dCBpbnB1dGluZyBhbnkgZGF0YVxuICAgICAgICBpZiAoZW1wdHlGaWx0ZXJzICE9IG51bUZpbHRlcnMpIHtcbiAgICAgICAgICAgIGZpbHRlcihqc29uT2JqZWN0KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gdHJpZ2dlcmVkIHdoZW4gdGhlIHJlc2V0IGJ1dHRvbiBpcyBjbGlja2VkXG4gICAgJChcIiNmaWx0ZXJfYm94X3Jlc2V0X2ZpbHRlcnNcIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc2V0RmlsdGVyc0JveCgpO1xuICAgIH0pO1xufVxuIiwiZnVuY3Rpb24gZ2V0QWxsRmlsdGVyVmFsdWVzKGZpbHRlclZhbHVlKSB7XG4gICAgdmFyIHJldHVyblBhcnRzID0gW107XG5cbiAgICAvLyBjaGVjayBpZiB3ZSBoYXZlIGFuIGVudW1lcmF0aW9uIChjb21tYS1zZXBhcmF0ZWQgdmFsdWVzIGFuZC9vciByYW5nZXMpXG4gICAgaWYgKFN0cmluZyhmaWx0ZXJWYWx1ZSkuaW5kZXhPZihcIixcIikgIT0gLTEpIHtcblxuICAgICAgICAvLyBnZXQgYWxsIHRoZSBlbnVtZXJhdGVkIHZhbHVlcyAoY2FuIGJlIHNpbmd1bGFyIG9yIHJhbmdlKVxuICAgICAgICB2YXIgZW51bWVyYXRpb25QYXJ0cyA9IFN0cmluZyhmaWx0ZXJWYWx1ZSkuc3BsaXQoXCIsXCIpO1xuXG4gICAgICAgIC8vIGNoZWNrIGlmIHdlIGhhdmUgYSBzaW1wbGUgdmFsdWUgb3IgYSByYW5nZVxuICAgICAgICAkLmVhY2goZW51bWVyYXRpb25QYXJ0cywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRFbnVtZXJhdGlvbikge1xuXG4gICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIGEgcmFuZ2UuLi5cbiAgICAgICAgICAgIGlmIChjdXJyZW50RW51bWVyYXRpb24uaW5kZXhPZihcIi1cIikgIT0gLTEpIHtcblxuICAgICAgICAgICAgICAgIC8vIGFsbCB0aGUgcmFuZ2UgcGFydHNcbiAgICAgICAgICAgICAgICB2YXIgcmFuZ2VQYXJ0cyA9IFN0cmluZyhjdXJyZW50RW51bWVyYXRpb24pLnNwbGl0KFwiLVwiKTtcblxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBleHRyZW1lIHZhbHVlcyBhcmUgdmFsaWRcbiAgICAgICAgICAgICAgICBjaGVja0ZpbHRlclZhbHVlc0FyZVZhbGlkKGZpbHRlck9iamVjdCwgcmFuZ2VQYXJ0cyk7XG5cbiAgICAgICAgICAgICAgICAvLyBnZXQgYWxsIHRoZSB2YWx1ZXMgYmV0d2VlbiB0aG9zZSB0d28gbnVtYmVyc1xuICAgICAgICAgICAgICAgIC8vIGFuZCBhZGQgdGhlbVxuICAgICAgICAgICAgICAgIHZhciBtaW4gPSByYW5nZVBhcnRzWzBdO1xuICAgICAgICAgICAgICAgIHZhciBtYXggPSByYW5nZVBhcnRzWzFdO1xuICAgICAgICAgICAgICAgIGZvciAoOyBtaW4gPD0gbWF4OyBtaW4rKylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuUGFydHMucHVzaChtaW4pO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgYSByYW5nZVxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBzaW5nbGUgdmFsdWUgaXMgdmFsaWRcbiAgICAgICAgICAgICAgICByZXR1cm5QYXJ0cy5wdXNoKGN1cnJlbnRFbnVtZXJhdGlvbik7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8ganVzdCBhIHNpbmdsZSBwYXJ0XG4gICAgICAgIGlmIChmaWx0ZXJWYWx1ZS5pbmRleE9mKFwiLVwiKSAhPSAtMSkge1xuICAgICAgICAgICAgLy8gd2UgaGF2ZSBhIHJhbmdlXG4gICAgICAgICAgICB2YXIgc3ViUGFydHMgPSBTdHJpbmcoZmlsdGVyVmFsdWUpLnNwbGl0KFwiLVwiKTtcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBleHRyZW1lIHZhbHVlcyBhcmUgdmFsaWRcbiAgICAgICAgICAgIGNoZWNrRmlsdGVyVmFsdWVzQXJlVmFsaWQoZmlsdGVyT2JqZWN0LCBzdWJQYXJ0cyk7XG4gICAgICAgICAgICAvLyBnZXQgYWxsIHRoZSB2YWx1ZXMgYmV0d2VlbiB0aG9zZSB0d28gbnVtYmVyc1xuICAgICAgICAgICAgdmFyIG1pbiA9IHN1YlBhcnRzWzBdO1xuICAgICAgICAgICAgdmFyIG1heCA9IHN1YlBhcnRzWzFdO1xuICAgICAgICAgICAgZm9yICg7IG1pbiA8PSBtYXg7IG1pbisrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuUGFydHMucHVzaChtaW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgIHJldHVyblBhcnRzLnB1c2goZmlsdGVyVmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0dXJuUGFydHM7XG59XG5cbmZ1bmN0aW9uIGNoZWNrV2hhdENvdW50cmllc1RvQWRkKHNlbGVjdGVkRmlsdGVyLCBmaWx0ZXJWYWx1ZSkge1xuXG4gICAgdmFyIGNvdW50cmllcyA9IFtdO1xuICAgICQuZWFjaChqc29uQ291bnRyaWVzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgYW55IG9mIHRoZSBuYW1lcyBpcyBlcXVhbCB0byB0aGUgc2VsZWN0ZWQgZmlsdGVyXG4gICAgICAgIC8vIHRyeSB0byByZWFkIGFsbCB0aGUgbmFtZXMgYW5kIHZhbHVlc1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnbmFtZScgKyBpO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9ICd2YWx1ZScgKyBpO1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIENvdW50cnkgaGFzIHRoYXQgbmFtZVxuICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5W2N1cnJlbnROYW1lVG9DaGVja10pIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnlbY3VycmVudFZhbHVlXSA9PSBmaWx0ZXJWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb3VudHJ5VmFsdWVUb0NoZWNrID0gY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBieSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnlbY3VycmVudFZhbHVlXSA9PSBmaWx0ZXJWYWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cmllc1tjdXJyZW50Q291bnRyeS5jb3VudHJ5XSA9IGN1cnJlbnRDb3VudHJ5LkNvdW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IHdoaWxlICh0cnVlKVxuICAgIH0pO1xuICAgIHJldHVybiBjb3VudHJpZXM7XG59O1xuXG5mdW5jdGlvbiBjaGVja1doYXRNYXJrZXJzVG9BZGQoc2VsZWN0ZWRGaWx0ZXIsIGZpbHRlclZhbHVlKSB7XG4gICAgdmFyIG1hcmtlcnMgPSBbXTtcbiAgICAvLyBhZGQgb25seSB0aGUgbWFya2VycyB3aG8gaGF2ZSB0aGF0IGZpbHRlciB2YWx1ZVxuICAgICQuZWFjaChqc29uTWFya2VycywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcbiAgICAgICAgJC5lYWNoKE9iamVjdC5rZXlzKGN1cnJlbnRNYXJrZXIpLCBmdW5jdGlvbihpbmRleCwgYXR0cikge1xuICAgICAgICAgICAgaWYgKGF0dHIudG9Mb3dlckNhc2UoKSA9PSBzZWxlY3RlZEZpbHRlci5OYW1lLnRvTG93ZXJDYXNlKCkgJiYgY3VycmVudE1hcmtlclthdHRyXSA9PSBmaWx0ZXJWYWx1ZSlcbiAgICAgICAgICAgICAgICBtYXJrZXJzLnB1c2goY3VycmVudE1hcmtlcilcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIG1hcmtlcnM7XG59O1xuXG5mdW5jdGlvbiBjaGVja1doYXRDb3VudHJpZXNNYXJrZXJzVG9BZGQoc2VsZWN0ZWRGaWx0ZXIsIGZpbHRlclZhbHVlKSB7XG4gICAgdmFyIGNvdW50cmllc1RvQWRkID0gW107XG4gICAgdmFyIG1hcmtlcnNUb0FkZCA9IFtdO1xuXG4gICAgLy8gY2hlY2sgd2hhdCBjb3VudHJpZXMgdG8gY29sb3VyXG4gICAgY291bnRyaWVzVG9BZGQgPSBjaGVja1doYXRDb3VudHJpZXNUb0FkZChzZWxlY3RlZEZpbHRlciwgZmlsdGVyVmFsdWUpO1xuICAgIG1hcmtlcnNUb0FkZCA9IGNoZWNrV2hhdE1hcmtlcnNUb0FkZChzZWxlY3RlZEZpbHRlciwgZmlsdGVyVmFsdWUpO1xuXG4gICAgcmV0dXJuIFtjb3VudHJpZXNUb0FkZCwgbWFya2Vyc1RvQWRkXTtcbn1cblxuZnVuY3Rpb24gY2hlY2tGaWx0ZXJOYW1lSXNWYWxpZChmaWx0ZXJOYW1lKSB7XG4gICAgdmFyIHZhbGlkID0gZmFsc2U7XG4gICAgJC5lYWNoKGpzb25GaWx0ZXJzQXJyYXksIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50RmlsdGVyKSB7XG4gICAgICAgIGlmIChjdXJyZW50RmlsdGVyLk5hbWUudG9Mb3dlckNhc2UoKSA9PT0gZmlsdGVyTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICBmaWx0ZXJPYmplY3QgPSBjdXJyZW50RmlsdGVyO1xuICAgICAgICAgICAgdmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbGlkO1xufVxuXG5mdW5jdGlvbiBjaGVja0ZpbHRlclZhbHVlc0FyZVZhbGlkKGZpbHRlciwgZmlsdGVyVmFsdWVzKSB7XG4gICAgdmFyIHZhbGlkID0gZmFsc2U7XG4gICAgJC5lYWNoKGZpbHRlclZhbHVlcywgZnVuY3Rpb24oaW5kZXgsIHBhcnQpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGN1cnJlbnQgdmFsdWUgaXMgdmFsaWRcbiAgICAgICAgJC5lYWNoKGZpbHRlck9iamVjdC5WYWx1ZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50VmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50VmFsdWUgPT0gcGFydCkge1xuICAgICAgICAgICAgICAgIHZhbGlkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXZhbGlkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSW52YWxpZCB2YWx1ZSBmb3IgdGhlIGZpbHRlcjogJyArIHBhcnQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbGlkO1xufVxuIiwiLy8gY3JlYXRlIGEgbmV3IEZJbHRlciBvYmplY3RcbnZhciBGaWx0ZXIgPSBmdW5jdGlvbihOYW1lLCBWYWx1ZXMpIHtcblx0dGhpcy5OYW1lID0gTmFtZTtcblx0dGhpcy5WYWx1ZXMgPSBWYWx1ZXM7XG59O1xuXG4vLyBudW1iZXIgb2YgZmlsdGVyc1xudmFyIG51bUZpbHRlcnM7XG52YXIgY3VycmVudEZpbHRlcjtcbnZhciBjb3VudHJ5VmFsdWVUb0NoZWNrO1xuXG5mdW5jdGlvbiByZXNldEZpbHRlcnMoKSB7XG5cdC8vIGNvbG9yIHRoZSBvcmlnaW5hbCBtYXBcblx0dmFyIGNvbG9ycyA9IGdlbmVyYXRlQ29sb3JzRm9yVGhlQ291bnRyaWVzKCk7XG5cdHJlbG9hZE1hcChjb2xvcnMpO1xuXG5cdC8vIGFkZCBvbmx5IHRoZSBtYXJrZXJzIHdobyBoYXZlIHRoYXQgZmlsdGVyIHZhbHVlXG5cdCQuZWFjaChqc29uTWFya2VycywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcblx0XHRtYXAuYWRkTWFya2VyKGluZGV4LCB7XG5cdFx0XHRsYXRMbmc6IFtjdXJyZW50TWFya2VyLkxhdGl0dWRlLCBjdXJyZW50TWFya2VyLkxvbmdpdHVkZV0sXG5cdFx0XHRuYW1lOiBjdXJyZW50TWFya2VyLmRlc2MsXG5cblx0XHRcdC8vIHNldCB0aGUgc3R5bGUgZm9yIHRoaXMgbWFya2VyXG5cdFx0XHRzdHlsZToge1xuXHRcdFx0XHRmaWxsOiAnZ3JlZW4nLFxuXHRcdFx0XHRyOiBtYXBSYW5nZShjdXJyZW50TWFya2VyLkNvdW50LCBtaW5Db3VudCwgbWF4Q291bnQsIG1pblJhZGl1cywgbWF4UmFkaXVzKVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcbn1cblxuVmVjdG9yaWFsTWFwLnByb3RvdHlwZS5jcmVhdGVTbGlkZXIgPSBmdW5jdGlvbigpIHtcblxuICAgIC8vIGpRdWVyeVVJIHNsaWRlclxuICAgIHNsaWRlciA9ICQoXCIjc2xpZGVyXCIpLnNsaWRlcigpO1xuXG4gICAgLy8gc2V0IG1heCBhbmQgbWluIHZhbHVlIGZvciB0aGUgc2xpZGVyXG4gICAgc2xpZGVyLnNsaWRlcihcIm9wdGlvblwiLCBcIm1pblwiLCBtaW5SYWRpdXMpO1xuICAgIHNsaWRlci5zbGlkZXIoXCJvcHRpb25cIiwgXCJtYXhcIiwgbWF4UmFkaXVzKTtcblxuICAgIC8vIGFsbG93IHRoZSB1c2VyIHRvIHNlbGVjdCBhIHJhbmdlXG4gICAgc2xpZGVyLnNsaWRlcihcIm9wdGlvblwiLCBcInJhbmdlXCIsIHRydWUpO1xuXG4gICAgLy8gd2hlbiB1c2VyIGNsaWNrcyB0aGUgc2xpZGVyLCBpdCB3aWxsIGFuaW1hdGUgdG8gdGhlIGNsaWNrZWQgcG9zaXRpb25cbiAgICBzbGlkZXIuc2xpZGVyKFwib3B0aW9uXCIsIFwiYW5pbWF0ZVwiLCBcInNsb3dcIik7XG5cbiAgICAvLyBhZnRlciBzZWxlY3RpbmcgYSBuZXcgc2xpZGVyIHZhbHVlXG4gICAgc2xpZGVyLm9uKFwic2xpZGVjaGFuZ2VcIiwgZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgICAgIHNsaWRlckNoYW5nZWQoKTtcbiAgICB9KTtcblxuICAgIC8vIGhpZGUgYWxsIHRoZSBjb21wb25lbnRzIHVudGlsIHRoZXkgYXJlIGhpZGRlblxuICAgICQoJyNzbGlkZXInKS5oaWRlKCk7XG4gICAgJCgnI21pblNsaWRlcicpLmhpZGUoKTtcbiAgICAkKCcjbWF4U2xpZGVyJykuaGlkZSgpO1xufVxuXG5mdW5jdGlvbiBmaWx0ZXJGcm9tTWVudVNlbGVjdGVkKHNlbGVjdGVkRmlsdGVyLCBmaWx0ZXJWYWx1ZSkge1xuXG5cdGN1cnJlbnRGaWx0ZXIgPSBzZWxlY3RlZEZpbHRlcjtcblxuXHQvLyBjaGVjayB3aGF0IGNvdW50cmllcyB0byBhZGQgdG8gdGhlIG1hcFxuXHR2YXIgY291bnRyaWVzID0gY2hlY2tXaGF0Q291bnRyaWVzVG9BZGQoc2VsZWN0ZWRGaWx0ZXIsIGZpbHRlclZhbHVlKTtcblxuXHQvLyByZWxvYWQgdGhlIG1hcCBhbmQgYWRkIHRob3NlIGNvdW50cmllc1xuXHRyZWxvYWRNYXAoY291bnRyaWVzKTtcblxuXHQvLyBhZGQgb25seSB0aGUgbWFya2VycyB3aG8gaGF2ZSB0aGF0IGZpbHRlciB2YWx1ZVxuXHQkLmVhY2goanNvbk1hcmtlcnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50TWFya2VyKSB7XG5cdFx0Ly8gY2hlY2sgaWYgYW55IG9mIHRoZSBuYW1lcyBpcyBlcXVhbCB0byB0aGUgc2VsZWN0ZWQgZmlsdGVyXG5cdFx0Ly8gdHJ5IHRvIHJlYWQgYWxsIHRoZSBuYW1lcyBhbmQgdmFsdWVzXG5cdFx0dmFyIGkgPSAwO1xuXHRcdGRvIHtcblx0XHRcdGkrKztcblx0XHRcdHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnTmFtZScgKyBpO1xuXHRcdFx0dmFyIGN1cnJlbnRWYWx1ZSA9ICdWYWx1ZScgKyBpO1xuXHRcdFx0Ly8gY2hlY2sgaWYgdGhlIENvdW50cnkgaGFzIHRoYXQgbmFtZVxuXHRcdFx0aWYoY3VycmVudE1hcmtlcltjdXJyZW50TmFtZVRvQ2hlY2tdKSB7XG5cdFx0XHRcdGlmKGN1cnJlbnRNYXJrZXJbY3VycmVudE5hbWVUb0NoZWNrXSA9PT0gc2VsZWN0ZWRGaWx0ZXIuTmFtZSkge1xuXHRcdFx0XHRcdGlmKGN1cnJlbnRNYXJrZXJbY3VycmVudFZhbHVlXSA9PT0gZmlsdGVyVmFsdWUpIHtcblx0XHRcdFx0XHRcdG1hcC5hZGRNYXJrZXIoaW5kZXgsIHtcblx0XHRcdFx0XHRcdFx0bGF0TG5nOiBbY3VycmVudE1hcmtlci5MYXRpdHVkZSwgY3VycmVudE1hcmtlci5Mb25naXR1ZGVdLFxuXHRcdFx0XHRcdFx0XHRuYW1lOiBjdXJyZW50TWFya2VyLmRlc2MsXG5cblx0XHRcdFx0XHRcdFx0Ly8gc2V0IHRoZSBzdHlsZSBmb3IgdGhpcyBtYXJrZXJcblx0XHRcdFx0XHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0XHRcdFx0XHRmaWxsOiAnZ3JlZW4nLFxuXHRcdFx0XHRcdFx0XHRcdHI6IG1hcFJhbmdlKGN1cnJlbnRNYXJrZXIuQ291bnQsIG1pbkNvdW50LCBtYXhDb3VudCwgbWluUmFkaXVzLCBtYXhSYWRpdXMpXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fSB3aGlsZSAodHJ1ZSlcblx0fSk7XG5cblxuXHQvLyB1cGRhdGUgdGhlIHNsaWRlclxuXHQvLyBjaGVjayBpZiBhbnkgb2YgdGhlIHZhbHVlcyBpcyBhIG51bWJlcnMsIGlmIGl0IGlzIHdlIHRoZW4gdXBkYXRlIHRoZSBzbGlkZXJcblx0aWYoIWlzTmFOKHNlbGVjdGVkRmlsdGVyLlZhbHVlc1swXSkpIHtcblx0XHQkKCcjc2xpZGVyJykuc2hvdygpO1xuXHRcdCQoJyNtaW5TbGlkZXInKS5zaG93KCk7XG5cdFx0JCgnI21heFNsaWRlcicpLnNob3coKTtcblxuXHRcdC8vIGpRdWVyeVVJIHNsaWRlclxuXHRcdHZhciBzbGlkZXIgPSAkKFwiI3NsaWRlclwiKS5zbGlkZXIoKTtcblx0XHR2YXIgbWluVmFsdWUgPSBzZWxlY3RlZEZpbHRlci5WYWx1ZXNbMF07XG5cdFx0dmFyIG1heFZhbHVlID0gc2VsZWN0ZWRGaWx0ZXIuVmFsdWVzW3NlbGVjdGVkRmlsdGVyLlZhbHVlcy5sZW5ndGggLSAxXTtcblxuXHRcdC8vIHNldCBtYXggYW5kIG1pbiB2YWx1ZSBmb3IgdGhlIHNsaWRlclxuXHRcdHNsaWRlci5zbGlkZXIoXCJvcHRpb25cIiwgXCJtaW5cIiwgbWluVmFsdWUpO1xuXHRcdHNsaWRlci5zbGlkZXIoXCJvcHRpb25cIiwgXCJtYXhcIiwgbWF4VmFsdWUpO1xuXG5cdFx0Ly8gc2V0IHRoZSB0ZXh0IG9uIHRoZSBVSVxuXHRcdCQoJyNtaW5TbGlkZXInKS50ZXh0KG1pblZhbHVlKTtcblx0XHQkKCcjbWF4U2xpZGVyJykudGV4dChtYXhWYWx1ZSk7XG5cdH0gZWxzZSB7XG5cdFx0JCgnI3NsaWRlcicpLmhpZGUoKTtcblx0XHQkKCcjbWluU2xpZGVyJykuaGlkZSgpO1xuXHRcdCQoJyNtYXhTbGlkZXInKS5oaWRlKCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gc2xpZGVyQ2hhbmdlZCgpIHtcblx0Ly8gZ2V0IHRoZSBtYXggYW5kIG1pbiB2YWx1ZXMgZm9yIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgcmFuZ2Vcblx0dmFyIGN1cnJlbnRSYW5nZSA9IHNsaWRlci5zbGlkZXIoXCJvcHRpb25cIiwgXCJ2YWx1ZXNcIik7XG5cdHZhciBtaW4gPSBjdXJyZW50UmFuZ2VbMF07XG5cdHZhciBtYXggPSBjdXJyZW50UmFuZ2VbMV07XG5cblx0dmFyIGN1cnJlbnRGaWx0ZXJOYW1lID0gY3VycmVudEZpbHRlci5OYW1lO1xuXG5cdC8vIHNldCB0aGUgdGV4dCBvbiB0aGUgVUlcblx0JCgnI21pblNsaWRlcicpLnRleHQobWluKTtcblx0JCgnI21heFNsaWRlcicpLnRleHQobWF4KTtcblxuXHQvLyBmaWx0ZXIgdGhlIENvdW50cmllc1xuXHR2YXIgY291bnRyaWVzID0gW107XG5cdCQuZWFjaChqc29uQ291bnRyaWVzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudENvdW50cnkpIHtcblx0XHR2YXIgZmlsdGVyVmFsdWVGb3JDb3VudHJ5ID0gK2N1cnJlbnRDb3VudHJ5W2NvdW50cnlWYWx1ZVRvQ2hlY2tdO1xuXHRcdGlmKGZpbHRlclZhbHVlRm9yQ291bnRyeSA+PSBtaW4gJiYgZmlsdGVyVmFsdWVGb3JDb3VudHJ5IDw9IG1heClcblx0XHRcdGNvdW50cmllc1tjdXJyZW50Q291bnRyeS5jb3VudHJ5XSA9IGN1cnJlbnRDb3VudHJ5LkNvdW50O1xuXHR9KTtcblxuXHQvLyBkcmF3IHRoZSBjb3VudHJpZXMgb24gdGhlIG1hcFxuXHRyZWxvYWRNYXAoY291bnRyaWVzKTtcblxuXHQvLyBmaWx0ZXIgdGhlIE1hcmtlcnNcblx0dmFyIGN1cnJlbnRDb3VudHJ5ID0ganNvbkNvdW50cmllc1swXTtcblx0dmFyIHNlbGVjdGVkTmFtZTtcblx0dmFyIGkgPSAwO1xuXHRkbyB7XG5cdFx0aSsrO1xuXHRcdHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnTmFtZScgKyBpO1xuXHRcdHZhciBjdXJyZW50VmFsdWUgPSAnVmFsdWUnICsgaTtcblx0XHQvLyBjaGVjayBpZiB0aGUgQ291bnRyeSBoYXMgdGhhdCBuYW1lXG5cdFx0aWYoY3VycmVudENvdW50cnlbY3VycmVudE5hbWVUb0NoZWNrXSA9PT0gY3VycmVudEZpbHRlck5hbWUpIHtcblx0XHRcdHNlbGVjdGVkTmFtZSA9IGN1cnJlbnRWYWx1ZTtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fSB3aGlsZSAodHJ1ZSk7XG5cblx0Ly8gYWRkIG9ubHkgdGhlIG1hcmtlcnMgd2hvIGhhdmUgdGhhdCBmaWx0ZXIgdmFsdWVcblx0JC5lYWNoKGpzb25NYXJrZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudE1hcmtlcikge1xuXHRcdC8vIGNoZWNrIGlmIHRoZSBDb3VudHJ5IGhhcyB0aGF0IG5hbWVcblx0XHRpZihjdXJyZW50TWFya2VyW3NlbGVjdGVkTmFtZV0gPj0gbWluICYmIGN1cnJlbnRNYXJrZXJbc2VsZWN0ZWROYW1lXSA8PSBtYXgpIHtcblx0XHRcdG1hcC5hZGRNYXJrZXIoaW5kZXgsIHtcblx0XHRcdFx0bGF0TG5nOiBbY3VycmVudE1hcmtlci5MYXRpdHVkZSwgY3VycmVudE1hcmtlci5Mb25naXR1ZGVdLFxuXHRcdFx0XHRuYW1lOiBjdXJyZW50TWFya2VyLmRlc2MsXG5cblx0XHRcdFx0Ly8gc2V0IHRoZSBzdHlsZSBmb3IgdGhpcyBtYXJrZXJcblx0XHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0XHRmaWxsOiAnZ3JlZW4nLFxuXHRcdFx0XHRcdHI6IG1hcFJhbmdlKGN1cnJlbnRNYXJrZXIuQ291bnQsIG1pbkNvdW50LCBtYXhDb3VudCwgbWluUmFkaXVzLCBtYXhSYWRpdXMpXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fSk7XG59O1xuXG5mdW5jdGlvbiByZWFkRmlsdGVyc0Zyb21KU09OKGlucHV0RmlsdGVycykge1xuXHR2YXIgZmlsdGVycyA9IFtdO1xuXG5cdGZvcih2YXIgaSA9IDA7IGkgPCBpbnB1dEZpbHRlcnMudmFsdWVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Ly8gcmVhZCB0aGUgY3VycmVudCBmaWx0ZXJcblx0XHRjdXJyZW50RmlsdGVyID0gaW5wdXRGaWx0ZXJzLnZhbHVlc1tpXTtcblx0XHQvLyBmaWVsZHNcblx0XHR2YXIgbmFtZSA9IGN1cnJlbnRGaWx0ZXIubmFtZTtcblx0XHR2YXIgdmFsdWVzID0gW107XG5cblx0XHRmb3IodmFyIGogPSAwOyBqIDwgY3VycmVudEZpbHRlci52YWx1ZXMubGVuZ3RoOyBqKyspXG5cdFx0XHR2YWx1ZXMucHVzaChjdXJyZW50RmlsdGVyLnZhbHVlc1tqXSk7XG5cdFx0ZmlsdGVyc1tpXSA9IG5ldyBGaWx0ZXIobmFtZSwgdmFsdWVzKTtcblx0fVxuXHRudW1GaWx0ZXJzID0gZmlsdGVycy5sZW5ndGg7XG5cdHJldHVybiBmaWx0ZXJzO1xufTtcbiIsInZhciBtYXBwaW5nTWFya2VycyA9IFtdO1xudmFyIG1hcHBpbmdDb3VudHJpZXMgPSBbXTtcblxuVmVjdG9yaWFsTWFwLnByb3RvdHlwZS5yZWdpc3RlclRyYW5zZm9ybWVyID0gZnVuY3Rpb24oanNvbkxvY2F0aW9uLCBjb3VudHJpZXNNYXBwaW5nSnNvbiwgbWFya2Vyc01hcHBpbmdKc29uKSB7XG5cdC8vIGpzb25Mb2NhdGlvbiAtIHVybCBvZiB0aGUgbmV3IGpzb25cblx0Ly8gY291bnRyaWVzTWFwcGluZ0pzb24gLSBqc29uIHRoYXQgY29udGFpbnMgdGhlIGpzb24gY291bnRyeSBtYXBwaW5nXG5cdHZhciBjb3VudHJpZXNNYXBwaW5nSnNvbiA9IFwiLi4vbWFwcGluZ0pTT04vbWFwcGluZ0NvdW50cmllc1NhbXBsZS5qc29uXCI7XG5cdC8vIG1hcmtlcnNNYXBwaW5nSnNvbiAtIGpzb24gdGhhdCBjb250YWlucyB0aGUganNvbiBtYXJrZXJzIG1hcHBpbmdcblx0dmFyIG1hcmtlcnNNYXBwaW5nSnNvbiA9IFwiLi4vbWFwcGluZ0pTT04vbWFwcGluZ01hcmtlcnNTYW1wbGUuanNvblwiO1xuXG5cdGlmKCFjb3VudHJpZXNNYXBwaW5nSnNvbikge1xuXHRcdGNvbnNvbGUuZXJyb3IoJ3lvdSBtdXN0IHNwZWNpZnkgYSBjb3VudHJpZXMgbWFwcGluZyBqc29uJyk7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdGlmKCFtYXJrZXJzTWFwcGluZ0pzb24pIHtcblx0XHRjb25zb2xlLmVycm9yKCd5b3UgbXVzdCBzcGVjaWZ5IGEgbWFya2VycyBtYXBwaW5nIGpzb24nKTtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyBnZXQgdGhlIEpTT05cblx0anNvbkxvY2F0aW9uID0gXCIuLi9qc29uL2VzcGlkLXNwYWluLmpzb25cIjtcblx0JC5nZXRKU09OKGpzb25Mb2NhdGlvbiwgZnVuY3Rpb24oanNvbikge1xuXHRcdC8vIHJlYWQgY291bnRyaWVzXG5cdFx0anNvbk1hcENvdW50cmllcyhqc29uLCBjb3VudHJpZXNNYXBwaW5nSnNvbik7XG5cdFx0Ly8gcmVhZCBtYXJrZXJzXG5cdFx0anNvbk1hcE1hcmtlcnMoanNvbiwgbWFya2Vyc01hcHBpbmdKc29uKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGpzb25NYXBDb3VudHJpZXMoanNvbiwgY291bnRyaWVzTWFwcGluZ0pzb24pIHtcblx0dmFyIGNvdW50cmllcyA9IFtdO1xuXHQvLyBhY2Nlc3MgdGhlIEpTT04gZmlsZSB0aGF0IHNwZWNpZmllcyB0aGUgbWFwcGluZ1xuXHQkLmdldEpTT04oY291bnRyaWVzTWFwcGluZ0pzb24sIGZ1bmN0aW9uKGpzb25NYXBwaW5nKSB7XG5cblx0XHQvLyBpbiB0aGlzIGNhc2UgdGhlICdjb3VudHJpZXMnIGFyZSBkZWZpbmVkIHRoZSB0b3AgbGV2ZWxcblx0XHQvLyBpdGVyYXRlIHRocm91Z2ggZXZlcnkgJ2NvdW50cnknXG5cdFx0JC5lYWNoKGpzb24sIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50SlNPTikge1xuXHRcdFx0dmFyIGpzb25Db3VudHJ5ID0gJ3snO1xuXHRcdFx0Ly8gZ2V0IHRoZSBuYW1lIG9mIHRoZSBjb3VudHJ5XG5cdFx0XHR2YXIgbmFtZSA9IGN1cnJlbnRKU09OW2pzb25NYXBwaW5nLmNvdW50cnldO1xuXHRcdFx0Ly8gdGhlIGNvdW50cnkgbmFtZSBtdXN0IGJlIG9uIHRoZSB0d28tZGlnaXQgZm9ybWF0XG5cdFx0XHQvLyBnZXQgdGhlIGNvdW50IC0gV0hBVCBJUyBUSEUgQ09VTlQ/XG5cdFx0XHR2YXIgY291bnQgPSAwO1xuXHRcdFx0Ly9nZXQgdGhlIGRlc2NyaXB0aW9uIC0gV0hUIElTIFRIRSBERVNDUklQVElPTiBPRiBBIE1BUktFUj9cblx0XHRcdHZhciBkZXNjcmlwdGlvbiA9ICcnO1xuXHRcdFx0Lypcblx0XHRcdFdIQVQgQVJFIFRIRSBOQU1FUz8/P1xuXHRcdFx0Ki9cblx0XHRcdGNvdW50cmllc1tpbmRleF0gPSBuZXcgQ291bnRyeSgnJywgbmFtZSwgY291bnQpO1xuXHRcdH0pO1xuXHRcdG1hcHBpbmdDb3VudHJpZXMgPSBjb3VudHJpZXM7XG5cdFx0Y29uc29sZS5sb2cobWFwcGluZ0NvdW50cmllcyk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBqc29uTWFwTWFya2Vycyhqc29uLCBtYXJrZXJzTWFwcGluZ0pzb24pIHtcblx0dmFyIG1hcmtlcnMgPSBbXTtcblxuXHQvLyBhY2Nlc3MgdGhlIEpTT04gZmlsZSB0aGF0IHNwZWNpZmllcyB0aGUgbWFwcGluZ1xuXHQkLmdldEpTT04obWFya2Vyc01hcHBpbmdKc29uLCBmdW5jdGlvbihqc29uTWFwcGluZykge1xuXHRcdC8vIGluIHRoaXMgY2FzZSB0aGUgJ21hcmtlcnMnIGFyZSBkZWZpbmVkIHRoZSB0b3AgbGV2ZWxcblx0XHQvLyBpdGVyYXRlIHRocm91Z2ggZXZlcnkgJ21hcmtlcidcblx0XHQkLmVhY2goanNvbiwgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRKU09OKSB7XG5cdFx0XHQvLyBnZXQgdGhlIG5hbWUgb2YgdGhlIGNvdW50cnlcblx0XHRcdHZhciBuYW1lID0gY3VycmVudEpTT05banNvbk1hcHBpbmcuY291bnRyeV07XG5cdFx0XHQvLyB0aGUgY291bnRyeSBuYW1lIG11c3QgYmUgb24gdGhlIHR3by1kaWdpdCBmb3JtYXRcblx0XHRcdC8vIGdldCB0aGUgY291bnQgLSBXSEFUIElTIFRIRSBDT1VOVD9cblx0XHRcdHZhciBjb3VudCA9IDA7XG5cdFx0XHQvLyBnZXQgdGhlIGxhdGl0dWRlXG5cdFx0XHR2YXIgbGF0aXR1ZGUgPSBjdXJyZW50SlNPTltqc29uTWFwcGluZy5MYXRpdHVkZV07XG5cdFx0XHQvLyBnZXQgdGhlIGxvbmdpdHVkZVxuXHRcdFx0dmFyIGxvbmdpdHVkZSA9IGN1cnJlbnRKU09OW2pzb25NYXBwaW5nLkxvbmdpdHVkZV07XG5cdFx0XHQvL2dldCB0aGUgZGVzY3JpcHRpb24gLSBXSEFUIElTIFRIRSBERVNDUklQVElPTiBPRiBBIE1BUktFUj9cblx0XHRcdHZhciBkZXNjcmlwdGlvbiA9ICcnO1xuXHRcdFx0Lypcblx0XHRcdFdIQVQgQVJFIFRIRSBOQU1FUz8/P1xuXHRcdFx0Ki9cblx0XHRcdC8vIGNyZWF0ZSBhIG5ldyBtYXJrZXJcblx0XHRcdG1hcmtlcnNbaW5kZXhdID0gbmV3IE1hcmtlcignJywgbmFtZSwgY291bnQsIGxhdGl0dWRlLCBsb25naXR1ZGUpO1xuXHRcdH0pO1xuXHRcdG1hcHBpbmdNYXJrZXJzID0gbWFya2Vycztcblx0XHRjb25zb2xlLmxvZyhtYXBwaW5nTWFya2Vycyk7XG5cdH0pO1xufVxuIiwiLy8gcmVkcmF3IHRoZSBtYXBcbmZ1bmN0aW9uIHJlbG9hZE1hcChjb2xvcnMpIHtcbiAgICAvLyBnZXQgdGhlIG5hbWUgb2YgdGhlIGN1cnJlbnQgbWFwXG4gICAgaWYgKG1hcC5wYXJhbXMubWFwID09IG1UeXBlKSB7XG4gICAgICAgIC8vIG1haW4gbWFwXG4gICAgICAgIC8vIHVwZGF0ZSBtaW4gYW5kIG1heCBDb3VudCBvZiB0aGUgY291bnRyaWVzXG4gICAgICAgIGlmIChqc29uQ291bnRyaWVzLmxlbmd0aCA+IDApXG4gICAgICAgICAgICByZWFkTWluTWF4KGNvbG9ycyk7XG5cbiAgICAgICAgLy8gZXJhc2UgdGhlIG1hcFxuICAgICAgICAkKFwiI1wiICsgbURpdikuZW1wdHkoKTtcblxuICAgICAgICBtYXAgPSBuZXcganZtLk1hcCh7XG4gICAgICAgICAgICBtYXA6IG1UeXBlLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBiYWNrZ3JvdW5kLFxuICAgICAgICAgICAgY29udGFpbmVyOiAkKCcjJyArIG1EaXYpLFxuICAgICAgICAgICAgb25SZWdpb25DbGljazogZnVuY3Rpb24oZSwgY29kZSkge1xuICAgICAgICAgICAgICAgIC8vIHJlbG9hZCBhIG5ldyBtYXBcbiAgICAgICAgICAgICAgICBjb3VudHJ5Q29kZSA9IGNvZGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAvLyB3YWl0VG9BZGRNYXJrZXJzKDEwMCk7XG4gICAgICAgICAgICAgICAgdmFyIG5ld01hcCA9IGNvdW50cnlDb2RlICsgJ19taWxsX2VuJztcbiAgICAgICAgICAgICAgICAvLyBzd2l0aCB0byBuZXcgbWFwXG4gICAgICAgICAgICAgICAgc3dpdGNoTWFwKG5ld01hcCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25NYXJrZXJUaXBTaG93OiBmdW5jdGlvbihlLCBsYWJlbCwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmluYWxUb29sdGlwID0gYnVpbGRNYXJrZXJUb29sdGlwKGpzb25NYXJrZXJzLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgbGFiZWwuaHRtbChmaW5hbFRvb2x0aXApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uUmVnaW9uVGlwU2hvdzogZnVuY3Rpb24oZSwgY291bnRyeU5hbWUsIGNvZGUpIHtcbiAgICAgICAgICAgICAgICAvLyBjb2RlIGNvbnRhaW5zIHRoZSBjb2RlIG9mIHRoZSBjb3VudHJ5IChpLmUuLCBQVCwgRVMsIEZSLCBldGMpXG4gICAgICAgICAgICAgICAgLy8gc2hvdyB0aGUgQ291bnQgYXNzb2NpYXRlZCB0byB0aGF0IENvdW50cnkgLSBsb29rIGZvciB0aGUgY291bnRyeVxuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZENvdW50cnkgPSAtMTtcbiAgICAgICAgICAgICAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeS5jb3VudHJ5ID09PSBjb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENvdW50cnkgPSBjdXJyZW50Q291bnRyeTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZENvdW50cnkgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmFsVG9vbHRpcCA9IGJ1aWxkQ291bnRyeVRvb2x0aXAoY291bnRyeU5hbWUsIHNlbGVjdGVkQ291bnRyeSk7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50cnlOYW1lLmh0bWwoZmluYWxUb29sdGlwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgY291bnRyeU5hbWUuaHRtbChjb3VudHJ5TmFtZS5odG1sKCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlcmllczoge1xuICAgICAgICAgICAgICAgIG1hcmtlcnM6IFtmaW5hbE1hcmtlcnNJbk1hcF0sXG4gICAgICAgICAgICAgICAgcmVnaW9uczogW3tcbiAgICAgICAgICAgICAgICAgICAgLy8gbWluIGFuZCBtYXggdmFsdWVzIG9mIGNvdW50XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlOiBbbWluQ29sb3JNYXAsIG1heENvbG9yTWFwXSxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlOiAnZmlsbCcsXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBjb2xvcnMgYXJlICdzdHJldGNoZWQnIHRvIGZpbGwgdGhlIHNjYWxlXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogY29sb3JzXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc3VibWFwXG4gICAgICAgIC8vIHVwZGF0ZSBtaW4gYW5kIG1heCBDb3VudCBvZiB0aGUgY291bnRyaWVzXG4gICAgICAgIGlmIChqc29uQ291bnRyaWVzLmxlbmd0aCA+IDApXG4gICAgICAgICAgICByZWFkTWluTWF4KGNvbG9ycyk7XG5cbiAgICAgICAgLy8gZXJhc2UgdGhlIG1hcFxuICAgICAgICAkKFwiI1wiICsgbURpdikuZW1wdHkoKTtcbiAgICAgICAgcmVtb3ZlVG9vbHRpcCgpO1xuICAgICAgICBzd2l0Y2hNYXAobWFwVHlwZSk7XG4gICAgfVxuXG5cbn1cblxuZnVuY3Rpb24gcmVtb3ZlVG9vbHRpcCgpIHtcbiAgICAvLyBlcmFzZSB0aGUgcHJldmlvdXMgbWFwIHRvb2x0aXBcbiAgICAkKCcuanZlY3Rvcm1hcC10aXAnKS5yZW1vdmUoKTtcbn1cblxuZnVuY3Rpb24gc3dpdGNoTWFwKG5ld01hcCkge1xuICAgIC8vIHRoaXMgZnVuY3Rpb24gZ2V0cyBjYWxsZWQgd2hlbiBhIGNvdW50cnkgb24gdGhlIHdvcmxkIG1hcCBpcyBjbGlja2VkXG4gICAgLy8gZXJhc2UgdGhlIHByZXZpb3VzIG1hcFxuICAgICQoJyMnICsgbURpdikuZW1wdHkoKTtcbiAgICByZW1vdmVUb29sdGlwKCk7XG5cbiAgICB2YXIgcmVnaW9uQ29sb3JzID0gZ2VuZXJhdGVDb2xvcnNGb3JUaGVSZWdpb25zKG5ld01hcCk7XG5cbiAgICBtYXAgPSBuZXcganZtLk1hcCh7XG4gICAgICAgIG1hcDogbmV3TWFwLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmQsXG4gICAgICAgIGNvbnRhaW5lcjogJCgnIycgKyBtRGl2KSxcbiAgICAgICAgb25NYXJrZXJUaXBTaG93OiBmdW5jdGlvbihlLCBsYWJlbCwgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBmaW5hbFRvb2x0aXAgPSBidWlsZE1hcmtlclRvb2x0aXAoanNvbk1hcmtlcnMsIGluZGV4KTtcbiAgICAgICAgICAgIGxhYmVsLmh0bWwoZmluYWxUb29sdGlwKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25SZWdpb25UaXBTaG93OiBmdW5jdGlvbihlLCByZWdpb25OYW1lLCBjb2RlKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudE1hcCA9IG5ld01hcC5zcGxpdCgnXycpWzBdLnRvVXBwZXJDYXNlKClcbiAgICAgICAgICAgICAgICAvLyBjb2RlIGNvbnRhaW5zIHRoZSBjb2RlIG9mIHRoZSByZWdpb24gKGkuZS4sIFBULTEsIEVTLU0sIGV0YylcbiAgICAgICAgICAgICAgICAvLyBzaG93IHRoZSBDb3VudCBhc3NvY2lhdGVkIHRvIHRoYXQgUmVnaW9uIC0gbG9vayBmb3IgdGhlIFJlZ2lvblxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ291bnRyeSA9IC0xO1xuICAgICAgICAgICAgLy8gZmluZCB0aGUgY29ycmVzcG9uZGluZyBjb3VudHJ5XG4gICAgICAgICAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5LmNvdW50cnkgPT0gY3VycmVudE1hcCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENvdW50cnkgPSBjdXJyZW50Q291bnRyeTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIHNlbGVjdGVkIHJlZ2lvbiBoYXMgYW55IGRhdGEgaW5zaWRlIHRoYXQgY291bnRyeVxuICAgICAgICAgICAgdmFyIHJlZ2lvbkZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRSZWdpb247XG4gICAgICAgICAgICAkLmVhY2gobWFwLnJlZ2lvbnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50UmVnaW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRSZWdpb24ubmFtZSA9PSBjb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUmVnaW9uID0gY3VycmVudFJlZ2lvbjtcbiAgICAgICAgICAgICAgICAgICAgcmVnaW9uRm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocmVnaW9uRm91bmQpIHtcbiAgICAgICAgICAgICAgICByZWdpb25OYW1lLmh0bWwoYnVpbGRSZWdpb25Ub29sdGlwKHNlbGVjdGVkUmVnaW9uKSk7XG4gICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICByZWdpb25OYW1lLmh0bWwocmVnaW9uTmFtZS5odG1sKCkpO1xuICAgICAgICB9LFxuICAgICAgICBzZXJpZXM6IHtcbiAgICAgICAgICAgIG1hcmtlcnM6IFt7XG4gICAgICAgICAgICAgICAgLy8gY2hhbmdlIHRoZSBzY2FsZSB0byBmaXQgdGhlIGN1cnJlbnQgbWluIGFuZCBtYXggdmFsdWVzXG4gICAgICAgICAgICAgICAgc2NhbGU6IFttaW5Db2xvck1hcCwgbWF4Q29sb3JNYXBdLFxuICAgICAgICAgICAgICAgIHZhbHVlczogW21pbkNvdW50LCBtYXhDb3VudF0sXG4gICAgICAgICAgICAgICAgbGVnZW5kOiB7XG4gICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsOiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICByZWdpb25zOiBbe1xuICAgICAgICAgICAgICAgIC8vIG1pbiBhbmQgbWF4IHZhbHVlcyBvZiBjb3VudFxuICAgICAgICAgICAgICAgIHNjYWxlOiBbbWluQ29sb3JNYXAsIG1heENvbG9yTWFwXSxcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICdmaWxsJyxcbiAgICAgICAgICAgICAgICAvLyB0aGUgY29sb3JzIGFyZSAnc3RyZXRjaGVkJyB0byBmaWxsIHRoZSBzY2FsZVxuICAgICAgICAgICAgICAgIHZhbHVlczogcmVnaW9uQ29sb3JzXG4gICAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBhZGQgYmFjayBidXR0b25cbiAgICAkKCcjbXlfbWFwJykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwianZlY3Rvcm1hcC1nb2JhY2tcIj5CYWNrPC9kaXY+Jyk7XG4gICAgJChcIi5qdmVjdG9ybWFwLWdvYmFja1wiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gZXJhc2UgdGhlIHByZXZpb3VzIG1hcFxuICAgICAgICAkKCcjJyArIG1EaXYpLmVtcHR5KCk7XG4gICAgICAgIHJlbW92ZVRvb2x0aXAoKTtcblxuXG4gICAgICAgIC8vIHdoZW4gdGhlIGxlZnQgYnV0dG9uIGlzIGNsaWNrZWRcbiAgICAgICAgLy8gcmV0dXJuIHRvIHRoZSBtYWluIG1hcFxuICAgICAgICBtYXAgPSBuZXcganZtLk1hcCh7XG4gICAgICAgICAgICBjb250YWluZXI6ICQoJyMnICsgbURpdiksXG4gICAgICAgICAgICAvLyBjb25maWd1cmF0aW9uIG9mIHRoZSBtYWluIG1hcFxuICAgICAgICAgICAgLy8gdHlwZSBvZiBtYXAgKHdvcmxkLCBFdXJvcGUsIFVTQSwgZXRjKVxuICAgICAgICAgICAgbWFwOiBtVHlwZSxcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYmFja2dyb3VuZCxcbiAgICAgICAgICAgIC8vIHRyaWdnZXJlZCB3aGVuIGEgbWFya2VyIGlzIGhvdmVyZWRcbiAgICAgICAgICAgIG9uUmVnaW9uQ2xpY2s6IGZ1bmN0aW9uKGUsIGNvZGUpIHtcbiAgICAgICAgICAgICAgICAvLyByZWxvYWQgYSBuZXcgbWFwXG4gICAgICAgICAgICAgICAgY291bnRyeUNvZGUgPSBjb2RlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgLy8gd2FpdFRvQWRkTWFya2VycygxMDApO1xuICAgICAgICAgICAgICAgIHZhciBuZXdNYXAgPSBjb3VudHJ5Q29kZSArICdfbWlsbF9lbic7XG4gICAgICAgICAgICAgICAgLy8gc3dpdGggdG8gbmV3IG1hcFxuICAgICAgICAgICAgICAgIHN3aXRjaE1hcChuZXdNYXApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uTWFya2VyVGlwU2hvdzogZnVuY3Rpb24oZSwgbGFiZWwsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgLy8gc2VsZWN0IHdoYXQgdGV4dCB0byBkaXNwbGF5IHdoZW4gbWFya2VyIGlzIGhvdmVyZWRcbiAgICAgICAgICAgICAgICB2YXIgZmluYWxUb29sdGlwID0gYnVpbGRNYXJrZXJUb29sdGlwKGpzb25NYXJrZXJzLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgbGFiZWwuaHRtbChmaW5hbFRvb2x0aXApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIHRyaWdnZXJlZCB3aGVuIGEgcmVnaW9uIGlzIGhvdmVyZWRcbiAgICAgICAgICAgIG9uUmVnaW9uVGlwU2hvdzogZnVuY3Rpb24oZSwgY291bnRyeU5hbWUsIGNvZGUpIHtcbiAgICAgICAgICAgICAgICAvLyBjb2RlIGNvbnRhaW5zIHRoZSBjb2RlIG9mIHRoZSBjb3VudHJ5IChpLmUuLCBQVCwgRVMsIEZSLCBldGMpXG4gICAgICAgICAgICAgICAgLy8gc2hvdyB0aGUgQ291bnQgYXNzb2NpYXRlZCB0byB0aGF0IENvdW50cnkgLSBsb29rIGZvciB0aGUgY291bnRyeVxuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZENvdW50cnkgPSAtMTtcbiAgICAgICAgICAgICAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeS5jb3VudHJ5ID09PSBjb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENvdW50cnkgPSBjdXJyZW50Q291bnRyeTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZENvdW50cnkgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZmluZCBvY2N1cnJlbmNlIG9mIHNldmVyYWwgc3RyaW5ncyBpbnNpZGUgdGhlIHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgIHZhciBmaW5hbFRvb2x0aXAgPSBidWlsZENvdW50cnlUb29sdGlwKGNvdW50cnlOYW1lLCBzZWxlY3RlZENvdW50cnkpO1xuICAgICAgICAgICAgICAgICAgICBjb3VudHJ5TmFtZS5odG1sKGZpbmFsVG9vbHRpcCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGNvdW50cnlOYW1lLmh0bWwoY291bnRyeU5hbWUuaHRtbCgpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXJpZXM6IHtcbiAgICAgICAgICAgICAgICBtYXJrZXJzOiBbe1xuICAgICAgICAgICAgICAgICAgICBzY2FsZTogW21pbkNvbG9yTWFwLCBtYXhDb2xvck1hcF0sXG4gICAgICAgICAgICAgICAgICAgIC8vIHJhbmdlIG9mIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggdGhlIENvdW50XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogW21pbkNvdW50LCBtYXhDb3VudF0sXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBhIGxlZ2VuZFxuICAgICAgICAgICAgICAgICAgICBsZWdlbmQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICByZWdpb25zOiBbe1xuICAgICAgICAgICAgICAgICAgICAvLyBtaW4gYW5kIG1heCB2YWx1ZXMgb2YgY291bnRcbiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IFttaW5Db2xvck1hcCwgbWF4Q29sb3JNYXBdLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICdmaWxsJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBhdXhDb2xvcnNcbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuXG5cbiAgICAgICAgLy8gYWRkIHRoZSBtYXJrZXMgdG8gdGhlIG1hcFxuICAgICAgICBpZiAodGhlcmVBcmVNYXJrZXJzKSB7XG4gICAgICAgICAgICBhZGRNYXJrZXJzVG9NYXAoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gYWRkIHRoZSBtYXJrZXJzXG4gICAgaWYgKHRoZXJlQXJlTWFya2Vycykge1xuICAgICAgICBhZGRNYXJrZXJzVG9NYXAoKTtcbiAgICB9XG5cbiAgICBpZiAoanNvbkNvdW50cmllcykge1xuICAgICAgICAvLyBjaGVjayBpZiB0aGUgc2VsZWN0ZWQgbWFwIGhhcyBhbnkgcmVnaW9uIHRvIGhpZ2hsaWdodFxuICAgICAgICAvLyBhZGRSZWdpb25zVG9NYXAobmV3TWFwKVxuICAgIH1cbn1cbiIsIi8vIE1hcmtlciBkZWZpbml0aW9uXG52YXIgTWFya2VyID0gZnVuY3Rpb24obWFya2VyT2JqZWN0KSB7XG4gICAgLy8gYWRkIGF0dHJpYnV0ZXNcbiAgICB2YXIgYXR0cmlidXRlcyA9IG1hcmtlck9iamVjdFtcImF0dHJpYnV0ZXNcIl07XG4gICAgdmFyIG1hcmtlciA9IHRoaXM7XG4gICAgJC5lYWNoKE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLCBmdW5jdGlvbihpbmRleCwgYXR0cikge1xuICAgICAgICBtYXJrZXJbYXR0cl0gPSBhdHRyaWJ1dGVzW2F0dHJdO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb3VudHJ5ID0gbWFya2VyT2JqZWN0LmNvdW50cnk7XG4gICAgdGhpcy5jb3VudCA9ICttYXJrZXJPYmplY3QuY291bnQ7XG4gICAgdGhpcy5sYXRpdHVkZSA9IG1hcmtlck9iamVjdC5sYXRpdHVkZTtcbiAgICB0aGlzLmxvbmdpdHVkZSA9IG1hcmtlck9iamVjdC5sb25naXR1ZGU7XG4gICAgdGhpcy5pY29uID0gbWFya2VyT2JqZWN0Lmljb247XG4gICAgLy8gVE9ETyAtIGFkZCBlc2NyaXB0aW9uIHRvIGEgTWFya2VyIGZyb20gdGhlIEpTT04gZmlsZVxuICAgIHRoaXMuZGVzYyA9ICdhYmMnO1xufTtcblxuLy8gcmVhZCB0aGUgbWFya2VycyBmcm9tIGEgSlNPTiBmaWxlXG5mdW5jdGlvbiByZWFkTWFya2Vyc0Zyb21KU09OKGpzb25NYXJrZXJzKSB7XG4gICAgdmFyIG1hcmtlcnMgPSBbXTtcblxuICAgIG1pbkNvdW50ID0gSW5maW5pdHk7XG4gICAgbWF4Q291bnQgPSAtSW5maW5pdHk7XG5cbiAgICAkLmVhY2goanNvbk1hcmtlcnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50SlNPTk1hcmtlcikge1xuICAgICAgICBtYXJrZXJzW2luZGV4XSA9IG5ldyBNYXJrZXIoY3VycmVudEpTT05NYXJrZXIpO1xuICAgICAgICB2YXIgY3VycmVudENvdW50VmFsdWUgPSBtYXJrZXJzW2luZGV4XS5Db3VudDtcblxuICAgICAgICBpZiAoY3VycmVudENvdW50VmFsdWUgPiBtYXhDb3VudCkge1xuICAgICAgICAgICAgbWF4Q291bnQgPSBjdXJyZW50Q291bnRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudENvdW50VmFsdWUgPCBtaW5Db3VudClcbiAgICAgICAgICAgIG1pbkNvdW50ID0gY3VycmVudENvdW50VmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIG1hcmtlcnM7XG59XG5cbmZ1bmN0aW9uIGFkZE1hcmtlcnNUb01hcCgpIHtcbiAgICB2YXIgbWFya2Vyc0pTT05BcnJheSA9IFtdO1xuICAgICQuZWFjaChmaWx0ZXJlZE1hcmtlcnMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50TWFya2VyKSB7XG4gICAgICAgIHZhciBjdXJyZW50TWFya2VySlNPTiA9IHtcbiAgICAgICAgICAgIGxhdExuZzogW2N1cnJlbnRNYXJrZXIubGF0aXR1ZGUsIGN1cnJlbnRNYXJrZXIubG9uZ2l0dWRlXSxcbiAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRNYXJrZXIuZGVzYyxcbiAgICAgICAgICAgIC8vIHNldCB0aGUgc3R5bGUgZm9yIHRoaXMgbWFya2VyXG4gICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgIGZpbGw6ICdyZWQnLFxuICAgICAgICAgICAgICAgIHI6IG1hcFJhbmdlKGN1cnJlbnRNYXJrZXIuY291bnQsIG1pbkNvdW50LCBtYXhDb3VudCwgbWluUmFkaXVzLCBtYXhSYWRpdXMpLFxuICAgICAgICAgICAgICAgIGltYWdlOiAnLi4vaW1nLycgKyBjdXJyZW50TWFya2VyLmljb24gKyAnLnBuZydcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgbWFya2Vyc0pTT05BcnJheS5wdXNoKGN1cnJlbnRNYXJrZXJKU09OKTtcbiAgICB9KTtcbiAgICBtYXAuYWRkTWFya2VycyhtYXJrZXJzSlNPTkFycmF5KTtcbn1cblxuZnVuY3Rpb24gYnVpbGRNYXJrZXJUb29sdGlwKGpzb25NYXJrZXJzLCBtYXJrZXIpIHtcbiAgICB2YXIgZmluYWxUb29sdGlwID0gbWFya2VyVG9vbHRpcDtcbiAgICAkLmVhY2goT2JqZWN0LmtleXMobWFya2VyKSwgZnVuY3Rpb24oaW5kZXgsIGF0dHIpIHtcbiAgICAgICAgZmluYWxUb29sdGlwID0gZmluYWxUb29sdGlwLnJlcGxhY2UoYXR0ciwgbWFya2VyW2F0dHJdKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZmluYWxUb29sdGlwO1xufVxuIiwiZnVuY3Rpb24gZmlsdGVyKGlucHV0QXJncykge1xuXG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dEFyZ3MpXG4gICAgdmFyIG51bWJlcktleXMgPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgdmFsaWRGaWx0ZXJzID0gMDtcblxuICAgIHZhciBjb3VudHJpZXNCeUZpbHRlciA9IG5ldyBBcnJheSgpO1xuICAgIHZhciBtYXJrZXJzQnlGaWx0ZXIgPSBuZXcgQXJyYXkoKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbnVtYmVyS2V5czsgaSsrKSB7XG4gICAgICAgIGNvdW50cmllc0J5RmlsdGVyW2ldID0gbmV3IEFycmF5KCk7XG4gICAgICAgIG1hcmtlcnNCeUZpbHRlcltpXSA9IG5ldyBBcnJheSgpO1xuICAgIH1cblxuICAgIC8vIGNoZWNrIGlmIGFueSBvZiB0aGUgbmFtZXMgaXMgYWxsIChyZXNldCBhbGwgYXBwbGllZCBmaWx0ZXJzXHQpXG4gICAgdmFyIGV4aXQgPSBmYWxzZTtcbiAgICAkLmVhY2goa2V5cywgZnVuY3Rpb24oaW5kZXgsIGZpbHRlck5hbWUpIHtcbiAgICAgICAgaWYgKGZpbHRlck5hbWUudG9Mb3dlckNhc2UoKSA9PSAnYWxsJykge1xuICAgICAgICAgICAgZXhpdCA9IHRydWU7XG4gICAgICAgICAgICAvLyByZWxvYWRzIHRoZSBvcmlnaW5hbCBtYXJrZXJzIGFuZCBjb3VudHJpZXMgb24gdGhlIG1hcFxuICAgICAgICAgICAgcmVzZXRGaWx0ZXJzKCk7XG4gICAgICAgICAgICAvLyBlcmFzZSB0aGUgdGV4dCBmcm9tIHRoZSBmaWx0ZXJzIGJveFxuICAgICAgICAgICAgcmVzZXRGaWx0ZXJzQm94KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoZXhpdClcbiAgICAgICAgcmV0dXJuO1xuXG4gICAgLy8gZm9yIGV2ZXJ5IGtleS9maWx0ZXJcbiAgICAkLmVhY2goa2V5cywgZnVuY3Rpb24oaW5kZXgsIGZpbHRlck5hbWUpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGZpbHRlck5hbWUgaXMgdmFsaWRcbiAgICAgICAgaWYgKCFjaGVja0ZpbHRlck5hbWVJc1ZhbGlkKGZpbHRlck5hbWUpKSB7XG4gICAgICAgICAgICAvLyBpbnZhbGlkIGZpbHRlciBuYW1lXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSW52YWxpZCBmaWx0ZXIgbmFtZSEoJyArIGZpbHRlck5hbWUgKyAnKScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBnZXQgdGhlIGZpbHRlciB2YWx1ZSAoY2FuIGNvbnRhaW4gZW51bWVyYXRpb24gYW5kIHJhbmdlKVxuICAgICAgICAgICAgLy8gJzIwMDQtMjAwNicgLCAnRixNJywgZXRjXG4gICAgICAgICAgICB2YXIgZmlsdGVyVmFsdWUgPSBpbnB1dEFyZ3NbZmlsdGVyTmFtZV07XG4gICAgICAgICAgICAvLyBnZXQgYWxsIHNpbmdsZSBmaWx0ZXIgdmFsdWVzXG4gICAgICAgICAgICB2YXIgZmluYWxQYXJ0cyA9IGdldEFsbEZpbHRlclZhbHVlcyhmaWx0ZXJWYWx1ZSk7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGZpbmFsUGFydHMpO1xuICAgICAgICAgICAgdmFsaWRGaWx0ZXJzKys7XG5cbiAgICAgICAgICAgIC8vIGZvciBldmVyeSBzaW5nbGUgdmFsdWUgZ2V0IGFsbCB0aGUgY291bnRydWVzIGFuZCBtYXJrZXJzXG4gICAgICAgICAgICAkLmVhY2goZmluYWxQYXJ0cywgZnVuY3Rpb24oaSwgcGFydCkge1xuICAgICAgICAgICAgICAgIHZhciBjaGVja1JldHVybiA9IGNoZWNrV2hhdENvdW50cmllc01hcmtlcnNUb0FkZChmaWx0ZXJPYmplY3QsIHBhcnQpO1xuICAgICAgICAgICAgICAgIHZhciBjb3VudHJpZXNBdXggPSBjaGVja1JldHVyblswXTtcbiAgICAgICAgICAgICAgICB2YXIgbWFya2Vyc0F1eCA9IGNoZWNrUmV0dXJuWzFdO1xuICAgICAgICAgICAgICAgIC8vIGFkZCBldmVyeSBjb3VudHJ5IHRvIHRoZSBsaXN0IG9mIGNvdW50cmllc0J5RmlsdGVyXG4gICAgICAgICAgICAgICAgLy8gYWRkIGV2ZXJ5IG1hcmtlciB0byB0aGUgbGlzdCBvZiBtYXJrZXJzQnlGaWx0ZXJcbiAgICAgICAgICAgICAgICAkLmVhY2goT2JqZWN0LmtleXMoY291bnRyaWVzQXV4KSwgZnVuY3Rpb24oaiwgY3VycmVudEtleSkge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgY29sb3JzIHRoYXQgYXJlIHJldHVybmVkIGFyZSBpbiBhIGpzb24gZm9ybWF0XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlWYWx1ZSA9IGNvdW50cmllc0F1eFtjdXJyZW50S2V5XTtcbiAgICAgICAgICAgICAgICAgICAgY291bnRyaWVzQnlGaWx0ZXJbaW5kZXhdW2N1cnJlbnRLZXldID0ga2V5VmFsdWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBtYXJrZXJzXG4gICAgICAgICAgICAgICAgJC5lYWNoKG1hcmtlcnNBdXgsIGZ1bmN0aW9uKGosIGN1cnJlbnRNYXJrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2Vyc0J5RmlsdGVyW2luZGV4XS5wdXNoKGN1cnJlbnRNYXJrZXIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGdldCB0aGUgZmluYWwgY291bnRyaWVzXG4gICAgdmFyIGZpbmFsQ291bnRyaWVzID0gW107XG4gICAgaWYgKGNvdW50cmllc0J5RmlsdGVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZmluYWxDb3VudHJpZXMgPSBjb3VudHJpZXNCeUZpbHRlclswXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudHJpZXNCeUZpbHRlci5sZW5ndGggLSAxOyBpKyspXG4gICAgICAgICAgICBmaW5hbENvdW50cmllcyA9IGdldENvdW50cmllc0ludGVyc2VjdGlvbihmaW5hbENvdW50cmllcywgY291bnRyaWVzQnlGaWx0ZXJbaSArIDFdKTtcbiAgICB9XG5cbiAgICAvLyBhZGQgY291bnRyaWVzIHRvIE1hcFxuICAgIHJlbG9hZE1hcChmaW5hbENvdW50cmllcyk7XG5cbiAgICAvLyBnZXQgdGhlIGZpbmFsIG1hcmtlcnNcbiAgICBmaWx0ZXJlZE1hcmtlcnMgPSBbXTtcbiAgICBpZiAobWFya2Vyc0J5RmlsdGVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZmlsdGVyZWRNYXJrZXJzID0gbWFya2Vyc0J5RmlsdGVyWzBdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtlcnNCeUZpbHRlci5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICAgIGZpbHRlcmVkTWFya2VycyA9IGdldE1hcmtlcnNJbnRlcnNlY3Rpb24oZmlsdGVyZWRNYXJrZXJzLCBtYXJrZXJzQnlGaWx0ZXJbaSArIDFdKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGFkZCBtYXJrZXJzIHRvIHRoZSBtYXBcbiAgICBhZGRNYXJrZXJzVG9NYXAoKTtcbn1cblxuZnVuY3Rpb24gZ2V0TWFya2Vyc0ludGVyc2VjdGlvbihtYXJrZXJzR3JvdXAxLCBtYXJrZXJzR3JvdXAyKSB7XG4gICAgdmFyIG1hcmtlcnMgPSBbXTtcblxuICAgIC8vIG1hcmtlcnMgdGhhdCBiZWxvbmcgdG8gdGhlIHR3byBncm91cHNcbiAgICAkLmVhY2gobWFya2Vyc0dyb3VwMSwgZnVuY3Rpb24oaW5kZXgsIG1hcmtlcjEpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhpcyBtYXJrZXIgbmFtZSBpcyBpbnNpZGUgdGhlIHNlY29uZCBncm91cFxuICAgICAgICB2YXIgbWFya2VyMUNvdW50cnkgPSBtYXJrZXIxLmNvdW50cnk7XG4gICAgICAgICQuZWFjaChtYXJrZXJzR3JvdXAyLCBmdW5jdGlvbihpbmRleCwgbWFya2VyMikge1xuICAgICAgICAgICAgdmFyIG1hcmtlcjJDb3VudHJ5ID0gbWFya2VyMi5jb3VudHJ5O1xuICAgICAgICAgICAgaWYgKG1hcmtlcjFDb3VudHJ5ID09IG1hcmtlcjJDb3VudHJ5KVxuICAgICAgICAgICAgICAgIG1hcmtlcnMucHVzaChtYXJrZXIxKVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gbWFya2Vycztcbn1cblxuZnVuY3Rpb24gZ2V0Q291bnRyaWVzSW50ZXJzZWN0aW9uKGNvdW50cmllc0dyb3VwMSwgY291bnRyaWVzR3JvdXAyKSB7XG4gICAgLy8gY291bnRyaWVzIHRoYXQgYmVsb25nIHRvIHRoZSB0d28gZ3JvdXBzXG4gICAgdmFyIGNvdW50cmllcyA9IFtdO1xuXG4gICAgJC5lYWNoKE9iamVjdC5rZXlzKGNvdW50cmllc0dyb3VwMSksIGZ1bmN0aW9uKGluZGV4LCBjb3VudHJ5TmFtZTEpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhpcyBjb3VudHJ5IG5hbWUgaXMgaW5zaWRlIHRoZSBzZWNvbmQgZ3JvdXBcbiAgICAgICAgJC5lYWNoKE9iamVjdC5rZXlzKGNvdW50cmllc0dyb3VwMiksIGZ1bmN0aW9uKGluZGV4LCBjb3VudHJ5TmFtZTIpIHtcbiAgICAgICAgICAgIGlmIChjb3VudHJ5TmFtZTEgPT0gY291bnRyeU5hbWUyKVxuICAgICAgICAgICAgICAgIGNvdW50cmllc1tjb3VudHJ5TmFtZTFdID0gY291bnRyaWVzR3JvdXAxW2NvdW50cnlOYW1lMV07XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBjb3VudHJpZXM7XG59XG5cbmZ1bmN0aW9uIGFwcGx5TXVsdGlwbGVGaWx0ZXJzUHJvZ3JhbWF0dGljYWxseShmaWx0ZXJzVG9BcHBseSkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZmlsdGVyc1RvQXBwbHkpXG4gICAgdmFyIG51bUZpbHRlcnNUb0FwcGx5ID0ga2V5cy5sZW5ndGg7XG4gICAgdmFyIGNvdW50cmllc0hhdmVGaWx0ZXIgPSBbXTtcbiAgICB2YXIgbWFya2Vyc0hhdmVGaWx0ZXIgPSBbXTtcblxuICAgIC8vIGZvciBldmVyeSBrZXlcbiAgICAkLmVhY2goa2V5cywgZnVuY3Rpb24oaW5kZXgsIGZpbHRlck5hbWUpIHtcbiAgICAgICAgdmFyIGZpbHRlclZhbHVlID0gZmlsdGVyc1RvQXBwbHlbZmlsdGVyTmFtZV07XG4gICAgfSk7XG4gICAgdmFyIGNvbG9ycyA9IFtdO1xuXG4gICAgLy8gcmVtb3ZlIGFsbCBtYXJrZXJzIGZyb20gdGhlIG1hcFxuICAgIG1hcC5yZW1vdmVBbGxNYXJrZXJzKCk7XG5cbiAgICAvLyBmb3IgZWFjaCBvZiB0aGUgY291bnRyaWVzXG4gICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGNvdW50cnlJbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgLy8gc2V0IHRvIDAgdGhlIG51bWJlciBvZiBmaWx0ZXJzXG4gICAgICAgIGNvdW50cmllc0hhdmVGaWx0ZXJbY291bnRyeUluZGV4XSA9IDA7XG4gICAgICAgIC8vIGNoZWNrIGlmIGl0IGhhcyB0aGUgbmVlZGVkIHZhbHVlc1xuICAgICAgICAkLmVhY2goa2V5cywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRGaWx0ZXJOYW1lKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnTmFtZScgKyBpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSAnVmFsdWUnICsgaTtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgQ291bnRyeSBoYXMgdGhhdCBuYW1lXG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50Q291bnRyeVtjdXJyZW50TmFtZVRvQ2hlY2tdKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeVtjdXJyZW50TmFtZVRvQ2hlY2tdLnRvTG93ZXJDYXNlKCkgPT0gY3VycmVudEZpbHRlck5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBieSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnlbY3VycmVudFZhbHVlXSA9PSBmaWx0ZXJzVG9BcHBseVtjdXJyZW50RmlsdGVyTmFtZV0pXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudHJpZXNIYXZlRmlsdGVyW2NvdW50cnlJbmRleF0rKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIGNvbG91ciBvbmx5IHRoZSBjb3VudHJpcyB3aG9zZSBjb3VudHJpZXNIYXZlRmlsdGVyW2luZGV4XSA9PSBudW1iZXJGaWx0ZXJzXG4gICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGNvdW50cnlJbmRleCwgY3VycmVudENvdW50cnkpIHtcbiAgICAgICAgaWYgKGNvdW50cmllc0hhdmVGaWx0ZXJbY291bnRyeUluZGV4XSA9PSBudW1GaWx0ZXJzVG9BcHBseSlcbiAgICAgICAgICAgIGNvbG9yc1tjdXJyZW50Q291bnRyeS5jb3VudHJ5XSA9IGN1cnJlbnRDb3VudHJ5LkNvdW50O1xuICAgIH0pO1xuICAgIHJlbG9hZE1hcChjb2xvcnMpO1xuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvKlxuICAgIE1hcmtlcnNcbiAgICAqL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAvLyBmb3IgZWFjaCBvZiB0aGUgbWFya2Vyc1xuICAgICQuZWFjaChqc29uTWFya2VycywgZnVuY3Rpb24obWFya2VySW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcbiAgICAgICAgLy8gc2V0IHRvIDAgdGhlIG51bWJlciBvZiBmaWx0ZXJzXG4gICAgICAgIG1hcmtlcnNIYXZlRmlsdGVyW21hcmtlckluZGV4XSA9IDA7XG4gICAgICAgIC8vIGNoZWNrIGlmIGl0IGhhcyB0aGUgbmVlZGVkIHZhbHVlc1xuICAgICAgICAkLmVhY2goa2V5cywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRGaWx0ZXJOYW1lKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnTmFtZScgKyBpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSAnVmFsdWUnICsgaTtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgQ291bnRyeSBoYXMgdGhhdCBuYW1lXG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50TWFya2VyW2N1cnJlbnROYW1lVG9DaGVja10pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNYXJrZXJbY3VycmVudE5hbWVUb0NoZWNrXS50b0xvd2VyQ2FzZSgpID09IGN1cnJlbnRGaWx0ZXJOYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgYnkgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNYXJrZXJbY3VycmVudFZhbHVlXSA9PSBmaWx0ZXJzVG9BcHBseVtjdXJyZW50RmlsdGVyTmFtZV0pXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzSGF2ZUZpbHRlclttYXJrZXJJbmRleF0rKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIGFkZCBvbmx5IHRoZSBtYXJrZXJzIHdobyBzYXRpc2Z5IHRoZSBjcml0ZXJpYVxuICAgICQuZWFjaChqc29uTWFya2VycywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcbiAgICAgICAgaWYgKG1hcmtlcnNIYXZlRmlsdGVyW2luZGV4XSA9PSBudW1GaWx0ZXJzVG9BcHBseSkge1xuICAgICAgICAgICAgbWFwLmFkZE1hcmtlcihpbmRleCwge1xuICAgICAgICAgICAgICAgIGxhdExuZzogW2N1cnJlbnRNYXJrZXIuTGF0aXR1ZGUsIGN1cnJlbnRNYXJrZXIuTG9uZ2l0dWRlXSxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50TWFya2VyLmRlc2MsXG5cbiAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIHN0eWxlIGZvciB0aGlzIG1hcmtlclxuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGw6ICdncmVlbicsXG4gICAgICAgICAgICAgICAgICAgIHI6IG1hcFJhbmdlKGN1cnJlbnRNYXJrZXIuQ291bnQsIG1pbkNvdW50LCBtYXhDb3VudCwgbWluUmFkaXVzLCBtYXhSYWRpdXMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxufVxuXG5mdW5jdGlvbiBhcHBseU11bHRpcGxlRmlsdGVycyhzZWxlY3RlZE11bHRpcGxlRmlsdGVycywganNvbkZpbHRlcnMpIHtcblxuICAgIC8vIG51bWJlciBvZiBmaWx0ZXJzIHRvIGJlIGFwcGxpZWRcbiAgICB2YXIgbnVtRmlsdGVyc1RvQXBwbHkgPSBzZWxlY3RlZE11bHRpcGxlRmlsdGVycy5maWx0ZXIoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWRcbiAgICB9KS5sZW5ndGg7XG5cbiAgICB2YXIgY291bnRyaWVzSGF2ZUZpbHRlciA9IFtdO1xuICAgIHZhciBtYXJrZXJzSGF2ZUZpbHRlciA9IFtdO1xuXG4gICAgLy8gZm9yIGVhY2ggb2YgdGhlIGNvdW50cmllc1xuICAgICQuZWFjaChqc29uQ291bnRyaWVzLCBmdW5jdGlvbihjb3VudHJ5SW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgIC8vIHNldCB0byAwIHRoZSBudW1iZXIgb2YgZmlsdGVyc1xuICAgICAgICBjb3VudHJpZXNIYXZlRmlsdGVyW2NvdW50cnlJbmRleF0gPSAwO1xuICAgICAgICAvLyBjaGVjayBpZiBpdCBoYXMgdGhlIG5lZWRlZCB2YWx1ZXNcbiAgICAgICAgJC5lYWNoKHNlbGVjdGVkTXVsdGlwbGVGaWx0ZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEZpbHRlclZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnTmFtZScgKyBpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSAnVmFsdWUnICsgaTtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgQ291bnRyeSBoYXMgdGhhdCBuYW1lXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5W2N1cnJlbnROYW1lVG9DaGVja10gPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeVtjdXJyZW50TmFtZVRvQ2hlY2tdID09PSBqc29uRmlsdGVyc1tpbmRleF0uTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBieSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvdW50cnlbY3VycmVudFZhbHVlXSA9PSBjdXJyZW50RmlsdGVyVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cmllc0hhdmVGaWx0ZXJbY291bnRyeUluZGV4XSsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB3aGlsZSAodHJ1ZSlcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB2YXIgY29sb3JzID0gW107XG5cbiAgICAvLyBjb2xvdXIgb25seSB0aGUgY291bnRyaXMgd2hvc2UgY291bnRyaWVzSGF2ZUZpbHRlcltpbmRleF0gPT0gbnVtYmVyRmlsdGVyc1xuICAgICQuZWFjaChqc29uQ291bnRyaWVzLCBmdW5jdGlvbihjb3VudHJ5SW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgIGlmIChjb3VudHJpZXNIYXZlRmlsdGVyW2NvdW50cnlJbmRleF0gPT0gbnVtRmlsdGVyc1RvQXBwbHkpXG4gICAgICAgICAgICBjb2xvcnNbY3VycmVudENvdW50cnkuY291bnRyeV0gPSBjdXJyZW50Q291bnRyeS5Db3VudDtcbiAgICB9KTtcblxuICAgIC8vIGNvbG91ciB0aGUgY291bnRyaWVzXG4gICAgcmVsb2FkTWFwKGNvbG9ycyk7XG5cblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLypcbiAgICBNYXJrZXJzXG4gICAgKi9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgLy8gZm9yIGVhY2ggb2YgdGhlIG1hcmtlcnNcbiAgICAkLmVhY2goanNvbk1hcmtlcnMsIGZ1bmN0aW9uKG1hcmtlckluZGV4LCBjdXJyZW50TWFya2VyKSB7XG4gICAgICAgIC8vIHNldCB0byAwIHRoZSBudW1iZXIgb2YgZmlsdGVyc1xuICAgICAgICBtYXJrZXJzSGF2ZUZpbHRlclttYXJrZXJJbmRleF0gPSAwO1xuICAgICAgICAvLyBjaGVjayBpZiBpdCBoYXMgdGhlIG5lZWRlZCB2YWx1ZXNcbiAgICAgICAgJC5lYWNoKHNlbGVjdGVkTXVsdGlwbGVGaWx0ZXJzLCBmdW5jdGlvbihpbmRleCwgY3VycmVudEZpbHRlclZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TmFtZVRvQ2hlY2sgPSAnTmFtZScgKyBpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSAnVmFsdWUnICsgaTtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgQ291bnRyeSBoYXMgdGhhdCBuYW1lXG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50TWFya2VyW2N1cnJlbnROYW1lVG9DaGVja10pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNYXJrZXJbY3VycmVudE5hbWVUb0NoZWNrXS50b0xvd2VyQ2FzZSgpID09IGpzb25GaWx0ZXJzW2luZGV4XS5OYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgYnkgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNYXJrZXJbY3VycmVudFZhbHVlXSA9PSBjdXJyZW50RmlsdGVyVmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzSGF2ZUZpbHRlclttYXJrZXJJbmRleF0rKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIGFkZCBvbmx5IHRoZSBtYXJrZXJzIHdobyBzYXRpc2Z5IHRoZSBjcml0ZXJpYVxuICAgICQuZWFjaChqc29uTWFya2VycywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRNYXJrZXIpIHtcbiAgICAgICAgaWYgKG1hcmtlcnNIYXZlRmlsdGVyW2luZGV4XSA9PSBudW1GaWx0ZXJzVG9BcHBseSkge1xuICAgICAgICAgICAgbWFwLmFkZE1hcmtlcihpbmRleCwge1xuICAgICAgICAgICAgICAgIGxhdExuZzogW2N1cnJlbnRNYXJrZXIuTGF0aXR1ZGUsIGN1cnJlbnRNYXJrZXIuTG9uZ2l0dWRlXSxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50TWFya2VyLmRlc2MsXG5cbiAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIHN0eWxlIGZvciB0aGlzIG1hcmtlclxuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGw6ICdncmVlbicsXG4gICAgICAgICAgICAgICAgICAgIHI6IG1hcFJhbmdlKGN1cnJlbnRNYXJrZXIuQ291bnQsIG1pbkNvdW50LCBtYXhDb3VudCwgbWluUmFkaXVzLCBtYXhSYWRpdXMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiIsInZhciBSZWdpb24gPSBmdW5jdGlvbihyZWdpb25PYmplY3QsIGNvdW50cnkpIHtcbiAgICAvLyByZWFkIGZyb20gdGhlIGlucHV0IHBhcmFtZXRlcnNcbiAgICB0aGlzLlJlZ2lvbiA9IHJlZ2lvbk9iamVjdC5uYW1lO1xuICAgIHRoaXMuY291bnRyeSA9IGNvdW50cnk7XG4gICAgLy8gKyBpcyB1c2VkIHRvIGFzc3VyZSB0aGF0IGEgTnVtYmVyIGlzIGJlaW5nIHJlYWRcbiAgICB0aGlzLmRlc2MgPSAnanVzdCBhIHJlZ2lvbi4uLic7XG59O1xuXG5mdW5jdGlvbiByZWFkUmVnaW9uc0Zyb21KU09OKHJlZ2lvbnMsIGNvdW50cnkpIHtcbiAgICB2YXIgcmVnaW9uc0FyciA9IFtdO1xuICAgICQuZWFjaChyZWdpb25zLCBmdW5jdGlvbihpbmRleCwgY3VycmVudFJlZ2lvbikge1xuICAgICAgICByZWdpb25zQXJyW2luZGV4XSA9IG5ldyBSZWdpb24oY3VycmVudFJlZ2lvbiwgY291bnRyeSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlZ2lvbnM7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlQ29sb3JzRm9yVGhlUmVnaW9ucyhjb3VudHJ5KXtcbiAgICB2YXIgaXNvQ29kZSA9IGNvdW50cnkuc3BsaXQoXCJfXCIpWzBdLnRvVXBwZXJDYXNlKCk7XG4gICAgLy8gZmluZCB0aGUgY291bnRyeSB3aXRoIHRoYXQgaXNvQ29kZVxuICAgIHZhciByZWdpb25Db2xvcnMgPSBbXTtcbiAgICAkLmVhY2goanNvbkNvdW50cmllcywgZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRDb3VudHJ5KSB7XG4gICAgICAgIGlmIChjdXJyZW50Q291bnRyeS5jb3VudHJ5ID09IGlzb0NvZGUpIHtcbiAgICAgICAgICAgIC8vIGNvdW50cnkgd2FzIGZvdW5kLCBjaGVjayBpZiBpdCBoYXMgYW55IHJlZ2lvblxuICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3VudHJ5LlJlZ2lvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVnaW9ucyA9IGN1cnJlbnRDb3VudHJ5LlJlZ2lvbnM7XG4gICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSByZWdpb25zIG9mIHRoZSBjb3VudHJ5XG4gICAgICAgICAgICBcdCQuZWFjaChyZWdpb25zLCBmdW5jdGlvbihpbmRleCwgY3VycmVudFJlZ2lvbikge1xuICAgICAgICAgICAgXHRcdHJlZ2lvbkNvbG9yc1tjdXJyZW50UmVnaW9uLm5hbWVdID0gMTAwO1xuICAgICAgICAgICAgXHR9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXHRyZXR1cm4gcmVnaW9uQ29sb3JzO1xufVxuXG5cbmZ1bmN0aW9uIGJ1aWxkUmVnaW9uVG9vbHRpcChyZWdpb24pIHtcbiAgICB2YXIgZmluYWxUb29sdGlwID0gcmVnaW9uVG9vbHRpcDtcbiAgICBmaW5hbFRvb2x0aXAgPSBmaW5hbFRvb2x0aXAucmVwbGFjZSgnbmFtZScsIHJlZ2lvbi5uYW1lKTtcbiAgICByZXR1cm4gZmluYWxUb29sdGlwO1xufVxuXG5mdW5jdGlvbiBhZGRSZWdpb25zVG9NYXAoa2V5KSB7XG4gICAgLy8gY2hlY2sgaWYgdGhlIGhpZ2hsaWdodGVkIGNvdW50cnkgaGFzIGFueSByZWdpb25cbiAgICB2YXIgaXNvQ29kZSA9IGtleS5zcGxpdChcIl9cIilbMF0udG9VcHBlckNhc2UoKTtcbiAgICAvLyBmaW5kIHRoZSBjb3VudHJ5IHdpdGggdGhhdCBpc29Db2RlXG4gICAgJC5lYWNoKGpzb25Db3VudHJpZXMsIGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50Q291bnRyeSkge1xuICAgICAgICBpZiAoY3VycmVudENvdW50cnkuY291bnRyeSA9PSBpc29Db2RlKSB7XG4gICAgICAgICAgICAvLyBjb3VudHJ5IHdhcyBmb3VuZCwgY2hlY2sgaWYgaXQgaGFzIGFueSByZWdpb25cbiAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRyeS5SZWdpb25zKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlZ2lvbnMgPSBjdXJyZW50Q291bnRyeS5SZWdpb25zO1xuXG4gICAgICAgICAgICAgICAgdmFyIHBhbGV0dGUgPSBbJyM2NkMyQTUnLCAnI0ZDOEQ2MicsICcjOERBMENCJywgJyNFNzhBQzMnLCAnI0E2RDg1NCddO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVDb2xvcnMoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2xvcnMgPSB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTtcbiAgICAgICAgICAgICAgICAgICAgY29sb3JzW21hcHMucmVnaW9uXVxuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIG1hcHMucmVnaW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JzW2tleV0gPSBwYWxldHRlW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBhbGV0dGUubGVuZ3RoKV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9ycztcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGdlbmVyYXRlQ29sb3JzKCkpO1xuICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgY29sb3JzIG9mIHRoZSByZWdpb25zXG4gICAgICAgICAgICAgICAgbWFwcy5zZXJpZXMucmVnaW9uc1swXS5zZXRWYWx1ZXMoZ2VuZXJhdGVDb2xvcnMoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==